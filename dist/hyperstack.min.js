Opal.modules["active_support/core_ext/array/extract_options"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.klass,a=e.truthy,i=e.hash2;return e.add_stubs(["$instance_of?","$is_a?","$last","$extractable_options?","$pop"]),function(t,$super,n){var a,i=$(t,null,"Hash"),o=[i].concat(n);e.def(i,"$extractable_options?",a=function(){return this["$instance_of?"](r(o,"Hash"))},a.$$arity=0)}(t[0],0,t),function(t,$super,o){var s,u=$(t,null,"Array"),l=[u].concat(o);return e.def(u,"$extract_options!",s=function(){var e=this,t=n;return a(a(t=e.$last()["$is_a?"](r(l,"Hash")))?e.$last()["$extractable_options?"]():t)?e.$pop():i([],{})},s.$$arity=0),n&&"extract_options!"}(t[0],0,t)},Opal.modules["active_support/core_ext/array/wrap"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.truthy;return e.add_stubs(["$nil?","$respond_to?","$to_ary"]),function(t,$super,a){var i,o=r(t,null,"Array");[o].concat(a);return e.defs(o,"$wrap",i=function(e){var t=n;return $(e["$nil?"]())?[]:$(e["$respond_to?"]("to_ary"))&&$(t=e.$to_ary())?t:[e]},i.$$arity=1),n&&"wrap"}(t[0],0,t)},Opal.modules["active_support/core_ext/array/grouping"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var a=[],i=e.nil,o=(e.$$$,e.$$,e.klass),s=e.send,u=e.truthy;return e.add_stubs(["$==","$%","$-","$size","$concat","$dup","$*","$each_slice","$<<","$div","$times","$+","$>","$slice","$!=","$each","$inject","$call","$last"]),function(a,$super,l){var c,p,d,f=o(a,null,"Array");[f].concat(l);return e.def(f,"$in_groups_of",c=function(r,$){var a,o,u=c.$$p,l=u||i,p=this,d=i,f=i,_=i;return u&&(c.$$p=null),null==$&&($=i),$["$=="](!1)?d=p:(f=t(r,p.$size()["$%"](r))["$%"](r),d=p.$dup().$concat(n([$],f))),l!==i?s(d,"each_slice",[r],((a=function(t){null==a.$$s||a.$$s;return null==t&&(t=i),e.yield1(l,t)}).$$s=p,a.$$arity=1,a)):(_=[],s(d,"each_slice",[r],((o=function(e){null==o.$$s||o.$$s;return null==e&&(e=i),_["$<<"](e)}).$$s=p,o.$$arity=1,o)),_)},c.$$arity=-2),e.def(f,"$in_groups",p=function(t,n){var a,o,l=p.$$p,c=l||i,d=this,f=i,_=i,h=i,y=i;return l&&(p.$$p=null),null==n&&(n=i),f=d.$size().$div(t),_=d.$size()["$%"](t),h=[],y=0,s(t,"times",[],((a=function(e){var t=null==a.$$s?this:a.$$s,o=i,s=i,l=i,c=i,p=i;return null==e&&(e=i),o=r(f,u(u(s=$(_,0))?$(_,e):s)?1:0),h["$<<"](l=t.$slice(y,o)),u(u(c=u(p=n["$!="](!1))?$(_,0):p)?o["$=="](f):c)&&l["$<<"](n),y=r(y,o)}).$$s=d,a.$$arity=1,a)),c!==i?s(h,"each",[],((o=function(t){null==o.$$s||o.$$s;return null==t&&(t=i),e.yield1(c,t)}).$$s=d,o.$$arity=1,o)):h},p.$$arity=-2),e.def(f,"$split",d=function(e){var t,n=d.$$p,r=n||i,$=this;return n&&(d.$$p=null),n&&(d.$$p=null),null==e&&(e=i),s($,"inject",[[[]]],((t=function(n,$){null==t.$$s||t.$$s;var a=i,o=i;return null==n&&(n=i),null==$&&($=i),u(u(a=u(o=r)?r.$call($):o)?a:e["$=="]($))?n["$<<"]([]):n.$last()["$<<"]($),n}).$$s=$,t.$$arity=2,t))},d.$$arity=-1),i&&"split"}(a[0],0,a)},Opal.modules["active_support/core_ext/array"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/array/extract_options"),t.$require("active_support/core_ext/array/wrap"),t.$require("active_support/core_ext/array/grouping")},Opal.modules["active_support/core_ext/kernel/singleton_class"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.send;return e.add_stubs(["$class_eval","$singleton_class","$to_proc"]),function(t,a){var i,o=r(t,"Kernel");[o].concat(a);return e.def(o,"$class_eval",i=function(){var t,r=i.$$p,a=r||n,o=this;return r&&(i.$$p=null),r&&(i.$$p=null),t=e.slice.call(arguments,0,arguments.length),$(o.$singleton_class(),"class_eval",e.to_a(t),a.$to_proc())},i.$$arity=-1),n&&"class_eval"}(t[0],t)},Opal.modules["active_support/core_ext/module/remove_method"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.truthy,a=e.send;return e.add_stubs(["$method_defined?","$private_method_defined?","$undef_method","$remove_possible_method","$define_method","$to_proc"]),function(t,$super,i){var o,s,u=r(t,null,"Module");[u].concat(i);return e.def(u,"$remove_possible_method",o=function(e){var t=this,r=n;return $($(r=t["$method_defined?"](e))?r:t["$private_method_defined?"](e))?t.$undef_method(e):n},o.$$arity=1),e.def(u,"$redefine_method",s=function(e){var t=s.$$p,r=t||n,$=this;return t&&(s.$$p=null),t&&(s.$$p=null),$.$remove_possible_method(e),a($,"define_method",[e],r.$to_proc())},s.$$arity=1),n&&"redefine_method"}(t[0],0,t)},Opal.modules["active_support/core_ext/class/attribute"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$,e.klass),a=e.truthy,i=e.send;return e.add_stubs(["$require","$extract_options!","$fetch","$each","$define_singleton_method","$!","$public_send","$class_eval","$singleton_class","$remove_possible_method","$define_method","$singleton_class?","$instance_variable_defined?","$instance_variable_get","$send","$class","$attr_writer","$private","$respond_to?","$!=","$first","$ancestors"]),t.$require("active_support/core_ext/kernel/singleton_class"),t.$require("active_support/core_ext/module/remove_method"),t.$require("active_support/core_ext/array/extract_options"),function(t,$super,n){var o,s,u=$(t,null,"Class");[u].concat(n);return e.def(u,"$class_attribute",o=function(){var t,n,$,o=this,s=r,u=r,l=r,c=r,p=r,d=r;return t=e.slice.call(arguments,0,arguments.length),s=(n=t)["$extract_options!"](),u=a(l=s.$fetch("instance_accessor",!0))?s.$fetch("instance_reader",!0):l,c=a(p=s.$fetch("instance_accessor",!0))?s.$fetch("instance_writer",!0):p,d=s.$fetch("instance_predicate",!0),i(n,"each",[],(($=function(e){var t,n,o,s,l,p=null==$.$$s?this:$.$$s,f=r;return null==e&&(e=r),i(p,"define_singleton_method",[e],((t=function(){null==t.$$s||t.$$s;return r}).$$s=p,t.$$arity=0,t)),a(d)&&i(p,"define_singleton_method",[e+"?"],((n=function(){return(null==n.$$s?this:n.$$s).$public_send(e)["$!"]()["$!"]()}).$$s=p,n.$$arity=0,n)),f="@"+e,i(p,"define_singleton_method",[e+"="],((o=function(t){var n,$,s=null==o.$$s?this:o.$$s;return null==t&&(t=r),i(s.$singleton_class(),"class_eval",[],((n=function(){var r,$=null==n.$$s?this:n.$$s;return $.$remove_possible_method(e),i($,"define_method",[e],((r=function(){null==r.$$s||r.$$s;return t}).$$s=$,r.$$arity=0,r))}).$$s=s,n.$$arity=0,n)),a(s["$singleton_class?"]())&&i(s,"class_eval",[],(($=function(){var t,n=null==$.$$s?this:$.$$s;return n.$remove_possible_method(e),i(n,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return a(n["$instance_variable_defined?"](f))?n.$instance_variable_get(f):n.$singleton_class().$send(e)}).$$s=n,t.$$arity=0,t))}).$$s=s,$.$$arity=0,$)),t}).$$s=p,o.$$arity=1,o)),a(u)&&(p.$remove_possible_method(e),i(p,"define_method",[e],((s=function(){var t=null==s.$$s?this:s.$$s;return a(t["$instance_variable_defined?"](f))?t.$instance_variable_get(f):t.$class().$public_send(e)}).$$s=p,s.$$arity=0,s)),a(d)&&i(p,"define_method",[e+"?"],((l=function(){return(null==l.$$s?this:l.$$s).$public_send(e)["$!"]()["$!"]()}).$$s=p,l.$$arity=0,l))),a(c)?p.$attr_writer(e):r}).$$s=o,$.$$arity=1,$))},o.$$arity=-1),u.$private(),a(u["$respond_to?"]("singleton_class?"))?r:(e.def(u,"$singleton_class?",s=function(){var e=this,t=r;return a(t=!0)?t:e.$ancestors().$first()["$!="](e)},s.$$arity=0),r&&"singleton_class?")}(n[0],0,n)},Opal.modules["active_support/core_ext/class"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/class/attribute")},Opal.modules["active_support/core_ext/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.send;return e.add_stubs(["$enum_for","$new","$destructure","$[]=","$-"]),function(n,o){var s,u=a(n,"Enumerable"),l=[u].concat(o);return e.def(u,"$index_by",s=function(){var n,a=s.$$p,o=a||r,u=this,c=r,p=r;return a&&(s.$$p=null),a&&(s.$$p=null),o===r?u.$enum_for("index_by"):(c=$(l,"Hash").$new(),u.$each._p=function(){var r=$(l,"Opal").$destructure(arguments),a=$opal.$yield1(o,r);if(a===$breaker)return n=$breaker.$v,$breaker;p=[a,r],i(c,"[]=",e.to_a(p)),p[t(p.length,1)]},u.$each(),n!==undefined?n:c)},s.$$arity=0),r&&"index_by"}(n[0],n)},Opal.modules["active_support/hash_with_indifferent_access"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.hash2,s=e.truthy,u=e.send2,l=e.find_super,c=e.send;return e.add_stubs(["$dup","$respond_to?","$update","$to_hash","$tap","$new","$default","$default=","$-","$default_proc","$default_proc="]),function(n,p){var d=[a(n,"ActiveSupport")].concat(p);return function(n,$super,$){var a,p,d,f,_,h=i(n,$super,"HashWithIndifferentAccess");[h].concat($);return e.def(h,"$extractable_options?",a=function(){return!0},a.$$arity=0),e.def(h,"$with_indifferent_access",p=function(){return this.$dup()},p.$$arity=0),e.def(h,"$nested_under_indifferent_access",d=function(){return this},d.$$arity=0),e.def(h,"$initialize",f=function(e){var t=f.$$p,n=this;return t&&(f.$$p=null),null==e&&(e=o([],{})),s(e["$respond_to?"]("to_hash"))?(u(n,l(n,"initialize",f,!1,!0),"initialize",[],null),n.$update(e)):u(n,l(n,"initialize",f,!1,!0),"initialize",[e],null)},f.$$arity=-1),e.defs(h,"$new_from_hash_copying_default",_=function(n){var $,a=this;return n=n.$to_hash(),c(a.$new(n),"tap",[],(($=function(a){null==$.$$s||$.$$s;var i=r;return null==a&&(a=r),i=[n.$default()],c(a,"default=",e.to_a(i)),i[t(i.length,1)],s(n.$default_proc())?(i=[n.$default_proc()],c(a,"default_proc=",e.to_a(i)),i[t(i.length,1)]):r}).$$s=a,$.$$arity=1,$))},_.$$arity=1),r&&"new_from_hash_copying_default"}(d[0],$(d,"Hash"),d)}(n[0],n)},Opal.modules["active_support/core_ext/hash/indifferent_access"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$),$=e.$$,a=e.klass,i=e.alias;return e.add_stubs(["$require","$new_from_hash_copying_default"]),t.$require("active_support/hash_with_indifferent_access"),function(t,$super,n){var o,s=a(t,null,"Hash"),u=[s].concat(n);return e.def(s,"$with_indifferent_access",o=function(){var e=this;return r($(u,"ActiveSupport"),"HashWithIndifferentAccess").$new_from_hash_copying_default(e)},o.$$arity=0),i(s,"nested_under_indifferent_access","with_indifferent_access")}(n[0],0,n)},Opal.modules["active_support/core_ext/hash"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/hash/indifferent_access")},Opal.modules["active_support/core_ext/numeric/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var $=[],a=(e.nil,e.$$$),i=(e.$$,e.klass),o=e.alias;return e.add_stubs(["$*","$hours","$days","$weeks","$current","$-","$+"]),function($,$super,s){var u,l,c,p,d,f,_,h,y=i($,null,"Numeric");[y].concat(s);return e.def(y,"$seconds",u=function(){return this},u.$$arity=0),o(y,"second","seconds"),e.def(y,"$minutes",l=function(){return t(this,60)},l.$$arity=0),o(y,"minute","minutes"),e.def(y,"$hours",c=function(){return t(this,3600)},c.$$arity=0),o(y,"hour","hours"),e.def(y,"$days",p=function(){return t(this,24..$hours())},p.$$arity=0),o(y,"day","days"),e.def(y,"$weeks",d=function(){return t(this,7..$days())},d.$$arity=0),o(y,"week","weeks"),e.def(y,"$fortnights",f=function(){return t(this,2..$weeks())},f.$$arity=0),o(y,"fortnight","fortnights"),e.def(y,"$ago",_=function(e){var t=this;return null==e&&(e=a("::","Time").$current()),n(e,t)},_.$$arity=-1),o(y,"until","ago"),e.def(y,"$since",h=function(e){var t=this;return null==e&&(e=a("::","Time").$current()),r(e,t)},h.$$arity=-1),o(y,"from_now","since")}($[0],0,$)},Opal.modules["active_support/core_ext/integer/time"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var n=e.top,r=[],$=(e.nil,e.$$$,e.$$,e.klass),a=e.alias;return e.add_stubs(["$require","$*","$days"]),n.$require("active_support/core_ext/numeric/time"),function(n,$super,r){var i,o,s=$(n,null,"Numeric");[s].concat(r);return e.def(s,"$months",i=function(){return t(this,30..$days())},i.$$arity=0),a(s,"month","months"),e.def(s,"$years",o=function(){return t(this,365.25.$days())},o.$$arity=0),a(s,"year","years")}(r[0],0,r)},Opal.modules["active_support/core_ext/integer"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/integer/time")},Opal.modules["active_support/core_ext/kernel"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/kernel/singleton_class")},Opal.modules.set=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}e.top;var $=[],a=e.nil,i=(e.$$$,e.$$),o=e.klass,s=e.hash2,u=e.truthy,l=e.send,c=e.alias,p=e.module;return e.add_stubs(["$include","$new","$nil?","$===","$raise","$each","$add","$merge","$class","$respond_to?","$subtract","$dup","$join","$to_a","$equal?","$instance_of?","$==","$instance_variable_get","$is_a?","$size","$all?","$include?","$[]=","$-","$enum_for","$[]","$<<","$replace","$delete","$select","$reject","$delete_if","$to_proc","$keep_if","$each_key","$empty?","$eql?","$instance_eval","$clear","$<","$<=","$any?","$!","$intersect?","$keys"]),function($,$super,p){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K=o($,null,"Set"),X=[K].concat(p);K.$$prototype.hash=a,K.$include(i(X,"Enumerable")),e.defs(K,"$[]",d=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$new(t)},d.$$arity=-1),e.def(K,"$initialize",f=function(t){var n,r=f.$$p,$=r||a,o=this;return r&&(f.$$p=null),r&&(f.$$p=null),null==t&&(t=a),o.hash=s([],{}),u(t["$nil?"]())?a:(u(i(X,"Enumerable")["$==="](t))||o.$raise(i(X,"ArgumentError"),"value must be enumerable"),u($)?l(t,"each",[],((n=function(t){var r=null==n.$$s?this:n.$$s;return null==t&&(t=a),r.$add(e.yield1($,t))}).$$s=o,n.$$arity=1,n)):o.$merge(t))},f.$$arity=-1),e.def(K,"$dup",_=function(){var e=this;return e.$class().$new().$merge(e)},_.$$arity=0),e.def(K,"$-",h=function(e){var t=this;return u(e["$respond_to?"]("each"))||t.$raise(i(X,"ArgumentError"),"value must be enumerable"),t.$dup().$subtract(e)},h.$$arity=1),c(K,"difference","-"),e.def(K,"$inspect",y=function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"},y.$$arity=0),e.def(K,"$==",v=function(e){var t,n=this,r=a;return!!u(n["$equal?"](e))||(u(e["$instance_of?"](n.$class()))?n.hash["$=="](e.$instance_variable_get("@hash")):!!u(u(r=e["$is_a?"](i(X,"Set")))?n.$size()["$=="](e.$size()):r)&&l(e,"all?",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==n.hash&&(n.hash=a),null==e&&(e=a),n.hash["$include?"](e)}).$$s=n,t.$$arity=1,t)))},v.$$arity=1),e.def(K,"$add",m=function(n){var r=this,$=a;return $=[n,!0],l(r.hash,"[]=",e.to_a($)),$[t($.length,1)],r},m.$$arity=1),c(K,"<<","add"),e.def(K,"$classify",g=function(){var n,r,$=g.$$p,o=$||a,s=this,u=a;return $&&(g.$$p=null),$&&(g.$$p=null),o===a?s.$enum_for("classify"):(u=l(i(X,"Hash"),"new",[],((n=function(r,$){var i=null==n.$$s?this:n.$$s,o=a;return null==r&&(r=a),null==$&&($=a),o=[$,i.$class().$new()],l(r,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=s,n.$$arity=2,n)),l(s,"each",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=a),u["$[]"](e.yield1(o,t)).$add(t)}).$$s=s,r.$$arity=1,r)),u)},g.$$arity=0),e.def(K,"$collect!",b=function(){var t,n=b.$$p,r=n||a,$=this,i=a;return n&&(b.$$p=null),n&&(b.$$p=null),r===a?$.$enum_for("collect!"):(i=$.$class().$new(),l($,"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),i["$<<"](e.yield1(r,n))}).$$s=$,t.$$arity=1,t)),$.$replace(i))},b.$$arity=0),c(K,"map!","collect!"),e.def(K,"$delete",w=function(e){var t=this;return t.hash.$delete(e),t},w.$$arity=1),e.def(K,"$delete?",k=function(e){var t=this;return u(t["$include?"](e))?(t.$delete(e),t):a},k.$$arity=1),e.def(K,"$delete_if",O=function(){var t,n,r=O.$$p,$=r||a,i=this;return r&&(O.$$p=null),$===a?i.$enum_for("delete_if"):(l(l(i,"select",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e.yield1($,n)}).$$s=i,t.$$arity=1,t)),"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==t.hash&&(t.hash=a),null==e&&(e=a),t.hash.$delete(e)}).$$s=i,n.$$arity=1,n)),i)},O.$$arity=0),e.def(K,"$keep_if",E=function(){var t,n,r=E.$$p,$=r||a,i=this;return r&&(E.$$p=null),$===a?i.$enum_for("keep_if"):(l(l(i,"reject",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e.yield1($,n)}).$$s=i,t.$$arity=1,t)),"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==t.hash&&(t.hash=a),null==e&&(e=a),t.hash.$delete(e)}).$$s=i,n.$$arity=1,n)),i)},E.$$arity=0),e.def(K,"$reject!",x=function(){var e=x.$$p,t=e||a,n=this,r=a;return e&&(x.$$p=null),e&&(x.$$p=null),t===a?n.$enum_for("reject!"):(r=n.$size(),l(n,"delete_if",[],t.$to_proc()),n.$size()["$=="](r)?a:n)},x.$$arity=0),e.def(K,"$select!",S=function(){var e=S.$$p,t=e||a,n=this,r=a;return e&&(S.$$p=null),e&&(S.$$p=null),t===a?n.$enum_for("select!"):(r=n.$size(),l(n,"keep_if",[],t.$to_proc()),n.$size()["$=="](r)?a:n)},S.$$arity=0),c(K,"filter!","select!"),e.def(K,"$add?",q=function(e){var t=this;return u(t["$include?"](e))?a:t.$add(e)},q.$$arity=1),e.def(K,"$each",N=function(){var e=N.$$p,t=e||a,n=this;return e&&(N.$$p=null),e&&(N.$$p=null),t===a?n.$enum_for("each"):(l(n.hash,"each_key",[],t.$to_proc()),n)},N.$$arity=0),e.def(K,"$empty?",C=function(){return this.hash["$empty?"]()},C.$$arity=0),e.def(K,"$eql?",z=function(e){var t,n=this;return n.hash["$eql?"](l(e,"instance_eval",[],((t=function(){var e=null==t.$$s?this:t.$$s;return null==e.hash&&(e.hash=a),e.hash}).$$s=n,t.$$arity=0,t)))},z.$$arity=1),e.def(K,"$clear",I=function(){var e=this;return e.hash.$clear(),e},I.$$arity=0),e.def(K,"$include?",D=function(e){return this.hash["$include?"](e)},D.$$arity=1),c(K,"member?","include?"),e.def(K,"$merge",H=function(e){var t,n=this;return l(e,"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n.$add(e)}).$$s=n,t.$$arity=1,t)),n},H.$$arity=1),e.def(K,"$replace",A=function(e){var t=this;return t.$clear(),t.$merge(e),t},A.$$arity=1),e.def(K,"$size",j=function(){return this.hash.$size()},j.$$arity=0),c(K,"length","size"),e.def(K,"$subtract",M=function(e){var t,n=this;return l(e,"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n.$delete(e)}).$$s=n,t.$$arity=1,t)),n},M.$$arity=1),e.def(K,"$|",R=function(e){var t=this;return u(e["$respond_to?"]("each"))||t.$raise(i(X,"ArgumentError"),"value must be enumerable"),t.$dup().$merge(e)},R.$$arity=1),e.def(K,"$superset?",T=function(e){var t,r=this;return u(e["$is_a?"](i(X,"Set")))||r.$raise(i(X,"ArgumentError"),"value must be a set"),!u(n(r.$size(),e.$size()))&&l(e,"all?",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n["$include?"](e)}).$$s=r,t.$$arity=1,t))},T.$$arity=1),c(K,">=","superset?"),e.def(K,"$proper_superset?",B=function(e){var t,n=this;return u(e["$is_a?"](i(X,"Set")))||n.$raise(i(X,"ArgumentError"),"value must be a set"),!u(r(n.$size(),e.$size()))&&l(e,"all?",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n["$include?"](e)}).$$s=n,t.$$arity=1,t))},B.$$arity=1),c(K,">","proper_superset?"),e.def(K,"$subset?",P=function(e){var t,r=this;return u(e["$is_a?"](i(X,"Set")))||r.$raise(i(X,"ArgumentError"),"value must be a set"),!u(n(e.$size(),r.$size()))&&l(r,"all?",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e["$include?"](n)}).$$s=r,t.$$arity=1,t))},P.$$arity=1),c(K,"<=","subset?"),e.def(K,"$proper_subset?",L=function(e){var t,n=this;return u(e["$is_a?"](i(X,"Set")))||n.$raise(i(X,"ArgumentError"),"value must be a set"),!u(r(e.$size(),n.$size()))&&l(n,"all?",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e["$include?"](n)}).$$s=n,t.$$arity=1,t))},L.$$arity=1),c(K,"<","proper_subset?"),e.def(K,"$intersect?",F=function(e){var t,r,$=this;return u(e["$is_a?"](i(X,"Set")))||$.$raise(i(X,"ArgumentError"),"value must be a set"),u(n($.$size(),e.$size()))?l($,"any?",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e["$include?"](n)}).$$s=$,t.$$arity=1,t)):l(e,"any?",[],((r=function(e){var t=null==r.$$s?this:r.$$s;return null==e&&(e=a),t["$include?"](e)}).$$s=$,r.$$arity=1,r))},F.$$arity=1),e.def(K,"$disjoint?",U=function(e){return this["$intersect?"](e)["$!"]()},U.$$arity=1),c(K,"+","|"),c(K,"union","|"),e.def(K,"$to_a",W=function(){return this.hash.$keys()},W.$$arity=0)}($[0],0,$),function(t,n){var r,$=p(t,"Enumerable"),o=[$].concat(n);return e.def($,"$to_set",r=function(){var t,n,$,s=r.$$p,u=s||a,c=this;return s&&(r.$$p=null),s&&(r.$$p=null),(t=e.slice.call(arguments,0,arguments.length)).length>0&&(n=t[0],t.splice(0,1)),null==n&&(n=i(o,"Set")),$=t,l(n,"new",[c].concat(e.to_a($)),u.$to_proc())},r.$$arity=-1),a&&"to_set"}($[0],$)},Opal.modules["active_support/inflector/inflections"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,$=[],a=e.nil,i=(e.$$$,e.$$),o=e.module,s=e.klass,u=e.hash2,l=e.send,c=e.truthy,p=e.range;return e.add_stubs(["$require","$extend","$add","$map","$flatten","$to_proc","$concat","$include?","$downcase","$new","$[]","$[]=","$-","$attr_reader","$each","$instance_variable_set","$dup","$send","$is_a?","$delete","$unshift","$==","$upcase","$plural","$+","$singular","$===","$instance"]),r.$require("set"),function(r,$){var d=[o(r,"ActiveSupport")].concat($);return function(r,$){var d,f=o(r,"Inflector"),_=[f].concat($);return f.$extend(f),function(r,$super,$){var o,d,f,_,h,y,v,m,g,b=s(r,null,"Inflections"),w=[b].concat($);b.$$prototype.uncountables=b.$$prototype.plurals=b.$$prototype.singulars=b.$$prototype.humans=a,b.__instance__=u([],{}),function(t,$super,n){var r,$,o,u,c=s(t,$super,"Uncountables"),p=[c].concat(n);e.def(c,"$<<",r=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$add(t)},r.$$arity=-1),e.def(c,"$add",$=function(e){var t=this;return e=l(e.$flatten(),"map",[],"downcase".$to_proc()),t.$concat(e),t},$.$$arity=1),e.def(c,"$uncountable?",o=function(e){return this["$include?"](e.$downcase())},o.$$arity=1),e.def(c,"$dup",u=function(){var e=this,t=a;return(t=i(p,"Uncountables").$new()).$add(e),t},u.$$arity=0)}(w[0],i(w,"Array"),w),e.defs(b,"$instance",o=function(n){var r=this,$=a,i=a;return null==r.__instance__&&(r.__instance__=a),c($=r.__instance__["$[]"](n))?$:(i=[n,r.$new()],l(r.__instance__,"[]=",e.to_a(i)),i[t(i.length,1)])},o.$$arity=1),b.$attr_reader("plurals","singulars","uncountables","humans"),e.def(b,"$initialize",d=function(){var e,t=this;return e=[[],[],i(w,"Uncountables").$new(),[]],t.plurals=e[0],t.singulars=e[1],t.uncountables=e[2],t.humans=e[3],e},d.$$arity=0),e.def(b,"$initialize_dup",f=function(e){var t,n=this;return l(["plurals","singulars","uncountables","humans"],"each",[],((t=function(n){var r=null==t.$$s?this:t.$$s;return null==n&&(n=a),r.$instance_variable_set("@"+n,e.$send(n).$dup())}).$$s=n,t.$$arity=1,t))},f.$$arity=1),e.def(b,"$plural",_=function(e,t){var n=this;return c(e["$is_a?"](i(w,"String")))&&n.uncountables.$delete(e),n.uncountables.$delete(t),n.plurals.$unshift([e,t])},_.$$arity=2),e.def(b,"$singular",h=function(e,t){var n=this;return c(e["$is_a?"](i(w,"String")))&&n.uncountables.$delete(e),n.uncountables.$delete(t),n.singulars.$unshift([e,t])},h.$$arity=2),e.def(b,"$uncountable",y=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.uncountables.$add(t)},y.$$arity=-1),e.def(b,"$human",v=function(e,t){return this.humans.$unshift([e,t])},v.$$arity=2),e.def(b,"$irregular",m=function(t,r){var $=this,i=a,o=a,s=a,u=a;return $.uncountables.$delete(t),$.uncountables.$delete(r),i=t["$[]"](0),o=t["$[]"](p(1,-1,!1)),s=r["$[]"](0),u=r["$[]"](p(1,-1,!1)),i.$upcase()["$=="](s.$upcase())?($.$plural(e.regexp(["(",i,")",o,"$"],"i"),n("\\1",u)),$.$plural(e.regexp(["(",s,")",u,"$"],"i"),n("\\1",u)),$.$singular(e.regexp(["(",i,")",o,"$"],"i"),n("\\1",o)),$.$singular(e.regexp(["(",s,")",u,"$"],"i"),n("\\1",o))):($.$plural(e.regexp([i.$upcase(),o,"$"],"i"),n(s.$upcase(),u)),$.$plural(e.regexp([i.$downcase(),o,"$"],"i"),n(s.$downcase(),u)),$.$plural(e.regexp([s.$upcase(),u,"$"],"i"),n(s.$upcase(),u)),$.$plural(e.regexp([s.$downcase(),u,"$"],"i"),n(s.$downcase(),u)),$.$singular(e.regexp([i.$upcase(),o,"$"],"i"),n(i.$upcase(),o)),$.$singular(e.regexp([i.$downcase(),o,"$"],"i"),n(i.$downcase(),o)),$.$singular(e.regexp([s.$upcase(),u,"$"],"i"),n(i.$upcase(),o)),$.$singular(e.regexp([s.$downcase(),u,"$"],"i"),n(i.$downcase(),o)))},m.$$arity=2),e.def(b,"$clear",g=function(e){var t,n=this,r=a;return null==e&&(e="all"),r=e,"all"["$==="](r)?(t=[[],[],i(w,"Uncountables").$new(),[]],n.plurals=t[0],n.singulars=t[1],n.uncountables=t[2],n.humans=t[3],t):n.$instance_variable_set("@"+e,[])},g.$$arity=-1)}(_[0],0,_),e.def(f,"$inflections",d=function(t){var n=d.$$p,r=n||a;return n&&(d.$$p=null),null==t&&(t="en"),r!==a?e.yield1(r,i(_,"Inflections").$instance(t)):i(_,"Inflections").$instance(t)},d.$$arity=-1),a&&"inflections"}(d[0],d)}($[0],$)},Opal.modules["active_support/inflections"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.send;return e.add_stubs(["$require","$inflections","$plural","$singular","$irregular","$uncountable"]),t.$require("active_support/inflector/inflections"),function(e,t){var n,o=a(e,"ActiveSupport"),s=[o].concat(t);return i($(s,"Inflector"),"inflections",["en"],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=r),e.$plural(/$/,"s"),e.$plural(/s$/i,"s"),e.$plural(/^(ax|test)is$/i,"\\1es"),e.$plural(/(octop|vir)us$/i,"\\1i"),e.$plural(/(octop|vir)i$/i,"\\1i"),e.$plural(/(alias|status)$/i,"\\1es"),e.$plural(/(bu)s$/i,"\\1ses"),e.$plural(/(buffal|tomat)o$/i,"\\1oes"),e.$plural(/([ti])um$/i,"\\1a"),e.$plural(/([ti])a$/i,"\\1a"),e.$plural(/sis$/i,"ses"),e.$plural(/(?:([^f])fe|([lr])f)$/i,"\\1\\2ves"),e.$plural(/(hive)$/i,"\\1s"),e.$plural(/([^aeiouy]|qu)y$/i,"\\1ies"),e.$plural(/(x|ch|ss|sh)$/i,"\\1es"),e.$plural(/(matr|vert|ind)(?:ix|ex)$/i,"\\1ices"),e.$plural(/^(m|l)ouse$/i,"\\1ice"),e.$plural(/^(m|l)ice$/i,"\\1ice"),e.$plural(/^(ox)$/i,"\\1en"),e.$plural(/^(oxen)$/i,"\\1"),e.$plural(/(quiz)$/i,"\\1zes"),e.$singular(/s$/i,""),e.$singular(/(ss)$/i,"\\1"),e.$singular(/(n)ews$/i,"\\1ews"),e.$singular(/([ti])a$/i,"\\1um"),e.$singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"\\1sis"),e.$singular(/(^analy)(sis|ses)$/i,"\\1sis"),e.$singular(/([^f])ves$/i,"\\1fe"),e.$singular(/(hive)s$/i,"\\1"),e.$singular(/(tive)s$/i,"\\1"),e.$singular(/([lr])ves$/i,"\\1f"),e.$singular(/([^aeiouy]|qu)ies$/i,"\\1y"),e.$singular(/(s)eries$/i,"\\1eries"),e.$singular(/(m)ovies$/i,"\\1ovie"),e.$singular(/(x|ch|ss|sh)es$/i,"\\1"),e.$singular(/^(m|l)ice$/i,"\\1ouse"),e.$singular(/(bus)(es)?$/i,"\\1"),e.$singular(/(o)es$/i,"\\1"),e.$singular(/(shoe)s$/i,"\\1"),e.$singular(/(cris|test)(is|es)$/i,"\\1is"),e.$singular(/^(a)x[ie]s$/i,"\\1xis"),e.$singular(/(octop|vir)(us|i)$/i,"\\1us"),e.$singular(/(alias|status)(es)?$/i,"\\1"),e.$singular(/^(ox)en/i,"\\1"),e.$singular(/(vert|ind)ices$/i,"\\1ex"),e.$singular(/(matr)ices$/i,"\\1ix"),e.$singular(/(quiz)zes$/i,"\\1"),e.$singular(/(database)s$/i,"\\1"),e.$irregular("person","people"),e.$irregular("man","men"),e.$irregular("child","children"),e.$irregular("sex","sexes"),e.$irregular("move","moves"),e.$irregular("zombie","zombies"),e.$uncountable(["equipment","information","rice","money","species","series","fish","sheep","jeans","police"])}).$$s=o,n.$$arity=1,n))}(n[0],n)},Opal.modules["active_support/inflector/methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,$=[],a=e.nil,i=(e.$$$,e.$$),o=e.module,s=e.truthy,u=e.send,l=e.gvars,c=e.hash2,p=e.range;return e.add_stubs(["$require","$extend","$apply_inflections","$plurals","$inflections","$singulars","$to_s","$sub","$capitalize","$downcase","$gsub","$freeze","$match?","$tr","$dup","$each","$humans","$is_a?","$=~","$==","$upcase","$>","$length","$+","$[]","$humanize","$underscore","$pluralize","$camelize","$singularize","$rindex","$demodulize","$split","$empty?","$raise","$size","$first","$shift","$inject","$const_get","$const_defined?","$ancestors","$constantize","$name","$!","$include?","$const_regexp","$message","$abs","$to_i","$%","$===","$ordinal","$private","$blank?","$escape","$pop","$reverse","$uncountable?","$uncountables"]),r.$require("active_support/inflections"),function(r,$){var d=[o(r,"ActiveSupport")].concat($);return function(r,$){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I=o(r,"Inflector"),D=[I].concat($);return I.$extend(I),e.def(I,"$pluralize",d=function(e,t){var n=this;return null==t&&(t="en"),n.$apply_inflections(e,n.$inflections(t).$plurals(),t)},d.$$arity=-2),e.def(I,"$singularize",f=function(e,t){var n=this;return null==t&&(t="en"),n.$apply_inflections(e,n.$inflections(t).$singulars(),t)},f.$$arity=-2),e.def(I,"$camelize",_=function(e,t){var n,r,$=this,i=a;return null==t&&(t=!0),i=e.$to_s(),i=s(t)?u(i,"sub",[/^[a-z\d]*/],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=a),e.$capitalize()}).$$s=$,n.$$arity=1,n)):i.$downcase(),i=(i=u(i,"gsub",[/(?:_|(\/))([a-z\d]*)/i],((r=function(){var e;null==r.$$s||r.$$s;return""+((e=l["~"])===a?a:e["$[]"](1))+((e=l["~"])===a?a:e["$[]"](2)).$capitalize()}).$$s=$,r.$$arity=0,r))).$gsub("/".$freeze(),"::".$freeze())},_.$$arity=-2),e.def(I,"$underscore",h=function(e){return s(/[A-Z-]|::/["$match?"](e))?e.$to_s().$gsub("::".$freeze(),"/".$freeze()).$gsub(/([A-Z\d]+)([A-Z][a-z])/,"\\1_\\2".$freeze()).$gsub(/([a-z\d])([A-Z])/,"\\1_\\2".$freeze()).$tr("-".$freeze(),"_".$freeze()).$downcase():e},h.$$arity=1),e.def(I,"$humanize",y=function(t,n){var r,$,o,l,p,d=this,f=a;if(null==n)n=c([],{});else if(!n.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(r=n.$$smap.capitalize)&&(r=!0),null==($=n.$$smap.keep_id_suffix)&&($=!1),f=t.$to_s().$dup(),function(){var t=e.new_brk();try{u(d.$inflections().$humans(),"each",[],((o=function(n){null==o.$$s||o.$$s;var r,$,u=a,l=a,c=a,p=a,d=a;if(null==n&&(n=a),$=n,r=e.to_ary($),u=null==r[0]?a:r[0],l=null==r[1]?a:r[1],!s(s(c=s(p=u["$is_a?"](i(D,"Regexp")))?f["$=~"](u):p)?c:s(d=u["$is_a?"](i(D,"String")))?f["$=="](u):d))return a;f=f.$sub(u,l),e.brk(a,t)}).$$s=d,o.$$brk=t,o.$$arity=1,o.$$has_top_level_mlhs_arg=!0,o))}catch(n){if(n===t)return n.$v;throw n}}(),f=f.$sub(/^_+/,"".$freeze()),s($)||(f=f.$sub(/_id$/,"".$freeze())),f=f.$tr("_".$freeze()," ".$freeze()),f=u(f,"gsub",[/([a-z\d]*)/i],((l=function(e){null==l.$$s||l.$$s;return null==e&&(e=a),""+e.$downcase()}).$$s=d,l.$$arity=1,l)),s(r)&&(f=u(f,"sub",[/^\w/],((p=function(e){null==p.$$s||p.$$s;return null==e&&(e=a),e.$upcase()}).$$s=d,p.$$arity=1,p))),f},y.$$arity=-2),e.def(I,"$upcase_first",v=function(e){return s(t(e.$length(),0))?n(e["$[]"](0).$upcase(),e["$[]"](p(1,-1,!1))):""},v.$$arity=1),e.def(I,"$titleize",m=function(t,n){var r,$,i=this;if(null==n)n=c([],{});else if(!n.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(r=n.$$smap.keep_id_suffix)&&(r=!1),u(i.$humanize(i.$underscore(t),c(["keep_id_suffix"],{keep_id_suffix:r})),"gsub",[/([a-zA-Z'\u2019`])[a-z]*/],(($=function(e){null==$.$$s||$.$$s;return null==e&&(e=a),e.$capitalize()}).$$s=i,$.$$arity=1,$))},m.$$arity=-2),e.def(I,"$tableize",g=function(e){var t=this;return t.$pluralize(t.$underscore(e))},g.$$arity=1),e.def(I,"$classify",b=function(e){var t=this;return t.$camelize(t.$singularize(e.$to_s().$sub(/.*\./,"".$freeze())))},b.$$arity=1),e.def(I,"$dasherize",w=function(e){return e.$tr("_".$freeze(),"-".$freeze())},w.$$arity=1),e.def(I,"$demodulize",k=function(t){var r=a;return t=t.$to_s(),s(r=t.$rindex("::"))?t["$[]"](e.Range.$new(n(r,2),-1,!1)):t},k.$$arity=1),e.def(I,"$deconstantize",O=function(e){var t=a;return e.$to_s()["$[]"](0,s(t=e.$rindex("::"))?t:0)},O.$$arity=1),e.def(I,"$foreign_key",E=function(e,t){var r=this;return null==t&&(t=!0),n(r.$underscore(r.$demodulize(e)),s(t)?"_id":"id")},E.$$arity=-2),e.def(I,"$constantize",x=function(n){var r,$=this,o=a,l=a;return o=n.$split("::"),s(o["$empty?"]())&&$.$raise(i(D,"NameError"),"wrong constant name "),s(s(l=t(o.$size(),1))?o.$first()["$empty?"]():l)&&o.$shift(),function(){var t=e.new_brk();try{
return u(o,"inject",[i(D,"Object")],((r=function(t,n){var $,o=null==r.$$s?this:r.$$s,l=a;return null==t&&(t=a),null==n&&(n=a),t["$=="](i(D,"Object"))?t.$const_get(n):(l=t.$const_get(n),s(t["$const_defined?"](n,!1))?l:s(i(D,"Object")["$const_defined?"](n))?(t=function(){var r=e.new_brk();try{return u(t.$ancestors(),"inject",[t],(($=function(t,o){null==$.$$s||$.$$s;return null==t&&(t=a),null==o&&(o=a),o["$=="](i(D,"Object"))&&e.brk(t,r),s(o["$const_defined?"](n,!1))&&e.brk(o,r),t}).$$s=o,$.$$brk=r,$.$$arity=2,$))}catch(l){if(l===r)return l.$v;throw l}}()).$const_get(n,!1):l)}).$$s=$,r.$$brk=t,r.$$arity=2,r))}catch(n){if(n===t)return n.$v;throw n}}()},x.$$arity=1),e.def(I,"$safe_constantize",S=function(t){var n=this,r=a,$=a,o=a;try{return n.$constantize(t)}catch(u){if(e.rescue(u,[i(D,"NameError")])){r=u;try{return s(s($=r.$name())?(s(o=t.$to_s().$split("::")["$include?"](r.$name().$to_s()))?o:r.$name().$to_s()["$=="](t.$to_s()))["$!"]():$)?n.$raise():a}finally{e.pop_exception()}}else{if(!e.rescue(u,[i(D,"ArgumentError")]))throw u;r=u;try{return s(e.regexp(["not missing constant ",n.$const_regexp(t),"!$"])["$match?"](r.$message()))?a:n.$raise()}finally{e.pop_exception()}}}},S.$$arity=1),e.def(I,"$ordinal",q=function(e){var t=a,n=a;return t=e.$to_i().$abs(),s(p(11,13,!1)["$include?"](t["$%"](100)))?"th":(n=t["$%"](10),1["$==="](n)?"st":2["$==="](n)?"nd":3["$==="](n)?"rd":"th")},q.$$arity=1),e.def(I,"$ordinalize",N=function(e){return""+e+this.$ordinal(e)},N.$$arity=1),I.$private(),e.def(I,"$const_regexp",C=function(e){var t,n=this,r=a,$=a;return r=e.$split("::".$freeze()),s(r["$blank?"]())?i(D,"Regexp").$escape(e):($=r.$pop(),u(r.$reverse(),"inject",[$],((t=function(e,n){null==t.$$s||t.$$s;return null==e&&(e=a),null==n&&(n=a),s(n["$empty?"]())?e:n+"(::"+e+")?"}).$$s=n,t.$$arity=2,t)))},C.$$arity=1),e.def(I,"$apply_inflections",z=function(t,n,r){var $,o=this,l=a,c=a;return null==r&&(r="en"),l=t.$to_s().$dup(),s(s(c=t["$empty?"]())?c:o.$inflections(r).$uncountables()["$uncountable?"](l))?l:(function(){var t=e.new_brk();try{u(n,"each",[],(($=function(n){null==$.$$s||$.$$s;var r,o,u=a,c=a,p=a,d=a,f=a;if(null==n&&(n=a),o=n,r=e.to_ary(o),u=null==r[0]?a:r[0],c=null==r[1]?a:r[1],!s(s(p=s(d=u["$is_a?"](i(D,"Regexp")))?l["$=~"](u):d)?p:s(f=u["$is_a?"](i(D,"String")))?l["$=="](u):f))return a;l=l.$sub(u,c),e.brk(a,t)}).$$s=o,$.$$brk=t,$.$$arity=1,$.$$has_top_level_mlhs_arg=!0,$))}catch(r){if(r===t)return r.$v;throw r}}(),l)},z.$$arity=-3),a&&"apply_inflections"}(d[0],d)}($[0],$)},Opal.modules["active_support/core_ext/string/inflections"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.klass,o=e.truthy,s=e.hash2;return e.add_stubs(["$require","$is_a?","$==","$dup","$pluralize","$singularize","$constantize","$safe_constantize","$===","$camelize","$raise","$alias_method","$titleize","$underscore","$dasherize","$demodulize","$deconstantize","$tableize","$classify","$humanize","$upcase_first","$foreign_key"]),t.$require("active_support/inflector"),function(t,$super,n){var u,l,c,p,d,f,_,h,y,v,m,g,b,w,k,O=i(t,null,"String"),E=[O].concat(n);return e.def(O,"$pluralize",u=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t="en"),o(e["$is_a?"](a(E,"Symbol")))&&(t=e),e["$=="](1)?n.$dup():$(a(E,"ActiveSupport"),"Inflector").$pluralize(n,t)},u.$$arity=-1),e.def(O,"$singularize",l=function(e){var t=this;return null==e&&(e="en"),$(a(E,"ActiveSupport"),"Inflector").$singularize(t,e)},l.$$arity=-1),e.def(O,"$constantize",c=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$constantize(e)},c.$$arity=0),e.def(O,"$safe_constantize",p=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$safe_constantize(e)},p.$$arity=0),e.def(O,"$camelize",d=function(e){var t=this,n=r;return null==e&&(e="upper"),n=e,"upper"["$==="](n)?$(a(E,"ActiveSupport"),"Inflector").$camelize(t,!0):"lower"["$==="](n)?$(a(E,"ActiveSupport"),"Inflector").$camelize(t,!1):t.$raise(a(E,"ArgumentError"),"Invalid option, use either :upper or :lower.")},d.$$arity=-1),O.$alias_method("camelcase","camelize"),e.def(O,"$titleize",f=function(t){var n,r=this;if(null==t)t=s([],{});else if(!t.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(n=t.$$smap.keep_id_suffix)&&(n=!1),$(a(E,"ActiveSupport"),"Inflector").$titleize(r,s(["keep_id_suffix"],{keep_id_suffix:n}))},f.$$arity=-1),O.$alias_method("titlecase","titleize"),e.def(O,"$underscore",_=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$underscore(e)},_.$$arity=0),e.def(O,"$dasherize",h=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$dasherize(e)},h.$$arity=0),e.def(O,"$demodulize",y=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$demodulize(e)},y.$$arity=0),e.def(O,"$deconstantize",v=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$deconstantize(e)},v.$$arity=0),e.def(O,"$tableize",m=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$tableize(e)},m.$$arity=0),e.def(O,"$classify",g=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$classify(e)},g.$$arity=0),e.def(O,"$humanize",b=function(t){var n,r,i=this;if(null==t)t=s([],{});else if(!t.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(n=t.$$smap.capitalize)&&(n=!0),null==(r=t.$$smap.keep_id_suffix)&&(r=!1),$(a(E,"ActiveSupport"),"Inflector").$humanize(i,s(["capitalize","keep_id_suffix"],{capitalize:n,keep_id_suffix:r}))},b.$$arity=-1),e.def(O,"$upcase_first",w=function(){var e=this;return $(a(E,"ActiveSupport"),"Inflector").$upcase_first(e)},w.$$arity=0),e.def(O,"$foreign_key",k=function(e){var t=this;return null==e&&(e=!0),$(a(E,"ActiveSupport"),"Inflector").$foreign_key(t,e)},k.$$arity=-1),r&&"foreign_key"}(n[0],0,n)},Opal.modules["active_support/inflector"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/inflector/inflections"),t.$require("active_support/inflector/methods"),t.$require("active_support/inflections"),t.$require("active_support/core_ext/string/inflections")},Opal.modules["active_support/core_ext/module/introspection"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.klass,s=e.truthy,u=e.gvars;return e.add_stubs(["$require","$=~","$name","$freeze","$parent_name","$constantize","$split","$empty?","$<<","$*","$pop","$include?","$constants"]),n.$require("active_support/inflector"),function(n,$super,r){var l,c,p,d,f=o(n,null,"Module"),_=[f].concat(r);return f.$$prototype.parent_name=$,e.def(f,"$parent_name",l=function(){var e,t,n=this;return s(null!=(e=n.parent_name)&&e!==$?"instance-variable":$)?n.parent_name:n.parent_name=s(n.$name()["$=~"](/::[^:]+$/))?((t=u["~"])===$?$:t.$pre_match()).$freeze():$},l.$$arity=0),e.def(f,"$parent",c=function(){var e=this;return s(e.$parent_name())?a(i(_,"ActiveSupport"),"Inflector").$constantize(e.$parent_name()):i(_,"Object")},c.$$arity=0),e.def(f,"$parents",p=function(){var e=this,n=$,r=$;if(n=[],s(e.$parent_name()))for(r=e.$parent_name().$split("::");!s(r["$empty?"]());)n["$<<"](a(i(_,"ActiveSupport"),"Inflector").$constantize(t(r,"::"))),r.$pop();return s(n["$include?"](i(_,"Object")))||n["$<<"](i(_,"Object")),n},p.$$arity=0),e.def(f,"$local_constants",d=function(){return this.$constants(!1)},d.$$arity=0),$&&"local_constants"}(r[0],0,r)},Opal.modules["active_support/core_ext/module/delegation"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.truthy,o=e.send,s=e.range;return e.add_stubs(["$pop","$is_a?","$[]","$raise","$values_at","$==","$=~","$to_s","$each","$+","$lambda","$start_with?","$__send__","$new","$inspect","$define_method","$to_proc"]),function(n,$super,u){var l,c=a(n,null,"Module"),p=[c].concat(u);return function(e,$super,t){[a(e,$super,"DelegationError")].concat(t)}(p[0],$(p,"NoMethodError"),p),e.def(c,"$delegate",l=function(){var n,a,u,c,d,f=l.$$p,_=this,h=r,y=r,v=r,m=r,g=r,b=r,w=r;return f&&(l.$$p=null),n=e.slice.call(arguments,0,arguments.length),h=(a=n).$pop(),i(i(y=h["$is_a?"]($(p,"Hash")))?v=h["$[]"]("to"):y)||_.$raise($(p,"ArgumentError"),"Delegation needs a target. Supply an options hash with a :to key as the last argument (e.g. delegate :hello, to: :greeter)."),c=h.$values_at("prefix","allow_nil"),u=e.to_ary(c),m=null==u[0]?r:u[0],g=null==u[1]?r:u[1],i(i(b=m["$=="](!0))?v["$=~"](/^[^a-z_]/):b)&&_.$raise($(p,"ArgumentError"),"Can only automatically set the delegation prefix when delegating to a method."),w=i(m)?(m["$=="](!0)?v:m)+"_":"",v=v.$to_s(),o(a,"each",[],((d=function(n){var a,u,l,c,f=null==d.$$s?this:d.$$s,_=r,h=r,y=r,m=r;return null==n&&(n=r),_=!i(n["$=~"](/[^\]]=$/)),h=t(w,n),y=o(f,"lambda",[],((a=function(e){null==a.$$s||a.$$s;return null==e&&(e=r),i(v["$start_with?"]("@"))?e[v["$[]"](s(1,-1,!1))]:e.$__send__(v)}).$$s=f,a.$$arity=1,a)),m=o(f,"lambda",[],((u=function(e){null==u.$$s||u.$$s;return null==e&&(e=r),$(p,"DelegationError").$new(""+e+h+" delegated to "+v+"."+n+" but "+v+" is nil: "+e.$inspect(),h)}).$$s=f,u.$$arity=1,u)),i(_)?o(f,"define_method",[h],((l=function(){var t,$=null==l.$$s?this:l.$$s,a=l.$$p,s=a||r,u=r;if(a&&(l.$$p=null),t=e.slice.call(arguments,0,arguments.length),u=y["$[]"]($),i(u));else{if(i(g))return r;$.$raise(m["$[]"]($))}return o(u,"__send__",[n].concat(e.to_a(t)),s.$to_proc())}).$$s=f,l.$$arity=-1,l)):o(f,"define_method",[h],((c=function(e){var t=null==c.$$s?this:c.$$s,$=r;if(null==e&&(e=r),$=y["$[]"](t),i($));else{if(i(g))return r;t.$raise(m["$[]"](t))}return $.$__send__(n,e)}).$$s=f,c.$$arity=1,c))}).$$s=_,d.$$arity=1,d))},l.$$arity=-1),r&&"delegate"}(n[0],0,n)},Opal.modules["active_support/core_ext/module"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/module/introspection"),t.$require("active_support/core_ext/module/remove_method"),t.$require("active_support/core_ext/module/delegation")},Opal.modules["active_support/core_ext/numeric/calculations"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$),r=e.alias;return function(e,t){[e].concat(t);return r(e,"current","now")}(e.get_singleton_class(n(t,"Time")),t)},Opal.modules["active_support/core_ext/numeric"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/numeric/time"),t.$require("active_support/core_ext/numeric/calculations")},Opal.modules["active_support/core_ext/object/blank"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.truthy;return e.add_stubs(["$respond_to?","$empty?","$!","$blank?","$present?","$==","$alias_method","$!~"]),function(t,$super,a){var i,o,s,u=r(t,null,"Object");[u].concat(a);e.def(u,"$blank?",i=function(){var e=this;return $(e["$respond_to?"]("empty?"))?e["$empty?"]():e["$!"]()},i.$$arity=0),e.def(u,"$present?",o=function(){return this["$blank?"]()["$!"]()},o.$$arity=0),e.def(u,"$presence",s=function(){var e=this;return $(e["$present?"]())?e:n},s.$$arity=0)}(t[0],0,t),function(t,$super,n){var $,a=r(t,null,"NilClass");[a].concat(n);e.def(a,"$blank?",$=function(){return!0},$.$$arity=0)}(t[0],0,t),function(t,$super,n){var $,a=r(t,null,"Boolean");[a].concat(n);e.def(a,"$blank?",$=function(){return this["$=="](!1)},$.$$arity=0)}(t[0],0,t),function(e,$super,t){var n=r(e,null,"Array");[n].concat(t);n.$alias_method("blank?","empty?")}(t[0],0,t),function(e,$super,t){var n=r(e,null,"Hash");[n].concat(t);n.$alias_method("blank?","empty?")}(t[0],0,t),function(t,$super,n){var $,a=r(t,null,"String");[a].concat(n);e.def(a,"$blank?",$=function(){return this["$!~"](/[^\s\u3000]/)},$.$$arity=0)}(t[0],0,t),function(t,$super,$){var a,i=r(t,null,"Numeric");[i].concat($);return e.def(i,"$blank?",a=function(){return!1},a.$$arity=0),n&&"blank?"}(t[0],0,t)},Opal.modules["active_support/core_ext/object/try"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.truthy,a=e.send;return e.add_stubs(["$empty?","$respond_to?","$first","$try!","$to_proc","$zero?","$arity","$instance_eval","$public_send"]),function(t,$super,i){var o,s,u=r(t,null,"Object");[u].concat(i);e.def(u,"$try",o=function(){var t,r,i=o.$$p,s=i||n,u=this,l=n;return i&&(o.$$p=null),i&&(o.$$p=null),t=e.slice.call(arguments,0,arguments.length),$($(l=(r=t)["$empty?"]())?l:u["$respond_to?"](r.$first()))?a(u,"try!",e.to_a(r),s.$to_proc()):n},o.$$arity=-1),e.def(u,"$try!",s=function(){var t,r,i=s.$$p,o=i||n,u=this,l=n;return i&&(s.$$p=null),i&&(s.$$p=null),t=e.slice.call(arguments,0,arguments.length),$($(l=(r=t)["$empty?"]())?o!==n:l)?$(o.$arity()["$zero?"]())?a(u,"instance_eval",[],o.$to_proc()):e.yield1(o,u):a(u,"public_send",e.to_a(r),o.$to_proc())},s.$$arity=-1)}(t[0],0,t),function(t,$super,$){var a,i,o=r(t,null,"NilClass");[o].concat($);return e.def(o,"$try",a=function(){return e.slice.call(arguments,0,arguments.length),n},a.$$arity=-1),e.def(o,"$try!",i=function(){return e.slice.call(arguments,0,arguments.length),n},i.$$arity=-1),n&&"try!"}(t[0],0,t)},Opal.modules["active_support/core_ext/object"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/object/blank"),t.$require("active_support/core_ext/object/try")},Opal.modules["active_support/core_ext/string/filters"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$,e.klass),i=e.hash2,o=e.truthy;return e.add_stubs(["$>","$length","$dup","$[]","$-","$rindex"]),function(r,$super,s){var u,l=a(r,null,"String");[l].concat(s);return e.def(l,"$truncate",u=function(e,r){var a=this,s=$,u=$,l=$,c=$,p=$;return null==r&&(r=i([],{})),o(t(a.$length(),e))?(s=o(u=r["$[]"]("omission"))?u:"...",l=n(e,s.$length()),c=o(r["$[]"]("separator"))&&o(p=a.$rindex(r["$[]"]("separator"),l))?p:l,""+a["$[]"](0,c)+s):a.$dup()},u.$$arity=-2),$&&"truncate"}(r[0],0,r)},Opal.modules["active_support/core_ext/string"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$,e.klass);return e.add_stubs(["$require","$gsub","$strip","$downcase"]),t.$require("active_support/core_ext/string/filters"),t.$require("active_support/core_ext/string/inflections"),function(t,$super,n){var a,i=$(t,null,"String");[i].concat(n);return e.def(i,"$parameterize",a=function(){return this.$downcase().$strip().$gsub(/\W+/,"-")},a.$$arity=0),r&&"parameterize"}(n[0],0,n)},Opal.modules["active_support/core_ext"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext/array"),t.$require("active_support/core_ext/class"),t.$require("active_support/core_ext/enumerable"),t.$require("active_support/core_ext/hash"),t.$require("active_support/core_ext/integer"),t.$require("active_support/core_ext/kernel"),t.$require("active_support/core_ext/module"),t.$require("active_support/core_ext/numeric"),t.$require("active_support/core_ext/object"),t.$require("active_support/core_ext/string")},Opal.modules.active_support=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("active_support/core_ext")},Opal.modules.time=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return e.add_stubs(["$strftime"]),function(t,$super,$){var a,i,o=r(t,null,"Time");[o].concat($);return e.defs(o,"$parse",a=function(e){return new Date(Date.parse(e))},a.$$arity=1),e.def(o,"$iso8601",i=function(){return this.$strftime("%FT%T%z")},i.$$arity=0),n&&"iso8601"}(t[0],0,t)},Opal.modules.date=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.top;var i=[],o=e.nil,s=e.$$$,u=e.$$,l=e.klass,c=e.send2,p=e.find_super,d=e.truthy,f=e.alias,_=e.send;return e.add_stubs(["$include","$<=>","$attr_reader","$nonzero?","$d","$zero?","$new","$class","$-@","$+@","$===","$coerce","$==","$>","$+","$allocate","$join","$compact","$map","$to_proc","$downcase","$wrap","$raise","$clone","$jd","$>>","$wday","$year","$month","$day","$-","$to_s","$to_i","$<","$*","$reverse","$step","$abs","$each"]),function(i,$super,h){function y(e,t){return[31,e%4==0&&e%100!=0||e%400==0?29:28,31,30,31,30,31,31,30,31,30,31][t]}var v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K,X,Y,V,G,J,Z,Q,ee,te,ne,re,$e=l(i,null,"Date"),ae=[$e].concat(h);$e.$$prototype.date=o,$e.$include(u(ae,"Comparable")),function(n,$super,r){var $,a,i,f,_,h,y,v,m,g,b,w=l(n,$super,"Infinity"),k=[w].concat(r);w.$$prototype.d=o,w.$include(u(k,"Comparable")),e.def(w,"$initialize",$=function(e){return null==e&&(e=1),this.d=e["$<=>"](0)},$.$$arity=-1),w.$attr_reader("d"),e.def(w,"$zero?",a=function(){return!1},a.$$arity=0),e.def(w,"$finite?",i=function(){return!1},i.$$arity=0),e.def(w,"$infinite?",f=function(){return this.$d()["$nonzero?"]()},f.$$arity=0),e.def(w,"$nan?",_=function(){return this.$d()["$zero?"]()},_.$$arity=0),e.def(w,"$abs",h=function(){return this.$class().$new()},h.$$arity=0),e.def(w,"$-@",y=function(){var e=this;return e.$class().$new(e.$d()["$-@"]())},y.$$arity=0),e.def(w,"$+@",v=function(){var e=this;return e.$class().$new(e.$d()["$+@"]())},v.$$arity=0),e.def(w,"$<=>",m=function(t){var n,r,$=this,a=o,i=o,s=o;return function(){if(a=t,u(k,"Infinity")["$==="](a))return $.$d()["$<=>"](t.$d());if(u(k,"Numeric")["$==="](a))return $.$d();try{return r=t.$coerce($),n=e.to_ary(r),i=null==n[0]?o:n[0],s=null==n[1]?o:n[1],i["$<=>"](s)}catch(l){if(!e.rescue(l,[u(k,"NoMethodError")]))throw l;try{return o}finally{e.pop_exception()}}}()},m.$$arity=1),e.def(w,"$coerce",g=function(e){var t=g.$$p,n=this,r=o;return t&&(g.$$p=null),r=e,u(k,"Numeric")["$==="](r)?[n.$d()["$-@"](),n.$d()]:c(n,p(n,"coerce",g,!1,!0),"coerce",[e],t)},g.$$arity=1),e.def(w,"$to_f",b=function(){var e=this;return e.d["$=="](0)?0:d(t(e.d,0))?s(u(k,"Float"),"INFINITY"):s(u(k,"Float"),"INFINITY")["$-@"]()},b.$$arity=0)}(ae[0],u(ae,"Numeric"),ae),e.const_set(ae[0],"JULIAN",u(ae,"Infinity").$new()),e.const_set(ae[0],"GREGORIAN",u(ae,"Infinity").$new()["$-@"]()),e.const_set(ae[0],"ITALY",2299161),e.const_set(ae[0],"ENGLAND",2361222),e.const_set(ae[0],"MONTHNAMES",n([o],["January","February","March","April","May","June","July","August","September","October","November","December"])),e.const_set(ae[0],"ABBR_MONTHNAMES",["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]),e.const_set(ae[0],"DAYNAMES",["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),e.const_set(ae[0],"ABBR_DAYNAMES",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),function(t,n){var r,$,a,i,s=[t].concat(n);f(t,"civil","new"),e.def(t,"$wrap",r=function(e){var t=o;return(t=this.$allocate()).date=e,t},r.$$arity=1),e.def(t,"$parse",$=function(e,t){function n(e){return e[1]}function r(e){return e[2]}function $(e){return e[3]}function a(e){return e[4]}function i(e){return function(t){var n=e(t);return n+=n>=69?1900:2e3}}function o(e){return function(t){var n=e(t).toLowerCase();return u(s,"ABBR_MONTHNAMES").indexOf(n)+1}}function l(e){return function(t){var n=e(t);return parseInt(n,10)}}function c(e){return function(n){var r=e(n);return t?r+2e3:r}}function p(e){return function(t){var n=e(t),r=_(u(s,"DAYNAMES"),"map",[],"downcase".$to_proc()).indexOf(n.$downcase());return g-k+r}}function d(e){return function(t){var n=e(t);return _(u(s,"MONTHNAMES").$compact(),"map",[],"downcase".$to_proc()).indexOf(n.$downcase())+1}}var f=this;null==t&&(t=!0);var h,y,v,m=new Date,g=m.getDate(),b=m.getMonth(),w=m.getFullYear(),k=m.getDay(),O=u(s,"MONTHNAMES").$compact().$join("|"),E=[{regexp:/^(\d{2})$/,year:w,month:b,day:l(n)},{regexp:/^(\d{3})$/,year:w,month:0,day:l(n)},{regexp:/^(\d{2})(\d{2})$/,year:w,month:l(n),day:l(r)},{regexp:/^(\d{2})(\d{3})$/,year:i(l(n)),month:0,day:l(r)},{regexp:/^(\d{2})(\d{2})(\d{2})$/,year:i(l(n)),month:l(r),day:l($)},{regexp:/^(\d{4})(\d{3})$/,year:l(n),month:0,day:l(r)},{regexp:/^(\d{4})(\d{2})(\d{2})$/,year:l(n),month:l(r),day:l($)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{3,4})$/,year:l(r),month:o(n),day:1},{regexp:/^(\d{1,2})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{3,4})$/i,year:l($),month:o(r),day:l(n)},{regexp:/^([a-z]{3})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{3,4})$/i,year:l($),month:o(n),day:l(r)},{regexp:/^(\d{3,4})[\s\.\/\-]([a-z]{3})[\s\.\/\-](\d{1,2})$/i,year:l(n),month:o(r),day:l($)},{regexp:/^(\-?\d{3,4})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:l(n),month:l(r),day:l($)},{regexp:/^(\d{2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\d{1,2})$/,year:c(l(n)),month:l(r),day:l($)},{regexp:/^(\d{1,2})[\s\.\/\-](\d{1,2})[\s\.\/\-](\-?\d{3,4})$/,year:l($),month:l(r),day:l(n)},{regexp:new RegExp("^("+u(s,"DAYNAMES").$join("|")+")$","i"),year:w,month:b,day:p(n)},{regexp:new RegExp("^("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:l(a),month:d(n),day:l(r)},{regexp:new RegExp("^("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)","i"),year:w,month:d(n),day:l(r)},{regexp:new RegExp("^(\\d{1,2})(th|nd|rd)[\\s\\.\\/\\-]("+O+")[\\s\\.\\/\\-](\\-?\\d{3,4})$","i"),year:l(a),month:d($),day:l(n)},{regexp:new RegExp("^(\\-?\\d{3,4})[\\s\\.\\/\\-]("+O+")[\\s\\.\\/\\-](\\d{1,2})(th|nd|rd)$","i"),year:l(n),month:d(r),day:l($)}];for(y=0;y<E.length;y++)if(v=(h=E[y]).regexp.exec(e)){var x=h.year;"function"==typeof x&&(x=x(v));var S=h.month;"function"==typeof S&&(S=S(v)-1);var q=h.day;"function"==typeof q&&(q=q(v));var N=new Date(x,S,q);return x>=0&&x<=1970&&N.setFullYear(x),f.$wrap(N)}return f.$raise(u(s,"ArgumentError"),"invalid date")},$.$$arity=-2),e.def(t,"$today",a=function(){return this.$wrap(new Date)},a.$$arity=0),e.def(t,"$gregorian_leap?",i=function(e){return new Date(e,1,29).getMonth()-1==0},i.$$arity=1)}(e.get_singleton_class($e),ae),e.def($e,"$initialize",v=function(e,t,n,r){var $=this;return null==e&&(e=-4712),null==t&&(t=1),null==n&&(n=1),null==r&&(r=u(ae,"ITALY")),1582===e&&10===t&&n>4&&n<15&&(n=4),$.date=new Date(e,t-1,n)},v.$$arity=-1),e.def($e,"$-",m=function(e){var t=this;if(e.$$is_number){var n=t.$clone();return n.date.setDate(t.date.getDate()-e),n}if(e.date)return Math.round((t.date-e.date)/864e5);t.$raise(u(ae,"TypeError"))},m.$$arity=1),e.def($e,"$+",g=function(e){var t=this;if(e.$$is_number){var n=t.$clone();return n.date.setDate(t.date.getDate()+e),n}t.$raise(u(ae,"TypeError"))},g.$$arity=1),e.def($e,"$<",b=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<n},b.$$arity=1),e.def($e,"$<=",w=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t<=n},w.$$arity=1),e.def($e,"$>",k=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t>n},k.$$arity=1),e.def($e,"$>=",O=function(e){var t=this.date,n=e.date;return t.setHours(0,0,0,0),n.setHours(0,0,0,0),t>=n},O.$$arity=1),e.def($e,"$<=>",E=function(e){var t=this;if(e.$$is_number)return t.$jd()["$<=>"](e);if(u(ae,"Date")["$==="](e)){var n=t.date,r=e.date;return n.setHours(0,0,0,0),r.setHours(0,0,0,0),n<r?-1:n>r?1:0}return o},E.$$arity=1),e.def($e,"$>>",x=function(e){var t=this;e.$$is_number||t.$raise(u(ae,"TypeError"));var n=t.$clone(),r=n.date,$=r.getDate();return r.setDate(1),r.setMonth(r.getMonth()+e),r.setDate(Math.min($,y(r.getFullYear(),r.getMonth()))),n},x.$$arity=1),e.def($e,"$<<",S=function(e){var t=this;return e.$$is_number||t.$raise(u(ae,"TypeError")),t["$>>"](-e)},S.$$arity=1),f($e,"eql?","=="),e.def($e,"$clone",q=function(){var e=this;return u(ae,"Date").$wrap(new Date(e.date.getTime()))},q.$$arity=0),e.def($e,"$day",N=function(){return this.date.getDate()},N.$$arity=0),e.def($e,"$friday?",C=function(){return this.$wday()["$=="](5)},C.$$arity=0),e.def($e,"$jd",z=function(){var e,t,n,r,$,a=this,i=a.date.getMonth()+1,o=a.date.getDate(),s=a.date.getFullYear(),u=12;return u=u+0/60+0/3600,e=1,s<=1585&&(e=0),$=-1*Math.floor(7*(Math.floor((i+9)/12)+s)/4),t=1,i-9<0&&(t=-1),n=Math.abs(i-9),r=Math.floor(s+t*Math.floor(n/7)),r=-1*Math.floor(3*(Math.floor(r/100)+1)/4),$=($=$+Math.floor(275*i/9)+o+e*r)+1721027+2*e+367*s-.5,$+=u/24},z.$$arity=0),e.def($e,"$julian?",I=function(){return this.date<new Date(1582,9,15,12)},I.$$arity=0),e.def($e,"$monday?",D=function(){return this.$wday()["$=="](1)},D.$$arity=0),e.def($e,"$month",H=function(){return this.date.getMonth()+1},H.$$arity=0),e.def($e,"$next",A=function(){return n(this,1)},A.$$arity=0),e.def($e,"$next_day",j=function(e){return null==e&&(e=1),n(this,e)},j.$$arity=-1),e.def($e,"$next_month",M=function(e){null==e&&(e=1);var t=this.$clone(),n=t.date,r=n.getDate();return n.setDate(1),n.setMonth(n.getMonth()+e),n.setDate(Math.min(r,y(n.getFullYear(),n.getMonth()))),t},M.$$arity=-1),e.def($e,"$next_year",R=function(e){var t=this;return null==e&&(e=1),t.$class().$new(n(t.$year(),e),t.$month(),t.$day())},R.$$arity=-1),e.def($e,"$prev_day",T=function(e){return null==e&&(e=1),r(this,e)},T.$$arity=-1),e.def($e,"$prev_month",B=function(e){null==e&&(e=1);var t=this.$clone(),n=t.date,r=n.getDate();return n.setDate(1),n.setMonth(n.getMonth()-e),n.setDate(Math.min(r,y(n.getFullYear(),n.getMonth()))),t},B.$$arity=-1),e.def($e,"$prev_year",P=function(e){var t=this;return null==e&&(e=1),t.$class().$new(r(t.$year(),e),t.$month(),t.$day())},P.$$arity=-1),e.def($e,"$saturday?",L=function(){return this.$wday()["$=="](6)},L.$$arity=0),e.def($e,"$strftime",F=function(e){var t=this;return null==e&&(e=""),""==e?t.$to_s():t.date.$strftime(e)},F.$$arity=-1),f($e,"succ","next"),e.def($e,"$sunday?",U=function(){return this.$wday()["$=="](0)},U.$$arity=0),e.def($e,"$thursday?",W=function(){return this.$wday()["$=="](4)},W.$$arity=0),e.def($e,"$to_s",K=function(){var e=this.date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return n<10&&(n="0"+n),r<10&&(r="0"+r),t+"-"+n+"-"+r},K.$$arity=0),e.def($e,"$to_time",X=function(){var e=this;return u(ae,"Time").$new(e.$year(),e.$month(),e.$day())},X.$$arity=0),e.def($e,"$to_n",Y=function(){return this.date},Y.$$arity=0),e.def($e,"$tuesday?",V=function(){return this.$wday()["$=="](2)},V.$$arity=0),e.def($e,"$step",G=function(t,i){var s,u,l=G.$$p,c=l||o,p=this,f=o,h=o,y=o;return l&&(G.$$p=null),l&&(G.$$p=null),null==i&&(i=1),f=r(t,p).$to_i(),h=d($(a(f,i),0))?[]:d($(f,0))?_(e.Range.$new(0,f["$-@"](),!1).$step(i.$abs()),"map",[],"-@".$to_proc()).$reverse():e.Range.$new(0,f,!1).$step(i.$abs()),y=_(h,"map",[],((s=function(e){var t=null==s.$$s?this:s.$$s;return null==e&&(e=o),n(t,e)}).$$s=p,s.$$arity=1,s)),c!==o?(_(y,"each",[],((u=function(t){null==u.$$s||u.$$s;return null==t&&(t=o),e.yield1(c,t)}).$$s=p,u.$$arity=1,u)),p):y},G.$$arity=-2),e.def($e,"$upto",J=function(e){var t=J.$$p,n=t||o,r=this;return t&&(J.$$p=null),t&&(J.$$p=null),_(r,"step",[e,1],n.$to_proc())},J.$$arity=1),e.def($e,"$downto",Z=function(e){var t=Z.$$p,n=t||o,r=this;return t&&(Z.$$p=null),t&&(Z.$$p=null),_(r,"step",[e,-1],n.$to_proc())},Z.$$arity=1),e.def($e,"$wday",Q=function(){return this.date.getDay()},Q.$$arity=0),e.def($e,"$wednesday?",ee=function(){return this.$wday()["$=="](3)},ee.$$arity=0),e.def($e,"$year",te=function(){return this.date.getFullYear()},te.$$arity=0),e.def($e,"$cwday",ne=function(){return this.date.getDay()||7},ne.$$arity=0),e.def($e,"$cweek",re=function(){var e=new Date(this.date);return e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7)),Math.ceil(((e-new Date(e.getFullYear(),0,1))/864e5+1)/7)},re.$$arity=0)}(i[0],0,i)},Opal.modules.native=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}var r=e.top,$=[],a=e.nil,i=e.$$$,o=e.$$,s=e.module,u=e.truthy,l=e.send,c=e.hash2,p=e.range,d=e.alias,f=e.klass,_=e.send2,h=e.find_super,y=e.gvars;return e.add_stubs(["$try_convert","$native?","$respond_to?","$to_n","$raise","$inspect","$Native","$proc","$map!","$end_with?","$define_method","$[]","$convert","$call","$to_proc","$new","$each","$native_reader","$native_writer","$extend","$warn","$include","$is_a?","$map","$to_a","$_Array","$method_missing","$bind","$instance_method","$slice","$-","$length","$[]=","$enum_for","$===","$>=","$<<","$each_pair","$method_defined?","$_initialize","$name","$native_module"]),function(t,n){var r,$,d,f,_,h,y=s(t,"Native"),v=[y].concat(n);e.defs(y,"$is_a?",r=function(e,t){var n=this;try{return e instanceof n.$try_convert(t)}catch(r){return!1}},r.$$arity=2),e.defs(y,"$try_convert",$=function(e,t){return null==t&&(t=a),this["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():t},$.$$arity=-2),e.defs(y,"$convert",d=function(e){var t=this;return t["$native?"](e)?e:e["$respond_to?"]("to_n")?e.$to_n():void t.$raise(o(v,"ArgumentError"),e.$inspect()+" isn't native")},d.$$arity=1),e.defs(y,"$call",f=function(t,n){var r,$=f.$$p,i=$||a,o=this;$&&(f.$$p=null),$&&(f.$$p=null),r=e.slice.call(arguments,2,arguments.length);var s=t[n];if(s instanceof Function){for(var u=new Array(r.length),l=0,c=r.length;l<c;l++){var p=r[l],d=o.$try_convert(p);u[l]=d===a?p:d}return i!==a&&u.push(i),o.$Native(s.apply(t,u))}return o.$Native(s)},f.$$arity=-3),e.defs(y,"$proc",_=function(){var t,n=_.$$p,r=n||a,$=this;return n&&(_.$$p=null),n&&(_.$$p=null),u(r)||$.$raise(o(v,"LocalJumpError"),"no block given"),l(i("::","Kernel"),"proc",[],((t=function(){var n,$,i,o=null==t.$$s?this:t.$$s,s=a;if(n=e.slice.call(arguments,0,arguments.length),l($=n,"map!",[],((i=function(e){var t=null==i.$$s?this:i.$$s;return null==e&&(e=a),t.$Native(e)}).$$s=o,i.$$arity=1,i)),s=o.$Native(this),this===e.global)return r.apply(o,$);var u=r.$$s;r.$$s=null;try{return r.apply(s,$)}finally{r.$$s=u}}).$$s=$,t.$$arity=-1,t))},_.$$arity=0),function(t,n){var r,$,i,d,f=s(t,"Helpers"),_=[f].concat(n);e.def(f,"$alias_native",r=function(t){var n,$,i,s,d,f,h,y=r.$$p,v=this;if(y&&(r.$$p=null),n=e.slice.call(arguments,1,arguments.length),null==($=e.extract_kwargs(n)))$=c([],{});else if(!$.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return n.length>0&&(i=n[0],n.splice(0,1)),null==i&&(i=t),null==(s=$.$$smap.as)&&(s=a),u(i["$end_with?"]("="))?l(v,"define_method",[t],((d=function(e){var t=null==d.$$s?this:d.$$s;return null==t.native&&(t.native=a),null==e&&(e=a),t.native[i["$[]"](p(0,-2,!1))]=o(_,"Native").$convert(e),e}).$$s=v,d.$$arity=1,d)):u(s)?l(v,"define_method",[t],((f=function(){var t,n=null==f.$$s?this:f.$$s,r=f.$$p,$=r||a,c=a;return null==n.native&&(n.native=a),r&&(f.$$p=null),t=e.slice.call(arguments,0,arguments.length),c=l(o(_,"Native"),"call",[n.native,i].concat(e.to_a(t)),$.$to_proc()),u(c)?s.$new(c.$to_n()):a}).$$s=v,f.$$arity=-1,f)):l(v,"define_method",[t],((h=function(){var t,n=null==h.$$s?this:h.$$s,r=h.$$p,$=r||a;return null==n.native&&(n.native=a),r&&(h.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(o(_,"Native"),"call",[n.native,i].concat(e.to_a(t)),$.$to_proc())}).$$s=v,h.$$arity=-1,h))},r.$$arity=-2),e.def(f,"$native_reader",$=function(){var t,n,r=this;return t=e.slice.call(arguments,0,arguments.length),l(t,"each",[],((n=function(e){var t,r=null==n.$$s?this:n.$$s;return null==e&&(e=a),l(r,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return null==n.native&&(n.native=a),n.$Native(n.native[e])}).$$s=r,t.$$arity=0,t))}).$$s=r,n.$$arity=1,n))},$.$$arity=-1),e.def(f,"$native_writer",i=function(){var t,n,r=this;return t=e.slice.call(arguments,0,arguments.length),l(t,"each",[],((n=function(e){var t,r=null==n.$$s?this:n.$$s;return null==e&&(e=a),l(r,"define_method",[e+"="],((t=function(n){var r=null==t.$$s?this:t.$$s;return null==r.native&&(r.native=a),null==n&&(n=a),r.$Native(r.native[e]=n)}).$$s=r,t.$$arity=1,t))}).$$s=r,n.$$arity=1,n))},i.$$arity=-1),e.def(f,"$native_accessor",d=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),l(n,"native_reader",e.to_a(t)),l(n,"native_writer",e.to_a(t))},d.$$arity=-1)}(v[0],v),function(t,n){var r,$,l,c=s(t,"Wrapper"),p=[c].concat(n);e.def(c,"$initialize",r=function(e){var t=this;return u(i("::","Kernel")["$native?"](e))||i("::","Kernel").$raise(o(p,"ArgumentError"),e.$inspect()+" isn't native"),t.native=e},r.$$arity=1),e.def(c,"$to_n",$=function(){var e=this;return null==e.native&&(e.native=a),e.native},$.$$arity=0),e.defs(c,"$included",l=function(e){return e.$extend(o(p,"Helpers"))},l.$$arity=1)}(v[0],v),e.defs(y,"$included",h=function(e){return this.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),e.$include(o(v,"Wrapper"))},h.$$arity=1)}($[0],$),function(t,n){var r,$,c,p=s(t,"Kernel"),f=[p].concat(n);e.def(p,"$native?",r=function(e){return null==e||!e.$$class},r.$$arity=1),e.def(p,"$Native",$=function(t){var n,r,s=$.$$p,c=this;return s&&($.$$p=null),
u(null==t)?a:u(c["$native?"](t))?i(o(f,"Native"),"Object").$new(t):u(t["$is_a?"](o(f,"Array")))?l(t,"map",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=a),t.$Native(e)}).$$s=c,n.$$arity=1,n)):u(t["$is_a?"](o(f,"Proc")))?l(c,"proc",[],((r=function(){var n,$=null==r.$$s?this:r.$$s,i=r.$$p,o=i||a;return i&&(r.$$p=null),n=e.slice.call(arguments,0,arguments.length),$.$Native(l(t,"call",e.to_a(n),o.$to_proc()))}).$$s=c,r.$$arity=-1,r)):t},$.$$arity=1),d(p,"_Array","Array"),e.def(p,"$Array",c=function(t){var n,r=c.$$p,$=r||a,s=this;return r&&(c.$$p=null),r&&(c.$$p=null),n=e.slice.call(arguments,1,arguments.length),u(s["$native?"](t))?l(i(o(f,"Native"),"Array"),"new",[t].concat(e.to_a(n)),$.$to_proc()).$to_a():s.$_Array(t)},c.$$arity=-2)}($[0],$),function(n,$super,r){var $,o,s,p,_,h,y,v,m,g,b,w,k,O,E,x=f(n,$super,"Object");[x].concat(r);x.$$prototype.native=a,x.$include(i(i("::","Native"),"Wrapper")),e.def(x,"$==",$=function(e){return this.native===i("::","Native").$try_convert(e)},$.$$arity=1),e.def(x,"$has_key?",o=function(t){var n=this;return e.hasOwnProperty.call(n.native,t)},o.$$arity=1),d(x,"key?","has_key?"),d(x,"include?","has_key?"),d(x,"member?","has_key?"),e.def(x,"$each",s=function(){var t,n=s.$$p,r=n||a,$=this;if(n&&(s.$$p=null),t=e.slice.call(arguments,0,arguments.length),r!==a){for(var i in $.native)e.yieldX(r,[i,$.native[i]]);return $}return l($,"method_missing",["each"].concat(e.to_a(t)))},s.$$arity=-1),e.def(x,"$[]",p=function(e){var t=this,n=t.native[e];return n instanceof Function?n:i("::","Native").$call(t.native,e)},p.$$arity=1),e.def(x,"$[]=",_=function(e,t){var n=this,r=a;return r=i("::","Native").$try_convert(t),u(r===a)?n.native[e]=t:n.native[e]=r},_.$$arity=2),e.def(x,"$merge!",h=function(e){var t=this;for(var n in e=i("::","Native").$convert(e))t.native[n]=e[n];return t},h.$$arity=1),e.def(x,"$respond_to?",y=function(e,t){var n=this;return null==t&&(t=!1),i("::","Kernel").$instance_method("respond_to?").$bind(n).$call(e,t)},y.$$arity=-2),e.def(x,"$respond_to_missing?",v=function(t,n){var r=this;return null==n&&(n=!1),e.hasOwnProperty.call(r.native,t)},v.$$arity=-2),e.def(x,"$method_missing",m=function(n){var r,$=m.$$p,o=$||a,s=this,u=a;return $&&(m.$$p=null),$&&(m.$$p=null),r=e.slice.call(arguments,1,arguments.length),"="===n.charAt(n.length-1)?(u=[n.$slice(0,t(n.$length(),1)),r["$[]"](0)],l(s,"[]=",e.to_a(u)),u[t(u.length,1)]):l(i("::","Native"),"call",[s.native,n].concat(e.to_a(r)),o.$to_proc())},m.$$arity=-2),e.def(x,"$nil?",g=function(){return!1},g.$$arity=0),e.def(x,"$is_a?",b=function(t){var n=this;return e.is_a(n,t)},b.$$arity=1),d(x,"kind_of?","is_a?"),e.def(x,"$instance_of?",w=function(e){return this.$$class===e},w.$$arity=1),e.def(x,"$class",k=function(){return this.$$class},k.$$arity=0),e.def(x,"$to_a",O=function(e){var t=O.$$p,n=t||a,r=this;return t&&(O.$$p=null),t&&(O.$$p=null),null==e&&(e=c([],{})),l(i(i("::","Native"),"Array"),"new",[r.native,e],n.$to_proc()).$to_a()},O.$$arity=-1),e.def(x,"$inspect",E=function(){return"#<Native:"+String(this.native)+">"},E.$$arity=0)}(o($,"Native"),o($,"BasicObject"),$),function(r,$super,$){var s,l,p,y,v,m,g,b=f(r,null,"Array"),w=[b].concat($);b.$$prototype.named=b.$$prototype.native=b.$$prototype.get=b.$$prototype.block=b.$$prototype.set=b.$$prototype.length=a,b.$include(i(o(w,"Native"),"Wrapper")),b.$include(o(w,"Enumerable")),e.def(b,"$initialize",s=function(e,t){var n=s.$$p,r=n||a,$=this,i=a,l=a,p=a;return n&&(s.$$p=null),n&&(s.$$p=null),null==t&&(t=c([],{})),_($,h($,"initialize",s,!1,!0),"initialize",[e],null),$.get=u(i=t["$[]"]("get"))?i:t["$[]"]("access"),$.named=t["$[]"]("named"),$.set=u(l=t["$[]"]("set"))?l:t["$[]"]("access"),$.length=u(p=t["$[]"]("length"))?p:"length",$.block=r,u(null==$.$length())?$.$raise(o(w,"ArgumentError"),"no length found on the array-like object"):a},s.$$arity=-2),e.def(b,"$each",l=function(){var t=l.$$p,n=t||a,r=this;if(t&&(l.$$p=null),t&&(l.$$p=null),!u(n))return r.$enum_for("each");for(var $=0,i=r.$length();$<i;$++)e.yield1(n,r["$[]"]($));return r},l.$$arity=0),e.def(b,"$[]",p=function(e){var t=this,n=a,r=a;return r=e,n=o(w,"String")["$==="](r)||o(w,"Symbol")["$==="](r)?u(t.named)?t.native[t.named](e):t.native[e]:o(w,"Integer")["$==="](r)?u(t.get)?t.native[t.get](e):t.native[e]:a,u(n)?u(t.block)?t.block.$call(n):t.$Native(n):a},p.$$arity=1),e.def(b,"$[]=",y=function(e,t){var n=this;return u(n.set)?n.native[n.set](e,o(w,"Native").$convert(t)):n.native[e]=o(w,"Native").$convert(t)},y.$$arity=2),e.def(b,"$last",v=function(e){var r=this,$=a,i=a;if(null==e&&(e=a),u(e)){for($=t(r.$length(),1),i=[];u(n($,0));)i["$<<"](r["$[]"]($)),$=t($,1);return i}return r["$[]"](t(r.$length(),1))},v.$$arity=-1),e.def(b,"$length",m=function(){var e=this;return e.native[e.length]},m.$$arity=0),d(b,"to_ary","to_a"),e.def(b,"$inspect",g=function(){return this.$to_a().$inspect()},g.$$arity=0)}(o($,"Native"),0,$),function(t,$super,n){var r,$=f(t,null,"Numeric");[$].concat(n);e.def($,"$to_n",r=function(){return this.valueOf()},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Proc");[$].concat(n);e.def($,"$to_n",r=function(){return this},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"String");[$].concat(n);e.def($,"$to_n",r=function(){return this.valueOf()},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Regexp");[$].concat(n);e.def($,"$to_n",r=function(){return this.valueOf()},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"MatchData");[$].concat(n);$.$$prototype.matches=a,e.def($,"$to_n",r=function(){return this.matches},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Struct"),i=[$].concat(n);e.def($,"$to_n",r=function(){var e,t=this,n=a;return n={},l(t,"each_pair",[],((e=function(t,r){null==e.$$s||e.$$s;return null==t&&(t=a),null==r&&(r=a),n[t]=o(i,"Native").$try_convert(r,r)}).$$s=t,e.$$arity=2,e)),n},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Array"),a=[$].concat(n);e.def($,"$to_n",r=function(){for(var e=this,t=[],n=0,r=e.length;n<r;n++){var $=e[n];t.push(o(a,"Native").$try_convert($,$))}return t},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Boolean");[$].concat(n);e.def($,"$to_n",r=function(){return this.valueOf()},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Time");[$].concat(n);e.def($,"$to_n",r=function(){return this},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"NilClass");[$].concat(n);e.def($,"$to_n",r=function(){return null},r.$$arity=0)}($[0],0,$),u(o($,"Hash")["$method_defined?"]("_initialize"))||function(t,$super,n){var r,$,i=f(t,null,"Hash"),s=[i].concat(n);d(i,"_initialize","initialize"),e.def(i,"$initialize",r=function(e){var t=r.$$p,n=t||a,$=this;if(t&&(r.$$p=null),t&&(r.$$p=null),null!=e&&(e.constructor===undefined||e.constructor===Object)){var i,u,c=$.$$smap,p=$.$$keys;for(i in e)!(u=e[i])||u.constructor!==undefined&&u.constructor!==Object?u&&u.$$is_array?(u=u.map(function(e){return!e||e.constructor!==undefined&&e.constructor!==Object?$.$Native(e):o(s,"Hash").$new(e)}),c[i]=u):c[i]=$.$Native(u):c[i]=o(s,"Hash").$new(u),p.push(i);return $}return l($,"_initialize",[e],n.$to_proc())},r.$$arity=-1),e.def(i,"$to_n",$=function(){for(var e,t,n=this,r={},$=n.$$keys,a=n.$$smap,i=0,u=$.length;i<u;i++)t=(e=$[i]).$$is_string?a[e]:(e=e.key).value,r[e]=o(s,"Native").$try_convert(t,t);return r},$.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$=f(t,null,"Module");[$].concat(n);e.def($,"$native_module",r=function(){var t=this;return e.global[t.$name()]=t},r.$$arity=0)}($[0],0,$),function(t,$super,n){var r,$,a=f(t,null,"Class"),i=[a].concat(n);e.def(a,"$native_alias",r=function(e,t){var n=this,r=n.prototype["$"+t];r||n.$raise(o(i,"NameError").$new("undefined method `"+t+"' for class `"+n.$inspect()+"'",t)),n.prototype[e]=r},r.$$arity=2),e.def(a,"$native_class",$=function(){var e=this;return e.$native_module(),e["new"]=e.$new},$.$$arity=0)}($[0],0,$),y.$=y.global=r.$Native(e.global)},Opal.modules["opal/jquery/constants"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.truthy;return e.add_stubs(["$require","$raise"]),t.$require("native"),a($(n,"JQUERY_CLASS","skip_raise")?"constant":r)?r:a(!!e.global.jQuery)?e.const_set(n[0],"JQUERY_CLASS",e.const_set(n[0],"JQUERY_SELECTOR",e.global.jQuery)):a(!!e.global.Zepto)?(e.const_set(n[0],"JQUERY_SELECTOR",e.global.Zepto),e.const_set(n[0],"JQUERY_CLASS",e.global.Zepto.zepto.Z)):t.$raise($(n,"NameError"),"Can't find jQuery or Zepto. jQuery must be included before opal-jquery")},Opal.modules["opal/jquery/element"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.alias,s=e.truthy,u=e.send2,l=e.find_super;return e.add_stubs(["$require","$to_n","$include","$each","$alias_native","$attr_reader","$call","$nil?","$raise","$is_a?","$has_key?","$delete","$from_object","$gsub","$upcase","$[]","$compact","$map","$respond_to?","$<<","$Native","$arity","$new"]),t.$require("native"),t.$require("opal/jquery/constants"),function(t,$super,n){var c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K,X,Y,V,G,J,Z,Q,ee,te,ne=a(t,$super,"Element"),re=[ne].concat(n),$e=$(re,"JQUERY_SELECTOR").$to_n();return ne.$include($(re,"Enumerable")),e.defs(ne,"$find",c=function(e){return $e(e)},c.$$arity=1),e.defs(ne,"$[]",p=function(e){return $e(e)},p.$$arity=1),e.defs(ne,"$id",d=function(e){var t=document.getElementById(e);return t?$e(t):r},d.$$arity=1),e.defs(ne,"$new",f=function(e){return null==e&&(e="div"),$e(document.createElement(e))},f.$$arity=-1),e.defs(ne,"$parse",_=function(e){return $e.parseHTML?$e($e.parseHTML(e)):$e(e)},_.$$arity=1),e.defs(ne,"$expose",h=function(){var t,n,$=this;return t=e.slice.call(arguments,0,arguments.length),i(t,"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=r),t.$alias_native(e)}).$$s=$,n.$$arity=1,n))},h.$$arity=-1),ne.$attr_reader("selector"),ne.$alias_native("after"),ne.$alias_native("before"),ne.$alias_native("parent"),ne.$alias_native("parents"),ne.$alias_native("prev"),ne.$alias_native("remove"),ne.$alias_native("hide"),ne.$alias_native("show"),ne.$alias_native("toggle"),ne.$alias_native("children"),ne.$alias_native("blur"),ne.$alias_native("closest"),ne.$alias_native("detach"),ne.$alias_native("focus"),ne.$alias_native("find"),ne.$alias_native("next"),ne.$alias_native("siblings"),ne.$alias_native("text"),ne.$alias_native("trigger"),ne.$alias_native("append"),ne.$alias_native("prepend"),ne.$alias_native("serialize"),ne.$alias_native("is"),ne.$alias_native("filter"),ne.$alias_native("not"),ne.$alias_native("last"),ne.$alias_native("wrap"),ne.$alias_native("stop"),ne.$alias_native("clone"),ne.$alias_native("empty"),ne.$alias_native("get"),e.def(ne,"$prop",y=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),i($(re,"Native"),"call",[n,"prop"].concat(e.to_a(t)))},y.$$arity=-1),o(ne,"succ","next"),o(ne,"<<","append"),ne.$alias_native("add_class","addClass"),ne.$alias_native("append_to","appendTo"),ne.$alias_native("has_class?","hasClass"),ne.$alias_native("html=","html"),ne.$alias_native("index"),ne.$alias_native("is?","is"),ne.$alias_native("remove_attr","removeAttr"),ne.$alias_native("remove_class","removeClass"),ne.$alias_native("replace_all","replaceAll"),ne.$alias_native("replace_with","replaceWith"),ne.$alias_native("select"),ne.$alias_native("submit"),ne.$alias_native("click"),ne.$alias_native("text=","text"),ne.$alias_native("toggle_class","toggleClass"),ne.$alias_native("value=","val"),ne.$alias_native("scroll_top=","scrollTop"),ne.$alias_native("scroll_top","scrollTop"),ne.$alias_native("scroll_left=","scrollLeft"),ne.$alias_native("scroll_left","scrollLeft"),ne.$alias_native("remove_attribute","removeAttr"),ne.$alias_native("slide_down","slideDown"),ne.$alias_native("slide_up","slideUp"),ne.$alias_native("slide_toggle","slideToggle"),ne.$alias_native("fade_toggle","fadeToggle"),ne.$alias_native("height=","height"),ne.$alias_native("width=","width"),ne.$alias_native("outer_width","outerWidth"),ne.$alias_native("outer_height","outerHeight"),e.def(ne,"$to_n",v=function(){return this},v.$$arity=0),e.def(ne,"$[]",m=function(e){var t=this.attr(e);return t===undefined?r:t},m.$$arity=1),e.def(ne,"$[]=",g=function(e,t){var n=this;return s(t["$nil?"]())?n.removeAttr(e):n.attr(e,t)},g.$$arity=2),e.def(ne,"$attr",b=function(){var t,n=this;switch((t=e.slice.call(arguments,0,arguments.length)).length){case 1:var a=n.attr(t[0]);return null==a?r:a;case 2:return n.attr(t[0],t[1]);default:n.$raise($(re,"ArgumentError"),"#attr only accepts 1 or 2 arguments")}},b.$$arity=-1),e.def(ne,"$has_attribute?",w=function(e){return this.attr(e)!==undefined},w.$$arity=1),e.def(ne,"$append_to_body",k=function(){return this.appendTo(document.body)},k.$$arity=0),e.def(ne,"$append_to_head",O=function(){return this.appendTo(document.head)},O.$$arity=0),e.def(ne,"$at",E=function(e){var t=this,n=t.length;return e<0&&(e+=n),e<0||e>=n?r:$e(t[e])},E.$$arity=1),e.def(ne,"$class_name",x=function(){var e=this[0];return e&&e.className||""},x.$$arity=0),e.def(ne,"$class_name=",S=function(e){for(var t=this,n=0,r=t.length;n<r;n++)t[n].className=e;return t},S.$$arity=1),e.def(ne,"$css",q=function(e,t){var n=this,a=r;return null==t&&(t=r),s(s(a=t["$nil?"]())?e["$is_a?"]($(re,"String")):a)?n.css(e):(s(e["$is_a?"]($(re,"Hash")))?n.css(e.$to_n()):n.css(e,t),n)},q.$$arity=-2),e.def(ne,"$animate",N=function(e){var t=N.$$p,n=t||r,$=this,a=r;return t&&(N.$$p=null),t&&(N.$$p=null),a=s(e["$has_key?"]("speed"))?e.$delete("speed"):400,n!==r?$.animate(e.$to_n(),a,n):$.animate(e.$to_n(),a)},N.$$arity=1),e.def(ne,"$data",C=function(){var t,n=this;t=e.slice.call(arguments,0,arguments.length);var a=n.data.apply(n,t);return"object"!=typeof a||a instanceof $(re,"JQUERY_CLASS")||(a=$(re,"JSON").$from_object(a)),null==a?r:a},C.$$arity=-1),e.def(ne,"$effect",z=function(t){var n,$,a,o=z.$$p,u=o||r,l=this;return o&&(z.$$p=null),o&&(z.$$p=null),n=e.slice.call(arguments,1,arguments.length),t=i(t,"gsub",[/_\w/],(($=function(e){null==$.$$s||$.$$s;return null==e&&(e=r),e["$[]"](1).$upcase()}).$$s=l,$.$$arity=1,$)),(n=i(n,"map",[],(a=function(e){null==a.$$s||a.$$s;return null==e&&(e=r),s(e["$respond_to?"]("to_n"))?e.$to_n():r},a.$$s=l,a.$$arity=1,a)).$compact())["$<<"](function(){u!==r&&u.$call()}),l[t].apply(l,n)},z.$$arity=-2),e.def(ne,"$visible?",I=function(){return this.is(":visible")},I.$$arity=0),e.def(ne,"$offset",D=function(){var e=this;return e.$Native(e.offset())},D.$$arity=0),e.def(ne,"$each",H=function(){var t=H.$$p,n=t||r,$=this;t&&(H.$$p=null);for(var a=0,i=$.length;a<i;a++)e.yield1(n,$e($[a]));return $},H.$$arity=0),e.def(ne,"$first",A=function(){var e=this;return e.length?e.first():r},A.$$arity=0),e.def(ne,"$html",j=function(e){var t=this;return null!=e?t.html(e):t.html()||""},j.$$arity=-1),e.def(ne,"$id",M=function(){var e=this[0];return e&&e.id||""},M.$$arity=0),e.def(ne,"$id=",R=function(e){var t=this,n=t[0];return n&&(n.id=e),t},R.$$arity=1),e.def(ne,"$tag_name",T=function(){var e=this;return e.length>0?e[0].tagName.toLowerCase():r},T.$$arity=0),e.def(ne,"$inspect",B=function(){var e=this;if(e[0]===document)return"#<Element [document]>";if(e[0]===window)return"#<Element [window]>";for(var t,n,r,$=[],a=0,i=e.length;a<i;a++){if(!(n=e[a]).tagName)return"#<Element ["+n.toString()+"]";r="<"+n.tagName.toLowerCase(),(t=n.id)&&(r+=' id="'+t+'"'),(t=n.className)&&(r+=' class="'+t+'"'),$.push(r+">")}return"#<Element ["+$.join(", ")+"]>"},B.$$arity=0),e.def(ne,"$to_s",P=function(){for(var e,t=this,n=[],r=0,$=t.length;r<$;r++)e=t[r],n.push(e.outerHTML);return n.join(", ")},P.$$arity=0),e.def(ne,"$length",L=function(){return this.length},L.$$arity=0),e.def(ne,"$any?",F=function(){return this.length>0},F.$$arity=0),e.def(ne,"$empty?",U=function(){return 0===this.length},U.$$arity=0),o(ne,"empty?","none?"),e.def(ne,"$on",W=function(e,t){var n=W.$$p,a=n||r,i=this;n&&(W.$$p=null),n&&(W.$$p=null),null==t&&(t=r);var o=0!==a.$arity(),s=function(){for(var e=new Array(arguments.length),t=0,n=e.length;t<n;t++)e[t]=arguments[t];return o&&e[0].preventDefault&&(e[0]=$(re,"Event").$new(e[0])),a.apply(null,e)};return a.$$jqwrap=s,t==r?i.on(e,s):i.on(e,t,s),a},W.$$arity=-2),e.def(ne,"$one",K=function(e,t){var n=K.$$p,a=n||r,i=this;n&&(K.$$p=null),n&&(K.$$p=null),null==t&&(t=r);var o=0!==a.$arity(),s=function(){for(var e=new Array(arguments.length),t=0,n=e.length;t<n;t++)e[t]=arguments[t];return o&&e[0].preventDefault&&(e[0]=$(re,"Event").$new(e[0])),a.apply(null,e)};return a.$$jqwrap=s,t==r?i.one(e,s):i.one(e,t,s),a},K.$$arity=-2),e.def(ne,"$off",X=function(e,t,n){var $=this;return null==n&&(n=r),null==t?$.off(e):n===r?$.off(e,t.$$jqwrap):$.off(e,t,n.$$jqwrap)},X.$$arity=-3),e.def(ne,"$serialize_array",Y=function(){var e,t=this;return i(t.serializeArray(),"map",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=r),$(re,"Hash").$new(t)}).$$s=t,e.$$arity=1,e))},Y.$$arity=0),o(ne,"size","length"),e.def(ne,"$value",V=function(){var e=r;return s(e=this.val())?e:""},V.$$arity=0),e.def(ne,"$height",G=function(){var e=r;return s(e=this.height())?e:r},G.$$arity=0),e.def(ne,"$width",J=function(){var e=r;return s(e=this.width())?e:r},J.$$arity=0),e.def(ne,"$position",Z=function(){var e=this;return e.$Native(e.position())},Z.$$arity=0),e.def(ne,"$==",Q=function(e){return this.is(e)},Q.$$arity=1),e.def(ne,"$respond_to_missing?",ee=function(e,t){var n=ee.$$p,r=this;return n&&(ee.$$p=null),"function"==typeof r[e]||u(r,l(r,"respond_to_missing?",ee,!1,!0),"respond_to_missing?",[e,t],n)},ee.$$arity=2),e.def(ne,"$method_missing",te=function(t){var n,$=te.$$p,a=$||r,i=this;$&&(te.$$p=null),$&&(te.$$p=null),n=e.slice.call(arguments,1,arguments.length),a!==r&&n["$<<"](a);var o=i[t];return"function"==typeof o?o.apply(i,n.$to_n()):u(i,l(i,"method_missing",te,!1,!0),"method_missing",[t].concat(e.to_a(n)),$)},te.$$arity=-2),r&&"method_missing"}(n[0],$(n,"JQUERY_CLASS").$to_n(),n)},Opal.modules["opal/jquery/window"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.send,l=e.gvars;return e.add_stubs(["$require","$include","$find","$on","$element","$to_proc","$off","$trigger","$new"]),t.$require("opal/jquery/element"),function(t,n){var l=[i(t,"Browser")].concat(n);(function(t,$super,n){var i,l,c,p,d,f=o(t,null,"Window"),_=[f].concat(n);f.$$prototype.element=r,f.$include(s((i=a(_,"Native","skip_raise"))&&$(i,"Wrapper","skip_raise")?"constant":r)?$(a(_,"Native"),"Wrapper"):a(_,"Native")),e.def(f,"$element",l=function(){var e=this,t=r;return e.element=s(t=e.element)?t:a(_,"Element").$find(window)},l.$$arity=0),e.def(f,"$on",c=function(){var t,n=c.$$p,$=n||r,a=this;return n&&(c.$$p=null),n&&(c.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$element(),"on",e.to_a(t),$.$to_proc())},c.$$arity=-1),e.def(f,"$off",p=function(){var t,n=p.$$p,$=n||r,a=this;return n&&(p.$$p=null),n&&(p.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$element(),"off",e.to_a(t),$.$to_proc())},p.$$arity=-1),e.def(f,"$trigger",d=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),u(n.$element(),"trigger",e.to_a(t))},d.$$arity=-1)})(l[0],0,l)}(n[0],n),e.const_set(n[0],"Window",$(a(n,"Browser"),"Window").$new(window)),l.window=a(n,"Window")},Opal.modules["opal/jquery/document"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.class_variable_set,s=e.truthy,u=e.class_variable_get,l=e.send,c=e.gvars;return e.add_stubs(["$require","$to_n","$call","$new","$ready?","$resolve","$module_function","$find","$extend"]),t.$require("opal/jquery/constants"),t.$require("opal/jquery/element"),function(t,n){var $=[i(t,"Browser")].concat(n);(function(t,n){var $,c,p,d,f,_,h,y=i(t,"DocumentMethods"),v=[y].concat(n);o(v[0],"@@__isReady",!1);var m=a(v,"JQUERY_SELECTOR").$to_n();e.def(y,"$ready?",$=function(){var e=$.$$p,t=e||r;return e&&($.$$p=null),e&&($.$$p=null),t!==r?s(u(v[0],"@@__isReady",!1))?t.$call():m(t):r},$.$$arity=0),e.def(y,"$ready",c=function(){var e,t=this,n=r;return n=a(v,"Promise").$new(),l(a(v,"Document"),"ready?",[],((e=function(){null==e.$$s||e.$$s;return n.$resolve()}).$$s=t,e.$$arity=0,e)),n},c.$$arity=0),y.$module_function("ready?"),l(y,"ready?",[],((p=function(){null==p.$$s||p.$$s;return o(v[0],"@@__isReady",!0)}).$$s=y,p.$$arity=0,p)),e.def(y,"$title",d=function(){return document.title},d.$$arity=0),e.def(y,"$title=",f=function(e){return document.title=e},f.$$arity=1),e.def(y,"$head",_=function(){return a(v,"Element").$find(document.head)},_.$$arity=0),e.def(y,"$body",h=function(){return a(v,"Element").$find(document.body)},h.$$arity=0)})($[0],$)}(n[0],n),e.const_set(n[0],"Document",a(n,"Element").$find(document)),a(n,"Document").$extend($(a(n,"Browser"),"DocumentMethods")),c.document=a(n,"Document")},Opal.modules["opal/jquery/event"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.alias;return e.add_stubs(["$require","$to_n","$stop","$prevent"]),t.$require("opal/jquery/constants"),function(t,$super,n){var o,s,u,l,c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N=a(t,null,"Event"),C=[N].concat(n);N.$$prototype.native=r;var z=$(C,"JQUERY_SELECTOR").$to_n();return e.def(N,"$initialize",o=function(e){return this.native=e},o.$$arity=1),e.def(N,"$to_n",s=function(){return this.native},s.$$arity=0),e.def(N,"$[]",u=function(e){return this.native[e]},u.$$arity=1),e.def(N,"$type",l=function(){return this.native.type},l.$$arity=0),e.def(N,"$element",c=function(){return z(this.native.currentTarget)},c.$$arity=0),i(N,"current_target","element"),e.def(N,"$target",p=function(){return z(this.native.target)},p.$$arity=0),e.def(N,"$prevented?",d=function(){return this.native.isDefaultPrevented()},d.$$arity=0),e.def(N,"$prevent",f=function(){return this.native.preventDefault()},f.$$arity=0),e.def(N,"$stopped?",_=function(){return this.native.isPropagationStopped()},_.$$arity=0),e.def(N,"$stop",h=function(){return this.native.stopPropagation()},h.$$arity=0),e.def(N,"$stop_immediate",y=function(){return this.native.stopImmediatePropagation()},y.$$arity=0),e.def(N,"$kill",v=function(){var e=this;return e.$stop(),e.$prevent()},v.$$arity=0),e.def(N,"$page_x",m=function(){return this.native.pageX},m.$$arity=0),e.def(N,"$page_y",g=function(){return this.native.pageY},g.$$arity=0),e.def(N,"$touch_x",b=function(){return this.native.originalEvent.touches[0].pageX},b.$$arity=0),e.def(N,"$touch_y",w=function(){return this.native.originalEvent.touches[0].pageY},w.$$arity=0),e.def(N,"$ctrl_key",k=function(){return this.native.ctrlKey},k.$$arity=0),e.def(N,"$meta_key",O=function(){return this.native.metaKey},O.$$arity=0),e.def(N,"$alt_key",E=function(){return this.native.altKey},E.$$arity=0),e.def(N,"$shift_key",x=function(){return this.native.shiftKey},x.$$arity=0),e.def(N,"$key_code",S=function(){return this.native.keyCode},S.$$arity=0),e.def(N,"$which",q=function(){return this.native.which},q.$$arity=0),i(N,"default_prevented?","prevented?"),i(N,"prevent_default","prevent"),i(N,"propagation_stopped?","stopped?"),i(N,"stop_propagation","stop"),i(N,"stop_immediate_propagation","stop_immediate")}(n[0],0,n)},Opal.modules.json=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send,u=e.hash2,l=e.truthy;return e.add_stubs(["$raise","$new","$push","$[]=","$-","$[]","$create_id","$json_create","$const_get","$attr_accessor","$create_id=","$===","$parse","$generate","$from_object","$merge","$to_json","$responds_to?","$to_io","$write","$to_s","$to_a","$strftime"]),function(n,c){function p(e){try{return JSON.parse(e)}catch(t){b.$raise($(a(w,"JSON"),"ParserError"),t.message)}}function d(n,i){var o,u,l,c,p,f;switch(typeof n){case"string":case"number":return n;case"boolean":return!!n;case"undefined":return r;case"object":if(!n)return r;if(n.$$is_array){for(u=i.array_class.$new(),c=0,p=n.length;c<p;c++)u.$push(d(n[c],i));return u}for(f in l=i.object_class.$new(),n)O.call(n,f)&&(k=[f,d(n[f],i)],s(l,"[]=",e.to_a(k)),k[t(k.length,1)]);return i.parse||(o=l["$[]"](a(w,"JSON").$create_id()))==r?l:$("::","Object").$const_get(o).$json_create(l)}}var f,_,h,y,v,m,g,b=i(n,"JSON"),w=[b].concat(c),k=r;!function(e,$super,t){[o(e,$super,"JSONError")].concat(t)}(w[0],a(w,"StandardError"),w),function(e,$super,t){[o(e,$super,"ParserError")].concat(t)}(w[0],a(w,"JSONError"),w);var O=e.hasOwnProperty;(function(e,t){[e].concat(t);e.$attr_accessor("create_id")})(e.get_singleton_class(b),w),k=["json_class"],s(b,"create_id=",e.to_a(k)),k[t(k.length,1)],e.defs(b,"$[]",f=function(e,t){var n=this;return null==t&&(t=u([],{})),l(a(w,"String")["$==="](e))?n.$parse(e,t):n.$generate(e,t)},f.$$arity=-2),e.defs(b,"$parse",_=function(e,t){var n=this;return null==t&&(t=u([],{})),n.$from_object(p(e),t.$merge(u(["parse"],{parse:!0})))},_.$$arity=-2),e.defs(b,"$parse!",h=function(e,t){var n=this;return null==t&&(t=u([],{})),n.$parse(e,t)},h.$$arity=-2),e.defs(b,"$load",y=function(e,t){var n=this;return null==t&&(t=u([],{})),n.$from_object(p(e),t)},y.$$arity=-2),e.defs(b,"$from_object",v=function(n,$){var i=r;return null==$&&($=u([],{})),l($["$[]"]("object_class"))||(i=["object_class",a(w,"Hash")],s($,"[]=",e.to_a(i)),i[t(i.length,1)]),l($["$[]"]("array_class"))||(i=["array_class",a(w,"Array")],s($,"[]=",e.to_a(i)),i[t(i.length,1)]),d(n,$.$$smap)},v.$$arity=-2),e.defs(b,"$generate",m=function(e,t){return null==t&&(t=u([],{})),e.$to_json(t)},m.$$arity=-2),e.defs(b,"$dump",g=function(e,t,n){var $=r;return null==t&&(t=r),null==n&&(n=r),$=this.$generate(e),l(t)?(l(t["$responds_to?"]("to_io"))&&(t=t.$to_io()),t.$write($),t):$},g.$$arity=-2)}(n[0],n),function(t,$super,n){var r,$=o(t,null,"Object");[$].concat(n);e.def($,"$to_json",r=function(){return this.$to_s().$to_json()},r.$$arity=0)}(n[0],0,n),function(t,n){var r,$=i(t,"Enumerable");[$].concat(n);e.def($,"$to_json",r=function(){return this.$to_a().$to_json()},r.$$arity=0)}(n[0],n),function(t,$super,n){var r,$=o(t,null,"Array");[$].concat(n);e.def($,"$to_json",r=function(){for(var e=this,t=[],n=0,r=e.length;n<r;n++)t.push(e[n].$to_json());return"["+t.join(",")+"]"},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"Boolean");[$].concat(n);e.def($,"$to_json",r=function(){return 1==this?"true":"false"},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"Hash");[$].concat(n);e.def($,"$to_json",r=function(){for(var e,t,n=this,r=[],$=0,a=n.$$keys,i=a.length;$<i;$++)(e=a[$]).$$is_string?t=n.$$smap[e]:(t=e.value,e=e.key),r.push(e.$to_s().$to_json()+":"+t.$to_json());return"{"+r.join(",")+"}"},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"NilClass");[$].concat(n);e.def($,"$to_json",r=function(){return"null"},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"Numeric");[$].concat(n);e.def($,"$to_json",r=function(){return this.toString()},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"String");[$].concat(n);e.def($,"$to_json",r=function(){var e=this;return JSON.stringify(e)},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var r,$=o(t,null,"Time");[$].concat(n);e.def($,"$to_json",r=function(){return this.$strftime("%FT%T%z").$to_json()},r.$$arity=0)}(n[0],0,n),function(t,$super,n){var $,a,i=o(t,null,"Date");[i].concat(n);return e.def(i,"$to_json",$=function(){return this.$to_s().$to_json()},$.$$arity=0),e.def(i,"$as_json",a=function(){return this.$to_s()},a.$$arity=0),r&&"as_json"}(n[0],0,n)},Opal.modules.promise=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var $=[],a=e.nil,i=(e.$$$,e.$$),o=e.klass,s=e.hash2,u=e.truthy,l=e.send,c=e.alias,p=e.send2,d=e.find_super;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$key?","$keys","$!=","$==","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$!","$error","$include?","$action","$realized?","$raise","$^","$call","$resolve!","$exception!","$any?","$each","$reject!","$there_can_be_only_one!","$then","$to_proc","$fail","$always","$trace","$class","$object_id","$+","$inspect","$rescue","$act?","$nil?","$prev","$push","$concat","$it","$proc","$reverse","$pop","$<=","$length","$shift","$-","$wait","$map","$reduce","$try","$tap","$all?","$find"]),function($,$super,f){var _,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W=o($,null,"Promise"),K=[W].concat(f);W.$$prototype.value=W.$$prototype.action=W.$$prototype.exception=W.$$prototype.realized=W.$$prototype.next=W.$$prototype.delayed=W.$$prototype.error=W.$$prototype.prev=a,e.defs(W,"$value",_=function(e){return this.$new().$resolve(e)},_.$$arity=1),e.defs(W,"$error",h=function(e){return this.$new().$reject(e)},h.$$arity=1),e.defs(W,"$when",y=function(){var t;return t=e.slice.call(arguments,0,arguments.length),i(K,"When").$new(t)},y.$$arity=-1),W.$attr_reader("error","prev","next"),e.def(W,"$initialize",v=function(e){var t=this;return null==e&&(e=s([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=a,t.error=a,t.delayed=!1,t.prev=a,t.next=[]},v.$$arity=-1),e.def(W,"$value",m=function(){var e=this;return u(i(K,"Promise")["$==="](e.value))?e.value.$value():e.value},m.$$arity=0),e.def(W,"$act?",g=function(){var e=this,t=a;return u(t=e.action["$key?"]("success"))?t:e.action["$key?"]("always")},g.$$arity=0),e.def(W,"$action",b=function(){return this.action.$keys()},b.$$arity=0),e.def(W,"$exception?",w=function(){return this.exception},w.$$arity=0),e.def(W,"$realized?",k=function(){return this.realized["$!="](!1)},k.$$arity=0),e.def(W,"$resolved?",O=function(){return this.realized["$=="]("resolve")},O.$$arity=0),e.def(W,"$rejected?",E=function(){return this.realized["$=="]("reject")},E.$$arity=0),e.def(W,"$^",x=function(e){var t=this;return e["$<<"](t),t["$>>"](e),e},x.$$arity=1),e.def(W,"$<<",S=function(e){var t=this;return t.prev=e,t},S.$$arity=1),e.def(W,"$>>",q=function(e){var t=this,n=a;return t.next["$<<"](e),u(t["$exception?"]())?e.$reject(t.delayed["$[]"](0)):u(t["$resolved?"]())?e.$resolve(u(t.delayed)?t.delayed["$[]"](0):t.$value()):u(t["$rejected?"]())&&(u(u(n=t.action["$key?"]("failure")["$!"]())?n:i(K,"Promise")["$==="](u(t.delayed)?t.delayed["$[]"](0):t.error))?e.$reject(u(t.delayed)?t.delayed["$[]"](0):t.$error()):u(e.$action()["$include?"]("always"))&&e.$reject(u(t.delayed)?t.delayed["$[]"](0):t.$error())),t},q.$$arity=1),e.def(W,"$resolve",N=function(t){var n=this,r=a,$=a,o=a;if(null==t&&(t=a),u(n["$realized?"]())&&n.$raise(i(K,"ArgumentError"),"the promise has already been realized"),u(i(K,"Promise")["$==="](t)))return t["$<<"](n.prev)["$^"](n);try{r=u($=n.action["$[]"]("success"))?$:n.action["$[]"]("always"),u(r)&&(t=r.$call(t)),n["$resolve!"](t)}catch(s){if(!e.rescue(s,[i(K,"Exception")]))throw s;o=s;try{n["$exception!"](o)}finally{e.pop_exception()}}return n},N.$$arity=-1),e.def(W,"$resolve!",C=function(e){var t,n=this;return n.realized="resolve",n.value=e,u(n.next["$any?"]())?l(n.next,"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),n.$resolve(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},C.$$arity=1),e.def(W,"$reject",z=function(t){var n=this,r=a,$=a,o=a;if(null==t&&(t=a),u(n["$realized?"]())&&n.$raise(i(K,"ArgumentError"),"the promise has already been realized"),u(i(K,"Promise")["$==="](t)))return t["$<<"](n.prev)["$^"](n);try{r=u($=n.action["$[]"]("failure"))?$:n.action["$[]"]("always"),u(r)&&(t=r.$call(t)),u(n.action["$key?"]("always"))?n["$resolve!"](t):n["$reject!"](t)}catch(s){if(!e.rescue(s,[i(K,"Exception")]))throw s;o=s;try{n["$exception!"](o)}finally{e.pop_exception()}}return n},z.$$arity=-1),e.def(W,"$reject!",I=function(e){var t,n=this;return n.realized="reject",n.error=e,u(n.next["$any?"]())?l(n.next,"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),n.$reject(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},I.$$arity=1),e.def(W,"$exception!",D=function(e){var t=this;return t.exception=!0,t["$reject!"](e)},D.$$arity=1),e.def(W,"$then",H=function(){var e=H.$$p,t=e||a,n=this;return e&&(H.$$p=null),e&&(H.$$p=null),n["$^"](i(K,"Promise").$new(s(["success"],{success:t})))},H.$$arity=0),e.def(W,"$then!",A=function(){var e=A.$$p,t=e||a,n=this;return e&&(A.$$p=null),e&&(A.$$p=null),n["$there_can_be_only_one!"](),l(n,"then",[],t.$to_proc())},A.$$arity=0),c(W,"do","then"),c(W,"do!","then!"),e.def(W,"$fail",j=function(){var e=j.$$p,t=e||a,n=this;return e&&(j.$$p=null),e&&(j.$$p=null),n["$^"](i(K,"Promise").$new(s(["failure"],{failure:t})))},j.$$arity=0),e.def(W,"$fail!",M=function(){var e=M.$$p,t=e||a,n=this;return e&&(M.$$p=null),e&&(M.$$p=null),n["$there_can_be_only_one!"](),l(n,"fail",[],t.$to_proc())},M.$$arity=0),c(W,"rescue","fail"),c(W,"catch","fail"),
c(W,"rescue!","fail!"),c(W,"catch!","fail!"),e.def(W,"$always",R=function(){var e=R.$$p,t=e||a,n=this;return e&&(R.$$p=null),e&&(R.$$p=null),n["$^"](i(K,"Promise").$new(s(["always"],{always:t})))},R.$$arity=0),e.def(W,"$always!",T=function(){var e=T.$$p,t=e||a,n=this;return e&&(T.$$p=null),e&&(T.$$p=null),n["$there_can_be_only_one!"](),l(n,"always",[],t.$to_proc())},T.$$arity=0),c(W,"finally","always"),c(W,"ensure","always"),c(W,"finally!","always!"),c(W,"ensure!","always!"),e.def(W,"$trace",B=function(e){var t=B.$$p,n=t||a,r=this;return t&&(B.$$p=null),t&&(B.$$p=null),null==e&&(e=a),r["$^"](i(K,"Trace").$new(e,n))},B.$$arity=-1),e.def(W,"$trace!",P=function(){var t,n=P.$$p,r=n||a,$=this;return n&&(P.$$p=null),n&&(P.$$p=null),t=e.slice.call(arguments,0,arguments.length),$["$there_can_be_only_one!"](),l($,"trace",e.to_a(t),r.$to_proc())},P.$$arity=-1),e.def(W,"$there_can_be_only_one!",L=function(){var e=this;return u(e.next["$any?"]())?e.$raise(i(K,"ArgumentError"),"a promise has already been chained"):a},L.$$arity=0),e.def(W,"$inspect",F=function(){var e=this,n=a,r=a;return n="#<"+e.$class()+"("+e.$object_id()+")",u(e.next["$any?"]())&&(n=t(n," >> "+e.next.$inspect())),n=t(n,u(e["$realized?"]())?": "+(u(r=e.value)?r:e.error).$inspect()+">":">")},F.$$arity=0),c(W,"to_v1","itself"),e.def(W,"$to_v2",U=function(){var e,t,n=this,r=a;return r=i(K,"PromiseV2").$new(),l(l(n,"then",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=a),r.$resolve(t)}).$$s=n,e.$$arity=1,e)),"rescue",[],((t=function(e){null==t.$$s||t.$$s;return null==e&&(e=a),r.$reject(e)}).$$s=n,t.$$arity=1,t)),r},U.$$arity=0),c(W,"to_n","to_v2"),function(t,$super,$){var c,f,_=o(t,$super,"Trace"),h=[_].concat($);e.defs(_,"$it",c=function(e){var t=this,n=a,r=a,$=a;return n=[],u(u(r=e["$act?"]())?r:e.$prev()["$nil?"]())&&n.$push(e.$value()),$=e.$prev(),u($)?n.$concat(t.$it($)):n},c.$$arity=1),e.def(_,"$initialize",f=function(t,$){var o,c=f.$$p,_=this;return c&&(f.$$p=null),_.depth=t,p(_,d(_,"initialize",f,!1,!0),"initialize",[s(["success"],{success:l(_,"proc",[],(o=function(){var s=null==o.$$s?this:o.$$s,c=a,p=a;return(c=i(h,"Trace").$it(s).$reverse()).$pop(),u(u(p=t)?n(t,c.$length()):p)&&c.$shift(r(c.$length(),t)),l($,"call",e.to_a(c))},o.$$s=_,o.$$arity=0,o))})],null)},f.$$arity=2)}(K[0],W,K),function(t,$super,n){var r,$,s,f,_,h,y,v=o(t,$super,"When"),m=[v].concat(n);v.$$prototype.wait=a,e.def(v,"$initialize",r=function(e){var t,n=r.$$p,$=this;return n&&(r.$$p=null),null==e&&(e=[]),p($,d($,"initialize",r,!1,!0),"initialize",[],null),$.wait=[],l(e,"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n.$wait(e)}).$$s=$,t.$$arity=1,t))},r.$$arity=-1),e.def(v,"$each",$=function(){var e,t=$.$$p,n=t||a,r=this;return t&&($.$$p=null),t&&($.$$p=null),u(n)||r.$raise(i(m,"ArgumentError"),"no block given"),l(r,"then",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=a),l(t,"each",[],n.$to_proc())}).$$s=r,e.$$arity=1,e))},$.$$arity=0),e.def(v,"$collect",s=function(){var e,t=s.$$p,n=t||a,r=this;return t&&(s.$$p=null),t&&(s.$$p=null),u(n)||r.$raise(i(m,"ArgumentError"),"no block given"),l(r,"then",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=a),i(m,"When").$new(l(t,"map",[],n.$to_proc()))}).$$s=r,e.$$arity=1,e))},s.$$arity=0),e.def(v,"$inject",f=function(){var t,n,r,$=f.$$p,i=$||a,o=this;return $&&(f.$$p=null),$&&(f.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,l(o,"then",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=a),l(t,"reduce",e.to_a(n),i.$to_proc())}).$$s=o,r.$$arity=1,r))},f.$$arity=-1),c(v,"map","collect"),c(v,"reduce","inject"),e.def(v,"$wait",_=function(e){var t,n=this;return u(i(m,"Promise")["$==="](e))||(e=i(m,"Promise").$value(e)),u(e["$act?"]())&&(e=e.$then()),n.wait["$<<"](e),l(e,"always",[],((t=function(){var e=null==t.$$s?this:t.$$s;return null==e.next&&(e.next=a),u(e.next["$any?"]())?e.$try():a}).$$s=n,t.$$arity=0,t)),n},_.$$arity=1),c(v,"and","wait"),e.def(v,"$>>",h=function(){var t,n,r=h.$$p,$=this;return r&&(h.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(p($,d($,">>",h,!1,!0),">>",e.to_a(t),r),"tap",[],((n=function(){return(null==n.$$s?this:n.$$s).$try()}).$$s=$,n.$$arity=0,n))},h.$$arity=-1),e.def(v,"$try",y=function(){var e=this,t=a;return u(l(e.wait,"all?",[],"realized?".$to_proc()))?(t=l(e.wait,"find",[],"rejected?".$to_proc()),u(t)?e.$reject(t.$error()):e.$resolve(l(e.wait,"map",[],"value".$to_proc()))):a},y.$$arity=0)}(K[0],W,K)}($[0],0,$),e.const_set($[0],"PromiseV1",i($,"Promise"))},Opal.modules["opal/jquery/http"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2,s=e.truthy;return e.add_stubs(["$require","$to_n","$each","$define_singleton_method","$send","$new","$define_method","$attr_reader","$delete","$update","$upcase","$succeed","$fail","$promise","$parse","$private","$tap","$proc","$ok?","$resolve","$reject","$from_object","$call"]),t.$require("json"),t.$require("native"),t.$require("promise"),t.$require("opal/jquery/constants"),function(t,$super,n){var u,l,c,p,d,f,_,h,y,v,m,g,b=a(t,null,"HTTP"),w=[b].concat(n);b.$$prototype.settings=b.$$prototype.payload=b.$$prototype.url=b.$$prototype.method=b.$$prototype.handler=b.$$prototype.json=b.$$prototype.body=b.$$prototype.ok=b.$$prototype.xhr=b.$$prototype.promise=b.$$prototype.status_code=r;var k=$(w,"JQUERY_SELECTOR").$to_n();return e.const_set(w[0],"ACTIONS",["get","post","put","delete","patch","head"]),i($(w,"ACTIONS"),"each",[],((u=function(e){var t,n,$=null==u.$$s?this:u.$$s;return null==e&&(e=r),i($,"define_singleton_method",[e],((t=function(n,$){var a=null==t.$$s?this:t.$$s,i=t.$$p,s=i||r;return i&&(t.$$p=null),null==n&&(n=r),null==$&&($=o([],{})),a.$new().$send(e,n,$,s)}).$$s=$,t.$$arity=-2,t)),i($,"define_method",[e],((n=function(t,$){var a=null==n.$$s?this:n.$$s,i=n.$$p,s=i||r;return i&&(n.$$p=null),null==t&&(t=r),null==$&&($=o([],{})),a.$send(e,t,$,s)}).$$s=$,n.$$arity=-2,n))}).$$s=b,u.$$arity=1,u)),e.defs(b,"$setup",l=function(){return $(w,"Hash").$new(k.ajaxSetup())},l.$$arity=0),e.defs(b,"$setup=",c=function(e){return k.ajaxSetup(e.$to_n())},c.$$arity=1),b.$attr_reader("body","error_message","method","status_code","url","xhr"),e.def(b,"$initialize",p=function(){var e=this;return e.settings=o([],{}),e.ok=!0},p.$$arity=0),e.def(b,"$send",d=function(e,t,n,$){var a,i=this,o=r,u=r;return i.method=e,i.url=t,i.payload=n.$delete("payload"),i.handler=$,i.settings.$update(n),o=(a=[i.settings.$to_n(),i.payload])[0],"string"==typeof(u=a[1])?o.data=u:u!=r&&(o.data=u.$to_json(),o.contentType="application/json"),o.url=i.url,o.type=i.method.$upcase(),o.success=function(e,t,n){return i.$succeed(e,t,n)},o.error=function(e,t,n){return i.$fail(e,t,n)},k.ajax(o),s(i.handler)?i:i.$promise()},d.$$arity=4),e.def(b,"$json",f=function(){var e=this,t=r;return e.json=s(t=e.json)?t:$(w,"JSON").$parse(e.body)},f.$$arity=0),e.def(b,"$ok?",_=function(){return this.ok},_.$$arity=0),e.def(b,"$get_header",h=function(e){var t=this.xhr.getResponseHeader(e);return null===t?r:t},h.$$arity=1),e.def(b,"$inspect",y=function(){var e=this;return"#<HTTP @url="+e.url+" @method="+e.method+">"},y.$$arity=0),b.$private(),e.def(b,"$promise",v=function(){var e,t=this;return s(t.promise)?t.promise:t.promise=i($(w,"Promise").$new(),"tap",[],((e=function(t){var n,$=null==e.$$s?this:e.$$s;return null==t&&(t=r),$.handler=i($,"proc",[],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=r),s(e["$ok?"]())?t.$resolve(e):t.$reject(e)}).$$s=$,n.$$arity=1,n))}).$$s=t,e.$$arity=1,e))},v.$$arity=0),e.def(b,"$succeed",m=function(e,t,n){var a=this;return a.body=e,a.xhr=n,a.status_code=n.status,"object"==typeof e&&(a.json=$(w,"JSON").$from_object(e)),s(a.handler)?a.handler.$call(a):r},m.$$arity=3),e.def(b,"$fail",g=function(e){var t=this;return t.body=e.responseText,t.xhr=e,t.status_code=e.status,t.ok=!1,s(t.handler)?t.handler.$call(t):r},g.$$arity=3),r&&"fail"}(n[0],0,n)},Opal.modules["opal/jquery/kernel"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module);return function(t,$){var a,i=r(t,"Kernel");[i].concat($);return e.def(i,"$alert",a=function(e){return alert(e),n},a.$$arity=1),n&&"alert"}(t[0],t)},Opal.modules["opal/jquery"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("opal/jquery/window"),t.$require("opal/jquery/document"),t.$require("opal/jquery/element"),t.$require("opal/jquery/event"),t.$require("opal/jquery/http"),t.$require("opal/jquery/kernel")},Opal.modules["opal-jquery"]=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("opal/jquery")},Opal.modules["paggio/utils"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.klass,a=e.module,i=e.send,o=e.truthy;return e.add_stubs(["$size","$min","$scan","$gsub","$proc","$===","$merge","$to_proc","$merge!"]),function(t,$super,s){var u=[$(t,null,"Paggio")].concat(s);return function(t,$){var s,u,l,c=a(t,"Utils"),p=[c].concat($);return e.defs(c,"$heredoc",s=function(t){var $=n;return $=function(){try{return t.$scan(/^[ \t]*(?=\S)/).$min().$size()}catch(n){if(!e.rescue(n,[r(p,"StandardError")]))throw n;try{return 0}finally{e.pop_exception()}}}(),t.$gsub(e.regexp(["^[ \\t]{",$,"}"]),"")},s.$$arity=1),e.defs(c,"$deep_merge",u=function(e,t){var $,a=this,s=n;return s=i(a,"proc",[],(($=function(e,t,a){null==$.$$s||$.$$s;var u=n;return null==e&&(e=n),null==t&&(t=n),null==a&&(a=n),o(o(u=r(p,"Hash")["$==="](t))?r(p,"Hash")["$==="](a):u)?i(t,"merge",[a],s.$to_proc()):a}).$$s=a,$.$$arity=3,$)),i(e,"merge",[t],s.$to_proc())},u.$$arity=2),e.defs(c,"$deep_merge!",l=function(e,t){var $,a=this,s=n;return s=i(a,"proc",[],(($=function(e,t,a){null==$.$$s||$.$$s;var u=n;return null==e&&(e=n),null==t&&(t=n),null==a&&(a=n),o(o(u=r(p,"Hash")["$==="](t))?r(p,"Hash")["$==="](a):u)?(i(t,"merge!",[a],s.$to_proc()),t):a}).$$s=a,$.$$arity=3,$)),i(e,"merge!",[t],s.$to_proc())},l.$$arity=2),n&&"deep_merge!"}(u[0],u)}(t[0],0,t)},Opal.modules["paggio/html/helpers"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.truthy;return e.add_stubs(["$define_method","$instance_exec","$to_proc","$do","$defhelper","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s,u,l=a(n,$super,"Element");[l].concat($);return e.defs(l,"$defhelper",s=function(t){var n,$=s.$$p,a=$||r,u=this;return $&&(s.$$p=null),$&&(s.$$p=null),i(u,"define_method",[t],((n=function(){var t,$=null==n.$$s?this:n.$$s,s=n.$$p,u=s||r;return s&&(n.$$p=null),t=e.slice.call(arguments,0,arguments.length),i($,"instance_exec",e.to_a(t),a.$to_proc()),o(u)&&i($,"do",[],u.$to_proc()),$}).$$s=u,n.$$arity=-1,n))},s.$$arity=1),e.defs(l,"$defhelper!",u=function(n,$){var a,o=this;return null==$&&($=n),i(o,"defhelper",[n+"!"],((a=function(){var n=null==a.$$s?this:a.$$s,o=r;return null==n.attributes&&(n.attributes=r),o=[$,!0],i(n.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=o,a.$$arity=0,a))},u.$$arity=-2),r&&"defhelper!"}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/a"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-","$defhelper!","$<<"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u,l=a(n,$super,"A");[l].concat($);return i(o(["href","url","rel","relative","target","type","lang","language","media"],{href:"href",url:"href",rel:"rel",relative:"rel",target:"target",type:"type",lang:"hreflang",language:"hreflang",media:"media"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=l,s.$$arity=2,s)),l["$defhelper!"]("download"),l["$defhelper!"]("ping"),i(l,"defhelper",["text"],((u=function(e){var t=null==u.$$s?this:u.$$s;return null==e&&(e=r),t["$<<"](e)}).$$s=l,u.$$arity=1,u))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/base"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Base");[u].concat($);return i(o(["href","url","target"],{href:"href",url:"href",target:"target"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/blockquote"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send;return e.add_stubs(["$defhelper","$to_s","$[]=","$-"]),function(n,$super,o){var s=[a(n,null,"Paggio")].concat(o);return function(n,$super,o){var s=[a(n,$super,"HTML")].concat(o);return function(n,$super,$){var o=a(n,$super,"Element"),s=[o].concat($);return function(n,$super,$){var o,s=a(n,$super,"Blockquote");[s].concat($);return i(s,"defhelper",["cite"],((o=function(n){var $=null==o.$$s?this:o.$$s,a=r;return null==$.attributes&&($.attributes=r),null==n&&(n=r),a=["cite",n.$to_s()],i($.attributes,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=s,o.$$arity=1,o))}(s[0],o,s)}(s[0],$(s,"BasicObject"),s)}(s[0],$(s,"BasicObject"),s)}(n[0],0,n)},Opal.modules["paggio/html/element/button"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-","$defhelper!"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Button");[u].concat($);return i(o(["form","name","type","value","action","encoding","method","target"],{form:"form",name:"name",type:"type",value:"value",action:"formaction",encoding:"formenctype",method:"formmethod",target:"formtarget"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s)),u["$defhelper!"]("autofocus"),u["$defhelper!"]("disabled")}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/canvas"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Canvas");[u].concat($);return i(o(["width","height"],{width:"width",height:"height"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/embed"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Embed");[u].concat($);return i(o(["type","height","width"],{type:"type",height:"height",width:"width"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/img"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u,l=a(n,$super,"Img");[l].concat($);return i(o(["src","url","alt","description","height","width","map"],{src:"src",url:"src",alt:"alt",description:"alt",height:"height",width:"width",map:"usemap"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=l,s.$$arity=2,s)),i(l,"defhelper",["map!"],((u=function(){var n=null==u.$$s?this:u.$$s,$=r;return null==n.attributes&&(n.attributes=r),$=["ismap",!0],i(n.attributes,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=l,u.$$arity=0,u))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/input"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Input");[u].concat($);return i(o(["type","name","value","size","place_holder","read_only","required","limit"],{type:"type",name:"name",value:"value",size:"size",place_holder:"placeholder",read_only:"readonly",required:"required",limit:"maxlength"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/link"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$to_s","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Link");[u].concat($);return i(o(["cross_origin","href","href_lang","media","rel","sizes","type"],{cross_origin:"crossorigin",href:"href",href_lang:"hreflang",media:"media",rel:"rel",sizes:"sizes",type:"type"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$.$to_s()],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/object"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$each","$defhelper","$[]=","$-"]),function(n,$super,s){var u=[a(n,null,"Paggio")].concat(s);return function(n,$super,s){var u=[a(n,$super,"HTML")].concat(s);return function(n,$super,$){var s=a(n,$super,"Element"),u=[s].concat($);return function(n,$super,$){var s,u=a(n,$super,"Object");[u].concat($);return i(o(["type","data","name","height","width"],{type:"type",data:"data",name:"name",height:"height",width:"width"}),"each",[],((s=function(n,$){var a,o=null==s.$$s?this:s.$$s;return null==n&&(n=r),null==$&&($=r),i(o,"defhelper",[n],((a=function($){var o=null==a.$$s?this:a.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==$&&($=r),s=[n,$],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=o,a.$$arity=1,a))}).$$s=u,s.$$arity=2,s))}(u[0],s,u)}(u[0],$(u,"BasicObject"),u)}(u[0],$(u,"BasicObject"),u)}(n[0],0,n)},Opal.modules["paggio/html/element/option"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){var s=[a(n,null,"Paggio")].concat(o);return function(n,$super,o){var s=[a(n,$super,"HTML")].concat(o);return function(n,$super,$){var o=a(n,$super,"Element"),s=[o].concat($);return function(n,$super,$){var o,s=a(n,$super,"Option");[s].concat($);return i(["label","value"],"each",[],((o=function(n){var $,a=null==o.$$s?this:o.$$s;return null==n&&(n=r),i(a,"defhelper",[n],(($=function(a){var o=null==$.$$s?this:$.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==a&&(a=r),s=[n,a],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=a,$.$$arity=1,$))}).$$s=s,o.$$arity=1,o)),s["$defhelper!"]("disabled"),s["$defhelper!"]("selected")}(s[0],o,s)}(s[0],$(s,"BasicObject"),s)}(s[0],$(s,"BasicObject"),s)}(n[0],0,n)},Opal.modules["paggio/html/element/optgroup"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){var s=[a(n,null,"Paggio")].concat(o);return function(n,$super,o){var s=[a(n,$super,"HTML")].concat(o);return function(n,$super,$){var o=a(n,$super,"Element"),s=[o].concat($);return function(n,$super,$){var o,s=a(n,$super,"Optgroup");[s].concat($);return i(["label","value"],"each",[],((o=function(n){var $,a=null==o.$$s?this:o.$$s;return null==n&&(n=r),i(a,"defhelper",[n],(($=function(a){var o=null==$.$$s?this:$.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==a&&(a=r),s=[n,a],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=a,$.$$arity=1,$))}).$$s=s,o.$$arity=1,o)),s["$defhelper!"]("disabled"),s["$defhelper!"]("selected")}(s[0],o,s)}(s[0],$(s,"BasicObject"),s)}(s[0],$(s,"BasicObject"),s)}(n[0],0,n)},Opal.modules["paggio/html/element/select"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send;return e.add_stubs(["$each","$defhelper","$[]=","$-","$defhelper!"]),function(n,$super,o){var s=[a(n,null,"Paggio")].concat(o);return function(n,$super,o){var s=[a(n,$super,"HTML")].concat(o);return function(n,$super,$){var o=a(n,$super,"Element"),s=[o].concat($);return function(n,$super,$){var o,s=a(n,$super,"Select");[s].concat($);return i(["form","name","size"],"each",[],((o=function(n){var $,a=null==o.$$s?this:o.$$s;return null==n&&(n=r),i(a,"defhelper",[n],(($=function(a){var o=null==$.$$s?this:$.$$s,s=r;return null==o.attributes&&(o.attributes=r),null==a&&(a=r),s=[n,a],i(o.attributes,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=a,$.$$arity=1,$))}).$$s=s,o.$$arity=1,o)),s["$defhelper!"]("auto_focus","autofocus"),s["$defhelper!"]("disabled"),s["$defhelper!"]("required")}(s[0],o,s)}(s[0],$(s,"BasicObject"),s)}(s[0],$(s,"BasicObject"),s)}(n[0],0,n)},Opal.modules["paggio/html/element/td"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send;return e.add_stubs(["$defhelper","$to_s","$[]=","$-","$join"]),function(n,$super,o){var s=[a(n,null,"Paggio")].concat(o);return function(n,$super,o){var s=[a(n,$super,"HTML")].concat(o);return function(n,$super,$){var o=a(n,$super,"Element"),s=[o].concat($);return function(n,$super,$){var o,s,u,l=a(n,$super,"Td");[l].concat($);return i(l,"defhelper",["columns"],((o=function(n){var $=null==o.$$s?this:o.$$s,a=r;return null==$.attributes&&($.attributes=r),null==n&&(n=r),a=["colspan",n.$to_s()],i($.attributes,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=l,o.$$arity=1,o)),i(l,"defhelper",["rows"],((s=function(n){var $=null==s.$$s?this:s.$$s,a=r;return null==$.attributes&&($.attributes=r),null==n&&(n=r),a=["rowspan",n.$to_s()],i($.attributes,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=l,s.$$arity=1,s)),i(l,"defhelper",["headers"],((u=function(){var n=null==u.$$s?this:u.$$s,$=r;return null==n.attributes&&(n.attributes=r),$=["headers",e.slice.call(arguments,0,arguments.length).$join(" ")],i(n.attributes,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=l,u.$$arity=-1,u))}(s[0],o,s)}(s[0],$(s,"BasicObject"),s)}(s[0],$(s,"BasicObject"),s)}(n[0],0,n)},Opal.modules["paggio/html/element"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.klass,s=e.hash2,u=e.send2,l=e.find_super,c=e.truthy,p=e.send,d=e.range;return e.add_stubs(["$require","$==","$capitalize","$const_defined?","$new","$const_get","$each","$to_proc","$<<","$end_with?","$to_s","$[]","$[]=","$-","$===","$has_key?","$unshift","$|","$split","$delete","$to_a","$deep_merge!","$>>","$extend!","$pop","$join","$heredoc","$defhelper","$map","$empty?","$upcase","$inspect"]),n.$require("paggio/html/element/a"),n.$require("paggio/html/element/base"),n.$require("paggio/html/element/blockquote"),n.$require("paggio/html/element/button"),n.$require("paggio/html/element/canvas"),n.$require("paggio/html/element/embed"),n.$require("paggio/html/element/img"),n.$require("paggio/html/element/input"),n.$require("paggio/html/element/link"),n.$require("paggio/html/element/object"),n.$require("paggio/html/element/option"),n.$require("paggio/html/element/optgroup"),n.$require("paggio/html/element/select"),n.$require("paggio/html/element/td"),function(n,$super,r){var f=[o(n,null,"Paggio")].concat(r);return function(n,$super,r){var f=[o(n,$super,"HTML")].concat(r);return function(n,$super,r){var f,_,h,y,v,m,g,b,w,k,O,E=o(n,$super,"Element"),x=[E].concat(r);return E.$$prototype.children=E.$$prototype.attributes=E.$$prototype.class_names=E.$$prototype.owner=E.$$prototype.name=$,e.defs(E,"$new",f=function(e,t,n){var r=f.$$p,a=this,o=$;return r&&(f.$$p=null),null==n&&(n=s([],{})),a["$=="](i(x,"Element"))?(o=t.$capitalize(),c(a["$const_defined?"](o))?a.$const_get(o).$new(e,t,n):u(a,l(a,"new",f,!1,!0),"new",[e,t,n],r)):u(a,l(a,"new",f,!1,!0),"new",[e,t,n],r)},f.$$arity=-3),e.def(E,"$initialize",_=function(e,t,n){var r=this;return null==n&&(n=s([],{})),r.owner=e,r.name=t,r.attributes=n,r.children=[],r.class_names=[]},_.$$arity=-3),e.def(E,"$each",h=function(){var e=h.$$p,t=e||$,n=this;return e&&(h.$$p=null),e&&(h.$$p=null),p(n.children,"each",[],t.$to_proc())},h.$$arity=0),e.def(E,"$<<",y=function(e){var t=this;return t.children["$<<"](e),t},y.$$arity=1),e.def(E,"$method_missing",v=function(n,r){var i=v.$$p,o=i||$,s=this,u=$,l=$;return i&&(v.$$p=null),i&&(v.$$p=null),null==r&&(r=$),c(n.$to_s()["$end_with?"]("!"))?(u=["id",n["$[]"](d(0,-2,!1))],p(s.attributes,"[]=",e.to_a(u)),u[t(u.length,1)]):s.class_names["$<<"](n),c(a("::","Hash")["$==="](r))?(c(c(l=r["$has_key?"]("class"))?l:r["$has_key?"]("classes"))&&p(s.class_names,"unshift",e.to_a(r.$delete("class").$to_s().$split()["$|"](r.$delete("classes").$to_a()))),a(a("::","Paggio"),"Utils")["$deep_merge!"](s.attributes,r)):c(r)&&s["$>>"](r),c(o)&&p(s.owner,"extend!",[s],o.$to_proc()),s},v.$$arity=-2),e.def(E,"$[]",m=function(){var t,n=this,r=$;return t=e.slice.call(arguments,0,arguments.length),c(r=n.class_names.$pop())&&n.class_names["$<<"]([r].concat(e.to_a(t)).$join("-")),n},m.$$arity=-1),e.def(E,"$do",g=function(){var e=g.$$p,t=e||$,n=this;return e&&(g.$$p=null),e&&(g.$$p=null),p(n.owner,"extend!",[n],t.$to_proc()),n},g.$$arity=0),e.def(E,"$>>",b=function(e){var t=this;return t["$<<"](a(a("::","Paggio"),"Utils").$heredoc(e.$to_s())),t},b.$$arity=1),p(E,"defhelper",["style"],((w=function(n){var r,a=null==w.$$s?this:w.$$s,i=$;return null==a.attributes&&(a.attributes=$),null==n&&(n=$),i=["style",p(n,"map",[],(r=function(e,t){null==r.$$s||r.$$s;return null==e&&(e=$),null==t&&(t=$),e+": "+t},r.$$s=a,r.$$arity=2,r)).$join(";")],p(a.attributes,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=E,w.$$arity=1,w)),p(E,"defhelper",["data"],((k=function(n){var r,a=null==k.$$s?this:k.$$s;return null==n&&(n=$),p(n,"each",[],((r=function(n,a){var i=null==r.$$s?this:r.$$s,o=$;return null==i.attributes&&(i.attributes=$),null==n&&(n=$),null==a&&(a=$),o=["data-"+n,a.$to_s()],p(i.attributes,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=a,r.$$arity=2,r))}).$$s=E,k.$$arity=1,k)),e.def(E,"$inspect",O=function(){var e=this;return c(e.children["$empty?"]())?"#<HTML::Element("+e.name.$upcase()+")>":"#<HTML::Element("+e.name.$upcase()+"): "+e.children.$inspect()["$[]"](d(1,-2,!1))+">"},O.$$arity=0),$&&"inspect"}(f[0],i(f,"BasicObject"),f)}(f[0],i(f,"BasicObject"),f)}(r[0],0,r)},Opal.modules["paggio/html"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.klass,o=e.truthy,s=e.send,u=e.send2,l=e.find_super,c=e.range;return e.add_stubs(["$require","$attr_reader","$raise","$==","$arity","$instance_exec","$to_proc","$call","$<<","$first","$===","$instance_eval","$each","$end_with?","$to_s","$empty?","$heredoc","$shift","$new","$[]","$inspect"]),t.$require("paggio/html/helpers"),t.$require("paggio/html/element"),function(t,$super,n){var p=[i(t,null,"Paggio")].concat(n);return function(t,$super,n){var p,d,f,_,h,y,v,m,g,b=i(t,$super,"HTML"),w=[b].concat(n);return b.$$prototype.current=b.$$prototype.roots=b.$$prototype.version=r,b.$attr_reader("version"),e.def(b,"$initialize",p=function(e){var t=p.$$p,n=t||r,a=this;return t&&(p.$$p=null),t&&(p.$$p=null),null==e&&(e=5),o(n)||$("::","Kernel").$raise($("::","ArgumentError"),"no block given"),a.version=e,a.roots=[],a.current=r,n.$arity()["$=="](0)?s(a,"instance_exec",[],n.$to_proc()):n.$call(a)},p.$$arity=-1),e.def(b,"$<<",d=function(e){var t=this,n=r;return(o(n=t.current)?n:t.roots)["$<<"](e)},d.$$arity=1),e.def(b,"$root!",f=function(){return this.roots.$first()},f.$$arity=0),e.def(b,"$roots!",_=function(){return this.roots},_.$$arity=0),e.def(b,"$element!",h=function(){return this.current},h.$$arity=0),e.def(b,"$extend!",y=function(e){var t,n,a=y.$$p,i=a||r,u=this,l=r,c=r;return a&&(y.$$p=null),a&&(y.$$p=null),null==e&&(e=r),l=(t=[u.current,e])[0],u.current=t[1],c=i.$call(u),o($("::","String")["$==="](c))&&s(u.current,"instance_eval",[],((n=function(){return(null==n.$$s?this:n.$$s).inner_html=c}).$$s=u,n.$$arity=0,n)),u.current=l,u},y.$$arity=-1),e.def(b,"$each",v=function(){var e=v.$$p,t=e||r,n=this;return e&&(v.$$p=null),e&&(v.$$p=null),s(n.roots,"each",[],t.$to_proc())},v.$$arity=0),e.def(b,"$method_missing",m=function(t){var n,i,c,p=m.$$p,d=p||r,f=this,_=r,h=r,y=r,v=r,g=r;return p&&(m.$$p=null),p&&(m.$$p=null),
n=e.slice.call(arguments,1,arguments.length),i=n,o(t.$to_s()["$end_with?"]("!"))?u(f,l(f,"method_missing",m,!1,!0),"method_missing",[t].concat(e.to_a(i)),p):(o(o(_=i["$empty?"]())?_:$("::","Hash")["$==="](i.$first()))||(h=$($("::","Paggio"),"Utils").$heredoc(i.$shift().$to_s())),y=s(a(w,"Element"),"new",[f,t].concat(e.to_a(i))),o(h)&&y["$<<"](h),o(d)&&(v=f.current,f.current=y,g=d.$call(f),f.current=v,o($("::","String")["$==="](g))&&s(y,"instance_eval",[],((c=function(){return(null==c.$$s?this:c.$$s).inner_html=g}).$$s=f,c.$$arity=0,c))),f["$<<"](y),y)},m.$$arity=-2),e.def(b,"$inspect",g=function(){var e=this;return o(e.roots["$empty?"]())?"#<HTML("+e.version+")>":"#<HTML("+e.version+"): "+e.roots.$inspect()["$[]"](c(1,-2,!1))+">"},g.$$arity=0),r&&"inspect"}(p[0],a(p,"BasicObject"),p)}(n[0],0,n)},Opal.modules["paggio/css/unit"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}var a,i=e.top,o=[],s=e.nil,u=e.$$$,l=e.$$,c=e.klass,p=e.send,d=e.truthy,f=e.alias;return e.add_stubs(["$map","$to_proc","$attr_reader","$===","$respond_to?","$raise","$class","$to_u","$new","$==","$convert","$type","$number","$hash","$each","$define_method","$+","$compatible?","$-","$*","$/","$to_i","$to_f","$private","$include?","$class_eval","$old_percent","$match","$[]","$__send__","$downcase"]),function(a,$super,i){var o=[c(a,null,"Paggio")].concat(i);(function(a,$super,i){var o=[c(a,$super,"CSS")].concat(i);(function(a,$super,i){var o,u,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z=c(a,null,"Unit"),I=[z].concat(i);z.$$prototype.type=z.$$prototype.number=s,e.const_set(I[0],"TYPES",p(["em","ex","ch","rem","vh","vw","vmin","vmax","px","mm","cm","in","pt","pc","s","deg"],"map",[],"to_sym".$to_proc())),e.const_set(I[0],"COMPATIBLE",p(["in","pt","mm","cm","px","pc"],"map",[],"to_sym".$to_proc())),z.$attr_reader("type","number"),e.def(z,"$initialize",o=function(e,t){var n=this;return n.number=e,n.type=t},o.$$arity=2),e.def(z,"$coerce",u=function(e){return[this,e]},u.$$arity=1),e.def(z,"$==",_=function(e){var t=this;return d(l(I,"Unit")["$==="](e))||(d(e["$respond_to?"]("to_u"))||t.$raise(l(I,"TypeError"),"no implicit conversion of "+e.$class()+" into Unit"),e=e.$to_u()),d(l(I,"Unit")["$==="](e))||(e=l(I,"Unit").$new(e,t.type)),t.number["$=="](t.$convert(e,t.type))},_.$$arity=1),e.def(z,"$===",h=function(e){var t=this,n=s;return d(n=t.type["$=="](e.$type()))?t.number["$=="](e.$number()):n},h.$$arity=1),f(z,"eql?","=="),e.def(z,"$hash",y=function(){var e=this;return[e.number,e.type].$hash()},y.$$arity=0),p(l(I,"TYPES"),"each",[],((v=function(e){var t,n=null==v.$$s?this:v.$$s;return null==e&&(e=s),p(n,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return l(I,"Unit").$new(n.$convert(n,e),e)}).$$s=n,t.$$arity=0,t))}).$$s=z,v.$$arity=1,v)),e.def(z,"$+",m=function(e){var n=this,r=s;return d(l(I,"Unit")["$==="](e))?n.type["$=="](e.$type())?l(I,"Unit").$new(t(n.number,e.$number()),n.type):d(d(r=n["$compatible?"](n))?n["$compatible?"](e):r)?l(I,"Unit").$new(t(n.number,n.$convert(e,n.type)),n.type):n.$raise(l(I,"ArgumentError"),e.$type()+" isn't compatible with "+n.type):l(I,"Unit").$new(t(n.number,e),n.type)},m.$$arity=1),e.def(z,"$-",g=function(e){var t=this,r=s;return d(l(I,"Unit")["$==="](e))?t.type["$=="](e.$type())?l(I,"Unit").$new(n(t.number,e.$number()),t.type):d(d(r=t["$compatible?"](t))?t["$compatible?"](e):r)?l(I,"Unit").$new(n(t.number,t.$convert(e,t.type)),t.type):t.$raise(l(I,"ArgumentError"),e.$type()+" isn't compatible with "+t.type):l(I,"Unit").$new(n(t.number,e),t.type)},g.$$arity=1),e.def(z,"$*",b=function(e){var t=this,n=s;return d(l(I,"Unit")["$==="](e))?t.type["$=="](e.$type())?l(I,"Unit").$new(r(t.number,e.$number()),t.type):d(d(n=t["$compatible?"](t))?t["$compatible?"](e):n)?l(I,"Unit").$new(r(t.number,t.$convert(e,t.type)),t.type):t.$raise(l(I,"ArgumentError"),e.$type()+" isn't compatible with "+t.type):l(I,"Unit").$new(r(t.number,e),t.type)},b.$$arity=1),e.def(z,"$/",w=function(e){var t=this,n=s;return d(l(I,"Unit")["$==="](e))?t.type["$=="](e.$type())?l(I,"Unit").$new($(t.number,e.$number()),t.type):d(d(n=t["$compatible?"](t))?t["$compatible?"](e):n)?l(I,"Unit").$new($(t.number,t.$convert(e,t.type)),t.type):t.$raise(l(I,"ArgumentError"),e.$type()+" isn't compatible with "+t.type):l(I,"Unit").$new($(t.number,e),t.type)},w.$$arity=1),e.def(z,"$-@",k=function(){var e=this;return l(I,"Unit").$new(r(e.number,-1),e.type)},k.$$arity=0),e.def(z,"$+@",O=function(){var e=this;return l(I,"Unit").$new(e.number,e.type)},O.$$arity=0),e.def(z,"$to_i",E=function(){return this.number.$to_i()},E.$$arity=0),e.def(z,"$to_f",x=function(){return this.number.$to_f()},x.$$arity=0),e.def(z,"$to_u",S=function(){return this},S.$$arity=0),e.def(z,"$to_s",q=function(){var e=this;return""+e.number+e.type},q.$$arity=0),f(z,"to_str","to_s"),f(z,"inspect","to_s"),z.$private(),e.def(z,"$compatible?",N=function(e){return l(I,"COMPATIBLE")["$include?"](e.$type())},N.$$arity=1),e.def(z,"$convert",C=function(e,t){var n=s,a=s,i=s;return n=e.$number(),e.$type()["$=="](t)?n:(i=e.$type(),a="in"["$==="](i)?r(n,96):"pt"["$==="](i)?$(r(n,4),3):"pc"["$==="](i)?$(r($(n,12),4),3):"mm"["$==="](i)?r(n,3.77953):"cm"["$==="](i)?r(r(n,10),3.77953):"px"["$==="](i)?n:s,i=t,"in"["$==="](i)?$(a,96):"pt"["$==="](i)?$($(a,4),3):"pc"["$==="](i)?$($(r(a,12),4),3):"mm"["$==="](i)?$(a,3.77953):"cm"["$==="](i)?$($(a,10),3.77953):"px"["$==="](i)?a:s)},C.$$arity=2)})(o[0],0,o)})(o[0],l(o,"BasicObject"),o)}(o[0],0,o),function(t,$super,n){var r,$,a=c(t,null,"Numeric"),i=[a].concat(n);p(u(u(u(l(i,"Paggio"),"CSS"),"Unit"),"TYPES"),"each",[],((r=function(e){var t,n=null==r.$$s?this:r.$$s;return null==e&&(e=s),p(n,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return u(u(l(i,"Paggio"),"CSS"),"Unit").$new(n,e)}).$$s=n,t.$$arity=0,t))}).$$s=a,r.$$arity=1,r)),e.def(a,"$to_u",$=function(){return this},$.$$arity=0)}(o[0],0,o),p([l(o,"Fixnum"),l(o,"Float")],"each",[],((a=function(t){var n,r=null==a.$$s?this:a.$$s;return null==t&&(t=s),p(t,"class_eval",[],((n=function(){var t,r=null==n.$$s?this:n.$$s;return f(r,"old_percent","%"),e.def(r,"$%",t=function(e){var t=this;return null==e&&(e=s),d(e)?t.$old_percent(e):u(u(l(o,"Paggio"),"CSS"),"Unit").$new(t,"%")},t.$$arity=-1),s&&"%"}).$$s=r,n.$$arity=0,n))}).$$s=i,a.$$arity=1,a)),function(t,$super,n){var r,$=c(t,null,"String");[$].concat(n);e.def($,"$to_u",r=function(){var e=s,t=s,n=s;return d(e=this.$match(/^([\d+.]+)(.+)?$/))?(t=e["$[]"](1).$to_f(),d(n=e["$[]"](2))?t.$__send__(n.$downcase()):t):0},r.$$arity=0)}(o[0],0,o),function(t,$super,n){var r,$=c(t,null,"NilClass");[$].concat(n);return e.def($,"$to_u",r=function(){return 0},r.$$arity=0),s&&"to_u"}(o[0],0,o)},Opal.modules["paggio/css/color"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.klass,i=e.send;return e.add_stubs(["$each","$map","$to_proc","$define_method","$new"]),function(t,$super,n){var r=[a(t,null,"Paggio")].concat(n);(function(t,$super,n){var r=[a(t,$super,"CSS")].concat(n);(function(t,$super,n){var r,$=a(t,null,"Color");[$].concat(n);e.def($,"$initialize",r=function(e,t){var n=this;return n.internal=e,n.type=t},r.$$arity=2)})(r[0],0,r)})(r[0],$(r,"BasicObject"),r)}(t[0],0,t),function(e,$super,t){var o,s=a(e,null,"String"),u=[s].concat(t);i(i(["rgb","rgba","hsl","hsla"],"map",[],"to_sym".$to_proc()),"each",[],((o=function(e){var t,a=null==o.$$s?this:o.$$s;return null==e&&(e=n),i(a,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return r(r($(u,"Paggio"),"CSS"),"Color").$new(n,e)}).$$s=a,t.$$arity=0,t))}).$$s=s,o.$$arity=1,o))}(t[0],0,t),function(e,$super,t){var o,s=a(e,null,"Array"),u=[s].concat(t);return i(i(["rgb","rgba","hsl","hsla"],"map",[],"to_sym".$to_proc()),"each",[],((o=function(e){var t,a=null==o.$$s?this:o.$$s;return null==e&&(e=n),i(a,"define_method",[e],((t=function(){var n=null==t.$$s?this:t.$$s;return r(r($(u,"Paggio"),"CSS"),"Color").$new(n,e)}).$$s=a,t.$$arity=0,t))}).$$s=s,o.$$arity=1,o))}(t[0],0,t)},Opal.modules["paggio/css/definition"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.klass,s=e.truthy,u=e.send,l=e.range,c=e.hash2;return e.add_stubs(["$new","$==","$arity","$instance_exec","$to_proc","$call","$empty?","$each","$inspect","$to_s","$define_method","$a","$===","$first","$>","$length","$raise","$style","$name","$value","$[]","$join","$map","$to_i","$*","$end_with?","$__send__","$<<","$last","$pop","$!","$other","$shift","$horizontal?","$private"]),function(r,$super,p){var d=[o(r,null,"Paggio")].concat(p);return function(r,$super,p){var d=[o(r,$super,"CSS")].concat(p);return function(r,$super,p){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A=o(r,$super,"Definition"),j=[A].concat(p);return A.$$prototype.style=A.$$prototype.important=$,e.const_set(j[0],"Style",a("::","Struct").$new("name","value","important")),e.def(A,"$initialize",d=function(){var e=d.$$p,t=e||$,n=this;return e&&(d.$$p=null),e&&(d.$$p=null),n.style=[],s(t)?t.$arity()["$=="](0)?u(n,"instance_exec",[],t.$to_proc()):t.$call(n):$},d.$$arity=0),e.def(A,"$empty?",f=function(){return this.style["$empty?"]()},f.$$arity=0),e.def(A,"$each",_=function(){var e=_.$$p,t=e||$,n=this;return e&&(_.$$p=null),e&&(_.$$p=null),u(n.style,"each",[],t.$to_proc())},_.$$arity=0),e.def(A,"$gradient",h=function(){var t;return t=e.slice.call(arguments,0,arguments.length),u(i(j,"Gradient"),"new",e.to_a(t))},h.$$arity=-1),e.def(A,"$url",y=function(e){return"url("+e.$to_s().$inspect()+")"},y.$$arity=1),u(["url","blur","brightness","rotate","contrast","grayscale","invert","opacity","saturate","sepia"],"each",[],((v=function(e){var t,n=null==v.$$s?this:v.$$s;return null==e&&(e=$),u(n,"define_method",[e],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=$),e+"("+n+")"}).$$s=n,t.$$arity=1,t))}).$$s=A,v.$$arity=1,v)),e.def(A,"$rgb",m=function(e,t,n){return"rgb("+e+", "+t+", "+n+", "+this.$a()+")"},m.$$arity=3),e.def(A,"$rgba",g=function(e,t,n,r){return"rgba("+e+", "+t+", "+n+", "+r+")"},g.$$arity=4),u(["scale","skew","translate"],"each",[],((b=function(e){var t,n=null==b.$$s?this:b.$$s;return null==e&&(e=$),u(n,"define_method",[e],((t=function(n,r){null==t.$$s||t.$$s;return null==n&&(n=$),null==r&&(r=$),s(r)?e+"("+n+", "+r+")":e+"("+n+")"}).$$s=n,t.$$arity=-2,t))}).$$s=A,b.$$arity=1,b)),u(["translateX","translateY","translateZ","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY"],"each",[],((w=function(e){var t,n=null==w.$$s?this:w.$$s;return null==e&&(e=$),u(n,"define_method",[e],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=$),e+"("+n+")"}).$$s=n,t.$$arity=1,t))}).$$s=A,w.$$arity=1,w)),e.def(A,"$background",k=function(){var n,r,o,l=this;return n=e.slice.call(arguments,0,arguments.length),s(i(j,"Gradient")["$==="](n.$first()))?(s(t(n.$length(),1))&&l.$raise(i(j,"NotImplementedError"),"multiple gradients not implemented yet"),u(n.$first(),"each",[],((r=function(e){var t=null==r.$$s?this:r.$$s,n=$;return null==e&&(e=$),t.$style(s(n=e.$name())?n:"background-image",e.$value())}).$$s=l,r.$$arity=1,r))):s(a("::","Hash")["$==="](n.$first()))?u(n.$first(),"each",[],((o=function(e,t){var n=null==o.$$s?this:o.$$s;return null==e&&(e=$),null==t&&(t=$),n.$style("background-"+e,t)}).$$s=l,o.$$arity=2,o)):l.$style("background",n)},k.$$arity=-1),e.def(A,"$border",O=function(){var t,n,r=this,i=$;return t=e.slice.call(arguments,0,arguments.length),s(a("::","Hash")["$==="](t.$first()))?(t.$length()["$=="](1)&&(i=t.$first()),u(i,"each",[],((n=function(e,t){var r,i,o,l=null==n.$$s?this:n.$$s,c=$;return null==e&&(e=$),null==t&&(t=$),c=e,"top"["$==="](c)||"bottom"["$==="](c)||"left"["$==="](c)||"right"["$==="](c)?s(a("::","Hash")["$==="](t))?u(t,"each",[],((r=function(t,n){var a=null==r.$$s?this:r.$$s;return null==t&&(t=$),null==n&&(n=$),a.$style("border-"+e+"-"+t,n)}).$$s=l,r.$$arity=2,r)):l.$style("border-"+e,t):"radius"["$==="](c)?s(a("::","Hash")["$==="](t))?u(t,"each",[],((i=function(e,t){var n,r=null==i.$$s?this:i.$$s;return null==e&&(e=$),null==t&&(t=$),u(t,"each",[],((n=function(t,r){var a=null==n.$$s?this:n.$$s;return null==t&&(t=$),null==r&&(r=$),a.$style("-moz-border-radius-"+e+t,r),a.$style("-webkit-border-"+e+"-"+t+"-radius",r),a.$style("border-"+e+"-"+t+"-radius",r)}).$$s=r,n.$$arity=2,n))}).$$s=l,i.$$arity=2,i)):(l.$style("-moz-border-radius",t),l.$style("-webkit-border-radius",t),l.$style("border-radius",t)):"color"["$==="](c)?s(a("::","Hash")["$==="](t))?u(t,"each",[],((o=function(e,t){var n=null==o.$$s?this:o.$$s;return null==e&&(e=$),null==t&&(t=$),n.$style("border-"+e+"-color",t)}).$$s=l,o.$$arity=2,o)):l.$style("border-color",t):l.$style("border-"+e,t)}).$$s=r,n.$$arity=2,n))):r.$style("border",t)},O.$$arity=-1),e.def(A,"$box",E=function(e){var t,n=this;return s(a("::","Hash")["$==="](e))?u(e,"each",[],((t=function(e,n){var r,i=null==t.$$s?this:t.$$s,o=$;return null==e&&(e=$),null==n&&(n=$),o=e,"shadow"["$==="](o)?(s(a("::","Array")["$==="](n))&&(n=s(a("::","Array")["$==="](n["$[]"](0)))?u(n,"map",[],(r=function(e){return null==r.$$s||r.$$s,null==e&&(e=$),e.$join(" ")},r.$$s=i,r.$$arity=1,r)).$join(", "):n.$join(" ")),i.$style("-moz-box-shadow",n),i.$style("-webkit-box-shadow",n),i.$style("box-shadow",n)):i.$style("box-"+e,n)}).$$s=n,t.$$arity=2,t)):n.$style("box",e)},E.$$arity=1),e.def(A,"$opacity",x=function(e){var t=this;return t.$style("opacity",e),t.$style("-moz-opacity",e),t.$style("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n(e,100).$to_i()+')"'),t.$style("filter","alpha(opacity="+n(e,100).$to_i()+")")},x.$$arity=1),e.def(A,"$animation",S=function(){var t,n,r=this,a=$;return t=e.slice.call(arguments,0,arguments.length),s(i(j,"Hash")["$==="](t.$first()))?(t.$length()["$=="](1)&&(a=t.$first()),u(a,"each",[],((n=function(e,t){var r=null==n.$$s?this:n.$$s;return null==e&&(e=$),null==t&&(t=$),r.$style("-webkit-animation-"+e,t),r.$style("animation-"+e,t)}).$$s=r,n.$$arity=2,n))):(r.$style("animation",t),r.$style("-webkit-animation",t))},S.$$arity=-1),e.def(A,"$transition",q=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$style("transition",t),n.$style("-webkit-transition",t),n.$style("-moz-transition",t)},q.$$arity=-1),e.def(A,"$user_select",N=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$style("user-select",t),n.$style("-webkit-user-select",t),n.$style("-moz-user-select",t),n.$style("-ms-user-select",t)},N.$$arity=-1),e.def(A,"$transform",C=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$style("transform",t),n.$style("-webkit-transform",t),n.$style("-moz-transform",t),n.$style("-ms-transform",t),n.$style("-o-transform",t)},C.$$arity=-1),e.def(A,"$filter",z=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),n.$style("filter",t),n.$style("-webkit-filter",t),n.$style("-moz-filter",t),n.$style("-ms-filter",t),n.$style("-o-filter",t)},z.$$arity=-1),e.def(A,"$method_missing",I=function(t){var n,r,i=I.$$p,o=i||$,c=this,p=$;return i&&(I.$$p=null),i&&(I.$$p=null),n=e.slice.call(arguments,1,arguments.length),t=t.$to_s(),s(t["$end_with?"]("!"))?(t=t["$[]"](l(0,-2,!1)),c.important=!0,u(c,"__send__",[t].concat(e.to_a(n)),o.$to_proc()),c.important=!1,$):(n.$length()["$=="](1)?(p=n.$first(),s(a("::","Hash")["$==="](p))?u(p,"each",[],((r=function(e,n){var a=null==r.$$s?this:r.$$s;return null==e&&(e=$),null==n&&(n=$),a.$style(t+"-"+e,n)}).$$s=c,r.$$arity=2,r)):c.$style(t,p)):c.$style(t,n.$join(" ")),c.important=!1,c)},I.$$arity=-2),e.def(A,"$style",D=function(e,t,n){var r=this;return null==t&&(t=$),null==n&&(n=r.important),s(a("::","Array")["$==="](t))&&(t=t.$join(" ")),s(i(j,"Style")["$==="](e))?r.style["$<<"](e):r.style["$<<"](i(j,"Style").$new(e,t,n))},D.$$arity=-2),e.def(A,"$style!",H=function(e,t){return null==t&&(t=$),this.$style(e,t,!0)},H.$$arity=-2),function(t,$super,n){var r,l,p,d,f,_,h=o(t,null,"Gradient"),y=[h].concat(n);return h.$$prototype.to=h.$$prototype.from=h.$$prototype.start=h.$$prototype.end=$,e.def(h,"$initialize",r=function(){var t,n,r=this,i=$,o=$,u=$;return t=e.slice.call(arguments,0,arguments.length),n=t,i=s(a("::","Hash")["$==="](n.$last()))?n.$pop():c([],{}),r.to=i["$[]"]("to"),r.from=i["$[]"]("from"),s(s(o=r.to)?r.from["$!"]():o)?r.from=r.$other(r.to):s(s(u=r.from)?r.to["$!"]():u)&&(r.to=r.$other(r.from)),r.start=n.$shift(),r.end=n.$shift()},r.$$arity=-1),e.def(h,"$each",l=function(){var e=l.$$p,t=e||$,n=this;return e&&(l.$$p=null),e&&(l.$$p=null),t.$call(n.$style("-moz-linear-gradient("+n.to+", "+n.start+" 0%, "+n.end+" 100%)")),s(n["$horizontal?"]())?t.$call(n.$style("-webkit-gradient(linear, "+n.from+" top, "+n.to+" top, color-stop(0%, "+n.start+"), color-stop(100%, "+n.end+"))")):t.$call(n.$style("-webkit-gradient(linear, left "+n.from+", left "+n.to+", color-stop(0%, "+n.start+"), color-stop(100%, "+n.end+"))")),t.$call(n.$style("-webkit-linear-gradient("+n.to+", "+n.start+" 0%, "+n.end+" 100%)")),t.$call(n.$style("-o-linear-gradient("+n.to+", "+n.start+" 0%, "+n.end+" 100%)")),t.$call(n.$style("-ms-linear-gradient("+n.to+", "+n.start+" 0%, "+n.end+" 100%)")),t.$call(n.$style("linear-gradient(to "+n.to+", "+n.start+" 0%, "+n.end+" 100%)"))},l.$$arity=0),e.def(h,"$horizontal?",p=function(){var e=this,t=$;return s(t=e.to["$=="]("left"))?t:e.to["$=="]("right")},p.$$arity=0),e.def(h,"$vertical?",d=function(){var e=this,t=$;return s(t=e.to["$=="]("top"))?t:e.to["$=="]("bottom")},d.$$arity=0),h.$private(),e.def(h,"$other",f=function(e){var t=$;return t=e,"left"["$==="](t)?"right":"right"["$==="](t)?"left":"top"["$==="](t)?"bottom":"bottom"["$==="](t)?"top":$},f.$$arity=1),e.def(h,"$style",_=function(){var t;return(t=e.slice.call(arguments,0,arguments.length)).$length()["$=="](1)?i(y,"Style").$new($,t.$first()):u(i(y,"Style"),"new",e.to_a(t))},_.$$arity=-1),$&&"style"}(j[0],0,j)}(d[0],i(d,"BasicObject"),d)}(d[0],i(d,"BasicObject"),d)}(r[0],0,r)},Opal.modules["paggio/css/rule"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.klass,a=e.send;return e.add_stubs(["$attr_reader","$new","$__send__","$to_proc"]),function(t,$super,i){var o=[$(t,null,"Paggio")].concat(i);return function(t,$super,i){var o=[$(t,$super,"CSS")].concat(i);return function(t,$super,i){var o,s,u=$(t,$super,"Rule"),l=[u].concat(i);return u.$$prototype.definition=n,u.$attr_reader("selector","media"),e.def(u,"$initialize",o=function(e,t){var n=this;return n.selector=e,n.media=t,n.definition=r(l,"Definition").$new()},o.$$arity=2),e.def(u,"$method_missing",s=function(){var t,r=s.$$p,$=r||n,i=this;return r&&(s.$$p=null),r&&(s.$$p=null),t=e.slice.call(arguments,0,arguments.length),a(i.definition,"__send__",e.to_a(t),$.$to_proc())},s.$$arity=-1),n&&"method_missing"}(o[0],r(o,"BasicObject"),o)}(o[0],r(o,"BasicObject"),o)}(t[0],0,t)},Opal.modules["paggio/css/font"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.klass,a=e.hash2,i=e.send;return e.add_stubs(["$attr_reader","$new","$font","$__send__","$to_proc"]),function(t,$super,o){var s=[$(t,null,"Paggio")].concat(o);return function(t,$super,o){var s=[$(t,$super,"CSS")].concat(o);return function(t,$super,o){var s,u,l=$(t,$super,"Font"),c=[l].concat(o);return l.$$prototype.definition=n,l.$attr_reader("name"),e.def(l,"$initialize",s=function(e){var t=this;return t.name=e,t.definition=r(c,"Definition").$new(),t.$font(a(["family"],{family:e}))},s.$$arity=1),e.def(l,"$method_missing",u=function(){var t,r=u.$$p,$=r||n,a=this;return r&&(u.$$p=null),r&&(u.$$p=null),t=e.slice.call(arguments,0,arguments.length),i(a.definition,"__send__",e.to_a(t),$.$to_proc())},u.$$arity=-1),n&&"method_missing"}(s[0],r(s,"BasicObject"),s)}(s[0],r(s,"BasicObject"),s)}(t[0],0,t)},Opal.modules["paggio/css/animation"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.klass,a=e.send;return e.add_stubs(["$attr_reader","$new","$__send__","$to_proc","$<<","$call","$%","$last"]),function(t,$super,i){var o=[$(t,null,"Paggio")].concat(i);return function(t,$super,i){var o=[$(t,$super,"CSS")].concat(i);return function(t,$super,i){var o,s,u,l,c,p=$(t,$super,"Animation"),d=[p].concat(i);return p.$$prototype.steps=n,function(t,$super,i){var o,s,u=$(t,$super,"Step"),l=[u].concat(i);u.$$prototype.definition=n,u.$attr_reader("value"),e.def(u,"$initialize",o=function(e){var t=this;return t.value=e,t.definition=r(l,"Definition").$new()},o.$$arity=1),e.def(u,"$method_missing",s=function(){var t,r=s.$$p,$=r||n,i=this;return r&&(s.$$p=null),r&&(s.$$p=null),t=e.slice.call(arguments,0,arguments.length),a(i.definition,"__send__",e.to_a(t),$.$to_proc())},s.$$arity=-1)}(d[0],r(d,"BasicObject"),d),p.$attr_reader("name","steps"),e.def(p,"$initialize",o=function(e){var t=this;return t.name=e,t.steps=[]},o.$$arity=1),e.def(p,"$step",s=function(e){var t=s.$$p,$=t||n,a=this;return t&&(s.$$p=null),t&&(s.$$p=null),a.steps["$<<"](r(d,"Step").$new(e)),$.$call()},s.$$arity=1),e.def(p,"$from",u=function(){var e=u.$$p,t=e||n,$=this;return e&&(u.$$p=null),e&&(u.$$p=null),$.steps["$<<"](r(d,"Step").$new((0)["$%"]())),t.$call()},u.$$arity=1),e.def(p,"$to",l=function(){var e=l.$$p,t=e||n,$=this;return e&&(l.$$p=null),e&&(l.$$p=null),$.steps["$<<"](r(d,"Step").$new(100["$%"]())),t.$call()},l.$$arity=1),e.def(p,"$method_missing",c=function(){var t,r=c.$$p,$=r||n,i=this;return r&&(c.$$p=null),r&&(c.$$p=null),t=e.slice.call(arguments,0,arguments.length),a(i.steps.$last(),"__send__",e.to_a(t),$.$to_proc())},c.$$arity=-1),n&&"method_missing"}(o[0],r(o,"BasicObject"),o)}(o[0],r(o,"BasicObject"),o)}(t[0],0,t)},Opal.modules["paggio/css"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.klass,s=e.send,u=e.truthy,l=e.range;return e.add_stubs(["$require","$each","$start_with?","$+","$[]","$==","$attr_reader","$raise","$arity","$instance_exec","$to_proc","$call","$any?","$include?","$<<","$new","$selector","$pop","$method_missing","$__send__","$last"]),n.$require("paggio/css/unit"),n.$require("paggio/css/color"),n.$require("paggio/css/definition"),n.$require("paggio/css/rule"),n.$require("paggio/css/font"),n.$require("paggio/css/animation"),function(n,$super,r){var c=[o(n,null,"Paggio")].concat(r);return function(n,$super,r){var c,p,d,f,_,h,y,v=o(n,$super,"CSS"),m=[v].concat(r);v.$$prototype.media=v.$$prototype.current=v.$$prototype.fonts=v.$$prototype.animations=$,e.defs(v,"$selector",c=function(e){var n,r=this,a=$;return a="",s(e,"each",[],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=$),a=u(e["$start_with?"]("&"))?t(a,e["$[]"](l(1,-1,!1))):t(a,t(" ",e))}).$$s=r,n.$$arity=1,n)),a["$[]"](0)["$=="](" ")?a["$[]"](l(1,-1,!1)):a},c.$$arity=1),v.$attr_reader("rules","media","fonts","animations"),e.def(v,"$initialize",p=function(){var e=p.$$p,t=e||$,n=this;return e&&(p.$$p=null),e&&(p.$$p=null),u(t)||a("::","Kernel").$raise(a("::","ArgumentError"),"no block given"),n.selector=[],n.current=[],n.rules=[],n.fonts=[],n.animations=[],t.$arity()["$=="](0)?s(n,"instance_exec",[],t.$to_proc()):t.$call(n)},p.$$arity=0),e.def(v,"$rule",d=function(){var t,n,r,o=d.$$p,l=o||$,c=this;return o&&(d.$$p=null),o&&(d.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(l)?(u(s(t,"any?",[],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=$),e["$include?"](",")}).$$s=c,n.$$arity=1,n)))&&a("::","Kernel").$raise(a("::","ArgumentError"),"selectors cannot contain commas"),s(t,"each",[],((r=function(e){var t=null==r.$$s?this:r.$$s;return null==t.selector&&(t.selector=$),null==t.current&&(t.current=$),null==t.media&&(t.media=$),null==t.rules&&(t.rules=$),null==e&&(e=$),t.selector["$<<"](e),t.current["$<<"](i(m,"Rule").$new(i(m,"CSS").$selector(t.selector),t.media)),l.$call(),t.selector.$pop(),t.rules["$<<"](t.current.$pop())}).$$s=c,r.$$arity=1,r))):$},d.$$arity=-1),e.def(v,"$media",f=function(t){var n,r,a=f.$$p,i=a||$,o=this,l=$;return a&&(f.$$p=null),a&&(f.$$p=null),n=e.slice.call(arguments,1,arguments.length),u(i)?(l=(r=[o.media,t])[0],o.media=r[1],i.$call(),o.media=l):s(o,"method_missing",["media",t].concat(e.to_a(n)))},f.$$arity=-2),e.def(v,"$font",_=function(t){var n,r=_.$$p,a=r||$,o=this;return r&&(_.$$p=null),r&&(_.$$p=null),n=e.slice.call(arguments,1,arguments.length),u(a)?(o.current["$<<"](i(m,"Font").$new(t)),a.$call(),o.fonts["$<<"](o.current.$pop())):s(o,"method_missing",["font",t].concat(e.to_a(n)))},_.$$arity=-2),e.def(v,"$animation",h=function(t){var n,r=h.$$p,a=r||$,o=this;return r&&(h.$$p=null),r&&(h.$$p=null),n=e.slice.call(arguments,1,arguments.length),u(a)?(o.current["$<<"](i(m,"Animation").$new(t)),a.$call(),o.animations["$<<"](o.current.$pop())):s(o,"method_missing",["animation",t].concat(e.to_a(n)))},h.$$arity=-2),e.def(v,"$method_missing",y=function(){var t,n=y.$$p,r=n||$,a=this;return n&&(y.$$p=null),n&&(y.$$p=null),t=e.slice.call(arguments,0,arguments.length),s(a.current.$last(),"__send__",e.to_a(t),r.$to_proc())},y.$$arity=-1)}(c[0],i(c,"BasicObject"),c),function(t,$super,n){var r,a=o(t,$super,"HTML"),l=[a].concat(n);return a.$$prototype.current=a.$$prototype.roots=$,e.def(a,"$style",r=function(){var e=r.$$p,t=e||$,n=this,a=$;return e&&(r.$$p=null),e&&(r.$$p=null),(u(a=n.current)?a:n.roots)["$<<"](s(i(l,"CSS"),"new",[],t.$to_proc()))},r.$$arity=0),$&&"style"}(c[0],i(c,"BasicObject"),c)}(r[0],0,r)},Opal.modules.stringio=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var a=[],i=e.nil,o=e.$$$,s=e.$$,u=e.klass,l=e.send2,c=e.find_super,p=e.alias,d=e.truthy;return e.add_stubs(["$new","$call","$close","$attr_accessor","$check_readable","$==","$length","$===","$>=","$raise","$>","$+","$-","$seek","$check_writable","$String","$[]","$eof?","$write","$read"]),function(a,$super,f){var _,h,y,v,m,g,b,w,k,O=u(a,$super,"StringIO"),E=[O].concat(f);return O.$$prototype.position=O.$$prototype.string=i,e.defs(O,"$open",_=function(e,t){var n=_.$$p,r=n||i,$=this,a=i,o=i;return n&&(_.$$p=null),n&&(_.$$p=null),null==e&&(e=""),null==t&&(t=i),a=$.$new(e,t),o=r.$call(a),a.$close(),o},_.$$arity=-1),O.$attr_accessor("string"),e.def(O,"$initialize",h=function(e,t){var n=h.$$p,r=this;return n&&(h.$$p=null),null==e&&(e=""),null==t&&(t="rw"),r.string=e,r.position=0,l(r,c(r,"initialize",h,!1,!0),"initialize",[i,t],null)},h.$$arity=-1),e.def(O,"$eof?",y=function(){var e=this;return e.$check_readable(),e.position["$=="](e.string.$length())},y.$$arity=0),p(O,"eof","eof?"),e.def(O,"$seek",v=function(e,a){var u=this,l=i;return null==a&&(a=o(s(E,"IO"),"SEEK_SET")),u.read_buffer="",l=a,o(s(E,"IO"),"SEEK_SET")["$==="](l)?(d(t(e,0))||u.$raise(o(s(E,"Errno"),"EINVAL")),u.position=e):o(s(E,"IO"),"SEEK_CUR")["$==="](l)?d(n(r(u.position,e),u.string.$length()))?u.position=u.string.$length():u.position=r(u.position,e):o(s(E,"IO"),"SEEK_END")["$==="](l)&&(d(n(e,u.string.$length()))?u.position=0:u.position=$(u.position,e)),0},v.$$arity=-2),e.def(O,"$tell",m=function(){return this.position},m.$$arity=0),p(O,"pos","tell"),p(O,"pos=","seek"),e.def(O,"$rewind",g=function(){return this.$seek(0)},g.$$arity=0),e.def(O,"$write",b=function(t){var n=this,a=i,o=i;return n.$check_writable(),n.read_buffer="",t=n.$String(t),n.string.$length()["$=="](n.position)?(n.string=r(n.string,t),n.position=r(n.position,t.$length())):(a=n.string["$[]"](e.Range.$new(0,$(n.position,1),!1)),o=n.string["$[]"](e.Range.$new(r(n.position,t.$length()),-1,!1)),n.string=r(r(a,t),o),n.position=r(n.position,t.$length()))},b.$$arity=1),e.def(O,"$read",w=function(t,$){var a=this,o=i,s=i;return null==t&&(t=i),null==$&&($=i),a.$check_readable(),d(a["$eof?"]())?i:(o=d(t)?(s=a.string["$[]"](a.position,t),a.position=r(a.position,t),d(n(a.position,a.string.$length()))&&(a.position=a.string.$length()),s):(s=a.string["$[]"](e.Range.$new(a.position,-1,!1)),a.position=a.string.$length(),s),d($)?$.$write(o):o)},w.$$arity=-1),e.def(O,"$sysread",k=function(e){var t=this;return t.$check_readable(),t.$read(e)},k.$$arity=1),p(O,"readpartial","read")}(a[0],s(a,"IO"),a)},Opal.modules["paggio/formatter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var $=e.top,a=[],i=e.nil,o=e.$$$,s=e.$$,u=e.klass,l=e.truthy,c=e.hash2,p=e.send;return e.add_stubs(["$require","$[]=","$to_h","$-","$[]","$dup","$deep_merge!","$call","$replace","$===","$new","$merge","$each","$string","$indent?","$+","$lines","$puts","$*","$chomp","$print","$gsub","$to_s","$for","$version","$indent","$format","$instance_eval","$empty?","$map","$escape","$<<","$join","$include?","$downcase","$name","$value","$important","$fonts","$animations","$steps","$reverse","$rules","$media","$selector","$deindent"]),$.$require("stringio"),function($,$super,a){var d,f,_,h,y=u($,null,"Paggio"),v=[y].concat(a);return function($,$super,a){var o,d,f,_,h,y,v,m,g,b,w,k=u($,null,"Formatter"),O=[k].concat(a);k.$$prototype.options=k.$$prototype.io=i,e.defs(k,"$to_h",o=function(){var e=this,t=i;return null==e.formatters&&(e.formatters=i),e.formatters=l(t=e.formatters)?t:c([],{})},o.$$arity=0),e.defs(k,"$for",d=function(n){var r=d.$$p,$=r||i,a=this,o=i;return r&&(d.$$p=null),r&&(d.$$p=null),l($)?(o=[n,$],p(a.$to_h(),"[]=",e.to_a(o)),o[t(o.length,1)]):a.$to_h()["$[]"](n)},d.$$arity=1),e.defs(k,"$options",f=function(e){var t=f.$$p,n=t||i,r=i,$=i;return t&&(f.$$p=null),t&&(f.$$p=null),r=s(O,"OPTIONS").$dup(),s(O,"Utils")["$deep_merge!"](s(O,"OPTIONS"),e),$=n.$call(),s(O,"OPTIONS").$replace(r),$},f.$$arity=1),e.const_set(O[0],"OPTIONS",c(["indent"],{indent:c(["level","with"],{level:0,"with":"\t"})})),e.def(k,"$initialize",_=function(e,t){var n=this,r=i;return null==e&&(e=i),null==t&&(t=c([],{})),l(s(O,"Hash")["$==="](e))?(n.io=s(O,"StringIO").$new(),n.options=e):(n.io=l(r=e)?r:s(O,"StringIO").$new(),n.options=t),n.options=s(O,"OPTIONS").$merge(n.options)},_.$$arity=-1),e.def(k,"$format",h=function(t){var n,r=this;return function(){var $=e.new_brk();try{p(s(O,"Formatter").$to_h(),"each",[],((n=function(r,a){var o=null==n.$$s?this:n.$$s;if(null==r&&(r=i),null==a&&(a=i),!l(r["$==="](t)))return i;a.$call(o,t),e.brk(i,$)}).$$s=r,n.$$brk=$,n.$$arity=2,n))}catch(a){if(a===$)return a.$v;throw a}}(),r},h.$$arity=1),e.def(k,"$to_s",y=function(){return this.io.$string()},y.$$arity=0),e.def(k,"$indent?",v=function(){var t=v.$$p,n=this;t&&(v.$$p=null),t&&(v.$$p=null);try{return n.options["$[]"]("indent")["$[]"]("level")}catch(r){if(!e.rescue(r,[s(O,"StandardError")]))throw r;try{return!1}finally{e.pop_exception()}}},v.$$arity=0),e.def(k,"$indent",m=function(){var r=m.$$p,$=r||i,a=this,o=i,s=i,u=i,c=i;return r&&(m.$$p=null),r&&(m.$$p=null),l(a["$indent?"]())?l($)?(s=["level",n((o=a.options["$[]"]("indent"))["$[]"]("level"),1)],p(o,"[]=",e.to_a(s)),s[t(s.length,1)],$.$call(),s=["level",t((u=a.options["$[]"]("indent"))["$[]"]("level"),1)],p(u,"[]=",e.to_a(s)),s[t(s.length,1)]):(s=["level",n((c=a.options["$[]"]("indent"))["$[]"]("level"),1)],p(c,"[]=",e.to_a(s)),s[t(s.length,1)]):l($)?$.$call():i},m.$$arity=0),e.def(k,"$deindent",g=function(){var n=this,r=i,$=i;return l(n["$indent?"]())?($=["level",t((r=n.options["$[]"]("indent"))["$[]"]("level"),1)],p(r,"[]=",e.to_a($)),$[t($.length,1)]):i},g.$$arity=0),e.def(k,"$print",b=function(e){var t,n=this,$=i;return l($=n["$indent?"]())?p(e.$lines(),"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==n.io&&(n.io=i),null==n.options&&(n.options=i),null==e&&(e=i),n.io.$puts(""+r(n.options["$[]"]("indent")["$[]"]("with"),$)+e.$chomp())}).$$s=n,t.$$arity=1,t)):n.io.$print(e)},b.$$arity=1),e.def(k,"$escape",w=function(e){return e.$to_s().$gsub(/["><']|&(?!([a-zA-Z]+|(#\d+));)/,c(["&",">","<",'"',"'"],{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}))},w.$$arity=1)}(v[0],0,v),p(s(v,"Formatter"),"for",[s(v,"HTML")],((d=function(e,t){var n,r=null==d.$$s?this:d.$$s,$=i;return null==e&&(e=i),null==t&&(t=i),$=t.$version(),5["$==="]($)&&e.$print("<!DOCTYPE html>"),e.$print("<html>"),p(e,"indent",[],((n=function(){var r,$=null==n.$$s?this:n.$$s;return p(t,"each",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=i),e.$format(t)}).$$s=$,r.$$arity=1,r))}).$$s=r,n.$$arity=0,n)),e.$print("</html>")}).$$s=y,d.$$arity=2,d)),
p(s(v,"Formatter"),"for",[o(s(v,"HTML"),"Element")],((f=function(t,n){var r,$,a,o,u,c=null==f.$$s?this:f.$$s,d=i,_=i,h=i,y=i,m=i;return null==t&&(t=i),null==n&&(n=i),$=p(n,"instance_eval",[],((a=function(){var e=null==a.$$s?this:a.$$s;return null==e.name&&(e.name=i),null==e.attributes&&(e.attributes=i),null==e.class_names&&(e.class_names=i),[e.name,e.attributes,e.class_names]}).$$s=c,a.$$arity=0,a)),d=null==(r=e.to_ary($))[0]?i:r[0],_=null==r[1]?i:r[1],h=null==r[2]?i:r[2],l(l(y=_["$empty?"]())?h["$empty?"]():y)?t.$print("<"+d+">"):(m=p(_,"map",[],((o=function(e,n){null==o.$$s||o.$$s;return null==e&&(e=i),null==n&&(n=i),t.$escape(e)+'="'+t.$escape(n)+'"'}).$$s=c,o.$$arity=2,o)),l(h["$empty?"]())||m["$<<"]('class="'+t.$escape(h.$join(" "))+'"'),t.$print("<"+d+" "+m.$join(" ")+">")),l(["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]["$include?"](d.$to_s().$downcase()))?i:(p(t,"indent",[],((u=function(){var e,r,$=null==u.$$s?this:u.$$s,a=i;return l(a=p(n,"instance_eval",[],((e=function(){var t=null==e.$$s?this:e.$$s;return null==t.inner_html&&(t.inner_html=i),t.inner_html}).$$s=$,e.$$arity=0,e)))?t.$print(a):p(n,"each",[],((r=function(e){var n,$=null==r.$$s?this:r.$$s,a=i;return null==e&&(e=i),a=e,s(v,"String")["$==="](a)?t.$print(t.$escape(e)):s(v,"CSS")["$==="](a)?(t.$print("<style>"),p(t,"indent",[],((n=function(){return null==n.$$s||n.$$s,t.$format(e)}).$$s=$,n.$$arity=0,n)),t.$print("</style>")):t.$format(e)}).$$s=$,r.$$arity=1,r))}).$$s=c,u.$$arity=0,u)),t.$print("</"+d+">"))}).$$s=y,f.$$arity=2,f)),p(s(v,"Formatter"),"for",[o(o(s(v,"CSS"),"Definition"),"Style")],((_=function(e,t){null==_.$$s||_.$$s;return null==e&&(e=i),null==t&&(t=i),e.$print(t.$name()+": "+t.$value()+(l(t.$important())?" !important":i)+";")}).$$s=y,_.$$arity=2,_)),p(s(v,"Formatter"),"for",[s(v,"CSS")],((h=function(e,t){var n,r,$,a=null==h.$$s?this:h.$$s;return null==e&&(e=i),null==t&&(t=i),p(t.$fonts(),"each",[],((n=function(t){var r,$=null==n.$$s?this:n.$$s;return null==t&&(t=i),e.$print("@font-face {"),p(e,"indent",[],((r=function(){var n,$=null==r.$$s?this:r.$$s;return p(t,"each",[],((n=function(t){null==n.$$s||n.$$s;return null==t&&(t=i),e.$format(t)}).$$s=$,n.$$arity=1,n))}).$$s=$,r.$$arity=0,r)),e.$print("}")}).$$s=a,n.$$arity=1,n)),p(t.$animations(),"each",[],((r=function(t){var n,$=null==r.$$s?this:r.$$s;return null==t&&(t=i),p(["","-webkit-","-moz-","-o-"],"each",[],((n=function(r){var $,a=null==n.$$s?this:n.$$s;return null==r&&(r=i),e.$print("@"+r+"keyframes "+t.$name()+" {"),p(t.$steps(),"each",[],(($=function(t){var n,r=null==$.$$s?this:$.$$s;return null==t&&(t=i),e.$print(t.$value()+" {"),p(t,"each",[],((n=function(t){null==n.$$s||n.$$s;return null==t&&(t=i),e.$format(t)}).$$s=r,n.$$arity=1,n)),e.$print("}")}).$$s=a,$.$$arity=1,$)),e.$print("}")}).$$s=$,n.$$arity=1,n))}).$$s=a,r.$$arity=1,r)),p(t.$rules().$reverse(),"each",[],(($=function(t){var n,r=null==$.$$s?this:$.$$s,a=i;return null==t&&(t=i),l(t["$empty?"]())?i:(l(a=t.$media())&&(e.$print("@media "+a+" {"),e.$indent()),e.$print(t.$selector()+" {"),p(e,"indent",[],((n=function(){var r,$=null==n.$$s?this:n.$$s;return p(t,"each",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=i),e.$format(t)}).$$s=$,r.$$arity=1,r))}).$$s=r,n.$$arity=0,n)),e.$print("}"),l(t.$media())?(e.$print("}"),e.$deindent()):i)}).$$s=a,$.$$arity=1,$))}).$$s=y,h.$$arity=2,h))}(a[0],0,a)},Opal.modules.paggio=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.klass,i=e.send,o=e.hash2;return e.add_stubs(["$require","$options","$to_proc","$to_s","$format","$new","$tap","$each"]),t.$require("paggio/utils"),t.$require("paggio/html"),t.$require("paggio/css"),t.$require("paggio/formatter"),function(t,$super,n){var s,u,l,c,p,d=a(t,null,"Paggio"),f=[d].concat(n);return e.defs(d,"$options",s=function(e){var t=s.$$p,n=t||r;return t&&(s.$$p=null),t&&(s.$$p=null),i($(f,"Formatter"),"options",[e],n.$to_proc())},s.$$arity=1),e.defs(d,"$indent",u=function(e){var t=u.$$p,n=t||r,$=this;return t&&(u.$$p=null),t&&(u.$$p=null),i($,"options",[o(["indent"],{indent:e})],n.$to_proc())},u.$$arity=1),e.defs(d,"$css",l=function(){var t,n=l.$$p,a=n||r;return n&&(l.$$p=null),n&&(l.$$p=null),t=e.slice.call(arguments,0,arguments.length),$(f,"Formatter").$new().$format(i($(f,"CSS"),"new",e.to_a(t),a.$to_proc())).$to_s()},l.$$arity=-1),e.defs(d,"$html",c=function(){var t,n=c.$$p,a=n||r;return n&&(c.$$p=null),n&&(c.$$p=null),t=e.slice.call(arguments,0,arguments.length),$(f,"Formatter").$new().$format(i($(f,"HTML"),"new",e.to_a(t),a.$to_proc())).$to_s()},c.$$arity=-1),e.defs(d,"$html!",p=function(){var e,t=p.$$p,n=t||r,a=this;return t&&(p.$$p=null),t&&(p.$$p=null),i($(f,"Formatter").$new(),"tap",[],(e=function(t){var a,o=null==e.$$s?this:e.$$s;return null==t&&(t=r),i(i($(f,"HTML"),"new",[],n.$to_proc()),"each",[],((a=function(e){null==a.$$s||a.$$s;return null==e&&(e=r),t.$format(e)}).$$s=o,a.$$arity=1,a))},e.$$s=a,e.$$arity=1,e)).$to_s()},p.$$arity=0),r&&"html!"}(n[0],0,n)},Opal.modules["browser/version"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$,e.module);return function(t,r){var $=[n(t,"Browser")].concat(r);return e.const_set($[0],"VERSION","0.2.0")}(t[0],t)},Opal.modules["browser/utils"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.send;return e.add_stubs(["$new","$encode_uri","$to_s","$encode_uri_component","$[]","$map","$split","$decode_uri_component","$join"]),function(t,n){var a=[$(t,"Browser")].concat(n);e.const_set(a[0],"Size",r(a,"Struct").$new("width","height")),e.const_set(a[0],"Position",r(a,"Struct").$new("x","y"))}(t[0],t),function(t,$super,n){var r,$,i=a(t,null,"Object");[i].concat(n);e.def(i,"$encode_uri",r=function(){return this.$to_s().$encode_uri()},r.$$arity=0),e.def(i,"$encode_uri_component",$=function(){return this.$to_s().$encode_uri_component()},$.$$arity=0)}(t[0],0,t),function(t,$super,n){var r,$,i,o,s=a(t,null,"String");[s].concat(n);e.def(s,"$encode_uri_component",r=function(){return encodeURIComponent(this)},r.$$arity=0),e.def(s,"$encode_uri",$=function(){return encodeURI(this)},$.$$arity=0),e.def(s,"$decode_uri_component",i=function(){return decodeURIComponent(this)},i.$$arity=0),e.def(s,"$decode_uri",o=function(){return decodeURI(this)},o.$$arity=0)}(t[0],0,t),function(t,$super,r){var $,o,s=a(t,null,"Hash");[s].concat(r);return e.defs(s,"$decode_uri",$=function(t){var r,$=this;return $["$[]"](i(t.$split("&"),"map",[],((r=function(t){null==r.$$s||r.$$s;var $,a,i=n,o=n;return null==t&&(t=n),a=t.$split("="),i=null==($=e.to_ary(a))[0]?n:$[0],o=null==$[1]?n:$[1],[i.$decode_uri_component(),o.$decode_uri_component()]}).$$s=$,r.$$arity=1,r)))},$.$$arity=1),e.def(s,"$encode_uri",o=function(){var e,t=this;return i(t,"map",[],(e=function(t,r){null==e.$$s||e.$$s;return null==t&&(t=n),null==r&&(r=n),t.$to_s().$encode_uri_component()+"="+r.$to_s().$encode_uri_component()},e.$$s=t,e.$$arity=2,e)).$join("&")},o.$$arity=0),n&&"encode_uri"}(t[0],0,t)},Opal.modules["browser/support"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.truthy,i=e.gvars;return e.add_stubs(["$downcase","$===","$!","$supports?"]),e.const_set(t[0],"BROWSER_ENGINE",function(){try{return/MSIE|WebKit|Presto|Gecko/.exec(navigator.userAgent)[0].$downcase()}catch(n){if(!e.rescue(n,[r(t,"StandardError")]))throw n;try{return"unknown"}finally{e.pop_exception()}}}()),function(t,o){var s,u,l=$(t,"Browser"),c=[l].concat(o);return l.support={},e.defs(l,"$supports?",s=function(t){var $,o=this,s=n,u=n,l=n;return null==o.support&&(o.support=n),a("undefined"!=typeof o.support[t])?o.support[t]:(s=function(){if(u=t,"MutationObserver"["$==="](u))return"undefined"!=typeof window.MutationObserver;if("WebSocket"["$==="](u))return"undefined"!=typeof window.WebSocket;if("EventSource"["$==="](u))return"undefined"!=typeof window.EventSource;if("XHR"["$==="](u))return"undefined"!=typeof window.XMLHttpRequest;if("ActiveX"["$==="](u))return"undefined"!=typeof window.ActiveXObject;if("WebSQL"["$==="](u))return"undefined"!=typeof window.openDatabase;if("Query.css"["$==="](u))return"undefined"!=typeof document.querySelectorAll;if("Query.xpath"["$==="](u))return"undefined"!=typeof document.evaluate;if("Storage.local"["$==="](u))return"undefined"!=typeof window.localStorage;if("Storage.global"["$==="](u))return"undefined"!=typeof window.globalStorage;if("Storage.session"["$==="](u))return"undefined"!=typeof window.sessionStorage;if("Immediate"["$==="](u))return"undefined"!=typeof window.setImmediate;if("Immediate (Internet Explorer)"["$==="](u))return"undefined"!=typeof window.msSetImmediate;if("Immediate (Firefox)"["$==="](u))return"undefined"!=typeof window.mozSetImmediate;if("Immediate (Opera)"["$==="](u))return"undefined"!=typeof window.oSetImmediate;if("Immediate (Chrome)"["$==="](u)||"setImmediate (Safari)"["$==="](u))return"undefined"!=typeof window.webkitSetImmediate;if("CSS.computed"["$==="](u))return"undefined"!=typeof window.getComputedStyle;if("CSS.current"["$==="](u))return"undefined"!=typeof document.documentElement.currentStyle;if("Window.send"["$==="](u))return"undefined"!=typeof window.postMessage;if("Window.send (Asynchronous)"["$==="](u)){if(a(a(l="undefined"!=typeof window.postMessage)?("undefined"!=typeof window.importScripts)["$!"]():l)){var s=!0,p=window.onmessage;return window.onmessage=function(){s=!1},window.postMessage("","*"),window.onmessage=p,s}return n}if("Window.send (Synchronous)"["$==="](u))return o["$supports?"]("Window.send (Asynchronous)")["$!"]();if("Window.innerSize"["$==="](u))return"undefined"!=typeof window.innerHeight;if("Window.outerSize"["$==="](u))return"undefined"!=typeof window.outerHeight;if("Window.scroll"["$==="](u))return"undefined"!=typeof document.documentElement.scrollLeft;if("Window.pageOffset"["$==="](u))return"undefined"!=typeof window.pageXOffset;var d,f;if("Attr.isId"["$==="](u))return(d=document.createElement("div")).setAttribute("id","xxxxxxxxxxxxx"),"undefined"!=typeof d.attributes.id.isId;if("Element.addBehavior"["$==="](u))return"undefined"!=typeof document.documentElement.addBehavior;if("Element.className"["$==="](u))return(d=document.createElement("div")).setAttribute("className","x"),"x"===d.className;if("Element.class"["$==="](u))return(d=document.createElement("div")).setAttribute("class","x"),"x"===d.className;if("Element.for"["$==="](u))return(f=document.createElement("label")).setAttribute("for","x"),"x"===f.htmlFor;if("Element.htmlFor"["$==="](u))return(f=document.createElement("label")).setAttribute("htmlFor","x"),"x"===f.htmlFor;if("Element.clientSize"["$==="](u))return"undefined"!=typeof document.documentElement.clientHeight;if("Element.scroll"["$==="](u))return"undefined"!=typeof document.documentElement.scrollLeft;if("Element.textContent"["$==="](u))return"undefined"!=typeof document.documentElement.textContent;if("Element.innerText"["$==="](u))return"undefined"!=typeof document.documentElement.innerText;if("Element.matches"["$==="](u))return"undefined"!=typeof document.documentElement.matches;if("Element.matches (Internet Explorer)"["$==="](u))return"undefined"!=typeof document.documentElement.msMatchesSelector;if("Element.matches (Firefox)"["$==="](u))return"undefined"!=typeof document.documentElement.mozMatchesSelector;if("Element.matches (Opera)"["$==="](u))return"undefined"!=typeof document.documentElement.oMatchesSelector;if("Element.matches (Chrome)"["$==="](u)||"Element.matches (Safari)"["$==="](u))return"undefined"!=typeof document.documentElement.webkitMatchesSelector;if("Element.getBoundingClientRect"["$==="](u))return"undefined"!=typeof document.documentElement.getBoundingClientRect;if("Event.readystatechange"["$==="](u))return"onreadystatechange"in window.document.createElement("script");if(!"Event.constructor"["$==="](u))return"Event.create"["$==="](u)?"undefined"!=typeof document.createEvent:"Event.createObject"["$==="](u)?"undefined"!=typeof document.createEventObject:"Event.addListener"["$==="](u)?"undefined"!=typeof document.addEventListener:"Event.attach"["$==="](u)?"undefined"!=typeof document.attachEvent:"Event.removeListener"["$==="](u)?"undefined"!=typeof document.removeEventListener:"Event.detach"["$==="](u)?"undefined"!=typeof document.detachEvent:"Event.dispatch"["$==="](u)?"undefined"!=typeof document.dispatchEvent:"Event.fire"["$==="](u)?"undefined"!=typeof document.fireEvent:/^Event\.([A-Z].*?)$/["$==="](u)?(($=i["~"])===n?n:$["$[]"](1))+"Event"in window:"Document.view"["$==="](u)?"undefined"!=typeof document.defaultView:"Document.window"["$==="](u)?"undefined"!=typeof document.parentWindow:"History"["$==="](u)?"undefined"!=typeof window.history.pushState:"History.state"["$==="](u)?"undefined"!=typeof window.history.state:"Animation.request"["$==="](u)?"undefined"!=typeof window.requestAnimationFrame:"Animation.request (Internet Explorer)"["$==="](u)?"undefined"!=typeof window.msRequestAnimationFrame:"Animation.request (Firefox)"["$==="](u)?"undefined"!=typeof window.mozRequestAnimationFrame:"Animation.request (Opera)"["$==="](u)?"undefined"!=typeof window.oRequestAnimationFrame:"Animation.request (Chrome)"["$==="](u)||"Animation.request (Safari)"["$==="](u)?"undefined"!=typeof window.webkitRequestAnimationFrame:"Animation.cancel"["$==="](u)?"undefined"!=typeof window.cancelAnimationFrame:"Animation.cancel (Internet Explorer)"["$==="](u)?"undefined"!=typeof window.msCancelAnimationFrame:"Animation.cancel (Firefox)"["$==="](u)?"undefined"!=typeof window.mozCancelAnimationFrame:"Animation.cancel (Opera)"["$==="](u)?"undefined"!=typeof window.oCancelAnimationFrame:"Animation.cancel (Chrome)"["$==="](u)||"Animation.cancel (Safari)"["$==="](u)?"undefined"!=typeof window.webkitCancelAnimationFrame:"Animation.cancelRequest"["$==="](u)?"undefined"!=typeof window.cancelRequestAnimationFrame:"Animation.cancelRequest (Internet Explorer)"["$==="](u)?"undefined"!=typeof window.msCancelRequestAnimationFrame:"Animation.cancelRequest (Firefox)"["$==="](u)?"undefined"!=typeof window.mozCancelRequestAnimationFrame:"Animation.cancelRequest (Opera)"["$==="](u)?"undefined"!=typeof window.oCancelRequestAnimationFrame:"Animation.cancelRequest (Chrome)"["$==="](u)||"Animation.cancelRequest (Safari)"["$==="](u)?"undefined"!=typeof window.webkitCancelRequestAnimationFrame:n;try{return new MouseEvent("click"),!0}catch(_){if(!e.rescue(_,[r(c,"StandardError")]))throw _;try{return!1}finally{e.pop_exception()}}}(),o.support[t]=s)},s.$$arity=1),e.defs(l,"$loaded?",u=function(e){var t=n;return t=e,"Sizzle"["$==="](t)?"undefined"!=typeof window.Sizzle:"wicked-good-xpath"["$==="](t)?"undefined"!=typeof window.wgxpath:n},u.$$arity=1),n&&"loaded?"}(t[0],t)},Opal.modules["browser/event/base"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send2,u=e.find_super,l=e.truthy,c=e.send,p=e.lambda,d=e.hash2;return e.add_stubs(["$include","$call","$to_n","$<<","$converters","$native?","$each","$instance_eval","$register","$to_proc","$attr_reader","$new","$stopped?","$arguments","$!","$prevented?","$class_for","$off","$target","$[]","$delegated","$delete","$last","$empty?","$first","$raise","$name_for","$handlers","$[]=","$-","$include?","$on!","$delegate","$callback=","$on","$handlers=","$push","$callbacks","$attach","$attach!","$supports?","$name","$==","$event","$===","$warn","$detach","$gsub","$delete_if","$=~","$clear","$none?","$is_a?","$create","$dispatch","$trigger","$bubbles=","$private","$nil?","$dup","$on=","$parent"]),function(n,f){var _=[i(n,"Browser")].concat(f);return function(n,$super,f){var _=o(n,null,"Event"),h=[_].concat(f);return _.$include(a(h,"Native")),function(t,$super,n){var $,i,c,p=o(t,null,"Definition"),d=[p].concat(n);p.$$prototype.native=r,p.$include(a(d,"Native")),e.defs(p,"$new",$=function(){var e=$.$$p,t=e||r,n=this,a=r;return e&&($.$$p=null),e&&($.$$p=null),a=s(n,u(n,"new",$,!1,!0),"new",[{bubbles:!0,cancelable:!0}],null),l(t)&&t.$call(a),a.$to_n()},$.$$arity=0),e.def(p,"$bubbles=",i=function(e){return this.native.bubbles=e},i.$$arity=1),e.def(p,"$cancelable=",c=function(e){return this.native.cancelable=e},c.$$arity=1)}(h[0],0,h),function(n,s){var u,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M=i(n,"Target"),R=[M].concat(s);return e.defs(M,"$converters",u=function(){var e=this,t=r;return null==e.converters&&(e.converters=r),e.converters=l(t=e.converters)?t:[]},u.$$arity=0),e.defs(M,"$register",f=function(){var e=f.$$p,t=e||r,n=this;return e&&(f.$$p=null),e&&(f.$$p=null),n.$converters()["$<<"](t)},f.$$arity=0),e.defs(M,"$convert",_=function(t){try{var n,$=this;return l($["$native?"](t))?(c($.$converters(),"each",[],((n=function($){null==n.$$s||n.$$s;var a=r;if(null==$&&($=r),!l(a=$.$call(t)))return r;e.ret(a)}).$$s=$,n.$$arity=1,n)),r):t}catch(a){if(a===e.returner)return a.$v;throw a}},_.$$arity=1),e.defs(M,"$included",h=function(t){var n,i=this;return c(t,"instance_eval",[],((n=function(){var t,i=null==n.$$s?this:n.$$s;return e.defs(i,"$target",t=function(){var e=t.$$p,n=e||r;return e&&(t.$$p=null),e&&(t.$$p=null),c($(a(R,"Event"),"Target"),"register",[],n.$to_proc())},t.$$arity=0),r&&"target"}).$$s=i,n.$$arity=0,n))},h.$$arity=1),function(t,$super,n){var $,i,s,u,d,f=o(t,null,"Callback"),_=[f].concat(n);f.$$prototype.proc=f.$$prototype.name=r,f.$attr_reader("target","name","selector"),e.def(f,"$initialize",$=function(e,t,n){var a=$.$$p,i=a||r,o=this;return a&&($.$$p=null),a&&($.$$p=null),null==n&&(n=r),o.target=e,o.name=t,o.selector=n,o.block=i},$.$$arity=-3),e.def(f,"$call",i=function(e){return this.$to_proc().$call(e)},i.$$arity=1),e.def(f,"$to_proc",s=function(){var t,n=this,$=r;return n.proc=l($=n.proc)?$:p(((t=function(n){var $=null==t.$$s?this:t.$$s;return null==$.block&&($.block=r),null==n&&(n=r),n.currentTarget||(n.currentTarget=$.target.native),n=a(_,"Event").$new(n,$),l(n["$stopped?"]())||c($.block,"call",[n].concat(e.to_a(n.$arguments()))),n["$prevented?"]()["$!"]()}).$$s=n,t.$$arity=1,t))},s.$$arity=0),e.def(f,"$event",u=function(){var e=this;return a(_,"Event").$class_for(e.name)},u.$$arity=0),e.def(f,"$off",d=function(){var e=this;return e.$target().$off(e)},d.$$arity=0)}(R[0],0,R),function(t,$super,n){var $,a,i=o(t,null,"Delegate");[i].concat(n);i.$$prototype.target=i.$$prototype.name=i.$$prototype.pair=r,e.def(i,"$initialize",$=function(e,t,n){var r=this;return r.target=e,r.name=t,r.pair=n},$.$$arity=3),e.def(i,"$off",a=function(){var e=this,t=r;return(t=e.target.$delegated()["$[]"](e.name)).$last().$delete(e.pair),l(t.$last()["$empty?"]())?(t.$first().$off(),t.$delete(e.name)):r},a.$$arity=0)}(R[0],0,R),e.const_set(R[0],"Delegates",a(R,"Struct").$new("callback","handlers")),e.def(M,"$on",y=function(n,$){var i,o,s=y.$$p,u=s||r,p=this,d=r,f=r,_=r,h=r;return s&&(y.$$p=null),s&&(y.$$p=null),null==$&&($=r),l(u)||p.$raise(a(R,"ArgumentError"),"no block has been given"),n=a(R,"Event").$name_for(n),l($)?l(d=p.$delegated()["$[]"](n))?(f=[$,u],d.$handlers()["$<<"](f),a(R,"Delegate").$new(p,n,f)):(_=[n,a(R,"Delegates").$new()],c(p.$delegated(),"[]=",e.to_a(_)),d=_[t(_.length,1)],l(["blur","focus"]["$include?"](n))?(_=[c(p,"on!",[n],(i=function(e){var t=null==i.$$s?this:i.$$s;return null==e&&(e=r),t.$delegate(d,e)},i.$$s=p,i.$$arity=1,i))],c(d,"callback=",e.to_a(_)),_[t(_.length,1)]):(_=[c(p,"on",[n],(o=function(e){var t=null==o.$$s?this:o.$$s;return null==e&&(e=r),t.$delegate(d,e)},o.$$s=p,o.$$arity=1,o))],c(d,"callback=",e.to_a(_)),_[t(_.length,1)]),_=[[f=[$,u]]],c(d,"handlers=",e.to_a(_)),_[t(_.length,1)],a(R,"Delegate").$new(p,n,f)):(h=c(a(R,"Callback"),"new",[p,n,$],u.$to_proc()),p.$callbacks().$push(h),p.$attach(h))},y.$$arity=-2),e.def(M,"$on!",v=function(e){var t=v.$$p,n=t||r,$=this,i=r;return t&&(v.$$p=null),t&&(v.$$p=null),l(n)||$.$raise(a(R,"ArgumentError"),"no block has been given"),e=a(R,"Event").$name_for(e),i=c(a(R,"Callback"),"new",[$,e],n.$to_proc()),$.$callbacks().$push(i),$["$attach!"](i)},v.$$arity=1),l(a(R,"Browser")["$supports?"]("Event.addListener"))?(e.def(M,"$attach",m=function(e){var t=this;return null==t.native&&(t.native=r),t.native.addEventListener(e.$name(),e.$to_proc()),e},m.$$arity=1),e.def(M,"$attach!",g=function(e){var t=this;return null==t.native&&(t.native=r),t.native.addEventListener(e.$name(),e.$to_proc(),!0),e},g.$$arity=1)):l(a(R,"Browser")["$supports?"]("Event.attach"))?(e.def(M,"$attach",b=function(e){var t=this;return null==t.native&&(t.native=r),e.$event()["$=="](a(R,"Custom"))?t.native.$custom||(t.native.$custom=function(e){for(var n=0,r=t.native.$callbacks.length;n<r;n++){var $=t.native.$callbacks[n];$.$event()["$=="](a(R,"Custom"))&&(e.type=$.name,$.$call(e))}},t.native.attachEvent("ondataavailable",t.native.$custom)):t.native.attachEvent("on"+e.$name(),e.$to_proc()),e},b.$$arity=1),e.def(M,"$attach!",w=function(e){var t=this,n=r;return null==t.native&&(t.native=r),n=e.$name(),"blur"["$==="](n)?t.native.attachEvent("onfocusout",e.$to_proc()):"focus"["$==="](n)?t.native.attachEvent("onfocusin",e.$to_proc()):(t.$warn("attach: capture doesn't work on this browser"),t.$attach(e)),e},w.$$arity=1)):(e.def(M,"$attach",k=function(){var t=this;return e.slice.call(arguments,0,arguments.length),t.$raise(a(R,"NotImplementedError"))},k.$$arity=-1),e.def(M,"$attach!",O=function(){var t=this;return e.slice.call(arguments,0,arguments.length),t.$raise(a(R,"NotImplementedError"))},O.$$arity=-1)),e.def(M,"$off",E=function(e){var t,n,$,i=this,o=r,s=r;return null==e&&(e=r),o=e,a(R,"Callback")["$==="](o)?(i.$callbacks().$delete(e),i.$detach(e)):a(R,"String")["$==="](o)?l(l(s=e["$include?"]("*"))?s:e["$include?"]("?"))?i.$off(a(R,"Regexp").$new(e.$gsub(/\*/,".*?").$gsub(/\?/,"."))):(e=a(R,"Event").$name_for(e),c(i.$callbacks(),"delete_if",[],((t=function(n){var $=null==t.$$s?this:t.$$s;return null==n&&(n=r),n.$name()["$=="](e)?($.$detach(n),!0):r}).$$s=i,t.$$arity=1,t))):a(R,"Regexp")["$==="](o)?c(i.$callbacks(),"delete_if",[],((n=function(t){var $=null==n.$$s?this:n.$$s;return null==t&&(t=r),l(t.$name()["$=~"](e))?($.$detach(t),!0):r}).$$s=i,n.$$arity=1,n)):(c(i.$callbacks(),"each",[],(($=function(e){var t=null==$.$$s?this:$.$$s;return null==e&&(e=r),t.$detach(e)}).$$s=i,$.$$arity=1,$)),i.$callbacks().$clear())},E.$$arity=-1),l(a(R,"Browser")["$supports?"]("Event.removeListener"))?e.def(M,"$detach",x=function(e){var t=this;return null==t.native&&(t.native=r),t.native.removeEventListener(e.$name(),e.$to_proc(),!1)},x.$$arity=1):l(a(R,"Browser")["$supports?"]("Event.detach"))?e.def(M,"$detach",S=function(e){var t,n=this;return null==n.native&&(n.native=r),e.$event()["$=="](a(R,"Custom"))?l(c(n.$callbacks(),"none?",[],((t=function(e){null==t.$$s||t.$$s;return null==e&&(e=r),e.$event()["$=="](a(R,"Custom"))}).$$s=n,t.$$arity=1,t)))?(n.native.detachEvent("ondataavailable",n.native.$custom),void delete n.native.$custom):r:n.native.detachEvent("on"+e.$name(),e.$to_proc())},S.$$arity=1):e.def(M,"$detach",q=function(){return this.$raise(a(R,"NotImplementedError"))},q.$$arity=1),e.def(M,"$trigger",N=function(t){var n,$=N.$$p,i=$||r,o=this;return $&&(N.$$p=null),$&&(N.$$p=null),n=e.slice.call(arguments,1,arguments.length),l(t["$is_a?"](a(R,"String")))&&(t=c(a(R,"Event"),"create",[t].concat(e.to_a(n)),i.$to_proc())),o.$dispatch(t)},N.$$arity=-2),e.def(M,"$trigger!",C=function(n){var $,a,i=C.$$p,o=i||r,s=this;return i&&(C.$$p=null),i&&(C.$$p=null),$=e.slice.call(arguments,1,arguments.length),c(s,"trigger",[n].concat(e.to_a($)),((a=function(n){null==a.$$s||a.$$s;var $=r;return null==n&&(n=r),l(o)&&o.$call(n),$=[!1],c(n,"bubbles=",e.to_a($)),$[t($.length,1)]}).$$s=s,a.$$arity=1,a))},C.$$arity=-2),l(a(R,"Browser")["$supports?"]("Event.dispatch"))?e.def(M,"$dispatch",z=function(e){var t=this;return null==t.native&&(t.native=r),t.native.dispatchEvent(e.$to_n())},z.$$arity=1):l(a(R,"Browser")["$supports?"]("Event.fire"))?e.def(M,"$dispatch",I=function(e){var t=this;return null==t.native&&(t.native=r),l(a(R,"Custom")["$==="](e))?t.native.fireEvent("ondataavailable",e.$to_n()):t.native.fireEvent("on"+e.$name(),e.$to_n())},I.$$arity=1):e.def(M,"$dispatch",D=function(){var t=this;return e.slice.call(arguments,0,arguments.length),t.$raise(a(R,"NotImplementedError"))},D.$$arity=-1),M.$private(),e.def(M,"$callbacks",H=function(){var e=this;return null==e.native&&(e.native=r),e.native.$callbacks||(e.native.$callbacks=[]),e.native.$callbacks},H.$$arity=0),e.def(M,"$delegated",A=function(){var e=this;return null==e.native&&(e.native=r),e.native.$delegated||(e.native.$delegated=d([],{})),e.native.$delegated},A.$$arity=0),e.def(M,"$delegate",j=function(n,$,a){var i,o=this,s=r;return null==a&&(a=$.$target()),l(l(s=a["$nil?"]())?s:a["$=="]($.$on()))?r:(c(n.$handlers(),"each",[],((i=function(n,o){null==i.$$s||i.$$s;var s=r,u=r;return null==n&&(n=r),null==o&&(o=r),l(a["$=~"](n))?(s=$.$dup(),u=[a],c(s,"on=",e.to_a(u)),u[t(u.length,1)],c(o,"call",[s].concat(e.to_a(s.$arguments())))):r}).$$s=o,i.$$arity=2,i)),o.$delegate(n,$,a.$parent()))},j.$$arity=-3),r&&"delegate"}(h[0],h)}(_[0],0,_)}(n[0],n)},Opal.modules["browser/event/ui"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"UI"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.UI")},o.$$arity=0),function(t,$super,r){var $,i,o=a(t,$super,"Definition");[o].concat(r);o.$$prototype.native=n,e.def(o,"$detail=",$=function(e){return this.native.detail=e},$.$$arity=1),e.def(o,"$view=",i=function(e){return this.native.view=e},i.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new UIEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("UIEvent");return n.initUIEvent(e,t.bubbles,t.cancelable,t.view||window,t.detail||0),n},u.$$arity=2)),l.$alias_native("detail"),l.$alias_native("view")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/mouse"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.gvars,s=e.truthy;return e.add_stubs(["$!","$nil?","$[]","$include","$new","$try_convert","$supported?","$supports?","$alias_native","$x","$screen","$y","$DOM","$==","$downcase","$name"]),function(t,u){var l=[a(t,"Browser")].concat(u);return function(t,$super,a){var u=[i(t,null,"Event")].concat(a);return function(t,$super,a){var u,l,c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D=i(t,$super,"Mouse"),H=[D].concat(a);return D.$$prototype.native=n,e.defs(D,"$supported?",u=function(){return null==o.$&&(o.$=n),o.$["$[]"]("MouseEvent")["$nil?"]()["$!"]()},u.$$arity=0),function(t,$super,r){var a,o,s,u,l,c,p,d,f,_,h,y,v,m,g,b=i(t,$super,"Definition"),w=[b].concat(r);b.$$prototype.native=n,function(t,$super,r){var a,o,s=i(t,null,"Client"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.clientX=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.clientY=e},o.$$arity=1)}(w[0],0,w),function(t,$super,r){var a,o,s=i(t,null,"Layer"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.layerX=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.layerY=e},o.$$arity=1)}(w[0],0,w),function(t,$super,r){var a,o,s=i(t,null,"Offset"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.offsetX=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.offsetY=e},o.$$arity=1)}(w[0],0,w),function(t,$super,r){var a,o,s=i(t,null,"Page"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.pageX=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.pageY=e},o.$$arity=1)}(w[0],0,w),function(t,$super,r){var a,o,s=i(t,null,"Screen"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.screenX=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.screenY=e},o.$$arity=1)}(w[0],0,w),function(t,$super,r){var a,o,s=i(t,null,"Ancestor"),u=[s].concat(r);s.$$prototype.native=n,s.$include($(u,"Native")),e.def(s,"$x=",a=function(e){return this.native.x=e},a.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.y=e},o.$$arity=1)}(w[0],0,w),e.def(b,"$x=",a=function(e){return this.native.screenX=e},a.$$arity=1),e.def(b,"$y=",o=function(e){return this.native.screenY=e},o.$$arity=1),e.def(b,"$alt!",s=function(){return this.native.altKey=!0},s.$$arity=0),e.def(b,"$ctrl!",u=function(){return this.native.ctrlKey=!0},u.$$arity=0),e.def(b,"$meta!",l=function(){return this.native.metaKey=!0},l.$$arity=0),e.def(b,"$button=",c=function(e){return this.native.button=e},c.$$arity=1),e.def(b,"$client",p=function(){var e=this;return $(w,"Client").$new(e.native)},p.$$arity=0),e.def(b,"$layer",d=function(){var e=this;return $(w,"Layer").$new(e.native)},d.$$arity=0),e.def(b,"$offset",f=function(){var e=this;return $(w,"Offset").$new(e.native)},f.$$arity=0),e.def(b,"$page",_=function(){var e=this;return $(w,"Page").$new(e.native)},_.$$arity=0),e.def(b,"$screen",h=function(){var e=this;return $(w,"Screen").$new(e.native)},h.$$arity=0),e.def(b,"$ancestor",y=function(){var e=this;return $(w,"Ancestor").$new(e.native)},y.$$arity=0),e.def(b,"$related=",v=function(e){return this.native.relatedTarget=$(w,"Native").$try_convert(e)},v.$$arity=1),e.def(b,"$from=",m=function(e){return this.native.fromElement=$(w,"Native").$try_convert(e)},m.$$arity=1),e.def(b,"$to=",g=function(e){return this.native.toElement=$(w,"Native").$try_convert(e)},g.$$arity=1)}(H[0],r($(H,"UI"),"Definition"),H),s(D["$supported?"]())&&(s($(H,"Browser")["$supports?"]("Event.constructor"))?e.defs(D,"$construct",l=function(e,t){return new MouseEvent(e,t)},l.$$arity=2):s($(H,"Browser")["$supports?"]("Event.create"))&&e.defs(D,"$construct",c=function(e,t){var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,t.bubbles,t.cancelable,t.view||window,t.detail||0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey||!1,t.altKey||!1,t.shiftKey||!1,t.metaKey||!1,t.button||0,t.relatedTarget||null),n},c.$$arity=2)),D.$alias_native("alt?","altKey"),D.$alias_native("ctrl?","ctrlKey"),D.$alias_native("meta?","metaKey"),D.$alias_native("shift?","shiftKey"),D.$alias_native("button"),e.def(D,"$client",p=function(){var e=this;return $(H,"Position").$new(e.native.clientX,e.native.clientY)},p.$$arity=0),e.def(D,"$layer",d=function(){var e=this;return s(null==e.native.layerX)?n:$(H,"Position").$new(e.native.layerX,e.native.layerY)},d.$$arity=0),e.def(D,"$offset",f=function(){var e=this;return s(null==e.native.offsetX)?n:$(H,"Position").$new(e.native.offsetX,e.native.offsetY)},f.$$arity=0),e.def(D,"$page",_=function(){var e=this;return s(null==e.native.pageX)?n:$(H,"Position").$new(e.native.pageX,e.native.pageY)},_.$$arity=0),e.def(D,"$screen",h=function(){var e=this;return s(null==e.native.screenX)?n:$(H,"Position").$new(e.native.screenX,e.native.screenY)},h.$$arity=0),e.def(D,"$ancestor",y=function(){var e=this;return s(null==e.native.x)?n:$(H,"Position").$new(e.native.x,e.native.y)},y.$$arity=0),e.def(D,"$x",v=function(){return this.$screen().$x()},v.$$arity=0),e.def(D,"$y",m=function(){return this.$screen().$y()},m.$$arity=0),e.def(D,"$related",g=function(){var e=this;return s(null==e.native.relatedTarget)?n:e.$DOM(e.native.relatedTarget)},g.$$arity=0),e.def(D,"$from",b=function(){var e=this;return s(null==e.native.fromElement)?n:e.$DOM(e.native.fromElement)},b.$$arity=0),e.def(D,"$to",w=function(){var e=this;return s(null==e.native.toElement)?n:e.$DOM(e.native.toElement)},w.$$arity=0),e.def(D,"$click?",k=function(){return this.$name().$downcase()["$=="]("click")},k.$$arity=0),e.def(D,"$double_click?",O=function(){return this.$name().$downcase()["$=="]("dblclick")},O.$$arity=0),e.def(D,"$down?",E=function(){return this.$name().$downcase()["$=="]("mousedown")},E.$$arity=0),e.def(D,"$enter?",x=function(){return this.$name().$downcase()["$=="]("mouseenter")},x.$$arity=0),e.def(D,"$leave?",S=function(){return this.$name().$downcase()["$=="]("mouseleave")},S.$$arity=0),e.def(D,"$move?",q=function(){return this.$name().$downcase()["$=="]("mousemove")},q.$$arity=0),e.def(D,"$out?",N=function(){return this.$name().$downcase()["$=="]("mouseout")},N.$$arity=0),e.def(D,"$over?",C=function(){return this.$name().$downcase()["$=="]("mouseover")},C.$$arity=0),e.def(D,"$up?",z=function(){
return this.$name().$downcase()["$=="]("mouseup")},z.$$arity=0),e.def(D,"$show?",I=function(){return this.$name().$downcase()["$=="]("show")},I.$$arity=0),n&&"show?"}(u[0],$(u,"UI"),u)}(l[0],0,l)}(t[0],t)},Opal.modules["browser/event/keyboard"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy,s=e.alias;return e.add_stubs(["$supports?","$supported?","$alias_native","$code","$chr","$==","$downcase","$name"]),function(t,u){var l=[a(t,"Browser")].concat(u);return function(t,$super,a){var u=[i(t,null,"Event")].concat(a);return function(t,$super,a){var u,l,c,p,d,f,_,h,y,v=i(t,$super,"Keyboard"),m=[v].concat(a);return v.$$prototype.native=n,e.defs(v,"$supported?",u=function(){return $(m,"Browser")["$supports?"]("Event.Keyboard")},u.$$arity=0),function(t,$super,r){var $,a,o,s,u,l,c,p,d,f=i(t,$super,"Definition");[f].concat(r);f.$$prototype.native=n,e.def(f,"$alt!",$=function(){return this.native.altKey=!0},$.$$arity=0),e.def(f,"$ctrl!",a=function(){return this.native.ctrlKey=!0},a.$$arity=0),e.def(f,"$meta!",o=function(){return this.native.metaKey=!0},o.$$arity=0),e.def(f,"$shift!",s=function(){return this.native.shiftKey=!0},s.$$arity=0),e.def(f,"$code=",u=function(e){var t=this;return t.native.keyCode=t.native.which=e},u.$$arity=1),e.def(f,"$key=",l=function(e){return this.native.key=e},l.$$arity=1),e.def(f,"$char=",c=function(e){var t=this;return t.native.char=t.native.charCode=e},c.$$arity=1),e.def(f,"$repeat!",p=function(){return this.native.repeat=!0},p.$$arity=0),e.def(f,"$locale=",d=function(e){return this.native.locale=e},d.$$arity=1)}(m[0],r($(m,"UI"),"Definition"),m),o(v["$supported?"]())&&(o($(m,"Browser")["$supports?"]("Event.constructor"))?e.defs(v,"$construct",l=function(e,t){return new KeyboardEvent(e,t)},l.$$arity=2):o($(m,"Browser")["$supports?"]("Event.create"))&&e.defs(v,"$construct",c=function(e,t){var n="";t.altKey&&(n+="Alt "),t.ctrlKey&&(n+="Ctrl "),t.shiftKey&&(n+="Shift"),t.metaKey&&(n+="Meta ");var r=document.createEvent("KeyboardEvent");return r.initKeyboardEvent(e,t.bubbles,t.cancelable,t.view||window,t.which,0,n,t.repeat,t.locale),r},c.$$arity=2)),v.$alias_native("alt?","altKey"),v.$alias_native("ctrl?","ctrlKey"),v.$alias_native("meta?","metaKey"),v.$alias_native("shift?","shiftKey"),v.$alias_native("locale"),v.$alias_native("repeat?","repeat"),e.def(v,"$key",p=function(){var e=this;return e.native.key||e.native.keyIdentifier||n},p.$$arity=0),e.def(v,"$code",d=function(){var e=this;return e.native.keyCode||e.native.which||n},d.$$arity=0),e.def(v,"$char",f=function(){var e=this;return e.native.char||e.native.charCode||(o(e.$code())?e.$code().$chr():n)},f.$$arity=0),s(v,"to_i","key"),e.def(v,"$down?",_=function(){return this.$name().$downcase()["$=="]("keydown")},_.$$arity=0),e.def(v,"$press?",h=function(){return this.$name().$downcase()["$=="]("keypress")},h.$$arity=0),e.def(v,"$up?",y=function(){return this.$name().$downcase()["$=="]("keyup")},y.$$arity=0),n&&"up?"}(u[0],$(u,"UI"),u)}(l[0],0,l)}(t[0],t)},Opal.modules["browser/event/focus"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy;return e.add_stubs(["$supports?","$convert","$supported?","$DOM"]),function(t,s){var u=[a(t,"Browser")].concat(s);return function(t,$super,a){var s=[i(t,null,"Event")].concat(a);return function(t,$super,a){var s,u,l,c,p=i(t,$super,"Focus"),d=[p].concat(a);return p.$$prototype.native=n,e.defs(p,"$supported?",s=function(){return $(d,"Browser")["$supports?"]("Event.Focus")},s.$$arity=0),function(t,$super,r){var a,o,s=i(t,$super,"Definition"),u=[s].concat(r);s.$$prototype.native=n,e.def(s,"$view=",a=function(e){return this.native.view=$(u,"Native").$convert(e)},a.$$arity=1),e.def(s,"$related=",o=function(e){return this.native.relatedTarget=$(u,"Native").$convert(e)},o.$$arity=1)}(d[0],r($(d,"UI"),"Definition"),d),o(p["$supported?"]())&&(o($(d,"Browser")["$supports?"]("Event.constructor"))?e.defs(p,"$construct",u=function(e,t){return new FocusEvent(e,t)},u.$$arity=2):o($(d,"Browser")["$supports?"]("Event.create"))&&e.defs(p,"$construct",l=function(e,t){var n=document.createEvent("FocusEvent");return n.initFocusEvent(e,t.bubbles,t.cancelable,t.view||window,0,t.relatedTarget),n},l.$$arity=2)),e.def(p,"$related",c=function(){var e=this;return e.$DOM(e.native.relatedTarget)},c.$$arity=0),n&&"related"}(s[0],$(s,"UI"),s)}(u[0],0,u)}(t[0],t)},Opal.modules["browser/event/wheel"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.gvars;return e.add_stubs(["$!","$nil?","$[]","$===","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"Wheel"),c=[l].concat($);return l.$$prototype.native=n,e.defs(l,"$supported?",o=function(){return null==i.$&&(i.$=n),i.$["$[]"]("WheelEvent")["$nil?"]()["$!"]()},o.$$arity=0),function(t,$super,r){var $,i,o,s,u=a(t,$super,"Definition");[u].concat(r);u.$$prototype.native=n,e.def(u,"$x=",$=function(e){return this.native.deltaX=e},$.$$arity=1),e.def(u,"$y=",i=function(e){return this.native.deltaY=e},i.$$arity=1),e.def(u,"$z=",o=function(e){return this.native.deltaZ=e},o.$$arity=1),e.def(u,"$mode=",s=function(e){var t=this,r=n;return r=e,e="pixel"["$==="](r)?WheelEvent.DOM_DELTA_PIXEL:"line"["$==="](r)?WheelEvent.DOM_DELTA_LINE:"page"["$==="](r)?WheelEvent.DOM_DELTA_PAGE:n,t.native.deltaMode=e},s.$$arity=1)}(c[0],r(c,"Definition"),c),e.defs(l,"$construct",s=function(e,t){return new WheelEvent(e,t)},s.$$arity=2),l.$alias_native("x","deltaX"),l.$alias_native("y","deltaY"),l.$alias_native("z","deltaZ"),e.def(l,"$mode",u=function(){var e=n;return e=this.native.deltaMode,WheelEvent.DOM_DELTA_PIXEL["$==="](e)?"pixel":WheelEvent.DOM_DELTA_LINE["$==="](e)?"line":WheelEvent.DOM_DELTA_PAGE["$==="](e)?"page":n},u.$$arity=0),n&&"mode"}(o[0],r(o,"UI"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/composition"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native","$==","$downcase","$name"]),function(t,s){var u=[a(t,"Browser")].concat(s);return function(t,$super,a){var s=[i(t,null,"Event")].concat(a);return function(t,$super,a){var s,u,l,c,p,d,f=i(t,$super,"Composition"),_=[f].concat(a);return e.defs(f,"$supported?",s=function(){return $(_,"Browser")["$supports?"]("Event.Composition")},s.$$arity=0),function(t,$super,r){var $,a,o=i(t,$super,"Definition");[o].concat(r);o.$$prototype.native=n,e.def(o,"$data=",$=function(e){return this.native.data=e},$.$$arity=1),e.def(o,"$locale=",a=function(e){return this.native.locale=e},a.$$arity=1)}(_[0],r($(_,"UI"),"Definition"),_),o(f["$supported?"]())&&(o($(_,"Browser")["$supports?"]("Event.constructor"))?e.defs(f,"$construct",u=function(e,t){return new CompositionEvent(e,t)},u.$$arity=2):o($(_,"Browser")["$supports?"]("Event.create"))&&e.defs(f,"$construct",l=function(e,t){var n=document.createEvent("CompositionEvent");return n.initCompositionEvent(e,t.bubbles,t.cancelable,t.view||window,t.data,t.locale),n},l.$$arity=2)),f.$alias_native("data"),f.$alias_native("locale"),e.def(f,"$start?",c=function(){return this.$name().$downcase()["$=="]("compositionstart")},c.$$arity=0),e.def(f,"$update?",p=function(){return this.$name().$downcase()["$=="]("compositionupdate")},p.$$arity=0),e.def(f,"$end?",d=function(){return this.$name().$downcase()["$=="]("compositionend")},d.$$arity=0),n&&"end?"}(s[0],$(s,"UI"),s)}(u[0],0,u)}(t[0],t)},Opal.modules["browser/event/animation"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"Animation"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.Animation")},o.$$arity=0),function(t,$super,r){var $,i,o=a(t,$super,"Definition");[o].concat(r);o.$$prototype.native=n,e.def(o,"$animation=",$=function(e){return this.native.animationName=e},$.$$arity=1),e.def(o,"$elapsed=",i=function(e){return this.native.elapsedTime=e},i.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new AnimationEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("AnimationEvent");return n.initAnimationEvent(e,t.bubbles,t.cancelable,t.animationName,t.elapsedTime),n},u.$$arity=2)),l.$alias_native("name","animationName"),l.$alias_native("elapsed","elapsedTime")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/audio_processing"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"AudioProcessing"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.AudioProcessing")},o.$$arity=0),function(t,$super,r){var $,i,o,s=a(t,$super,"Definition");[s].concat(r);s.$$prototype.native=n,e.def(s,"$time=",$=function(e){return this.native.playbackTime=e},$.$$arity=1),e.def(s,"$input=",i=function(e){return this.native.inputBuffer=e},i.$$arity=1),e.def(s,"$output=",o=function(e){return this.native.outputBuffer=e},o.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new AudioProcessingEvent(e,t)},s.$$arity=2),u.$alias_native("time","playbackTime"),u.$alias_native("input","inputBuffer"),u.$alias_native("output","outputBuffer")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/before_unload"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"BeforeUnload"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.BeforeUnload")},o.$$arity=0),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))?(e.defs(u,"$construct",s=function(e,t){return new BeforeUnloadEvent(e,t)},s.$$arity=2),n&&"construct"):n}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/clipboard"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"Clipboard"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.Clipboard")},o.$$arity=0),function(t,$super,r){var $,i,o=a(t,$super,"Definition");[o].concat(r);o.$$prototype.native=n,e.def(o,"$data=",$=function(e){return this.native.data=e},$.$$arity=1),e.def(o,"$type=",i=function(e){return this.native.dataType=e},i.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new ClipboardEvent(e,t)},s.$$arity=2),u.$alias_native("data"),u.$alias_native("type","dataType")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_light"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"DeviceLight"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.DeviceLight")},o.$$arity=0),function(t,$super,r){var $,i=a(t,$super,"Definition");[i].concat(r);i.$$prototype.native=n,e.def(i,"$value=",$=function(e){return this.native.value=e},$.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new DeviceLightEvent(e,t)},s.$$arity=2),u.$alias_native("value")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_motion"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$new","$to_n","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"DeviceMotion"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.DeviceMotion")},o.$$arity=0),e.const_set(c[0],"Acceleration",r(c,"Struct").$new("x","y","z")),function(t,$super,r){var $,i,o,s,u=a(t,$super,"Definition");[u].concat(r);u.$$prototype.native=n,e.def(u,"$acceleration=",$=function(e){return this.native.acceleration=e.$to_n()},$.$$arity=1),e.def(u,"$acceleration_with_gravity=",i=function(e){return this.native.accelerationIncludingGravity=e.$to_n()},i.$$arity=1),e.def(u,"$rotation=",o=function(e){return this.native.rotationRate=e},o.$$arity=1),e.def(u,"$interval=",s=function(e){return this.native.interval=e},s.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new DeviceMotionEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("DeviceMotionEvent");return n.initDeviceMotionEvent(e,t.bubbles,t.cancelable,t.acceleration,t.accelerationIncludingGravity,t.rotationRate,t.interval),n},u.$$arity=2)),l.$alias_native("acceleration"),l.$alias_native("acceleration_with_gravity","accelerationIncludingGravity"),l.$alias_native("rotation","rotationRate"),l.$alias_native("interval")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_orientation"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"DeviceOrientation"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.DeviceOrientation")},o.$$arity=0),function(t,$super,r){var $,i,o,s,u=a(t,$super,"Definition");[u].concat(r);u.$$prototype.native=n,e.def(u,"$absolute=",$=function(e){return this.native.absolute=e},$.$$arity=1),e.def(u,"$alpha=",i=function(e){return this.native.alpha=e},i.$$arity=1),e.def(u,"$beta=",o=function(e){return this.native.beta=e},o.$$arity=1),e.def(u,"$gamma=",s=function(e){return this.native.gamma=e},s.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new DeviceOrientationEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("DeviceOrientationEvent");return n.initDeviceOrientationEvent(e,t.bubbles,t.cancelable,t.alpha,t.beta,t.gamma,t.absolute),n},u.$$arity=2)),l.$alias_native("absolute"),l.$alias_native("alpha"),l.$alias_native("beta"),l.$alias_native("gamma")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/device_proximity"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"DeviceProximity"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.DeviceProximity")},o.$$arity=0),function(t,$super,r){var $,i,o,s=a(t,$super,"Definition");[s].concat(r);s.$$prototype.native=n,e.def(s,"$value=",$=function(e){return this.native.value=e},$.$$arity=1),e.def(s,"$min=",i=function(e){return this.native.min=e},i.$$arity=1),e.def(s,"$max=",o=function(e){return this.native.max=e},o.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new DeviceProximityEvent(e,t)},s.$$arity=2),u.$alias_native("value"),u.$alias_native("min"),u.$alias_native("max")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/drag"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$include","$new","$convert","$elem","$supported?","$alias_native","$x","$screen","$y","$DOM","$raise"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l,c,p,d,f,_,h=a(t,$super,"Drag"),y=[h].concat($);return h.$$prototype.native=n,e.defs(h,"$supported?",o=function(){return r(y,"Browser")["$supports?"]("Event.Drag")},o.$$arity=0),function(t,$super,$){var i,o,s,u,l,c,p,d,f=a(t,$super,"Definition"),_=[f].concat($);f.$$prototype.native=n,function(t,$super,$){var i,o,s=a(t,null,"Client"),u=[s].concat($);s.$$prototype.native=n,s.$include(r(u,"Native")),e.def(s,"$x=",i=function(e){return this.native.clientX=e},i.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.clientY=e},o.$$arity=1)}(_[0],0,_),function(t,$super,$){var i,o,s=a(t,null,"Screen"),u=[s].concat($);s.$$prototype.native=n,s.$include(r(u,"Native")),e.def(s,"$x=",i=function(e){return this.native.screenX=e},i.$$arity=1),e.def(s,"$y=",o=function(e){return this.native.screenY=e},o.$$arity=1)}(_[0],0,_),e.def(f,"$alt!",i=function(){return this.native.altKey=!0},i.$$arity=0),e.def(f,"$ctrl!",o=function(){return this.native.ctrlKey=!0},o.$$arity=0),e.def(f,"$meta!",s=function(){return this.native.metaKey=!0},s.$$arity=0),e.def(f,"$button=",u=function(e){return this.native.button=e},u.$$arity=1),e.def(f,"$client",l=function(){var e=this;return r(_,"Client").$new(e.native)},l.$$arity=0),e.def(f,"$screen",c=function(){var e=this;return r(_,"Screen").$new(e.native)},c.$$arity=0),e.def(f,"$related=",p=function(e){return this.native.relatedTarget=r(_,"Native").$convert(e)},p.$$arity=1),e.def(f,"$transfer=",d=function(){var e=this;return e.native.dataTransfer=r(_,"Native").$convert(e.$elem())},d.$$arity=1)}(y[0],r(y,"Definition"),y),i(h["$supported?"]())&&(i(r(y,"Browser")["$supports?"]("Event.constructor"))?e.defs(h,"$construct",s=function(e,t){return new DragEvent(e,t)},s.$$arity=2):i(r(y,"Browser")["$supports?"]("Event.create"))&&e.defs(h,"$construct",u=function(e,t){var n=document.createEvent("DragEvent");return n.initDragEvent(e,t.bubbles,t.cancelable,t.view||window,0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button||0,t.relatedTarget,t.dataTransfer),n},u.$$arity=2)),h.$alias_native("alt?","altKey"),h.$alias_native("ctrl?","ctrlKey"),h.$alias_native("meta?","metaKey"),h.$alias_native("shift?","shiftKey"),h.$alias_native("button"),e.def(h,"$client",l=function(){var e=this;return r(y,"Position").$new(e.native.clientX,e.native.clientY)},l.$$arity=0),e.def(h,"$screen",c=function(){var e=this;return i("undefined"!=typeof e.native.screenX)?r(y,"Position").$new(e.native.screenX,e.native.screenY):n},c.$$arity=0),e.def(h,"$x",p=function(){return this.$screen().$x()},p.$$arity=0),e.def(h,"$y",d=function(){return this.$screen().$y()},d.$$arity=0),e.def(h,"$related",f=function(){var e=this;return e.$DOM(e.native.relatedTarget)},f.$$arity=0),e.def(h,"$transfer",_=function(){return this.$raise(r(y,"NotImplementedError"))},_.$$arity=0),n&&"transfer"}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/gamepad"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l,c,p,d,f=a(t,$super,"Gamepad"),_=[f].concat($);return f.$$prototype.native=n,e.defs(f,"$supported?",o=function(){return r(_,"Browser")["$supports?"]("Event.Gamepad")},o.$$arity=0),function(t,$super,r){var $,i,o,s,u,l=a(t,$super,"Definition");[l].concat(r);l.$$prototype.native=n,e.def(l,"$id=",$=function(e){return this.native.id=e},$.$$arity=1),e.def(l,"$index=",i=function(e){return this.native.index=e},i.$$arity=1),e.def(l,"$at=",o=function(e){return this.native.timestamp=e},o.$$arity=1),e.def(l,"$axes=",s=function(e){return this.native.axes=e},s.$$arity=1),e.def(l,"$buttons=",u=function(e){return this.native.buttons=e},u.$$arity=1)}(_[0],r(_,"Definition"),_),i(f["$supported?"]())&&i(r(_,"Browser")["$supports?"]("Event.constructor"))&&e.defs(f,"$construct",s=function(e,t){new GamepadEvent(e,{bubbles:t.bubbles,cancelable:t.cancelable,gamepad:t})},s.$$arity=2),e.def(f,"$id",u=function(){return this.native.gamepad.id},u.$$arity=0),e.def(f,"$index",l=function(){return this.native.gamepad.index},l.$$arity=0),e.def(f,"$at",c=function(){return this.native.gamepad.timestamp},c.$$arity=0),e.def(f,"$axes",p=function(){return this.native.gamepad.axes},p.$$arity=0),e.def(f,"$buttons",d=function(){return this.native.gamepad.buttons},d.$$arity=0),n&&"buttons"}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/hash_change"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"HashChange"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.HashChange")},o.$$arity=0),function(t,$super,r){var $,i,o=a(t,$super,"Definition");[o].concat(r);o.$$prototype.native=n,e.def(o,"$old=",$=function(e){return this.native.oldURL=e},$.$$arity=1),e.def(o,"$new=",i=function(e){return this.native.newURL=e},i.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new HashChangeEvent(e,t)},s.$$arity=2),u.$alias_native("old","oldURL"),u.$alias_native("new","newURL")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/progress"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"Progress"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.Progress")},o.$$arity=0),function(t,$super,r){var $,i,o,s=a(t,$super,"Definition");[s].concat(r);s.$$prototype.native=n,e.def(s,"$computable=",$=function(e){return this.native.computableLength=e},$.$$arity=1),e.def(s,"$loaded=",i=function(e){return this.native.loaded=e},i.$$arity=1),e.def(s,"$total=",o=function(e){return this.native.total=e},o.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new ProgressEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("ProgressEvent");return n.initProgressEvent(e,t.bubbles,t.cancelable,t.computable,t.loaded,t.total),n},u.$$arity=2)),l.$alias_native("computable?","computableLength"),l.$alias_native("loaded"),l.$alias_native("total")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/page_transition"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"PageTransition"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.PageTransition")},o.$$arity=0),function(t,$super,r){var $,i=a(t,$super,"Definition");[i].concat(r);i.$$prototype.native=n,e.def(i,"$persisted=",$=function(e){return this.native.persisted=e},$.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.PageTransition"))&&e.defs(u,"$construct",s=function(e,t){return new PageTransitionEvent(e,t)},s.$$arity=2),u.$alias_native("persisted?","persisted")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/pop_state"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"PopState"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.PopState")},o.$$arity=0),function(t,$super,r){var $,i=a(t,$super,"Definition");[i].concat(r);i.$$prototype.native=n,e.def(i,"$state=",$=function(e){return this.native.state=e},$.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new PopStateEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("PopStateEvent");return n.initPopStateEvent(e,t.bubbles,t.cancelable,t.state),n},u.$$arity=2)),l.$alias_native("state")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/storage"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"Storage"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.Storage")},o.$$arity=0),function(t,$super,r){var $,i,o,s,u,l=a(t,$super,"Definition");[l].concat(r);l.$$prototype.native=n,e.def(l,"$key=",$=function(e){return this.native.key=e},$.$$arity=1),e.def(l,"$new=",i=function(e){return this.native.newValue=e},i.$$arity=1),e.def(l,"$old=",o=function(e){return this.native.oldValue=e},o.$$arity=1),e.def(l,"$area=",s=function(e){return this.native.storageArea=e},s.$$arity=1),e.def(l,"$url=",u=function(e){return this.native.url=e},u.$$arity=1)}(l[0],r(l,"Definition"),l),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))&&e.defs(u,"$construct",s=function(e,t){return new StorageEvent(e,t)},s.$$arity=2),u.$alias_native("key"),u.$alias_native("new","newValue"),u.$alias_native("old","oldValue"),u.$alias_native("area","storageArea"),u.$alias_native("url")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/touch"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native","$==","$downcase","$name"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l,c,p,d,f=a(t,$super,"Touch"),_=[f].concat($);return e.defs(f,"$supported?",o=function(){return r(_,"Browser")["$supports?"]("Event.Touch")},o.$$arity=0),function(t,$super,r){var $,i,o,s,u=a(t,$super,"Definition");[u].concat(r);u.$$prototype.native=n,e.def(u,"$alt!",$=function(){return this.native.altKey=!0},$.$$arity=0),e.def(u,"$ctrl!",i=function(){return this.native.ctrlKey=!0},i.$$arity=0),e.def(u,"$meta!",o=function(){return this.native.metaKey=!0},o.$$arity=0),e.def(u,"$shift!",s=function(){return this.native.shiftKey=!0},s.$$arity=0)}(_[0],r(_,"Definition"),_),i(f["$supported?"]())&&i(r(_,"Browser")["$supports?"]("Event.constructor"))&&e.defs(f,"$construct",s=function(e,t){return new TouchEvent(e,t)},s.$$arity=2),f.$alias_native("alt?","altKey"),f.$alias_native("ctrl?","ctrlKey"),f.$alias_native("meta?","metaKey"),f.$alias_native("shift?","shiftKey"),e.def(f,"$cancel?",u=function(){return this.$name().$downcase()["$=="]("touchcancel")},u.$$arity=0),e.def(f,"$end?",l=function(){return this.$name().$downcase()["$=="]("touchend")},l.$$arity=0),e.def(f,"$leave?",c=function(){return this.$name().$downcase()["$=="]("touchleave")},c.$$arity=0),e.def(f,"$move?",p=function(){return this.$name().$downcase()["$=="]("touchmove")},p.$$arity=0),e.def(f,"$start?",d=function(){return this.$name().$downcase()["$=="]("touchstart")},d.$$arity=0),n&&"start?"}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event/sensor"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"Sensor"),l=[u].concat($);return e.defs(u,"$supported?",o=function(){return r(l,"Browser")["$supports?"]("Event.Sensor")},o.$$arity=0),i(u["$supported?"]())&&i(r(l,"Browser")["$supports?"]("Event.constructor"))?(e.defs(u,"$construct",s=function(e,t){return new SensorEvent(e,t)},s.$$arity=2),n&&"construct"):n}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules.ostruct=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var $=[],a=e.nil,i=(e.$$$,e.$$),o=e.klass,s=e.hash2,u=e.truthy,l=e.send,c=e.range,p=e.send2,d=e.find_super,f=e.alias;return e.add_stubs(["$each_pair","$new_ostruct_member","$[]=","$-","$[]","$to_sym","$>","$length","$raise","$new","$end_with?","$!=","$chomp","$to_s","$key?","$enum_for","$is_a?","$==","$instance_variable_get","$===","$eql?","$dup","$to_n","$hash","$attr_reader","$__send__","$singleton_class","$delete","$respond_to?","$define_singleton_method","$__id__","$class","$any?","$+","$join","$map","$inspect"]),function($,$super,_){var h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I=o($,null,"OpenStruct"),D=[I].concat(_);return I.$$prototype.table=a,e.def(I,"$initialize",h=function(n){var r,$=this;return null==n&&(n=a),$.table=s([],{}),u(n)?l(n,"each_pair",[],((r=function(n,$){var i=null==r.$$s?this:r.$$s,o=a;return null==i.table&&(i.table=a),null==n&&(n=a),null==$&&($=a),o=[i.$new_ostruct_member(n),$],l(i.table,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=$,r.$$arity=2,r)):a},h.$$arity=-1),e.def(I,"$[]",y=function(e){return this.table["$[]"](e.$to_sym())},y.$$arity=1),e.def(I,"$[]=",v=function(n,r){var $=this,i=a;return i=[$.$new_ostruct_member(n),r],l($.table,"[]=",e.to_a(i)),i[t(i.length,1)]},v.$$arity=2),e.def(I,"$method_missing",m=function(r){var $,o,s=this,p=a;return $=e.slice.call(arguments,1,arguments.length),u(n((o=$).$length(),2))&&s.$raise(i(D,"NoMethodError").$new("undefined method `"+r+"' for #<OpenStruct>",r)),u(r["$end_with?"]("="))?(u(o.$length()["$!="](1))&&s.$raise(i(D,"ArgumentError"),"wrong number of arguments (0 for 1)"),p=[s.$new_ostruct_member(r["$[]"](c(0,-2,!1))),o["$[]"](0)],l(s.table,"[]=",e.to_a(p)),p[t(p.length,1)]):s.table["$[]"](r.$to_sym())},m.$$arity=-2),e.def(I,"$respond_to_missing?",g=function(e,t){var n,r=g.$$p,$=this,i=a,o=a;return r&&(g.$$p=null),null==t&&(t=!1),i=e.$to_s().$chomp("=").$to_sym(),u(o=(n=$.table)===a||null==n?a:l(n,"key?",[i]))?o:p($,d($,"respond_to_missing?",g,!1,!0),"respond_to_missing?",[e,t],r)},g.$$arity=-2),e.def(I,"$each_pair",b=function(){var t,n=b.$$p,r=n||a,$=this;return n&&(b.$$p=null),r===a?$.$enum_for("each_pair"):l($.table,"each_pair",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),e.yield1(r,n)}).$$s=$,t.$$arity=1,t))},b.$$arity=0),e.def(I,"$==",w=function(e){var t=this
;return!!u(e["$is_a?"](i(D,"OpenStruct")))&&t.table["$=="](e.$instance_variable_get("@table"))},w.$$arity=1),e.def(I,"$===",k=function(e){var t=this;return!!u(e["$is_a?"](i(D,"OpenStruct")))&&t.table["$==="](e.$instance_variable_get("@table"))},k.$$arity=1),e.def(I,"$eql?",O=function(e){var t=this;return!!u(e["$is_a?"](i(D,"OpenStruct")))&&t.table["$eql?"](e.$instance_variable_get("@table"))},O.$$arity=1),e.def(I,"$to_h",E=function(){return this.table.$dup()},E.$$arity=0),e.def(I,"$to_n",x=function(){return this.table.$to_n()},x.$$arity=0),e.def(I,"$hash",S=function(){return this.table.$hash()},S.$$arity=0),I.$attr_reader("table"),e.def(I,"$delete_field",q=function(t){var n=this,r=a;r=t.$to_sym();try{n.$singleton_class().$__send__("remove_method",r,r+"=")}catch($){if(!e.rescue($,[i(D,"NameError")]))throw $;e.pop_exception()}return n.table.$delete(r)},q.$$arity=1),e.def(I,"$new_ostruct_member",N=function(n){var r,$,i=this;return n=n.$to_sym(),u(i["$respond_to?"](n))||(l(i,"define_singleton_method",[n],((r=function(){var e=null==r.$$s?this:r.$$s;return null==e.table&&(e.table=a),e.table["$[]"](n)}).$$s=i,r.$$arity=0,r)),l(i,"define_singleton_method",[n+"="],(($=function(r){var i=null==$.$$s?this:$.$$s,o=a;return null==i.table&&(i.table=a),null==r&&(r=a),o=[n,r],l(i.table,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=i,$.$$arity=1,$))),n},N.$$arity=1),e.def(I,"$inspect",C=function(){var e,t=this,n=a,$=z===undefined,i=t.$__id__();return function(){try{return n="#<"+t.$class(),$&&(z={}),z.hasOwnProperty(i)?n+" ...>":(z[i]=!0,u(t.table["$any?"]())&&(n=r(n," ")),n=r(n=r(n,l(t.$each_pair(),"map",[],(e=function(t,n){null==e.$$s||e.$$s;return null==t&&(t=a),null==n&&(n=a),t+"="+n.$inspect()},e.$$s=t,e.$$arity=2,e)).$join(", ")),">"))}finally{$&&(z=undefined)}}()},C.$$arity=0),f(I,"to_s","inspect")}($[0],0,$)},Opal.modules["browser/event/custom"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.truthy,s=e.range,u=e.send2,l=e.find_super;return e.add_stubs(["$require","$supports?","$end_with?","$[]","$to_n","$merge!","$Native","$new","$has_key?"]),t.$require("ostruct"),function(t,n){var c=[a(t,"Browser")].concat(n);return function(t,$super,n){var a=[i(t,null,"Event")].concat(n);return function(t,$super,n){var a,c,p,d,f,_,h,y=i(t,$super,"Custom"),v=[y].concat(n);return y.$$prototype.detail=r,e.defs(y,"$supported?",a=function(){return $(v,"Browser")["$supports?"]("Event.Custom")},a.$$arity=0),function(t,$super,n){var $,a=i(t,$super,"Definition");[a].concat(n);a.$$prototype.native=r,e.def(a,"$method_missing",$=function(e,t){var n=this;return o(e["$end_with?"]("="))?n.native[e["$[]"](s(0,-2,!1))]=t:r},$.$$arity=2)}(v[0],$(v,"Definition"),v),o($(v,"Browser")["$supports?"]("Event.constructor"))?e.defs(y,"$construct",c=function(e,t){new CustomEvent(e,{bubbles:t.bubbles,cancelable:t.cancelable,detail:t})},c.$$arity=2):o($(v,"Browser")["$supports?"]("Event.create"))?e.defs(y,"$construct",p=function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t),n},p.$$arity=2):o($(v,"Browser")["$supports?"]("Event.createObject"))?e.defs(y,"$construct",d=function(e,t){return this.$Native(document.createEventObject())["$merge!"]({type:e,bubbles:t.bubbles,cancelable:t.cancelable,detail:t}).$to_n()},d.$$arity=2):e.defs(y,"$construct",f=function(e,t){return this.$Native(t)["$merge!"]({type:e,bubbles:t.bubbles,cancelable:t.cancelable,detail:t}).$to_n()},f.$$arity=2),e.def(y,"$initialize",_=function(e,t){var n=_.$$p,a=this;return n&&(_.$$p=null),null==t&&(t=r),u(a,l(a,"initialize",_,!1,!0),"initialize",[e,t],null),a.detail=$(v,"Hash").$new(e.detail)},_.$$arity=-2),e.def(y,"$method_missing",h=function(t){var n,r=h.$$p,$=this;return r&&(h.$$p=null),n=e.slice.call(arguments,1,arguments.length),o($.detail["$has_key?"](t))?$.detail["$[]"](t):u($,l($,"method_missing",h,!1,!0),"method_missing",[t].concat(e.to_a(n)),r)},h.$$arity=-2),r&&"method_missing"}(a[0],$(a,"Event"),a)}(c[0],0,c)}(n[0],n)},Opal.modules["buffer/array"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.klass,i=e.gvars,o=e.send2,s=e.find_super,u=e.truthy,l=e.alias;return e.add_stubs(["$include","$[]","$name_for","$attr_reader","$==","$for","$to_n","$enum_for"]),function(t,$super,c){var p=[a(t,null,"Buffer")].concat(c);return function(t,$super,c){var p,d,f,_,h,y,v,m,g,b=a(t,null,"Array"),w=[b].concat(c);return b.$$prototype.native=n,b.$include(r($(w,"Native"),"Wrapper")),e.defs(b,"$for",p=function(e,t){return null==i.$&&(i.$=n),i.$["$[]"]($(w,"Buffer").$name_for(e,t)+"Array")},p.$$arity=2),b.$include($(w,"Enumerable")),b.$attr_reader("buffer","type"),e.def(b,"$initialize",d=function(e,t,r){var a=d.$$p,i=this;if(a&&(d.$$p=null),null==t&&(t=n),null==r&&(r=n),$(w,"Native")["$=="](e))o(i,s(i,"initialize",d,!1,!0),"initialize",[e],null);else{var u=$(w,"Array").$for(t,r);o(i,s(i,"initialize",d,!1,!0),"initialize",[new u(e.$to_n())],null)}return i.buffer=e,i.type=r},d.$$arity=-2),e.def(b,"$bits",f=function(){return 8*this.native.BYTES_PER_ELEMENT},f.$$arity=0),e.def(b,"$[]",_=function(e,t){var r=this;return null==t&&(t=n),u(t)?r.native.subarray(e,t):r.native[e]},_.$$arity=-2),e.def(b,"$[]=",h=function(e,t){return this.native[e]=t},h.$$arity=2),e.def(b,"$bytesize",y=function(){return this.native.byteLength},y.$$arity=0),e.def(b,"$each",v=function(){var t=v.$$p,r=t||n,$=this;if(t&&(v.$$p=null),r===n)return $.$enum_for("each");for(var a=0,i=$.native.length;a<i;a++)e.yield1(r,$.native[a]);return $},v.$$arity=0),e.def(b,"$length",m=function(){return this.native.length},m.$$arity=0),e.def(b,"$merge!",g=function(e,t){return this.native.set(e.$to_n(),t)},g.$$arity=-2),l(b,"size","length")}(p[0],0,p)}(t[0],0,t)},Opal.modules["buffer/view"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.klass,i=e.gvars,o=e.truthy,s=e.send2,u=e.find_super,l=e.alias;return e.add_stubs(["$include","$!","$nil?","$[]","$attr_reader","$native?","$to_n","$name_for"]),function(t,$super,c){var p=[a(t,null,"Buffer")].concat(c);return function(t,$super,c){var p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D=a(t,null,"View"),H=[D].concat(c);return D.$$prototype.native=n,D.$include(r($(H,"Native"),"Wrapper")),e.defs(D,"$supported?",p=function(){return null==i.$&&(i.$=n),i.$["$[]"]("DataView")["$nil?"]()["$!"]()},p.$$arity=0),D.$attr_reader("buffer","offset"),e.def(D,"$initialize",d=function(e,t,r){var $=d.$$p,a=this,i=n;return $&&(d.$$p=null),null==t&&(t=n),null==r&&(r=n),o(a["$native?"](e))?s(a,u(a,"initialize",d,!1,!0),"initialize",[e],null):o(o(i=t)?r:i)?s(a,u(a,"initialize",d,!1,!0),"initialize",[new DataView(e.$to_n(),t.$to_n(),r.$to_n())],null):o(t)?s(a,u(a,"initialize",d,!1,!0),"initialize",[new DataView(e.$to_n(),t.$to_n())],null):s(a,u(a,"initialize",d,!1,!0),"initialize",[new DataView(e.$to_n())],null),a.buffer=e,a.offset=t},d.$$arity=-2),e.def(D,"$length",f=function(){return this.native.byteLength},f.$$arity=0),l(D,"size","length"),e.def(D,"$get",_=function(e,t,n,r){return null==t&&(t=8),null==n&&(n="unsigned"),null==r&&(r=!1),this.native["get"+$(H,"Buffer").$name_for(t,n)](e,r)},_.$$arity=-2),l(D,"[]","get"),e.def(D,"$set",h=function(e,t,n,r,a){return null==n&&(n=8),null==r&&(r="unsigned"),null==a&&(a=!1),this.native["set"+$(H,"Buffer").$name_for(n,r)](e,t,a)},h.$$arity=-3),l(D,"[]=","set"),e.def(D,"$get_int8",y=function(e,t){return null==t&&(t=!1),this.native.getInt8(e,t)},y.$$arity=-2),e.def(D,"$set_int8",v=function(e,t,n){return null==n&&(n=!1),this.native.setInt8(e,t,n)},v.$$arity=-3),e.def(D,"$get_uint8",m=function(e,t){return null==t&&(t=!1),this.native.getUint8(e,t)},m.$$arity=-2),e.def(D,"$set_uint8",g=function(e,t,n){return null==n&&(n=!1),this.native.setUint8(e,t,n)},g.$$arity=-3),e.def(D,"$get_int16",b=function(e,t){return null==t&&(t=!1),this.native.getInt16(e,t)},b.$$arity=-2),e.def(D,"$set_int16",w=function(e,t,n){return null==n&&(n=!1),this.native.setInt16(e,t,n)},w.$$arity=-3),e.def(D,"$get_uint16",k=function(e,t){return null==t&&(t=!1),this.native.getUint16(e,t)},k.$$arity=-2),e.def(D,"$set_uint16",O=function(e,t,n){return null==n&&(n=!1),this.native.setUint16(e,t,n)},O.$$arity=-3),e.def(D,"$get_int32",E=function(e,t){return null==t&&(t=!1),this.native.getInt32(e,t)},E.$$arity=-2),e.def(D,"$set_int32",x=function(e,t,n){return null==n&&(n=!1),this.native.setInt32(e,t,n)},x.$$arity=-3),e.def(D,"$get_uint32",S=function(e,t){return null==t&&(t=!1),this.native.getUint32(e,t)},S.$$arity=-2),e.def(D,"$set_uint32",q=function(e,t,n){return null==n&&(n=!1),this.native.setUint32(e,t,n)},q.$$arity=-3),e.def(D,"$get_float32",N=function(e,t){return null==t&&(t=!1),this.native.getFloat32(e,t)},N.$$arity=-2),e.def(D,"$set_float32",C=function(e,t,n){return null==n&&(n=!1),this.native.setFloat32(e,t,n)},C.$$arity=-3),e.def(D,"$get_float64",z=function(e,t){return null==t&&(t=!1),this.native.getFloat64(e,t)},z.$$arity=-2),e.def(D,"$set_float64",I=function(e,t,n){return null==n&&(n=!1),this.native.setFloat64(e,t,n)},I.$$arity=-3),n&&"set_float64"}(p[0],0,p)}(t[0],0,t)},Opal.modules.buffer=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.klass,o=e.gvars,s=e.truthy,u=e.send2,l=e.find_super,c=e.alias;return e.add_stubs(["$require","$include","$!","$nil?","$[]","$===","$native?","$new","$pack","$to_a"]),t.$require("native"),t.$require("buffer/array"),t.$require("buffer/view"),function(t,$super,n){var p,d,f,_,h,y,v,m=i(t,null,"Buffer"),g=[m].concat(n);return m.$$prototype.native=r,m.$include($(a(g,"Native"),"Wrapper")),e.defs(m,"$supported?",p=function(){return null==o.$&&(o.$=r),o.$["$[]"]("ArrayBuffer")["$nil?"]()["$!"]()},p.$$arity=0),e.defs(m,"$name_for",d=function(e,t){var n=r;return n=t,""+("unsigned"["$==="](n)?"Uint":"signed"["$==="](n)?"Int":"float"["$==="](n)?"Float":r)+e},d.$$arity=2),e.def(m,"$initialize",f=function(e,t){var n=f.$$p,r=this;return n&&(f.$$p=null),null==t&&(t=8),s(r["$native?"](e))?u(r,l(r,"initialize",f,!1,!0),"initialize",[e],null):u(r,l(r,"initialize",f,!1,!0),"initialize",[new ArrayBuffer(e*(t/8))],null)},f.$$arity=-2),e.def(m,"$length",_=function(){return this.native.byteLength},_.$$arity=0),c(m,"size","length"),e.def(m,"$to_a",h=function(e,t){var n=this;return null==e&&(e=8),null==t&&(t="unsigned"),a(g,"Array").$new(n,e,t)},h.$$arity=-1),e.def(m,"$view",y=function(e,t){var n=this;return null==e&&(e=r),null==t&&(t=r),a(g,"View").$new(n,e,t)},y.$$arity=-1),e.def(m,"$to_s",v=function(){return this.$to_a().$to_a().$pack("c*")},v.$$arity=0),r&&"to_s"}(n[0],0,n)},Opal.modules["browser/event/message"]=function(e){var t=e.top,n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.truthy;return e.add_stubs(["$require","$supports?","$convert","$supported?","$new","$alias_native"]),t.$require("buffer"),function(t,n){var s=[a(t,"Browser")].concat(n);return function(t,$super,n){var a=[i(t,null,"Event")].concat(n);return function(t,$super,n){var a,s,u,l,c,p=i(t,$super,"Message"),d=[p].concat(n);return p.$$prototype.native=r,e.defs(p,"$supported?",a=function(){return $(d,"Browser")["$supports?"]("Event.Message")},a.$$arity=0),function(t,$super,n){var a,o,s,u=i(t,$super,"Definition"),l=[u].concat(n);u.$$prototype.native=r,e.def(u,"$data=",a=function(e){return this.native.data=e},a.$$arity=1),e.def(u,"$origin=",o=function(e){return this.native.origin=e},o.$$arity=1),e.def(u,"$source=",s=function(e){return this.native.source=$(l,"Native").$convert(e)},s.$$arity=1)}(d[0],$(d,"Definition"),d),o(p["$supported?"]())&&(o($(d,"Browser")["$supports?"]("Event.constructor"))?e.defs(p,"$construct",s=function(e,t){return new MessageEvent(e,t)},s.$$arity=2):o($(d,"Browser")["$supports?"]("Event.create"))&&e.defs(p,"$construct",u=function(e,t){var n=document.createEvent("MessageEvent");return n.initMessageEvent(e,t.bubbles,t.cancelable,t.data,t.origin,"",t.source||window),n},u.$$arity=2)),e.def(p,"$data",l=function(){var e=this;return window.ArrayBuffer&&e.native.data instanceof ArrayBuffer?$(d,"Buffer").$new(e.native.data):window.Blob&&e.native.data instanceof Blob?$(d,"Blob").$new(e.native.data):e.native.data},l.$$arity=0),p.$alias_native("origin"),e.def(p,"$source",c=function(){var e=this.native.source;return window.Window&&e instanceof window.Window?$(d,"Window").$new(e):r},c.$$arity=0),r&&"source"}(a[0],$(a,"Event"),a)}(s[0],0,s)}(n[0],n)},Opal.modules["browser/event/close"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$supports?","$supported?","$alias_native"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Event")].concat($);return function(t,$super,$){var o,s,u,l=a(t,$super,"Close"),c=[l].concat($);return e.defs(l,"$supported?",o=function(){return r(c,"Browser")["$supports?"]("Event.Close")},o.$$arity=0),function(t,$super,r){var $,i,o,s,u=a(t,$super,"Definition");[u].concat(r);u.$$prototype.native=n,e.def(u,"$code=",$=function(e){return this.native.code=e},$.$$arity=1),e.def(u,"$reason=",i=function(e){return this.native.reason=e},i.$$arity=1),e.def(u,"$clean!",o=function(){return this.native.wasClean=!0},o.$$arity=1),e.def(u,"$not_clean!",s=function(){return this.native.wasClean=!1},s.$$arity=1)}(c[0],r(c,"Definition"),c),i(l["$supported?"]())&&(i(r(c,"Browser")["$supports?"]("Event.constructor"))?e.defs(l,"$construct",s=function(e,t){return new CloseEvent(e,t)},s.$$arity=2):i(r(c,"Browser")["$supports?"]("Event.create"))&&e.defs(l,"$construct",u=function(e,t){var n=document.createEvent("CloseEvent");return n.initCloseEvent(e,t.bubbles,t.cancelable,t.wasClean,t.code,t.reason),n},u.$$arity=2)),l.$alias_native("code"),l.$alias_native("reason"),l.$alias_native("clean?","wasClean")}(o[0],r(o,"Event"),o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/event"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.truthy,u=e.hash2,l=e.send,c=e.send2,p=e.find_super;return e.add_stubs(["$require","$gsub","$[]","$aliases","$name_for","$===","$class_for","$new","$construct","$const_get","$to_proc","$arguments=","$-","$supports?","$merge!","$Native","$to_n","$==","$name","$attr_reader","$attr_writer","$convert","$alias_native","$off","$prevent","$stop"]),n.$require("browser/event/base"),n.$require("browser/event/ui"),n.$require("browser/event/mouse"),n.$require("browser/event/keyboard"),n.$require("browser/event/focus"),n.$require("browser/event/wheel"),n.$require("browser/event/composition"),n.$require("browser/event/animation"),n.$require("browser/event/audio_processing"),n.$require("browser/event/before_unload"),n.$require("browser/event/composition"),n.$require("browser/event/clipboard"),n.$require("browser/event/device_light"),n.$require("browser/event/device_motion"),n.$require("browser/event/device_orientation"),n.$require("browser/event/device_proximity"),n.$require("browser/event/drag"),n.$require("browser/event/gamepad"),n.$require("browser/event/hash_change"),n.$require("browser/event/progress"),n.$require("browser/event/page_transition"),n.$require("browser/event/pop_state"),n.$require("browser/event/storage"),n.$require("browser/event/touch"),n.$require("browser/event/sensor"),n.$require("browser/event/custom"),n.$require("browser/event/message"),n.$require("browser/event/close"),function(n,r){var d=[i(n,"Browser")].concat(r);return function(n,$super,r){var i,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H=o(n,null,"Event"),A=[H].concat(r);return H.$$prototype.native=H.$$prototype.on=H.$$prototype.callback=$,e.defs(H,"$aliases",i=function(){var e=this,t=$;return null==e.aliases&&(e.aliases=$),e.aliases=s(t=e.aliases)?t:u(["dom:load","hover"],{"dom:load":"DOMContentLoaded",hover:"mouse:over"})},i.$$arity=0),e.defs(H,"$name_for",d=function(e){var t=$;return(s(t=this.$aliases()["$[]"](e))?t:e).$gsub(":","")},d.$$arity=1),e.defs(H,"$class_for",f=function(e){var t=$;return t=this.$name_for(e),"animationend"["$==="](t)||"animationiteration"["$==="](t)||"animationstart"["$==="](t)?a(A,"Animation"):"audioprocess"["$==="](t)?a(A,"AudioProcessing"):"beforeunload"["$==="](t)?a(A,"BeforeUnload"):"compositionend"["$==="](t)||"compositionstart"["$==="](t)||"compositionupdate"["$==="](t)?a(A,"Composition"):"copy"["$==="](t)||"cut"["$==="](t)?a(A,"Clipboard"):"devicelight"["$==="](t)?a(A,"DeviceLight"):"devicemotion"["$==="](t)?a(A,"DeviceMotion"):"deviceorientation"["$==="](t)?a(A,"DeviceOrientation"):"deviceproximity"["$==="](t)?a(A,"DeviceProximity"):"drag"["$==="](t)||"dragend"["$==="](t)||"dragleave"["$==="](t)||"dragover"["$==="](t)||"dragstart"["$==="](t)||"drop"["$==="](t)?a(A,"Drag"):"gamepadconnected"["$==="](t)||"gamepaddisconnected"["$==="](t)?a(A,"Gamepad"):"hashchange"["$==="](t)?a(A,"HashChange"):"load"["$==="](t)||"loadend"["$==="](t)||"loadstart"["$==="](t)?a(A,"Progress"):"pagehide"["$==="](t)||"pageshow"["$==="](t)?a(A,"PageTransition"):"popstate"["$==="](t)?a(A,"PopState"):"storage"["$==="](t)?a(A,"Storage"):"touchcancel"["$==="](t)||"touchend"["$==="](t)||"touchleave"["$==="](t)||"touchmove"["$==="](t)||"touchstart"["$==="](t)?a(A,"Touch"):"compassneedscalibration"["$==="](t)||"userproximity"["$==="](t)?a(A,"Sensor"):"message"["$==="](t)?a(A,"Message"):"close"["$==="](t)?a(A,"Close"):"click"["$==="](t)||"contextmenu"["$==="](t)||"dblclick"["$==="](t)||"mousedown"["$==="](t)||"mouseenter"["$==="](t)||"mouseleave"["$==="](t)||"mousemove"["$==="](t)||"mouseout"["$==="](t)||"mouseover"["$==="](t)||"mouseup"["$==="](t)||"show"["$==="](t)?a(A,"Mouse"):"keydown"["$==="](t)||"keypress"["$==="](t)||"keyup"["$==="](t)?a(A,"Keyboard"):"blur"["$==="](t)||"focus"["$==="](t)||"focusin"["$==="](t)||"focusout"["$==="](t)?a(A,"Focus"):"wheel"["$==="](t)?a(A,"Wheel"):"abort"["$==="](t)||"afterprint"["$==="](t)||"beforeprint"["$==="](t)||"cached"["$==="](t)||"canplay"["$==="](t)||"canplaythrough"["$==="](t)||"change"["$==="](t)||"chargingchange"["$==="](t)||"chargingtimechange"["$==="](t)||"checking"["$==="](t)||"close"["$==="](t)||"dischargingtimechange"["$==="](t)||"DOMContentLoaded"["$==="](t)||"downloading"["$==="](t)||"durationchange"["$==="](t)||"emptied"["$==="](t)||"ended"["$==="](t)||"error"["$==="](t)||"fullscreenchange"["$==="](t)||"fullscreenerror"["$==="](t)||"input"["$==="](t)||"invalid"["$==="](t)||"levelchange"["$==="](t)||"loadeddata"["$==="](t)||"loadedmetadata"["$==="](t)||"noupdate"["$==="](t)||"obsolete"["$==="](t)||"offline"["$==="](t)||"online"["$==="](t)||"open"["$==="](t)||"orientationchange"["$==="](t)||"pause"["$==="](t)||"pointerlockchange"["$==="](t)||"pointerlockerror"["$==="](t)||"play"["$==="](t)||"playing"["$==="](t)||"ratechange"["$==="](t)||"readystatechange"["$==="](t)||"reset"["$==="](t)||"seeked"["$==="](t)||"seeking"["$==="](t)||"stalled"["$==="](t)||"submit"["$==="](t)||"success"["$==="](t)||"suspend"["$==="](t)||"timeupdate"["$==="](t)||"updateready"["$==="](t)||"visibilitychange"["$==="](t)||"volumechange"["$==="](t)||"waiting"["$==="](t)?a(A,"Event"):a(A,"Custom")},f.$$arity=1),e.defs(H,"$supported?",_=function(){return!0},_.$$arity=0),e.defs(H,"$create",h=function(n){var r,a=h.$$p,i=a||$,o=this,s=$,u=$,c=$;return a&&(h.$$p=null),a&&(h.$$p=null),r=e.slice.call(arguments,1,arguments.length),n=o.$name_for(n),u=(s=o.$class_for(n)).$new(s.$construct(n,l(s.$const_get("Definition"),"new",[],i.$to_proc()))),c=[r],l(u,"arguments=",e.to_a(c)),c[t(c.length,1)],u},h.$$arity=-2),s(a(A,"Browser")["$supports?"]("Event.constructor"))?e.defs(H,"$construct",y=function(e,t){return new Event(e,t)},y.$$arity=2):s(a(A,"Browser")["$supports?"]("Event.create"))?e.defs(H,"$construct",v=function(t,n){try{var r=this,$=document.createEvent("HTMLEvents");$.initEvent(t,n.bubbles,n.cancelable),e.ret(r.$Native($)["$merge!"](n))}catch(a){if(a===e.returner)return a.$v;throw a}},v.$$arity=2):s(a(A,"Browser")["$supports?"]("Event.createObject"))?e.defs(H,"$construct",m=function(e,t){return this.$Native(document.createEventObject())["$merge!"](t)["$merge!"]({type:e}).$to_n()},m.$$arity=2):e.defs(H,"$construct",g=function(e,t){return this.$Native(t)["$merge!"]({type:e}).$to_n()},g.$$arity=2),e.defs(H,"$new",b=function(e,t){var n=b.$$p,r=this,i=$;return n&&(b.$$p=null),null==t&&(t=$),r["$=="](a(A,"Event"))?(i=r.$class_for(s(t)?t.$name():e.type))["$=="](a(A,"Event"))?c(r,p(r,"new",b,!1,!0),"new",[e,t],n):i.$new(e,t):c(r,p(r,"new",b,!1,!0),"new",[e,t],n)},b.$$arity=-2),H.$attr_reader("callback"),H.$attr_writer("on"),e.def(H,"$initialize",w=function(e,t){var n=w.$$p,r=this;return n&&(w.$$p=null),null==t&&(t=$),c(r,p(r,"initialize",w,!1,!0),"initialize",[e],null),r.callback=t},w.$$arity=-2),e.def(H,"$name",k=function(){return this.native.type},k.$$arity=0),e.def(H,"$on",O=function(){var e=this,t=$;return s(t=e.on)?t:a(A,"Target").$convert(e.native.currentTarget)},O.$$arity=0),e.def(H,"$target",E=function(){var e=this;return a(A,"Target").$convert(e.native.srcElement||e.native.target)},E.$$arity=0),e.def(H,"$arguments",x=function(){return this.native.arguments||[]},x.$$arity=0),e.def(H,"$arguments=",S=function(e){return this.native.arguments=e},S.$$arity=1),H.$alias_native("bubbles?","bubbles"),H.$alias_native("cancelable?","cancelable"),H.$alias_native("data"),H.$alias_native("phase","eventPhase"),H.$alias_native("at","timeStamp"),e.def(H,"$off",q=function(){var e=this;return s(e.callback)?e.callback.$off():$},q.$$arity=0),e.def(H,"$stopped?",N=function(){return!!this.native.stopped},N.$$arity=0),e.def(H,"$stop",C=function(){var e=this;return s("undefined"!=typeof e.native.stopPropagation)&&e.native.stopPropagation(),e.native.stopped=!0},C.$$arity=0),e.def(H,"$prevent",z=function(){var e=this;return s("undefined"!=typeof e.native.preventDefault)&&e.native.preventDefault(),e.native.prevented=!0},z.$$arity=0),e.def(H,"$prevented?",I=function(){return!!this.native.prevented},I.$$arity=0),e.def(H,"$stop!",D=function(){var e=this;return e.$prevent(),e.$stop()},D.$$arity=0),$&&"stop!"}(d[0],0,d)}(r[0],r)},Opal.modules["browser/window/view"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$to_n","$supports?","$raise"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Window")].concat($);return function(t,$super,$){var o,s,u,l,c,p,d,f=a(t,null,"View"),_=[f].concat($);return f.$$prototype.native=n,e.def(f,"$initialize",o=function(e){var t=this;return t.window=e,t.native=e.$to_n()},o.$$arity=1),i(r(_,"Browser")["$supports?"]("Window.innerSize"))?(e.def(f,"$width",s=function(){return this.native.innerWidth},s.$$arity=0),e.def(f,"$height",u=function(){return this.native.innerHeight},u.$$arity=0),n&&"height"):i(r(_,"Browser")["$supports?"]("Element.clientSize"))?(e.def(f,"$height",l=function(){return this.native.document.documentElement.clientHeight},l.$$arity=0),e.def(f,"$width",c=function(){return this.native.document.documentElement.clientWidth},c.$$arity=0),n&&"width"):(e.def(f,"$width",p=function(){return this.$raise(r(_,"NotImplementedError"),"window size unsupported")},p.$$arity=0),e.def(f,"$height",d=function(){return this.$raise(r(_,"NotImplementedError"),"window size unsupported")},d.$$arity=0),n&&"height")}(o[0],0,o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/window/size"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.hash2;return e.add_stubs(["$to_n","$===","$first","$values_at","$width","$height","$supports?","$raise","$set"]),function(t,s){var u=[$(t,"Browser")].concat(s);return function(t,$super,$){var s=[a(t,null,"Window")].concat($);return function(t,$super,$){var s,u,l,c,p,d,f,_,h=a(t,null,"Size"),y=[h].concat($);return h.$$prototype.native=n,e.def(h,"$initialize",s=function(e){var t=this;return t.window=e,t.native=e.$to_n()},s.$$arity=1),e.def(h,"$set",u=function(){var t,$,a,o=this,s=n,u=n,l=n,c=n;return t=e.slice.call(arguments,0,arguments.length),i(r(y,"Hash")["$==="](t.$first()))?(a=t.$first().$values_at("width","height"),$=e.to_ary(a),s=null==$[0]?n:$[0],u=null==$[1]?n:$[1]):(a=t,$=e.to_ary(a),s=null==$[0]?n:$[0],u=null==$[1]?n:$[1]),s=i(l=s)?l:o.$width(),u=i(c=u)?c:o.$height(),o.native.resizeTo(s,u),o},u.$$arity=-1),i(r(y,"Browser")["$supports?"]("Window.outerSize"))?(e.def(h,"$width",l=function(){return this.native.outerWidth},l.$$arity=0),e.def(h,"$height",c=function(){return this.native.outerHeight},c.$$arity=0)):(e.def(h,"$width",p=function(){return this.$raise(r(y,"NotImplementedError"),"window outer size not supported")},p.$$arity=0),e.def(h,"$height",d=function(){return this.$raise(r(y,"NotImplementedError"),"window outer size not supported")},d.$$arity=0)),e.def(h,"$width=",f=function(e){return this.$set(o(["width"],{width:e}))},f.$$arity=1),e.def(h,"$height=",_=function(e){return this.$set(o(["height"],{height:e}))},_.$$arity=1),n&&"height="}(s[0],0,s)}(u[0],0,u)}(t[0],t)},Opal.modules["browser/window/scroll"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$to_n","$supports?","$new","$raise","$x","$position","$y","$[]"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,$super,$){var o=[a(t,null,"Window")].concat($);return function(t,$super,$){var o,s,u,l,c,p,d,f,_=a(t,null,"Scroll"),h=[_].concat($);return _.$$prototype.native=n,e.def(_,"$initialize",o=function(e){var t=this;return t.window=e,t.native=e.$to_n()},o.$$arity=1),i(r(h,"Browser")["$supports?"]("Window.scroll"))?e.def(_,"$position",s=function(){var e=this.native.document,t=e.documentElement,n=e.body,$=t.scrollLeft||n.scrollLeft,a=t.scrollTop||n.scrollTop;return r(h,"Position").$new($,a)},s.$$arity=0):i(r(h,"Browser")["$supports?"]("Window.pageOffset"))?e.def(_,"$position",u=function(){var e=this;return r(h,"Position").$new(e.native.pageXOffset,e.native.pageYOffset)},u.$$arity=0):e.def(_,"$position",l=function(){return this.$raise(r(h,"NotImplementedError"),"window scroll unsupported")},l.$$arity=0),e.def(_,"$x",c=function(){return this.$position().$x()},c.$$arity=0),e.def(_,"$y",p=function(){return this.$position().$y()},p.$$arity=0),e.def(_,"$to",d=function(e){var t=this,r=n,$=n,a=n,o=n;return r=i($=e["$[]"]("x"))?$:t.$x(),a=i(o=e["$[]"]("y"))?o:t.$y(),t.native.scrollTo(r,a),t},d.$$arity=1),e.def(_,"$by",f=function(e){var t=this,r=n,$=n,a=n,o=n;return r=i($=e["$[]"]("x"))?$:0,a=i(o=e["$[]"]("y"))?o:0,t.native.scrollBy(r,a),t},f.$$arity=1),n&&"by"}(o[0],0,o)}(s[0],0,s)}(t[0],t)},Opal.modules["browser/window"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send,u=e.truthy,l=e.gvars,c=e.hash2;return e.add_stubs(["$require","$delete","$join","$map","$===","$new","$include","$target","$supports?","$[]","$raise","$alert","$prompt","$confirm"]),t.$require("browser/window/view"),t.$require("browser/window/size"),t.$require("browser/window/scroll"),function(t,n){var p=[i(t,"Browser")].concat(n);(function(t,$super,n){var i,p,d,f,_,h,y,v,m,g,b,w=o(t,null,"Window"),k=[w].concat(n);w.$$prototype.native=r,e.defs(w,"$open",i=function(e,t){var n,$=this,a=r,i=r;a=t.$delete("name"),i=s(t,"map",[],(n=function(e,t){null==n.$$s||n.$$s;var $=r;return null==e&&(e=r),null==t&&(t=r),$=t,e+"="+(t=(!0)["$==="]($)?"yes":(!1)["$==="]($)?"no":t)},n.$$s=$,n.$$arity=2,n)).$join(",");var o=window.open(e,a,i);return null==o?r:$.$new(o)},i.$$arity=2),w.$include(a(k,"Native")),w.$include($(a(k,"Event"),"Target")),s(w,"target",[],((p=function(e){null==p.$$s||p.$$s;return null==l.window&&(l.window=r),null==e&&(e=r),u(e==window)?l.window:r}).$$s=w,p.$$arity=1,p)),e.def(w,"$alert",d=function(e){return this.native.alert(e),e},d.$$arity=1),e.def(w,"$prompt",f=function(e){return this.native.prompt(e)||r},f.$$arity=1),e.def(w,"$confirm",_=function(e){return this.native.confirm(e)||!1},_.$$arity=1),e.def(w,"$view",h=function(){var e=this;return a(k,"View").$new(e)},h.$$arity=0),e.def(w,"$size",y=function(){var e=this;return a(k,"Size").$new(e)},y.$$arity=0),e.def(w,"$scroll",v=function(){var e=this;return a(k,"Scroll").$new(e)},v.$$arity=0),u(a(k,"Browser")["$supports?"]("Window.send"))?e.def(w,"$send",m=function(e,t){var n=this,$=r;return null==t&&(t=c([],{})),n.native.postMessage(e,u($=t["$[]"]("to"))?$:"*")},m.$$arity=-2):e.def(w,"$send",g=function(e,t){var n=this;return null==t&&(t=c([],{})),n.$raise(a(k,"NotImplementedError"),"message sending unsupported")},g.$$arity=-2),e.def(w,"$close",b=function(){return window.open("","_self","")&&window.close()||(window.opener=null)||(window.opener="")},b.$$arity=0)})(p[0],0,p)}(n[0],n),l.window=$(a(n,"Browser"),"Window").$new(window),function(t,n){var $,a,o,s=i(t,"Kernel");[s].concat(n);return e.def(s,"$alert",$=function(e){return null==l.window&&(l.window=r),l.window.$alert(e)},$.$$arity=1),e.def(s,"$prompt",a=function(e){return null==l.window&&(l.window=r),l.window.$prompt(e)},a.$$arity=1),e.def(s,"$confirm",o=function(e){return null==l.window&&(l.window=r),l.window.$confirm(e)},o.$$arity=1),r&&"confirm"}(n[0],n)},Opal.modules["browser/dom/node_set"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.send,o=e.truthy;return e.add_stubs(["$new","$uniq","$map","$flatten","$DOM","$convert","$respond_to?","$each","$__send__","$to_proc","$===","$at_css","$at_xpath","$[]","$css","$select","$=~","$search","$xpath"]),function(t,s){var u=[$(t,"Browser")].concat(s);return function(t,s){var u=[$(t,"DOM")].concat(s);return function(t,$super,$){var s,u,l,c,p,d,f,_,h,y,v=a(t,null,"NodeSet"),m=[v].concat($);return v.$$prototype.literal=n,e.defs(v,"$[]",s=function(){var t,$,a=this;return t=e.slice.call(arguments,0,arguments.length),a.$new(i(t.$flatten(),"map",[],($=function(e){var t=null==$.$$s?this:$.$$s;return null==e&&(e=n),t.$DOM(r(m,"Native").$convert(e))},$.$$s=a,$.$$arity=1,$)).$uniq())},s.$$arity=-1),e.def(v,"$initialize",u=function(e){return this.literal=e},u.$$arity=1),e.def(v,"$method_missing",l=function(t){var $,a,s,u=l.$$p,c=u||n,p=this,d=n;return u&&(l.$$p=null),u&&(l.$$p=null),$=e.slice.call(arguments,1,arguments.length),a=$,o(p.literal["$respond_to?"](t))?(d=i(p.literal,"__send__",[t].concat(e.to_a(a)),c.$to_proc()),o(d===p.literal)?p:o(r(m,"Array")["$==="](d))?r(m,"NodeSet").$new(d):d):(i(p,"each",[],((s=function(r){null==s.$$s||s.$$s;return null==r&&(r=n),i(r,"__send__",[t].concat(e.to_a(a)),c.$to_proc())}).$$s=p,s.$$arity=1,s)),p)},l.$$arity=-2),e.def(v,"$at_css",c=function(){try{var t,r,$,a=this;return t=e.slice.call(arguments,0,arguments.length),r=t,i(a,"each",[],(($=function(t){null==$.$$s||$.$$s;if(null==t&&(t=n),!o(t=i(t,"at_css",e.to_a(r))))return n;e.ret(t)}).$$s=a,$.$$arity=1,$)),n}catch(s){if(s===e.returner)return s.$v;throw s}},c.$$arity=-1),e.def(v,"$at_xpath",p=function(){try{var t,r,$,a=this;return t=e.slice.call(arguments,0,arguments.length),r=t,i(a,"each",[],(($=function(t){null==$.$$s||$.$$s;if(null==t&&(t=n),!o(t=i(t,"at_xpath",e.to_a(r))))return n;e.ret(t)}).$$s=a,$.$$arity=1,$)),n}catch(s){if(s===e.returner)return s.$v;throw s}},p.$$arity=-1),e.def(v,"$css",d=function(e){var t,$=this;return r(m,"NodeSet")["$[]"](i($.literal,"map",[],((t=function(r){null==t.$$s||t.$$s;return null==r&&(r=n),r.$css(e)}).$$s=$,t.$$arity=1,t)))},d.$$arity=1),e.def(v,"$filter",f=function(e){var t,r=this;return i(r.literal,"select",[],((t=function(r){null==t.$$s||t.$$s;return null==r&&(r=n),r["$=~"](e)}).$$s=r,t.$$arity=1,t))},f.$$arity=1),e.def(v,"$search",_=function(){var t,$,a,o=this;return t=e.slice.call(arguments,0,arguments.length),$=t,r(m,"NodeSet")["$[]"](i(o.literal,"map",[],((a=function(t){null==a.$$s||a.$$s;return null==t&&(t=n),i(t,"search",e.to_a($))}).$$s=o,a.$$arity=1,a)))},_.$$arity=-1),e.def(v,"$xpath",h=function(e){var t,$=this;return r(m,"NodeSet")["$[]"](i($.literal,"map",[],((t=function(r){null==t.$$s||t.$$s;return null==r&&(r=n),r.$xpath(e)}).$$s=$,t.$$arity=1,t)))},h.$$arity=1),e.def(v,"$to_ary",y=function(){return this.literal},y.$$arity=0),n&&"to_ary"}(u[0],0,u)}(u[0],u)}(t[0],t)},Opal.modules["browser/dom/node"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy,s=e.send2,u=e.find_super,l=e.send,c=e.alias,p=e.hash2;return e.add_stubs(["$include","$==","$[]","$new","$raise","$convert","$respond_to?","$each","$<<","$native?","$===","$>>","$DOM","$to_proc","$parent","$last","$pop","$select!","$=~","$remove_child","$remove","$children","$supports?","$node_type","$first","$select","$element_children","$to_s","$next","$!","$element?","$previous","$try_convert","$name"]),function(t,d){var f=[a(t,"Browser")].concat(d);return function(t,d){var f=[a(t,"DOM")].concat(d);return function(t,$super,a){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K,X,Y,V,G,J,Z,Q,ee,te,ne,re,$e,ae,ie,oe,se,ue,le,ce=i(t,null,"Node"),pe=[ce].concat(a);return ce.$$prototype.native=n,ce.$include($(pe,"Native")),e.const_set(pe[0],"ELEMENT_NODE",1),e.const_set(pe[0],"ATTRIBUTE_NODE",2),
e.const_set(pe[0],"TEXT_NODE",3),e.const_set(pe[0],"CDATA_SECTION_NODE",4),e.const_set(pe[0],"ENTITY_REFERENCE_NOCE",5),e.const_set(pe[0],"ENTITY_NODE",6),e.const_set(pe[0],"PROCESSING_INSTRUCTION_NODE",7),e.const_set(pe[0],"COMMENT_NODE",8),e.const_set(pe[0],"DOCUMENT_NODE",9),e.const_set(pe[0],"DOCUMENT_TYPE_NODE",10),e.const_set(pe[0],"DOCUMENT_FRAGMENT_NODE",11),e.const_set(pe[0],"NOTATION_NODE",12),e.defs(ce,"$new",d=function(e){var t=d.$$p,r=this,a=n,i=n;return null==r.classes&&(r.classes=n),t&&(d.$$p=null),r["$=="]($(pe,"Node"))?(r.classes=o(a=r.classes)?a:[n,$(pe,"Element"),$(pe,"Attribute"),$(pe,"Text"),$(pe,"CDATA"),n,n,n,$(pe,"Comment"),$(pe,"Document"),n,$(pe,"DocumentFragment")],o(i=r.classes["$[]"](e.nodeType))?i.$new(e):r.$raise($(pe,"ArgumentError"),"cannot instantiate a non derived Node object")):s(r,u(r,"new",d,!1,!0),"new",[e],t)},d.$$arity=1),e.def(ce,"$==",f=function(e){return this.native===$(pe,"Native").$convert(e)},f.$$arity=1),e.def(ce,"$<<",_=function(e){var t,r=this;return o($(pe,"Opal")["$respond_to?"](e,"each"))?(l(e,"each",[],((t=function(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=n),r["$<<"](e)}).$$s=r,t.$$arity=1,t)),r):(o(r["$native?"](e))||(e=o($(pe,"String")["$==="](e))?r.native.ownerDocument.createTextNode(e):$(pe,"Native").$convert(e)),r.native.appendChild(e),r)},_.$$arity=1),e.def(ce,"$>>",h=function(e){var t,r=this;return o($(pe,"Opal")["$respond_to?"](e,"each"))?(l(e,"each",[],((t=function(e){var r=null==t.$$s?this:t.$$s;return null==e&&(e=n),r["$>>"](e)}).$$s=r,t.$$arity=1,t)),r):(o(r["$native?"](e))||(e=o($(pe,"String")["$==="](e))?r.native.ownerDocument.createTextNode(e):$(pe,"Native").$convert(e)),o(null==r.native.firstChild)?r.native.appendChild(e):r.native.insertBefore(e,r.native.firstChild),r)},h.$$arity=1),e.def(ce,"$add_child",y=function(e){var t=y.$$p,r=t||n,$=this;return t&&(y.$$p=null),t&&(y.$$p=null),null==e&&(e=n),o(e)||(e=l($,"DOM",[],r.$to_proc())),$["$<<"](e)},y.$$arity=-1),e.def(ce,"$add_next_sibling",v=function(e){var t=v.$$p,r=t||n,a=this;return t&&(v.$$p=null),t&&(v.$$p=null),null==e&&(e=n),o(e)||(e=l(a,"DOM",[],r.$to_proc())),o(a["$native?"](e))||(e=o($(pe,"String")["$==="](e))?a.native.ownerDocument.createTextNode(e):$(pe,"Native").$convert(e)),a.native.parentNode.insertBefore(e,a.native.nextSibling)},v.$$arity=-1),e.def(ce,"$add_previous_sibling",m=function(e){var t=m.$$p,r=t||n,a=this;return t&&(m.$$p=null),t&&(m.$$p=null),null==e&&(e=n),o(e)||(e=l(a,"DOM",[],r.$to_proc())),o(a["$native?"](e))||(e=o($(pe,"String")["$==="](e))?a.native.ownerDocument.createTextNode(e):$(pe,"Native").$convert(e)),a.native.parentNode.insertBefore(e,a.native)},m.$$arity=-1),c(ce,"after","add_next_sibling"),e.def(ce,"$append_to",g=function(e){var t=this;return e["$<<"](t)},g.$$arity=1),e.def(ce,"$ancestors",b=function(e){var t,r=this,a=n,i=n;if(null==e&&(e=n),!o(r.$parent()))return $(pe,"NodeSet")["$[]"]();for(a=[r.$parent()];o(i=a.$last().$parent());)a["$<<"](i);return o($(pe,"Document")["$==="](a.$last()))&&a.$pop(),o(e)&&l(a,"select!",[],((t=function(r){null==t.$$s||t.$$s;return null==r&&(r=n),r["$=~"](e)}).$$s=r,t.$$arity=1,t)),$(pe,"NodeSet").$new(a)},b.$$arity=-1),c(ce,"before","add_previous_sibling"),e.def(ce,"$remove",w=function(){var e=this;return o(e.$parent())?e.$parent().$remove_child(e):n},w.$$arity=0),e.def(ce,"$clear",k=function(){return this.$children().$remove()},k.$$arity=0),o($(pe,"Browser")["$supports?"]("Element.textContent"))?(e.def(ce,"$content",O=function(){return this.native.textContent},O.$$arity=0),e.def(ce,"$content=",E=function(e){return this.native.textContent=e},E.$$arity=1)):o($(pe,"Browser")["$supports?"]("Element.innerText"))?(e.def(ce,"$content",x=function(){return this.native.innerText},x.$$arity=0),e.def(ce,"$content=",S=function(e){return this.native.innerText=e},S.$$arity=1)):(e.def(ce,"$content",q=function(){return this.$raise($(pe,"NotImplementedError"),"node text content unsupported")},q.$$arity=0),e.def(ce,"$content=",N=function(){return this.$raise($(pe,"NotImplementedError"),"node text content unsupported")},N.$$arity=1)),e.def(ce,"$blank?",C=function(){return this.$raise($(pe,"NotImplementedError"))},C.$$arity=0),e.def(ce,"$cdata?",z=function(){return this.$node_type()["$=="]($(pe,"CDATA_SECTION_NODE"))},z.$$arity=0),e.def(ce,"$child",I=function(){return this.$children().$first()},I.$$arity=0),e.def(ce,"$children",D=function(){var e=this;return $(pe,"NodeSet")["$[]"](r($(pe,"Native"),"Array").$new(e.native.childNodes))},D.$$arity=0),e.def(ce,"$children=",H=function(){return this.$raise($(pe,"NotImplementedError"))},H.$$arity=1),e.def(ce,"$comment?",A=function(){return this.$node_type()["$=="]($(pe,"COMMENT_NODE"))},A.$$arity=0),e.def(ce,"$document",j=function(){var e=this;return o("undefined"!=typeof e.native.ownerDocument)?e.$DOM(e.native.ownerDocument):n},j.$$arity=0),e.def(ce,"$document?",M=function(){return this.$node_type()["$=="]($(pe,"DOCUMENT_NODE"))},M.$$arity=0),e.def(ce,"$elem?",R=function(){return this.$node_type()["$=="]($(pe,"ELEMENT_NODE"))},R.$$arity=0),c(ce,"element?","elem?"),e.def(ce,"$element_children",T=function(){return l(this.$children(),"select",[],"element?".$to_proc())},T.$$arity=0),c(ce,"elements","element_children"),e.def(ce,"$first_element_child",B=function(){return this.$element_children().$first()},B.$$arity=0),e.def(ce,"$fragment?",P=function(){return this.$node_type()["$=="]($(pe,"DOCUMENT_FRAGMENT_NODE"))},P.$$arity=0),e.def(ce,"$inner_html",L=function(){return this.native.innerHTML},L.$$arity=0),e.def(ce,"$inner_html=",F=function(e){return this.native.innerHTML=e},F.$$arity=1),c(ce,"inner_text","content"),c(ce,"inner_text=","content="),e.def(ce,"$last_element_child",U=function(){return this.$element_children().$last()},U.$$arity=0),e.def(ce,"$name",W=function(){return this.native.nodeName||n},W.$$arity=0),e.def(ce,"$name=",K=function(e){return this.native.nodeName=e.$to_s()},K.$$arity=1),e.def(ce,"$namespace",X=function(){return this.native.namespaceURI||n},X.$$arity=0),e.def(ce,"$next",Y=function(){var e=this;return o(null!=e.native.nextSibling)?e.$DOM(e.native.nextSibling):n},Y.$$arity=0),c(ce,"next=","add_next_sibling"),e.def(ce,"$next_element",V=function(){var e=n,t=n;for(e=this.$next();o(o(t=e)?e["$element?"]()["$!"]():t);)e=e.$next();return e},V.$$arity=0),c(ce,"next_sibling","next"),c(ce,"node_name","name"),c(ce,"node_name=","name="),e.def(ce,"$node_type",G=function(){return this.native.nodeType},G.$$arity=0),e.def(ce,"$parent",J=function(){var e=this;return o(null!=e.native.parentNode)?e.$DOM(e.native.parentNode):n},J.$$arity=0),e.def(ce,"$parent=",Z=function(e){return this.native.parentNode=$(pe,"Native").$convert(e)},Z.$$arity=1),e.def(ce,"$parse",Q=function(e,t){var n=this;return null==t&&(t=p([],{})),n.$raise($(pe,"NotImplementedError"))},Q.$$arity=-2),e.def(ce,"$path",ee=function(){return this.$raise($(pe,"NotImplementedError"))},ee.$$arity=0),e.def(ce,"$prepend_to",te=function(e){var t=this;return e["$>>"](t)},te.$$arity=1),e.def(ce,"$previous",ne=function(){var e=this;return o(null!=e.native.previousSibling)?e.$DOM(e.native.previousSibling):n},ne.$$arity=0),c(ce,"previous=","add_previous_sibling"),e.def(ce,"$previous_element",re=function(){var e=n,t=n;for(e=this.$previous();o(o(t=e)?e["$element?"]()["$!"]():t);)e=e.$previous();return e},re.$$arity=0),c(ce,"previous_sibling","previous"),e.def(ce,"$remove_child",$e=function(e){return this.native.removeChild($(pe,"Native").$try_convert(e))},$e.$$arity=1),e.def(ce,"$replace",ae=function(e){var t=this;return o(t["$native?"](e))||(e=o($(pe,"String")["$==="](e))?t.native.ownerDocument.createTextNode(e):$(pe,"Native").$convert(e)),t.native.parentNode.replaceChild(e,t.native),e},ae.$$arity=1),c(ce,"replace_with","replace"),c(ce,"text","content"),c(ce,"text=","content="),e.def(ce,"$text?",ie=function(){return this.$node_type()["$=="]($(pe,"TEXT_NODE"))},ie.$$arity=0),e.def(ce,"$traverse",oe=function(){var e=oe.$$p,t=this;return e&&(oe.$$p=null),e&&(oe.$$p=null),t.$raise($(pe,"NotImplementedError"))},oe.$$arity=0),c(ce,"type","node_type"),e.def(ce,"$value",se=function(){return this.native.nodeValue||n},se.$$arity=0),e.def(ce,"$value=",ue=function(e){return this.native.nodeValue=e},ue.$$arity=1),e.def(ce,"$inspect",le=function(){return"#<DOM::Node: "+this.$name()+">"},le.$$arity=0),n&&"inspect"}(f[0],0,f)}(f[0],f)}(t[0],t)},Opal.modules["browser/dom/attribute"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy;return e.add_stubs(["$include","$alias_native","$supports?","$==","$name"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,o){var s=[$(t,"DOM")].concat(o);return function(t,$super,$){var o,s=a(t,null,"Attribute"),u=[s].concat($);return s.$include(r(u,"Native")),s.$alias_native("name"),s.$alias_native("value"),s.$alias_native("value="),i(r(u,"Browser")["$supports?"]("Attr.isId"))?s.$alias_native("id?","isId"):(e.def(s,"$id?",o=function(){return this.$name()["$=="]("id")},o.$$arity=0),n&&"id?")}(s[0],0,s)}(s[0],s)}(t[0],t)},Opal.modules["browser/dom/character_data"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return e.add_stubs(["$alias_native"]),function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,r){var $,i,o,s,u,l,c=a(t,$super,"CharacterData");[c].concat(r);return c.$$prototype.native=n,e.def(c,"$append",$=function(e){var t=this;return t.native.appendData(e),t},$.$$arity=1),e.def(c,"$data",i=function(){return this.native.data},i.$$arity=0),e.def(c,"$delete",o=function(e,t){var n=this;return null==t&&(t=0),n.native.deleteData(t,e),n},o.$$arity=-2),e.def(c,"$insert",s=function(e,t){var n=this;return null==t&&(t=0),n.native.insertData(t,e),n},s.$$arity=-2),c.$alias_native("length"),e.def(c,"$replace",u=function(e,t,n){var r=this;return null==t&&(t=0),null==n&&(n=r.native.length),r.native.replaceData(t,n,e),r},u.$$arity=-2),e.def(c,"$substring",l=function(e,t){return null==t&&(t=0),this.native.substringData(t,e)},l.$$arity=-2),n&&"substring"}(o[0],r(o,"Node"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/text"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.send,o=e.gvars;return e.add_stubs(["$create_text","$DOM","$data"]),function(t,s){var u=[$(t,"Browser")].concat(s);return function(t,s){var u=[$(t,"DOM")].concat(s);return function(t,$super,r){var $,s,u,l,c=a(t,$super,"Text");[c].concat(r);return c.$$prototype.native=n,e.defs(c,"$create",$=function(){var t;return null==o.document&&(o.document=n),t=e.slice.call(arguments,0,arguments.length),i(o.document,"create_text",e.to_a(t))},$.$$arity=-1),e.def(c,"$whole",s=function(){return this.native.wholeText},s.$$arity=0),e.def(c,"$split",u=function(e){var t=this;return t.$DOM(t.native.splitText(e))},u.$$arity=1),e.def(c,"$inspect",l=function(){return"#<DOM::Text: "+this.$data()+">"},l.$$arity=0),n&&"inspect"}(u[0],r(u,"CharacterData"),u)}(u[0],u)}(t[0],t)},Opal.modules["browser/dom/cdata"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return e.add_stubs(["$value"]),function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,r){var $,i=a(t,$super,"CDATA");[i].concat(r);return e.def(i,"$inspect",$=function(){return"#<DOM::CDATA: "+this.$value()+">"},$.$$arity=0),n&&"inspect"}(o[0],r(o,"Text"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/comment"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return e.add_stubs(["$value"]),function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,r){var $,i=a(t,$super,"Comment");[i].concat(r);return e.def(i,"$inspect",$=function(){return"#<DOM::Comment: "+this.$value()+">"},$.$$arity=0),n&&"inspect"}(o[0],r(o,"CharacterData"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element/attributes"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.truthy,s=e.hash2,u=e.send,l=e.alias;return e.add_stubs(["$attr_reader","$to_n","$[]","$supports?","$==","$to_s","$include","$enum_for","$each","$attribute_nodes","$name","$value","$!","$[]=","$-"]),function(n,c){var p=[a(n,"Browser")].concat(c);return function(n,c){var p=[a(n,"DOM")].concat(c);return function(n,$super,a){var c=[i(n,$super,"Element")].concat(a);return function(n,$super,a){var c,p,d,f,_,h,y,v,m=i(n,null,"Attributes"),g=[m].concat(a),b=r;return m.$$prototype.namespace=m.$$prototype.native=m.$$prototype.element=r,m.$attr_reader("namespace"),e.def(m,"$initialize",c=function(e,t){var n=this;return n.element=e,n.native=e.$to_n(),n.namespace=t["$[]"]("namespace")},c.$$arity=2),o(o(b=$(g,"Browser")["$supports?"]("Element.className"))?b:$(g,"Browser")["$supports?"]("Element.htmlFor"))?(e.def(m,"$[]",p=function(e,t){var n=this,a=r,i=r,u=r,l=r;return null==t&&(t=s([],{})),o(o(a=e["$=="]("class"))?$(g,"Browser")["$supports?"]("Element.className"):a)?e="className":o(o(i=e["$=="]("for"))?$(g,"Browser")["$supports?"]("Element.htmlFor"):i)&&(e="htmlFor"),o(u=o(l=t["$[]"]("namespace"))?l:n.namespace)?n.native.getAttributeNS(u.$to_s(),e.$to_s())||r:n.native.getAttribute(e.$to_s())||r},p.$$arity=-2),e.def(m,"$[]=",d=function(e,t,n){var a=this,i=r,u=r,l=r,c=r;return null==n&&(n=s([],{})),o(o(i=e["$=="]("class"))?$(g,"Browser")["$supports?"]("Element.className"):i)?e="className":o(o(u=e["$=="]("for"))?$(g,"Browser")["$supports?"]("Element.htmlFor"):u)&&(e="htmlFor"),o(l=o(c=n["$[]"]("namespace"))?c:a.namespace)?a.native.setAttributeNS(l.$to_s(),e.$to_s(),t):a.native.setAttribute(e.$to_s(),t.$to_s())},d.$$arity=-3)):(e.def(m,"$[]",f=function(e,t){var n=this,$=r,a=r;return null==t&&(t=s([],{})),o($=o(a=t["$[]"]("namespace"))?a:n.namespace)?n.native.getAttributeNS($.$to_s(),e.$to_s())||r:n.native.getAttribute(e.$to_s())||r},f.$$arity=-2),e.def(m,"$[]=",_=function(e,t,n){var $=this,a=r,i=r;return null==n&&(n=s([],{})),o(a=o(i=n["$[]"]("namespace"))?i:$.namespace)?$.native.setAttributeNS(a.$to_s(),e.$to_s(),t):$.native.setAttribute(e.$to_s(),t.$to_s())},_.$$arity=-3)),m.$include($(g,"Enumerable")),e.def(m,"$each",h=function(){var t,n=h.$$p,$=n||r,a=this;return n&&(h.$$p=null),n&&(h.$$p=null),$===r?a.$enum_for("each"):(u(a.element.$attribute_nodes(),"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=r),e.yieldX($,[n.$name(),n.$value()])}).$$s=a,t.$$arity=1,t)),a)},h.$$arity=0),l(m,"get","[]"),e.def(m,"$has_key?",y=function(e){return this["$[]"](e)["$!"]()["$!"]()},y.$$arity=1),e.def(m,"$merge!",v=function(n){var $,a=this;return u(n,"each",[],(($=function(n,a){var i=null==$.$$s?this:$.$$s,o=r;return null==n&&(n=r),null==a&&(a=r),o=[n,a],u(i,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=a,$.$$arity=2,$)),a},v.$$arity=1),l(m,"set","[]=")}(c[0],0,c)}(p[0],$(p,"Node"),p)}(p[0],p)}(n[0],n)},Opal.modules["browser/dom/element/data"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.send,s=e.gvars;return e.add_stubs(["$attr_reader","$to_n","$include","$enum_for","$call","$each","$attributes","$=~","$[]"]),function(t,u){var l=[$(t,"Browser")].concat(u);return function(t,u){var l=[$(t,"DOM")].concat(u);return function(t,$super,$){var u=[a(t,$super,"Element")].concat($);return function(t,$super,$){var u,l,c,p,d,f=a(t,null,"Data"),_=[f].concat($);return f.$$prototype.native=f.$$prototype.element=n,f.$attr_reader("element"),e.def(f,"$initialize",u=function(e){var t=this;return t.element=e,t.native=e.$to_n(),i("undefined"!=typeof t.native.$data)?n:t.native.$data={}},u.$$arity=1),f.$include(r(_,"Enumerable")),e.def(f,"$each",l=function(){var e,t=l.$$p,r=t||n,$=this;if(t&&(l.$$p=null),t&&(l.$$p=null),!i(r))return $.$enum_for("each");var a=$.native.$data;for(var u in a)r.$call(u,a[u]);return o($.element.$attributes(),"each",[],((e=function(t,$){var a;null==e.$$s||e.$$s;return null==t&&(t=n),null==$&&($=n),i(t["$=~"](/^data-(.*)$/))?r.$call((a=s["~"])===n?n:a["$[]"](1),$):n}).$$s=$,e.$$arity=2,e)),$},l.$$arity=0),e.def(f,"$assign",c=function(e){var t,r=this;return o(e,"each",[],((t=function(e,r){var $=null==t.$$s?this:t.$$s;return null==$.native&&($.native=n),null==e&&(e=n),null==r&&(r=n),$.native.$data[e]=r}).$$s=r,t.$$arity=2,t)),r},c.$$arity=1),e.def(f,"$[]",p=function(e){var t=this,r=n;if(i(r=t.element["$[]"]("data-"+e)))return r;var $=t.native.$data[e];return $===undefined?n:$},p.$$arity=1),e.def(f,"$[]=",d=function(e,t){return this.native.$data[e]=t},d.$$arity=2),n&&"[]="}(u[0],0,u)}(l[0],r(l,"Node"),l)}(l[0],l)}(t[0],t)},Opal.modules["browser/dom/element/position"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.klass,u=e.truthy,l=e.send;return e.add_stubs(["$attr_reader","$to_n","$offset","$get","$parent","$new","$==","$[]","$style","$=~","$+","$x","$to_i","$x=","$-","$y","$y="]),function(r,c){var p=[o(r,"Browser")].concat(c);return function(r,c){var p=[o(r,"DOM")].concat(c);return function(r,$super,o){var c=[s(r,$super,"Element")].concat(o);return function(r,$super,o){var c,p,d,f,_=s(r,null,"Position"),h=[_].concat(o);return _.$$prototype.element=$,_.$attr_reader("element"),e.def(_,"$initialize",c=function(e){var t=this;return t.element=e,t.native=e.$to_n()},c.$$arity=1),e.def(_,"$get",p=function(){var r=this,o=$,s=$,c=$,p=$,d=$;return s=(o=r.element.$offset()).$get(),c=o.$parent(),p=a(i(h,"Browser"),"Position").$new(0,0),r.element.$style()["$[]"]("position")["$=="]("fixed")&&(u(c["$=~"]("html"))||(p=c.$offset()),d=[t(p.$x(),c.$style()["$[]"]("border-top-width").$to_i())],l(p,"x=",e.to_a(d)),d[n(d.length,1)],d=[t(p.$y(),c.$style()["$[]"]("border-left-width").$to_i())],l(p,"y=",e.to_a(d)),d[n(d.length,1)]),a(i(h,"Browser"),"Position").$new(n(n(s.$x(),p.$x()),r.element.$style()["$[]"]("margin-left").$to_i()),n(n(s.$y(),p.$y()),r.element.$style()["$[]"]("margin-top").$to_i()))},p.$$arity=0),e.def(_,"$x",d=function(){return this.$get().$x()},d.$$arity=0),e.def(_,"$y",f=function(){return this.$get().$y()},f.$$arity=0),$&&"y"}(c[0],0,c)}(p[0],i(p,"Node"),p)}(p[0],p)}(r[0],r)},Opal.modules["browser/dom/element/offset"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.klass,u=e.truthy,l=e.send;return e.add_stubs(["$attr_reader","$to_n","$DOM","$root","$document","$x","$get","$set","$y","$supports?","$window","$new","$[]","$style!","$==","$[]=","$style","$-","$to_u","$===","$first","$+","$px"]),function(r,c){var p=[o(r,"Browser")].concat(c);return function(r,c){var p=[o(r,"DOM")].concat(c);return function(r,$super,o){var c=[s(r,$super,"Element")].concat(o);return function(r,$super,o){var c,p,d,f,_,h,y,v,m,g=s(r,null,"Offset"),b=[g].concat(o);return g.$$prototype.native=g.$$prototype.element=$,g.$attr_reader("element"),e.def(g,"$initialize",c=function(e){var t=this;return t.element=e,t.native=e.$to_n()},c.$$arity=1),e.def(g,"$parent",p=function(){var e=this;return e.$DOM(e.native.offsetParent||e.element.$document().$root().$to_n())},p.$$arity=0),e.def(g,"$x",d=function(){return this.$get().$x()},d.$$arity=0),e.def(g,"$x=",f=function(e){return this.$set(e,$)},f.$$arity=1),e.def(g,"$y",_=function(){return this.$get().$y()},_.$$arity=0),e.def(g,"$y=",h=function(e){return this.$set($,e)},h.$$arity=1),u(i(b,"Browser")["$supports?"]("Element.getBoundingClientRect"))?e.def(g,"$get",y=function(){var e=this,t=$,n=$,r=$;n=(t=e.element.$document()).$root().$to_n(),r=t.$window().$to_n();var o=e.native.getBoundingClientRect(),s=o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),u=o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0);return a(i(b,"Browser"),"Position").$new(u,s)},y.$$arity=0):e.def(g,"$get",v=function(){var e=$,t=$,n=$;t=(e=this.$document()).$root().$to_n();var r=((n=e.$window().$to_n()).pageYOffset||t.scrollTop)-(t.clientTop||0),o=(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0);return a(i(b,"Browser"),"Position").$new(o,r)},v.$$arity=0),e.def(g,"$set",m=function(){var r,o,s,c=this,p=$,d=$,f=$,_=$,h=$,y=$;return r=e.slice.call(arguments,0,arguments.length),c.element["$style!"]()["$[]"]("position")["$=="]("static")&&(p=["position","relative"],l(c.element.$style(),"[]=",e.to_a(p)),p[t(p.length,1)]),d=c.$get(),f=c.element["$style!"]()["$[]"]("top").$to_u(),_=c.element["$style!"]()["$[]"]("left").$to_u(),u(a(i(b,"Browser"),"Position")["$==="](r.$first()))?(h=(o=[r.$first().$x(),r.$first().$y()])[0],y=o[1]):u(i(b,"Hash")["$==="](r.$first()))?(h=(o=[r.$first()["$[]"]("x"),r.$first()["$[]"]("y")])[0],y=o[1]):(s=r,h=null==(o=e.to_ary(s))[0]?$:o[0],y=null==o[1]?$:o[1]),u(h)&&(p=["left",n(t(h.$px(),d.$x()),_)],l(c.element.$style(),"[]=",e.to_a(p)),p[t(p.length,1)]),u(y)?(p=["top",n(t(y.$px(),d.$y()),f)],l(c.element.$style(),"[]=",e.to_a(p)),p[t(p.length,1)]):$},m.$$arity=-1),$&&"set"}(c[0],0,c)}(p[0],i(p,"Node"),p)}(p[0],p)}(r[0],r)},Opal.modules["browser/dom/element/scroll"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy;return e.add_stubs(["$attr_reader","$to_n","$supports?","$===","$first","$[]","$x","$y","$new","$raise","$position"]),function(t,s){var u=[a(t,"Browser")].concat(s);return function(t,s){var u=[a(t,"DOM")].concat(s);return function(t,$super,a){var s=[i(t,$super,"Element")].concat(a);return function(t,$super,a){var s,u,l,c,p,d,f,_,h,y,v,m,g,b,w,k=i(t,null,"Scroll"),O=[k].concat(a);return k.$$prototype.native=n,k.$attr_reader("element"),e.def(k,"$initialize",s=function(e){var t=this;return t.element=e,t.native=e.$to_n()},s.$$arity=1),o($(O,"Browser")["$supports?"]("Element.scroll"))?(e.def(k,"$to",u=function(){var t,r,a,i,s=this,u=n,l=n,c=n,p=n;return t=e.slice.call(arguments,0,arguments.length),r=t,o($(O,"Hash")["$==="](r.$first()))?(u=o(l=r.$first()["$[]"]("x"))?l:s.$x(),c=o(p=r.$first()["$[]"]("y"))?p:s.$y()):(i=r,u=null==(a=e.to_ary(i))[0]?n:a[0],c=null==a[1]?n:a[1]),s.native.scrollTop=c,s.native.scrollLeft=u},u.$$arity=-1),e.def(k,"$position",l=function(){var e=this;return r($(O,"Browser"),"Position").$new(e.native.scrollLeft,e.native.scrollTop)},l.$$arity=0)):o($(O,"Browser")["$supports?"]("Element.pageOffset"))?(e.def(k,"$to",c=function(){var t,r,a,i,s=this,u=n,l=n,c=n,p=n;return t=e.slice.call(arguments,0,arguments.length),r=t,o($(O,"Hash")["$==="](r.$first()))?(u=o(l=r.$first()["$[]"]("x"))?l:s.$x(),c=o(p=r.$first()["$[]"]("y"))?p:s.$y()):(i=r,u=null==(a=e.to_ary(i))[0]?n:a[0],c=null==a[1]?n:a[1]),s.native.pageYOffset=c,s.native.pageXOffset=u},c.$$arity=-1),e.def(k,"$position",p=function(){var e=this;return $(O,"Position").$new(e.native.pageXOffset,e.native.pageYOffset)},p.$$arity=0)):(e.def(k,"$to",d=function(){var t=this;return e.slice.call(arguments,0,arguments.length),t.$raise($(O,"NotImplementedError"),"scroll on element unsupported")},d.$$arity=-1),e.def(k,"$position",f=function(){return this.$raise($(O,"NotImplementedError"),"scroll on element unsupported")},f.$$arity=0)),e.def(k,"$x",_=function(){return this.$position().$x()},_.$$arity=0),e.def(k,"$y",h=function(){return this.$position().$y()},h.$$arity=0),e.def(k,"$height",y=function(){return this.native.scrollHeight},y.$$arity=0),e.def(k,"$width",v=function(){return this.native.scrollWidth},v.$$arity=0),e.def(k,"$by",m=function(){var t,r,a,i,s=this,u=n,l=n,c=n,p=n;return t=e.slice.call(arguments,0,arguments.length),r=t,o($(O,"Hash")["$==="](r.$first()))?(u=o(l=r.$first()["$[]"]("x"))?l:0,c=o(p=r.$first()["$[]"]("y"))?p:0):(i=r,u=null==(a=e.to_ary(i))[0]?n:a[0],c=null==a[1]?n:a[1]),s.native.scrollBy(u,c),s},m.$$arity=-1),o($(O,"Browser")["$supports?"]("Element.scrollIntoViewIfNeeded"))?e.def(k,"$to",g=function(e){return null==e&&(e=!0),this.native.scrollIntoViewIfNeeded(e)},g.$$arity=-1):e.def(k,"$to",b=function(e){return null==e&&(e=!0),this.$raise($(O,"NotImplementedError"))},b.$$arity=-1),e.def(k,"$to!",w=function(e){return null==e&&(e=!0),this.native.scrollIntoView(e)},w.$$arity=-1),n&&"to!"}(s[0],0,s)}(u[0],$(u,"Node"),u)}(u[0],u)}(t[0],t)},Opal.modules["browser/dom/element/size"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.send;return e.add_stubs(["$attr_reader","$to_n","$[]=","$style","$-"]),function(n,s){var u=[a(n,"Browser")].concat(s);return function(n,s){var u=[a(n,"DOM")].concat(s);return function(n,$super,$){var a=[i(n,$super,"Element")].concat($);return function(n,$super,$){var a,s,u,l,c,p=i(n,null,"Size");[p].concat($);return p.$$prototype.native=p.$$prototype.element=r,p.$attr_reader("element"),e.def(p,"$initialize",a=function(t){var n,r=this;return n=e.slice.call(arguments,1,arguments.length),r.element=t,r.native=t.$to_n(),r.include=n},a.$$arity=-2),e.def(p,"$width",s=function(){return this.native.offsetWidth},s.$$arity=0),e.def(p,"$width=",u=function(n){var $=r;return $=["width",n],o(this.element.$style(),"[]=",e.to_a($)),$[t($.length,1)]},u.$$arity=1),e.def(p,"$height",l=function(){return this.native.offsetHeight},l.$$arity=0),e.def(p,"$height=",c=function(n){var $=r;return $=["height",n],o(this.element.$style(),"[]=",e.to_a($)),$[t($.length,1)]},c.$$arity=1),r&&"height="}(a[0],0,a)}(u[0],$(u,"Node"),u)}(u[0],u)}(n[0],n)},Opal.modules["browser/dom/element/input"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,$){var i=[a(t,$super,"Element")].concat($);return function(t,$super,r){var $,i,o,s,u=a(t,$super,"Input");[u].concat(r);return u.$$prototype.native=n,e.def(u,"$value",$=function(){var e=this;return""==e.native.value?n:e.native.value},$.$$arity=0),e.def(u,"$value=",i=function(e){return this.native.value=e},i.$$arity=1),e.def(u,"$checked?",o=function(){return this.native.checked},o.$$arity=0),e.def(u,"$clear",s=function(){return this.native.value=""},s.$$arity=0),n&&"clear"}(i[0],r(i,"Element"),i)}(o[0],r(o,"Node"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element/select"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass;return e.add_stubs(["$[]","$new","$DOM","$alias_native"]),function(t,o){var s=[a(t,"Browser")].concat(o);return function(t,o){var s=[a(t,"DOM")].concat(o);return function(t,$super,a){var o=[i(t,$super,"Element")].concat(a);return function(t,$super,a){var o,s,u,l,c,p=i(t,$super,"Select"),d=[p].concat(a);return p.$$prototype.native=n,e.def(p,"$value",o=function(){var e=this;return""==e.native.value?n:e.native.value},o.$$arity=0),e.def(p,"$labels",s=function(){var e=this;return $(d,"NodeSet")["$[]"](r($(d,"Native"),"Array").$new(e.native.labels))},s.$$arity=0),e.def(p,"$options",u=function(){var e=this;return $(d,"NodeSet")["$[]"](r($(d,"Native"),"Array").$new(e.native.options))},u.$$arity=0),e.def(p,"$option",l=function(){var e=this;return e.$DOM(e.native.options[e.native.selectedIndex])},l.$$arity=0),e.def(p,"$index",c=function(){return this.native.selectedIndex},c.$$arity=0),p.$alias_native("multiple?","multiple"),p.$alias_native("required?","required"),p.$alias_native("length")}(o[0],$(o,"Element"),o)}(s[0],$(s,"Node"),s)}(s[0],s)}(t[0],t)},Opal.modules["browser/dom/element/image"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,$){var i=[a(t,$super,"Element")].concat($);return function(t,$super,r){var $,i,o,s,u=a(t,$super,"Image");[u].concat(r);u.$$prototype.native=n,e.def(u,"$complete?",$=function(){return this.native.complete},$.$$arity=0),e.def(u,"$cross?",i=function(){return this.native.crossOrigin},i.$$arity=0),e.def(u,"$height",o=function(){return this.native.naturalHeight},o.$$arity=0),e.def(u,"$width",s=function(){return this.native.naturalWidth},s.$$arity=0)}(i[0],r(i,"Element"),i),e.const_set(i[0],"Img",r(i,"Image"))}(o[0],r(o,"Node"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element/template"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return e.add_stubs(["$DOM"]),function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,$){var i=[a(t,$super,"Element")].concat($);return function(t,$super,r){var $,i=a(t,$super,"Template");[i].concat(r);return i.$$prototype.native=n,e.def(i,"$content",$=function(){var e=this;return e.$DOM(e.native.content)},$.$$arity=0),n&&"content"}(i[0],r(i,"Element"),i)}(o[0],r(o,"Node"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element/textarea"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return function(t,i){var o=[$(t,"Browser")].concat(i);return function(t,i){var o=[$(t,"DOM")].concat(i);return function(t,$super,$){var i=[a(t,$super,"Element")].concat($);return function(t,$super,r){var $,i,o,s=a(t,$super,"Textarea");[s].concat(r);return s.$$prototype.native=n,e.def(s,"$value",$=function(){var e=this;return""==e.native.value?n:e.native.value},$.$$arity=0),e.def(s,"$value=",i=function(e){return this.native.value=e},i.$$arity=1),e.def(s,"$clear",o=function(){return this.native.value=""},o.$$arity=0),n&&"clear"}(i[0],r(i,"Element"),i)}(o[0],r(o,"Node"),o)}(o[0],o)}(t[0],t)},Opal.modules["browser/dom/element"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r=e.top,$=[],a=e.nil,i=e.$$$,o=e.$$,s=e.module,u=e.klass,l=e.send,c=e.gvars,p=e.truthy,d=e.send2,f=e.find_super,_=e.hash2,h=e.alias;return e.add_stubs(["$require","$create_element","$==","$capitalize","$include?","$constants","$new","$const_get","$include","$target","$DOM","$supports?","$loaded?","$raise","$[]","$map","$xpath","$get","$attributes","$set","$+","$class_names","$empty?","$join","$uniq","$first","$css","$each","$alias_native","$reject","$split","$to_proc","$===","$assign","$height","$size","$height=","$-","$to_s","$clear","$document","$<<","$to_a","$downcase","$name","$id","$offset","$flatten","$concat","$replace","$apply","$to_n","$window","$width","$width="]),r.$require("browser/dom/element/attributes"),r.$require("browser/dom/element/data"),r.$require("browser/dom/element/position"),r.$require("browser/dom/element/offset"),r.$require("browser/dom/element/scroll"),r.$require("browser/dom/element/size"),r.$require("browser/dom/element/input"),r.$require("browser/dom/element/select"),r.$require("browser/dom/element/image"),r.$require("browser/dom/element/template"),r.$require("browser/dom/element/textarea"),function(r,$){var y=[s(r,"Browser")].concat($);return function(r,$){var y=[s(r,"DOM")].concat($);return function(r,$super,$){var s,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K,X,Y,V,G,J,Z,Q,ee,te,ne,re,$e,ae,ie,oe,se,ue,le=u(r,$super,"Element"),ce=[le].concat($),pe=a;return le.$$prototype.native=a,e.defs(le,"$create",s=function(){var t;return null==c.document&&(c.document=a),t=e.slice.call(arguments,0,arguments.length),l(c.document,"create_element",e.to_a(t))},s.$$arity=-1),e.defs(le,"$new",y=function(e){var t=y.$$p,n=this,r=a;return t&&(y.$$p=null),n["$=="](o(ce,"Element"))?(r=e.nodeName.$capitalize(),p(o(ce,"Element").$constants()["$include?"](r))?o(ce,"Element").$const_get(r).$new(e):d(n,f(n,"new",y,!1,!0),"new",[e],t)):d(n,f(n,"new",y,!1,!0),"new",[e],t)},y.$$arity=1),le.$include(i(o(ce,"Event"),"Target")),l(le,"target",[],((v=function(t){var n=null==v.$$s?this:v.$$s;null==t&&(t=a);try{return n.$DOM(t)}catch(r){if(!e.rescue(r,[o(ce,"StandardError")]))throw r;try{return a}finally{e.pop_exception()}}}).$$s=le,v.$$arity=1,v)),p(o(ce,"Browser")["$supports?"]("Element.matches"))?e.def(le,"$=~",m=function(e){return this.native.matches(e)},m.$$arity=1):p(o(ce,"Browser")["$supports?"]("Element.matches (Opera)"))?e.def(le,"$=~",g=function(e){return this.native.oMatchesSelector(e)},g.$$arity=1):p(o(ce,"Browser")["$supports?"]("Element.matches (Internet Explorer)"))?e.def(le,"$=~",b=function(e){return this.native.msMatchesSelector(e)},b.$$arity=1):p(o(ce,"Browser")["$supports?"]("Element.matches (Firefox)"))?e.def(le,"$=~",w=function(e){return this.native.mozMatchesSelector(e)},w.$$arity=1):p(o(ce,"Browser")["$supports?"]("Element.matches (Chrome)"))?e.def(le,"$=~",k=function(e){return this.native.webkitMatchesSelector(e)},k.$$arity=1):p(o(ce,"Browser")["$loaded?"]("Sizzle"))?e.def(le,"$=~",O=function(e){var t=this;return Sizzle.matchesSelector(t.native,e)},O.$$arity=1):e.def(le,"$=~",E=function(){
return this.$raise(o(ce,"NotImplementedError"),"selector matching unsupported")},E.$$arity=1),e.def(le,"$/",x=function(){var t,n,r=this;return t=e.slice.call(arguments,0,arguments.length),o(ce,"NodeSet")["$[]"](l(t,"map",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=a),t.$xpath(e)}).$$s=r,n.$$arity=1,n)))},x.$$arity=-1),e.def(le,"$[]",S=function(e,t){var n=this;return null==t&&(t=_([],{})),n.$attributes().$get(e,t)},S.$$arity=-2),e.def(le,"$[]=",q=function(e,t,n){var r=this;return null==n&&(n=_([],{})),r.$attributes().$set(e,t,n)},q.$$arity=-3),e.def(le,"$add_class",N=function(){var n,r=this,$=a;return n=e.slice.call(arguments,0,arguments.length),$=t(r.$class_names(),n),p($["$empty?"]())||(r.native.className=$.$uniq().$join(" ")),r},N.$$arity=-1),e.def(le,"$at",C=function(e){var t=this,n=a;return p(n=t.$xpath(e).$first())?n:t.$css(e).$first()},C.$$arity=1),e.def(le,"$at_css",z=function(){var t,n,r,$=this,i=a;return t=e.slice.call(arguments,0,arguments.length),n=t,i=a,function(){var t=e.new_brk();try{l(n,"each",[],((r=function(n){var $=null==r.$$s?this:r.$$s;if(null==n&&(n=a),!p(i=$.$css(n).$first()))return a;e.brk(a,t)}).$$s=$,r.$$brk=t,r.$$arity=1,r))}catch(o){if(o===t)return o.$v;throw o}}(),i},z.$$arity=-1),e.def(le,"$at_xpath",I=function(){var t,n,r,$=this,i=a;return t=e.slice.call(arguments,0,arguments.length),n=t,i=a,function(){var t=e.new_brk();try{l(n,"each",[],((r=function(n){var $=null==r.$$s?this:r.$$s;if(null==n&&(n=a),!p(i=$.$xpath(n).$first()))return a;e.brk(a,t)}).$$s=$,r.$$brk=t,r.$$arity=1,r))}catch(o){if(o===t)return o.$v;throw o}}(),i},I.$$arity=-1),h(le,"attr","[]"),h(le,"attribute","[]"),e.def(le,"$attributes",D=function(e){var t=this;return null==e&&(e=_([],{})),o(ce,"Attributes").$new(t,e)},D.$$arity=-1),e.def(le,"$attribute_nodes",H=function(){var e=this;return o(ce,"NodeSet")["$[]"](i(o(ce,"Native"),"Array").$new(e.native.attributes,_(["get"],{get:"item"})))},H.$$arity=0),le.$alias_native("class_name","className"),e.def(le,"$class_names",A=function(){return l(this.native.className.$split(/\s+/),"reject",[],"empty?".$to_proc())},A.$$arity=0),p(o(ce,"Browser")["$supports?"]("Query.css"))?e.def(le,"$css",j=function(t){var n=this;try{return o(ce,"NodeSet")["$[]"](i(o(ce,"Native"),"Array").$new(n.native.querySelectorAll(t)))}catch(r){if(!e.rescue(r,[o(ce,"StandardError")]))throw r;try{return o(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},j.$$arity=1):p(o(ce,"Browser")["$loaded?"]("Sizzle"))?e.def(le,"$css",M=function(t){var n=this;try{return o(ce,"NodeSet")["$[]"](Sizzle(t,n.native))}catch(r){if(!e.rescue(r,[o(ce,"StandardError")]))throw r;try{return o(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},M.$$arity=1):e.def(le,"$css",R=function(){return this.$raise(o(ce,"NotImplementedError"),"query by CSS selector unsupported")},R.$$arity=1),e.def(le,"$data",T=function(e){var t=this,n=a;return null==e&&(e=a),n=o(ce,"Data").$new(t),p(e)?(p(o(ce,"Hash")["$==="](e))?n.$assign(e):t.$raise(o(ce,"ArgumentError"),"unknown data type"),t):n},T.$$arity=-1),h(le,"get_attribute","[]"),h(le,"get","[]"),e.def(le,"$height",B=function(){return this.$size().$height()},B.$$arity=0),e.def(le,"$height=",P=function(t){var r=a;return r=[t],l(this.$size(),"height=",e.to_a(r)),r[n(r.length,1)]},P.$$arity=1),e.def(le,"$id",L=function(){var e=this.native.id;return""===e?a:e},L.$$arity=0),e.def(le,"$id=",F=function(e){return this.native.id=e.$to_s()},F.$$arity=1),e.def(le,"$inner_dom",U=function(){var e=U.$$p,t=e||a,n=this,r=a;return e&&(U.$$p=null),e&&(U.$$p=null),n.$clear(),r=n.$document(),n["$<<"](l(o(ce,"Builder"),"new",[r,n],t.$to_proc()).$to_a())},U.$$arity=0),e.def(le,"$inner_dom=",W=function(e){var t=this;return t.$clear(),t["$<<"](e)},W.$$arity=1),e.def(le,"$inspect",K=function(){var e=this,n=a;return n=e.$name().$downcase(),p(e.$id())&&(n=t(n,t(t(".",e.$id()),"!"))),p(e.$class_names()["$empty?"]())||(n=t(n,t(".",e.$class_names().$join(".")))),"#<DOM::Element: "+n+">"},K.$$arity=0),e.def(le,"$offset",X=function(){var t,n=this,r=a;return t=e.slice.call(arguments,0,arguments.length),r=o(ce,"Offset").$new(n),p(t["$empty?"]())||l(r,"set",e.to_a(t)),r},X.$$arity=-1),e.def(le,"$offset=",Y=function(t){return l(this.$offset(),"set",e.to_a(t))},Y.$$arity=1),e.def(le,"$position",V=function(){var e=this;return o(ce,"Position").$new(e)},V.$$arity=0),e.def(le,"$scroll",G=function(){var e=this;return o(ce,"Scroll").$new(e)},G.$$arity=0),e.def(le,"$search",J=function(){var t,n,r=this;return t=e.slice.call(arguments,0,arguments.length),o(ce,"NodeSet").$new(l(t,"map",[],(n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=a),t.$xpath(e).$to_a().$concat(t.$css(e).$to_a())},n.$$s=r,n.$$arity=1,n)).$flatten().$uniq())},J.$$arity=-1),h(le,"set","[]="),h(le,"set_attribute","[]="),e.def(le,"$style",Z=function(e){var t=Z.$$p,n=t||a,r=this,$=a,s=a;return t&&(Z.$$p=null),t&&(Z.$$p=null),null==e&&(e=a),$=i(o(ce,"CSS"),"Declaration").$new(r.native.style),p(p(s=e)?s:n)?(p(o(ce,"String")["$==="](e))?$.$replace(e):p(o(ce,"Hash")["$==="](e))?$.$assign(e):p(n)?l($,"apply",[],n.$to_proc()):r.$raise(o(ce,"ArgumentError"),"unknown data type"),r):$},Z.$$arity=-1),p(o(ce,"Browser")["$supports?"]("CSS.computed"))?e.def(le,"$style!",Q=function(){var e=this;return i(o(ce,"CSS"),"Declaration").$new(e.$window().$to_n().getComputedStyle(e.native,null))},Q.$$arity=0):p(o(ce,"Browser")["$supports?"]("CSS.current"))?e.def(le,"$style!",ee=function(){var e=this;return i(o(ce,"CSS"),"Declaration").$new(e.native.currentStyle)},ee.$$arity=0):e.def(le,"$style!",te=function(){return this.$raise(o(ce,"NotImplementedError"),"computed style unsupported")},te.$$arity=0),e.def(le,"$remove_attribute",ne=function(e){return this.native.removeAttribute(e)},ne.$$arity=1),e.def(le,"$remove_class",re=function(){var t,r=this,$=a;return t=e.slice.call(arguments,0,arguments.length),$=n(r.$class_names(),t),p($["$empty?"]())?r.native.removeAttribute("class"):r.native.className=$.$join(" "),r},re.$$arity=-1),e.def(le,"$size",$e=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),l(o(ce,"Size"),"new",[n].concat(e.to_a(t)))},$e.$$arity=-1),e.def(le,"$width",ae=function(){return this.$size().$width()},ae.$$arity=0),e.def(le,"$width=",ie=function(t){var r=a;return r=[t],l(this.$size(),"width=",e.to_a(r)),r[n(r.length,1)]},ie.$$arity=1),e.def(le,"$window",oe=function(){return this.$document().$window()},oe.$$arity=0),p(p(pe=o(ce,"Browser")["$supports?"]("Query.xpath"))?pe:o(ce,"Browser")["$loaded?"]("wicked-good-xpath"))?(p(o(ce,"Browser")["$loaded?"]("wicked-good-xpath"))&&wgxpath.install(),e.def(le,"$xpath",se=function(t){var n=this;try{return o(ce,"NodeSet")["$[]"](i(o(ce,"Native"),"Array").$new((n.native.ownerDocument||n.native).evaluate(t,n.native,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),_(["get","length"],{get:"snapshotItem",length:"snapshotLength"})))}catch(r){if(!e.rescue(r,[o(ce,"StandardError")]))throw r;try{return o(ce,"NodeSet")["$[]"]()}finally{e.pop_exception()}}},se.$$arity=1),a&&"xpath"):(e.def(le,"$xpath",ue=function(){return this.$raise(o(ce,"NotImplementedError"),"query by XPath unsupported")},ue.$$arity=1),a&&"xpath")}(y[0],o(y,"Node"),y)}(y[0],y)}($[0],$)},Opal.modules["browser/dom/document"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy,s=e.alias,u=e.hash2,l=e.send;return e.add_stubs(["$DOM","$first","$css","$xpath","$[]","$supports?","$raise","$ready?","$call","$on","$off","$convert","$new"]),function(t,c){var p=[a(t,"Browser")].concat(c);return function(t,c){var p=[a(t,"DOM")].concat(c);return function(t,$super,a){var c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C=i(t,$super,"Document"),z=[C].concat(a);return C.$$prototype.native=n,e.def(C,"$[]",c=function(e){var t=this,r=n,$=t.native.getElementById(e);return $?t.$DOM($):o(r=t.$css(e).$first())?r:t.$xpath(e).$first()},c.$$arity=1),s(C,"at","[]"),e.def(C,"$body",p=function(){var e=this;return e.$DOM(e.native.body)},p.$$arity=0),e.def(C,"$create_element",d=function(e,t){var r=this,$=n;return null==t&&(t=u([],{})),o($=t["$[]"]("namespace"))?r.$DOM(r.native.createElementNS($,e)):r.$DOM(r.native.createElement(e))},d.$$arity=-2),e.def(C,"$create_text",f=function(e){var t=this;return t.$DOM(t.native.createTextNode(e))},f.$$arity=1),e.def(C,"$document",_=function(){return this},_.$$arity=0),e.def(C,"$head",h=function(){var e=this;return e.$DOM(e.native.getElementsByTagName("head")[0])},h.$$arity=0),e.def(C,"$inspect",y=function(){return"#<DOM::Document>"},y.$$arity=0),o($(z,"Browser")["$supports?"]("Event.addListener"))?e.def(C,"$ready",v=function(){var e,t=v.$$p,r=t||n,a=this;return t&&(v.$$p=null),t&&(v.$$p=null),o(r)||a.$raise($(z,"ArgumentError"),"no block given"),o(a["$ready?"]())?r.$call():l(a,"on",["dom:load"],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=n),t.$off(),r.$call()}).$$s=a,e.$$arity=1,e))},v.$$arity=0):o($(z,"Browser")["$supports?"]("Event.attach"))?e.def(C,"$ready",m=function(){var e,t=m.$$p,r=t||n,a=this;return t&&(m.$$p=null),t&&(m.$$p=null),o(r)||a.$raise($(z,"ArgumentError"),"no block given"),o(a["$ready?"]())?r.$call():l(a,"on",["ready:state:change"],((e=function(t){var $=null==e.$$s?this:e.$$s;return null==t&&(t=n),o($["$ready?"]())?(t.$off(),r.$call()):n}).$$s=a,e.$$arity=1,e))},m.$$arity=0):e.def(C,"$ready",g=function(){var e=g.$$p,t=this;return e&&(g.$$p=null),e&&(g.$$p=null),t.$raise($(z,"NotImplementedError"),"document ready unsupported")},g.$$arity=0),e.def(C,"$ready?",b=function(){return"complete"===this.native.readyState},b.$$arity=0),e.def(C,"$root",w=function(){var e=this;return e.$DOM(e.native.documentElement)},w.$$arity=0),e.def(C,"$root=",k=function(e){return this.native.documentElement=$(z,"Native").$convert(e)},k.$$arity=1),e.def(C,"$style_sheets",O=function(){var e,t=this;return l(r($(z,"Native"),"Array"),"new",[t.native.styleSheets],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=n),r($(z,"CSS"),"StyleSheet").$new(t)}).$$s=t,e.$$arity=1,e))},O.$$arity=0),e.def(C,"$title",E=function(){return this.native.title},E.$$arity=0),e.def(C,"$title=",x=function(e){return this.native.title=e},x.$$arity=1),o($(z,"Browser")["$supports?"]("Document.view"))?(e.def(C,"$window",S=function(){var e=this;return $(z,"Window").$new(e.native.defaultView)},S.$$arity=0),n&&"window"):o($(z,"Browser")["$supports?"]("Document.window"))?(e.def(C,"$window",q=function(){var e=this;return $(z,"Window").$new(e.native.parentWindow)},q.$$arity=0),n&&"window"):(e.def(C,"$window",N=function(){return this.$raise($(z,"NotImplementedError"),"window from document unsupported")},N.$$arity=0),n&&"window")}(p[0],$(p,"Element"),p)}(p[0],p)}(t[0],t)},Opal.modules["browser/dom/document_fragment"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass;return function(e,t){var i=[$(e,"Browser")].concat(t);return function(e,t){var i=[$(e,"DOM")].concat(t);return function(e,$super,t){[a(e,$super,"DocumentFragment")].concat(t);return n}(i[0],r(i,"Element"),i)}(i[0],i)}(t[0],t)},Opal.modules["browser/dom/builder"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.hash2,l=e.send;return e.add_stubs(["$<<","$[]=","$to_h","$-","$[]","$each","$===","$call","$raise","$attr_reader","$new","$to_proc","$map","$build","$for","$create_text","$document","$create_element","$merge!","$attributes","$add_class","$on","$inner_html="]),function(t,n){var r,$=i(t,"Utils");[$].concat(n);e.defs($,"$heredoc",r=function(e){return e},r.$$arity=1)}(a(n,"Paggio"),n),function(t,$super,n){var $,a=o(t,$super,"Element");[a].concat(n);a.$$prototype.on=r,e.def(a,"$on",$=function(){var t,n=$.$$p,a=n||r,i=this,o=r;return n&&($.$$p=null),n&&($.$$p=null),t=e.slice.call(arguments,0,arguments.length),(i.on=s(o=i.on)?o:[])["$<<"]([t,a])},$.$$arity=-1)}($(a(n,"Paggio"),"HTML"),a(n,"BasicObject"),n),function(n,c){var p=[i(n,"Browser")].concat(c);return function(n,c){var p,d,f,_=i(n,"DOM"),h=[_].concat(c);return function(n,$super,i){var c,p,d,f,_,h=o(n,null,"Builder"),y=[h].concat(i);h.$$prototype.builder=h.$$prototype.roots=r,e.defs(h,"$to_h",c=function(){var e=this,t=r;return null==e.builders&&(e.builders=r),e.builders=s(t=e.builders)?t:u([],{})},c.$$arity=0),e.defs(h,"$for",p=function(n){var $=p.$$p,a=$||r,i=this,o=r;return $&&(p.$$p=null),$&&(p.$$p=null),s(a)?(o=[n,a],l(i.$to_h(),"[]=",e.to_a(o)),o[t(o.length,1)]):i.$to_h()["$[]"](n)},p.$$arity=1),e.defs(h,"$build",d=function(t,n){try{var $,i=this;return l(i.$to_h(),"each",[],(($=function(a,i){null==$.$$s||$.$$s;if(null==a&&(a=r),null==i&&(i=r),!s(a["$==="](n)))return r;e.ret(i.$call(t,n))}).$$s=i,$.$$arity=2,$)),i.$raise(a(y,"ArgumentError"),"cannot build unknown item "+n)}catch(o){if(o===e.returner)return o.$v;throw o}},d.$$arity=2),h.$attr_reader("document","element"),e.def(h,"$initialize",f=function(e){var t,n=f.$$p,i=n||r,o=this;return n&&(f.$$p=null),n&&(f.$$p=null),o.document=e,o.builder=l($(a(y,"Paggio"),"HTML"),"new",[],i.$to_proc()),o.roots=l(o.builder.$each(),"map",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=r),a(y,"Builder").$build(n,e)}).$$s=o,t.$$arity=1,t))},f.$$arity=1),e.def(h,"$to_a",_=function(){return this.roots},_.$$arity=0)}(h[0],0,h),l(a(h,"Builder"),"for",[a(h,"String")],((p=function(e,t){null==p.$$s||p.$$s;return null==e&&(e=r),null==t&&(t=r),e.$document().$create_text(t)}).$$s=_,p.$$arity=2,p)),l(a(h,"Builder"),"for",[$($(a(h,"Paggio"),"HTML"),"Element")],((d=function(n,$){var i,o,u,c=null==d.$$s?this:d.$$s,p=r,f=r,_=r,y=r;return null==n&&(n=r),null==$&&($=r),p=n.$document().$create_element($.name),s(a(h,"Hash")["$==="]($.attributes))&&p.$attributes()["$merge!"]($.attributes),l($.class_names,"each",[],((i=function(e){null==i.$$s||i.$$s;return null==e&&(e=r),p.$add_class(e)}).$$s=c,i.$$arity=1,i)),s(f=$.on||r)&&l(f,"each",[],((o=function(t,n){null==o.$$s||o.$$s;return null==t&&(t=r),null==n&&(n=r),l(p,"on",e.to_a(t),n.$to_proc())}).$$s=c,o.$$arity=2,o)),s(_=$.inner_html||r)?(y=[_],l(p,"inner_html=",e.to_a(y)),y[t(y.length,1)]):l($,"each",[],((u=function(e){null==u.$$s||u.$$s;return null==e&&(e=r),p["$<<"](a(h,"Builder").$build(n,e))}).$$s=c,u.$$arity=1,u)),p}).$$s=_,d.$$arity=2,d)),l(a(h,"Builder"),"for",[$(a(h,"DOM"),"Node")],((f=function(e,t){null==f.$$s||f.$$s;return null==e&&(e=r),null==t&&(t=r),t}).$$s=_,f.$$arity=2,f))}(p[0],p)}(n[0],n)},Opal.modules["browser/dom/mutation_observer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.send,l=e.send2,c=e.find_super,p=e.hash2;return e.add_stubs(["$supports?","$include","$===","$==","$type","$new","$[]","$DOM","$alias_native","$call","$map","$convert","$private","$Native","$[]=","$-","$to_n"]),function(n,d){var f=[i(n,"Browser")].concat(d);return function(n,d){var f=[i(n,"DOM")].concat(d);return function(n,$super,i){var d,f,_,h,y,v,m=o(n,null,"MutationObserver"),g=[m].concat(i);return m.$$prototype.native=r,e.defs(m,"$supported?",d=function(){return a(g,"Browser")["$supports?"]("MutationObserver")},d.$$arity=0),m.$include(a(g,"Native")),function(t,$super,n){var i,u,l,c,p,d,f,_=o(t,null,"Record"),h=[_].concat(n);_.$$prototype.native=r,_.$include(a(h,"Native")),e.def(_,"$type",i=function(){var e=r;return e=this.native.type,"attributes"["$==="](e)?"attribute":"childList"["$==="](e)?"tree":"characterData"["$==="](e)?"cdata":r},i.$$arity=0),e.def(_,"$attribute?",u=function(){return this.$type()["$=="]("attribute")},u.$$arity=0),e.def(_,"$tree?",l=function(){return this.$type()["$=="]("tree")},l.$$arity=0),e.def(_,"$cdata?",c=function(){return this.$type()["$=="]("cdata")},c.$$arity=0),e.def(_,"$added",p=function(){var e=this,t=r;return t=s(null!=e.native.addedNodes)?$(a(h,"Native"),"Array").$new(e.native.addedNodes):[],a(h,"NodeSet")["$[]"](t)},p.$$arity=0),e.def(_,"$removed",d=function(){var e=this,t=r;return t=s(null!=e.native.removedNodes)?$(a(h,"Native"),"Array").$new(e.native.removedNodes):[],a(h,"NodeSet")["$[]"](t)},d.$$arity=0),e.def(_,"$target",f=function(){var e=this;return e.$DOM(e.native.target)},f.$$arity=0),_.$alias_native("old","oldValue"),_.$alias_native("name","attributeName"),_.$alias_native("namespace","attributeNamespace")}(g[0],0,g),e.def(m,"$initialize",f=function(){var e,t=f.$$p,n=t||r,i=this;t&&(f.$$p=null),t&&(f.$$p=null);var o=function(t){return n.$call(u(t,"map",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=r),$($($(a(g,"Browser"),"DOM"),"MutationObserver"),"Record").$new(t)}).$$s=i,e.$$arity=1,e)))};return l(i,c(i,"initialize",f,!1,!0),"initialize",[new window.MutationObserver(o)],null)},f.$$arity=0),e.def(m,"$observe",_=function(e,t){var n=this;return null==t&&(t=r),s(t)||(t=p(["children","tree","attributes","cdata"],{children:!0,tree:!0,attributes:"old",cdata:"old"})),n.native.observe(a(g,"Native").$convert(e),n.$convert(t)),n},_.$$arity=-2),e.def(m,"$take",h=function(){var e,t=this;return u(t.native.takeRecords(),"map",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=r),a(g,"Record").$new(t)}).$$s=t,e.$$arity=1,e))},h.$$arity=0),e.def(m,"$disconnect",y=function(){return this.native.disconnect()},y.$$arity=0),m.$private(),e.def(m,"$convert",v=function(n){var $=r,a=r,i=r,o=r,l=r;return $=this.$Native({}),s(n["$[]"]("children"))&&(a=["childList",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)]),s(n["$[]"]("tree"))&&(a=["subtree",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)]),s(i=n["$[]"]("attributes"))&&(a=["attributes",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)],i["$=="]("old")&&(a=["attributeOldValue",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)])),s(o=n["$[]"]("filter"))&&(a=["attributeFilter",o],u($,"[]=",e.to_a(a)),a[t(a.length,1)]),s(l=n["$[]"]("cdata"))&&(a=["characterData",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)],l["$=="]("old")&&(a=["characterDataOldValue",!0],u($,"[]=",e.to_a(a)),a[t(a.length,1)])),$.$to_n()},v.$$arity=1),r&&"convert"}(f[0],0,f)}(f[0],f)}(n[0],n)},Opal.modules["browser/dom"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.truthy,s=e.gvars,u=e.send,l=e.klass;return null==s.window&&(s.window=r),e.add_stubs(["$require","$DOM","$shift","$to_a","$new","$to_proc","$==","$length","$first","$native?","$===","$try_convert","$raise","$document"]),t.$require("browser/dom/node_set"),t.$require("browser/dom/node"),t.$require("browser/dom/attribute"),t.$require("browser/dom/character_data"),t.$require("browser/dom/text"),t.$require("browser/dom/cdata"),t.$require("browser/dom/comment"),t.$require("browser/dom/element"),t.$require("browser/dom/document"),t.$require("browser/dom/document_fragment"),t.$require("browser/dom/builder"),t.$require("browser/dom/mutation_observer"),function(t,n){var l,c,p=i(t,"Kernel"),d=[p].concat(n);e.def(p,"$XML",l=function(e){var t,n=this;return window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),n.$DOM(t)},l.$$arity=1),e.def(p,"$DOM",c=function(){var t,n,i=c.$$p,l=i||r,p=this,f=r,_=r,h=r,y=r,v=r;if(null==s.document&&(s.document=r),i&&(c.$$p=null),i&&(c.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,o(l))return f=o(_=n.$shift())?_:s.document,(h=u($($(a(d,"Browser"),"DOM"),"Builder"),"new",[f],l.$to_proc()).$to_a()).$length()["$=="](1)?h.$first():$($(a(d,"Browser"),"DOM"),"NodeSet").$new(h);if(y=n.$shift(),f=o(v=n.$shift())?v:s.document,o(p["$native?"](y)))return $($(a(d,"Browser"),"DOM"),"Node").$new(y);if(o($($(a(d,"Browser"),"DOM"),"Node")["$==="](y)))return y;if(o(a(d,"String")["$==="](y))){var m=a(d,"Native").$try_convert(f).createElement("div");return m.innerHTML=y,p.$DOM(1==m.childNodes.length?m.childNodes[0]:m)}return p.$raise(a(d,"ArgumentError"),"argument not DOM convertible")},c.$$arity=-1)}(n[0],n),function(t,n){var $=[i(t,"Browser")].concat(n);(function(t,$super,n){var $,a=l(t,null,"Window");[a].concat(n);a.$$prototype.native=r,e.def(a,"$document",$=function(){var e=this;return e.$DOM(e.native.document)},$.$$arity=0)})($[0],0,$)}(n[0],n),s.document=s.window.$document()},Opal.modules["browser/css/declaration"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.send,l=e.range;return e.add_stubs(["$include","$new","$each","$[]=","$-","$to_proc","$important","$name","$value","$to_s","$enum_for","$[]","$alias_native","$end_with?"]),function(n,c){var p=[i(n,"Browser")].concat(c);return function(n,c){var p=[i(n,"CSS")].concat(c);return function(n,$super,i){var c,p,d,f,_,h,y,v,m,g,b=o(n,null,"Declaration"),w=[b].concat(i);return b.$$prototype.native=r,b.$include(a(w,"Native")),b.$include(a(w,"Enumerable")),e.def(b,"$rule",c=function(){var e=this;return s("undefined"!=typeof e.native.parentRule)?a(w,"Rule").$new(e.native.parentRule):r},c.$$arity=0),e.def(b,"$assign",p=function(n){var $,a=this;return u(n,"each",[],(($=function(n,a){var i=null==$.$$s?this:$.$$s,o=r;return null==n&&(n=r),null==a&&(a=r),o=[n,a],u(i,"[]=",e.to_a(o)),o[t(o.length,1)]}).$$s=a,$.$$arity=2,$)),a},p.$$arity=1),e.def(b,"$replace",d=function(e){return this.native.cssText=e},d.$$arity=1),e.def(b,"$apply",f=function(){var e,t=f.$$p,n=t||r,i=this;return t&&(f.$$p=null),t&&(f.$$p=null),u(u($($(a(w,"Paggio"),"CSS"),"Definition"),"new",[],n.$to_proc()),"each",[],((e=function(t){var n=null==e.$$s?this:e.$$s;return null==n.native&&(n.native=r),null==t&&(t=r),s(t.$important())?n.native.setProperty(t.$name(),t.$value(),"important"):n.native.setProperty(t.$name(),t.$value(),"")}).$$s=i,e.$$arity=1,e))},f.$$arity=0),e.def(b,"$delete",_=function(e){return this.native.removeProperty(e)},_.$$arity=1),e.def(b,"$[]",h=function(e){var t=this.native.getPropertyValue(e);return null==t||""===t?r:t},h.$$arity=1),e.def(b,"$[]=",y=function(e,t){return this.native.setProperty(e,t.$to_s(),"")},y.$$arity=2),e.def(b,"$important?",v=function(e){return"important"==this.native.getPropertyPriority(e)},v.$$arity=1),e.def(b,"$each",m=function(){var t=m.$$p,n=t||r,$=this;if(t&&(m.$$p=null),t&&(m.$$p=null),n===r)return $.$enum_for("each");for(var a=0,i=$.native.length;a<i;a++){var o=$.native.item(a);e.yieldX(n,[o,$["$[]"](o)])}return $},m.$$arity=0),b.$alias_native("length"),b.$alias_native("to_s","cssText"),e.def(b,"$method_missing",g=function(n,$){var a=this,i=r;return null==$&&($=r),s(n["$end_with?"]("="))?(i=[n["$[]"](l(0,-2,!1)),$],u(a,"[]=",e.to_a(i)),i[t(i.length,1)]):a["$[]"](n)},g.$$arity=-2),r&&"method_missing"}(p[0],0,p)}(p[0],p)}(n[0],n)},Opal.modules["browser/css/style_sheet"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.truthy,s=e.send2,u=e.find_super,l=e.send;return e.add_stubs(["$include","$is_a?","$to_n","$alias_native","$new","$DOM","$===","$join","$map","$insert","$length","$find","$rules","$log","$==","$id","$__send__","$to_proc"]),function(t,c){var p=[a(t,"Browser")].concat(c);return function(t,c){var p=[a(t,"CSS")].concat(c);return function(t,$super,a){var c,p,d,f,_,h,y,v,m,g,b=i(t,null,"StyleSheet"),w=[b].concat(a);return b.$$prototype.native=n,b.$include($(w,"Native")),e.def(b,"$initialize",c=function(e){var t=c.$$p,n=this;return t&&(c.$$p=null),o(e["$is_a?"](r($(w,"DOM"),"Element")))?s(n,u(n,"initialize",c,!1,!0),"initialize",[e.$to_n().sheet],null):s(n,u(n,"initialize",c,!1,!0),"initialize",[e],null)},c.$$arity=1),b.$alias_native("disabled?","disabled"),b.$alias_native("href"),b.$alias_native("title"),b.$alias_native("type"),e.def(b,"$media",p=function(){var e=this;return o(null!=e.native.media)?$(w,"Media").$new(e.native.media):n},p.$$arity=0),e.def(b,"$owner",d=function(){var e=this;return e.$DOM(e.native.ownerNode)},d.$$arity=0),e.def(b,"$parent",f=function(){var e=this;return o(null!=e.native.parentStyleSheet)?$(w,"Sheet").$new(e.native.parentStyleSheet):n},f.$$arity=0),e.def(b,"$rules",_=function(){var e,t=this;return l(r($(w,"Native"),"Array"),"new",[t.native.cssRules],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=n),$(w,"Rule").$new(t)}).$$s=t,e.$$arity=1,e))},_.$$arity=0),e.def(b,"$delete",h=function(e){return this.native.deleteRule(e)},h.$$arity=1),e.def(b,"$insert",y=function(e,t){return this.native.insertRule(t,e)},y.$$arity=2),e.def(b,"$rule",v=function(e,t){var r,a=this;return o($(w,"String")["$==="](e))||(e=e.$join(", ")),o($(w,"String")["$==="](t))||(t=l(t,"map",[],(r=function(e,t){null==r.$$s||r.$$s;return null==e&&(e=n),null==t&&(t=n),e+": "+t+";"},r.$$s=a,r.$$arity=2,r)).$join("\n")),a.$insert(a.$length(),e+" { "+t+" }")},v.$$arity=2),e.def(b,"$[]",m=function(e){var t,r=this;return l(r.$rules(),"find",[],((t=function(r){var $=null==t.$$s?this:t.$$s;return null==r&&(r=n),$.$log(r),r.$id()["$=="](e)}).$$s=r,t.$$arity=1,t))},m.$$arity=1),e.def(b,"$method_missing",g=function(){var t,r=g.$$p,$=r||n,a=this;return r&&(g.$$p=null),r&&(g.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(a.$rules(),"__send__",e.to_a(t),$.$to_proc())},g.$$arity=-1),function(t,$super,r){var $,a,o=i(t,$super,"Media");[o].concat(r);return o.$$prototype.native=n,o.$alias_native("text","mediaText"),o.$alias_native("to_s","mediaText"),e.def(o,"$push",$=function(e){var t=this;return t.native.appendMedium(e),t},$.$$arity=1),e.def(o,"$delete",a=function(e){return this.native.deleteMedium(e)},a.$$arity=1),n&&"delete"}(w[0],r($(w,"Native"),"Array"),w)}(p[0],0,p)}(p[0],p)}(t[0],t)},Opal.modules["browser/css/rule"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.send2,s=e.find_super;return e.add_stubs(["$include","$==","$[]","$new","$raise","$alias_native"]),function(t,u){var l=[$(t,"Browser")].concat(u);return function(t,u){var l=[$(t,"CSS")].concat(u);return function(t,$super,$){var u,l,c,p=a(t,null,"Rule"),d=[p].concat($);return p.$$prototype.native=n,p.$include(r(d,"Native")),e.const_set(d[0],"STYLE_RULE",1),e.const_set(d[0],"CHARSET_RULE",2),e.const_set(d[0],"IMPORT_RULE",3),e.const_set(d[0],"MEDIA_RULE",4),e.const_set(d[0],"FONT_FACE_RULE",5),e.const_set(d[0],"PAGE_RULE",6),e.const_set(d[0],"KEYFRAMES_RULE",7),e.const_set(d[0],"KEYFRAME_RULE",8),e.const_set(d[0],"NAMESPACE_RULE",10),e.const_set(d[0],"COUNTER_STYLE_RULE",11),e.const_set(d[0],"SUPPORTS_RULE",12),e.const_set(d[0],"DOCUMENT_RULE",13),e.const_set(d[0],"FONT_FEATURE_VALUES_RULE",14),e.const_set(d[0],"VIEWPORT_RULE",15),e.const_set(d[0],"REGION_STYLE_RULE",16),e.defs(p,"$new",u=function(e){var t=u.$$p,$=this,a=n,l=n;return null==$.classes&&($.classes=n),t&&(u.$$p=null),$["$=="](r(d,"Rule"))?($.classes=i(a=$.classes)?a:[n,r(d,"Style")],i(l=$.classes["$[]"](e.type))?l.$new(e):$.$raise(r(d,"ArgumentError"),"cannot instantiate a non derived Rule object")):o($,s($,"new",u,!1,!0),"new",[e],null)},u.$$arity=1),p.$alias_native("text","cssText"),p.$alias_native("to_s","cssText"),e.def(p,"$parent",l=function(){var e=this;return i(null!=e.native.parentRule)?r(d,"Rule").$new(e.native.parentRule):n},l.$$arity=0),e.def(p,"$style_sheet",c=function(){var e=this;return i(null!=e.native.parentStyleSheet)?r(d,"StyleSheet").$new(e.native.parentStyleSheet):n},c.$$arity=0),n&&"style_sheet"}(l[0],0,l)}(l[0],l)}(t[0],t)},Opal.modules["browser/css/rule/style"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.send;return e.add_stubs(["$alias_native","$new","$__send__","$declaration","$to_proc"]),function(t,o){var s=[$(t,"Browser")].concat(o);return function(t,o){var s=[$(t,"CSS")].concat(o);return function(t,$super,$){var o=[a(t,null,"Rule")].concat($);return function(t,$super,$){var o,s,u=a(t,$super,"Style"),l=[u].concat($);return u.$$prototype.native=n,u.$alias_native("selector","selectorText"),u.$alias_native("id","selectorText"),e.def(u,"$declaration",o=function(){var e=this;return r(l,"Declaration").$new(e.native.style)},o.$$arity=0),e.def(u,"$method_missing",s=function(){var t,r=s.$$p,$=r||n,a=this;return r&&(s.$$p=null),r&&(s.$$p=null),t=e.slice.call(arguments,0,arguments.length),i(a.$declaration(),"__send__",e.to_a(t),$.$to_proc())},s.$$arity=-1),n&&"method_missing"}(o[0],r(o,"Rule"),o)}(s[0],0,s)}(s[0],s)}(t[0],t)},Opal.modules["browser/css"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.gvars,s=e.send,u=e.truthy;return e.add_stubs(["$require","$create_element","$[]=","$-","$css","$to_proc","$inner_text="]),n.$require("browser/css/declaration"),n.$require("browser/css/style_sheet"),n.$require("browser/css/rule"),n.$require("browser/css/rule/style"),function(n,r){var l,c=i(n,"Kernel"),p=[c].concat(r);return e.def(c,"$CSS",l=function(n){var r=l.$$p,i=r||$,c=$,d=$;return null==o.document&&(o.document=$),r&&(l.$$p=null),r&&(l.$$p=null),null==n&&(n=$),c=o.document.$create_element("style"),d=["type","text/css"],s(c,"[]=",e.to_a(d)),d[t(d.length,1)],u(i)?(d=[s(a(p,"Paggio"),"css",[],i.$to_proc())],s(c,"inner_text=",e.to_a(d)),d[t(d.length,1)]):(d=[n],s(c,"inner_text=",e.to_a(d)),d[t(d.length,1)]),c},l.$$arity=-1),$&&"CSS"}(r[0],r)},Opal.modules.browser=function(e){var t=e.top;e.nil,e.$$$,e.$$;return e.add_stubs(["$require"]),t.$require("native"),t.$require("paggio"),t.$require("browser/version"),t.$require("browser/utils"),t.$require("browser/support"),t.$require("browser/event"),t.$require("browser/window"),t.$require("browser/dom"),t.$require("browser/css")},Opal.modules["browser/interval"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.send,s=e.gvars;return e.add_stubs(["$attr_reader","$convert","$nil?","$stopped?","$aborted?","$raise","$call","$tap","$new","$to_proc","$every","$every!"]),function(t,s){var u=[$(t,"Browser")].concat(s);(function(t,$super,$){var o,s,u,l,c,p,d,f=a(t,null,"Interval"),_=[f].concat($);f.$$prototype.id=f.$$prototype.aborted=f.$$prototype.window=f.$$prototype.block=f.$$prototype.every=n,f.$attr_reader("every"),e.def(f,"$initialize",o=function(e,t){var $=o.$$p,a=$||n,i=this;return $&&(o.$$p=null),$&&(o.$$p=null),i.window=r(_,"Native").$convert(e),i.every=t,i.block=a,i.aborted=!1},o.$$arity=2),e.def(f,"$stopped?",s=function(){return this.id["$nil?"]()},s.$$arity=0),e.def(f,"$aborted?",u=function(){return this.aborted},u.$$arity=0),e.def(f,"$abort",l=function(){var e=this;return e.window.clearInterval(e.id),e.aborted=!0,e.id=n},l.$$arity=0),e.def(f,"$stop",c=function(){var e=this;return i(e["$stopped?"]())?n:(e.window.clearInterval(e.id),e.stopped=!0,e.id=n)},c.$$arity=0),e.def(f,"$start",p=function(){var e=this;return i(e["$aborted?"]())&&e.$raise("the interval has been aborted"),i(e["$stopped?"]())?e.id=e.window.setInterval(e.block,1e3*e.every):n},p.$$arity=0),e.def(f,"$call",d=function(){return this.block.$call()},d.$$arity=0)})(u[0],0,u),function(t,$super,$){var i,s,u=a(t,null,"Window"),l=[u].concat($);u.$$prototype.native=n,e.def(u,"$every",i=function(e){var t=i.$$p,$=t||n,a=this;return t&&(i.$$p=null),t&&(i.$$p=null),o(o(r(l,"Interval"),"new",[a.native,e],$.$to_proc()),"tap",[],"start".$to_proc())},i.$$arity=1),e.def(u,"$every!",s=function(e){var t=s.$$p,$=t||n,a=this;return t&&(s.$$p=null),t&&(s.$$p=null),o(r(l,"Interval"),"new",[a.native,e],$.$to_proc())},s.$$arity=1)}(u[0],0,u)}(t[0],t),function(t,r){var a,i,u=$(t,"Kernel");[u].concat(r);e.def(u,"$every",a=function(e){var t=a.$$p,r=t||n;return null==s.window&&(s.window=n),t&&(a.$$p=null),t&&(a.$$p=null),o(s.window,"every",[e],r.$to_proc())},a.$$arity=1),e.def(u,"$every!",i=function(e){var t=i.$$p,r=t||n;return null==s.window&&(s.window=n),t&&(i.$$p=null),t&&(i.$$p=null),o(s.window,"every!",[e],r.$to_proc())},i.$$arity=1)}(t[0],t),function(t,$super,r){var $,i,u=a(t,null,"Proc");[u].concat(r);return e.def(u,"$every",$=function(e){var t=this;return null==s.window&&(s.window=n),o(s.window,"every",[e],t.$to_proc())},$.$$arity=1),e.def(u,"$every!",i=function(e){var t=this;return null==s.window&&(s.window=n),o(s.window,"every!",[e],t.$to_proc())},i.$$arity=1),n&&"every!"}(t[0],0,t)},Opal.modules["browser/delay"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.send,o=e.gvars;return e.add_stubs(["$attr_reader","$convert","$to_n","$tap","$new","$to_proc","$after","$after!"]),function(t,o){var s=[$(t,"Browser")].concat(o);(function(t,$super,$){var i,o,s,u=a(t,null,"Delay"),l=[u].concat($);u.$$prototype.window=u.$$prototype.id=u.$$prototype.block=u.$$prototype.after=n,u.$attr_reader("after"),e.def(u,"$initialize",i=function(e,t){var $=i.$$p,a=$||n,o=this;return $&&(i.$$p=null),$&&(i.$$p=null),o.window=r(l,"Native").$convert(e),o.after=t,o.block=a},i.$$arity=2),e.def(u,"$abort",o=function(){var e=this;return e.window.clearTimeout(e.id)},o.$$arity=0),e.def(u,"$start",s=function(){var e=this;return e.id=e.window.setTimeout(e.block.$to_n(),1e3*e.after)},s.$$arity=0)})(s[0],0,s),
function(t,$super,$){var o,s,u=a(t,null,"Window"),l=[u].concat($);u.$$prototype.native=n,e.def(u,"$after",o=function(e){var t=o.$$p,$=t||n,a=this;return t&&(o.$$p=null),t&&(o.$$p=null),i(i(r(l,"Delay"),"new",[a.native,e],$.$to_proc()),"tap",[],"start".$to_proc())},o.$$arity=1),e.def(u,"$after!",s=function(e){var t=s.$$p,$=t||n,a=this;return t&&(s.$$p=null),t&&(s.$$p=null),i(r(l,"Delay"),"new",[a.native,e],$.$to_proc())},s.$$arity=1)}(s[0],0,s)}(t[0],t),function(t,r){var a,s,u=$(t,"Kernel");[u].concat(r);e.def(u,"$after",a=function(e){var t=a.$$p,r=t||n;return null==o.window&&(o.window=n),t&&(a.$$p=null),t&&(a.$$p=null),i(o.window,"after",[e],r.$to_proc())},a.$$arity=1),e.def(u,"$after!",s=function(e){var t=s.$$p,r=t||n;return null==o.window&&(o.window=n),t&&(s.$$p=null),t&&(s.$$p=null),i(o.window,"after!",[e],r.$to_proc())},s.$$arity=1)}(t[0],t),function(t,$super,r){var $,s,u=a(t,null,"Proc");[u].concat(r);return e.def(u,"$after",$=function(e){var t=this;return null==o.window&&(o.window=n),i(o.window,"after",[e],t.$to_proc())},$.$$arity=1),e.def(u,"$after!",s=function(e){var t=this;return null==o.window&&(o.window=n),i(o.window,"after!",[e],t.$to_proc())},s.$$arity=1),n&&"after!"}(t[0],0,t)},Opal.modules["hyperstack/boot"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.truthy,o=e.klass,s=e.send,u=e.hash2;return e.add_stubs(["$attr_reader","$<<","$receivers","$set_var","$new","$each","$call"]),function(t,l){var c=[a(t,"Hyperstack")].concat(l);return i($(c,"Operation","skip_raise")?"constant":n)?n:(function(e,$super,t){[o(e,null,"Operation")].concat(t)}(c[0],0,c),function(t,$super,a){var i=[o(t,null,"Application")].concat(a);return function(t,$super,a){var i=o(t,$super,"Boot"),l=[i].concat(a);return function(t,$super,n){var r,$=o(t,null,"ReactDummyParams");[$].concat(n);$.$attr_reader("context"),e.def($,"$initialize",r=function(e){return this.context=e},r.$$arity=1)}(l[0],0,l),function(t,a){var i,o,l,c=[t].concat(a);return e.def(t,"$on_dispatch",i=function(){var e=i.$$p,t=e||n,r=this;return e&&(i.$$p=null),e&&(i.$$p=null),r.$receivers()["$<<"](t)},i.$$arity=0),e.def(t,"$receivers",o=function(){var e,t=this;return s(r($(c,"Hyperstack"),"Context"),"set_var",[t,"@receivers",u(["force"],{force:!0})],((e=function(){null==e.$$s||e.$$s;return[]}).$$s=t,e.$$arity=0,e))},o.$$arity=0),e.def(t,"$run",l=function(t){var r,a,i=this,o=n;if(null==t)t=u([],{});else if(!t.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(r=t.$$smap.context)&&(r=n),o=$(c,"ReactDummyParams").$new(r),s(i.$receivers(),"each",[],((a=function(e){null==a.$$s||a.$$s;return null==e&&(e=n),e.$call(o)}).$$s=i,a.$$arity=1,a))},l.$$arity=-1),n&&"run"}(e.get_singleton_class(i),l)}(i[0],$(i,"Operation"),i)}(c[0],0,c))}(t[0],t)},Opal.modules["hyperstack/native_wrapper_compatibility"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.truthy;return e.add_stubs(["$include?","$instance_methods","$include","$extend"]),function(t,o){var s=[a(t,"Native")].concat(o);return function(t,o){var s,u=a(t,"Wrapper"),l=[u].concat(o);return e.defs(u,"$included",s=function(e){return i($(l,"Native").$instance_methods()["$include?"]("to_n"))?e.$include($(l,"Native")):e.$extend(r($(l,"Native"),"Helpers"))},s.$$arity=1),n&&"included"}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/deprecation_warning"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.truthy;return e.add_stubs(["$production?","$env","$include?","$<<"]),function(t,a){var i,o=r(t,"Hyperstack");[o].concat(a);return e.defs(o,"$deprecation_warning",i=function(e,t){var r=this,a=n;return null==r.deprecation_messages&&(r.deprecation_messages=n),$(r.$env()["$production?"]())?n:(r.deprecation_messages=$(a=r.deprecation_messages)?a:[],t="Warning: Deprecated feature used in "+e+". "+t,$(r.deprecation_messages["$include?"](t))?n:(r.deprecation_messages["$<<"](t),console.warn.apply(console,[t])))},i.$$arity=2),n&&"deprecation_warning"}(t[0],t)},Opal.modules["hyperstack/string"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return function(t,$super,$){var a,i=r(t,null,"String");[i].concat($);return e.def(i,"$to_json",a=function(){var e=this;return JSON.stringify(e)},a.$$arity=0),n&&"to_json"}(t[0],0,t)},Opal.modules["hyperstack/client_stubs"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module);return function(t,$){var a=r(t,"Hyperstack"),i=[a].concat($);return function(t,r){var $,a,i;[t].concat(r);return e.def(t,"$import",$=function(){return e.slice.call(arguments,0,arguments.length),n},$.$$arity=-1),e.def(t,"$imports",a=function(){return e.slice.call(arguments,0,arguments.length),n},a.$$arity=-1),e.def(t,"$import_tree",i=function(){return e.slice.call(arguments,0,arguments.length),n},i.$$arity=-1),n&&"import_tree"}(e.get_singleton_class(a),i)}(t[0],t)},Opal.modules["hyperstack/context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.hash2,s=e.truthy,u=e.send;return e.add_stubs(["$instance_variable_get","$!","$key?","$[]","$dup","$[]=","$-","$instance_variable_set","$each","$run","$new"]),function(n,l){var c=[i(n,"Hyperstack")].concat(l);return function(n,l){var c,p,d=i(n,"Context"),f=[d].concat(l);return e.defs(d,"$set_var",c=function(n,$,a){var i,l=c.$$p,p=l||r,d=this,f=r,_=r,h=r,y=r,v=r,m=r,g=r;if(null==d.context&&(d.context=r),l&&(c.$$p=null),null==a)a=o([],{});else if(!a.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(i=a.$$smap.force)&&(i=r),f=n.$instance_variable_get($),s(s(_=s(h=d.context)?d.context["$[]"](n)["$key?"]($)["$!"]():h)?s(y=i)?y:f["$!"]():_)&&(v=[$,s(m=f)?f.$dup():m],u(d.context["$[]"](n),"[]=",e.to_a(v)),v[t(v.length,1)]),s(g=f)?g:n.$instance_variable_set($,e.yieldX(p,[]))},c.$$arity=-3),e.defs(d,"$reset!",p=function(n){var i,l,c=this;return null==c.context&&(c.context=r),null==n&&(n=!0),s(c.context)?(u(c.context,"each",[],((i=function(e,t){var n,$=null==i.$$s?this:i.$$s;return null==e&&(e=r),null==t&&(t=r),u(t,"each",[],((n=function(t,$){null==n.$$s||n.$$s;var a=r;return null==t&&(t=r),null==$&&($=r),e.$instance_variable_set(t,s(a=$)?$.$dup():a)}).$$s=$,n.$$arity=2,n))}).$$s=c,i.$$arity=2,i)),s(n)?$($(a(f,"Hyperstack"),"Application"),"Boot").$run():r):c.context=u(a(f,"Hash"),"new",[],((l=function(n,$){null==l.$$s||l.$$s;var a=r;return null==n&&(n=r),null==$&&($=r),a=[$,o([],{})],u(n,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=c,l.$$arity=2,l))},p.$$arity=-1),r&&"reset!"}(c[0],c)}(n[0],n)},Opal.modules["hyperstack/js_imports"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.hash2,a=e.truthy,i=e.send;return e.add_stubs(["$!","$each","$raise"]),function(t,o){var s=r(t,"Hyperstack"),u=[s].concat(o);return function(t,r){var o;[t].concat(r);return e.def(t,"$js_import",o=function(t,r){var o,s,u,l,c=this,p=n,d=n,f=n,_=n;if(null==r)r=$([],{});else if(!r.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(!e.hasOwnProperty.call(r.$$smap,"defines"))throw e.ArgumentError.$new("missing keyword: defines");return o=r.$$smap.defines,null==(s=r.$$smap.client_only)&&(s=n),null==(u=r.$$smap.server_only)&&(u=n),o=[].concat(e.to_a(o)),p="undefined"==typeof e.global.document,a(a(d=a(f=u)?p["$!"]():f)?d:a(_=s)?p:_)?n:i(o,"each",[],((l=function(t){var r=null==l.$$s?this:l.$$s;return null==t&&(t=n),a(e.global[t]===undefined)?r.$raise("The package "+t+" was not found. Add it to the webpack "+(a(s)?"client_only.js":"client_and_server.js")+" manifest."):n}).$$s=c,l.$$arity=1,l))},o.$$arity=2),n&&"js_import"}(e.get_singleton_class(s),u)}(t[0],t)},Opal.modules["hyperstack/on_client"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module);return e.add_stubs(["$!"]),function(t,$){var a,i=r(t,"Hyperstack");[i].concat($);return e.defs(i,"$on_client?",a=function(){return("undefined"==typeof e.global.document)["$!"]()},a.$$arity=0),n&&"on_client?"}(t[0],t)},Opal.modules["hyperstack/active_support_string_inquirer"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.send2,s=e.find_super,u=e.range;return e.add_stubs(["$private","$==","$[]"]),function(t,l){var c=[$(t,"ActiveSupport")].concat(l);return function(t,$super,r){var $,l,c=a(t,$super,"StringInquirer");[c].concat(r);return c.$private(),e.def(c,"$respond_to_missing?",$=function(e,t){var r=$.$$p,a=this,u=n;return r&&($.$$p=null),null==t&&(t=!1),i(u=e["$[]"](-1)["$=="]("?"))?u:o(a,s(a,"respond_to_missing?",$,!1,!0),"respond_to_missing?",[e,t],r)},$.$$arity=-2),e.def(c,"$method_missing",l=function(t){var n=l.$$p,r=this;return n&&(l.$$p=null),e.slice.call(arguments,1,arguments.length),t["$[]"](-1)["$=="]("?")?r["$=="](t["$[]"](u(0,-2,!1))):o(r,s(r,"method_missing",l,!1,!0),"method_missing",[t].concat(e.to_a(arguments)),n)},l.$$arity=-2),n&&"method_missing"}(c[0],r(c,"String"),c)}(t[0],t)},Opal.modules.hyperstack_env=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.truthy;return e.add_stubs(["$new"]),function(t,o){var s,u=a(t,"Hyperstack"),l=[u].concat(o);return e.defs(u,"$env",s=function(){var e=this,t=n;return null==e.environment&&(e.environment=n),e.environment=i(t=e.environment)?t:r($(l,"ActiveSupport"),"StringInquirer").$new("development")},s.$$arity=0),n&&"env"}(t[0],t)},Opal.modules["hyperstack/hotloader/stub"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.truthy,i=e.klass;return function(t,o){var s=[$(t,"Hyperstack")].concat(o);return a(r(s,"Hotloader","skip_raise")?"constant":n)?n:function(t,$super,r){var $,a=i(t,null,"Hotloader");[a].concat(r);return e.defs(a,"$when_file_updates",$=function(){var e=$.$$p;return e&&($.$$p=null),e&&($.$$p=null),n},$.$$arity=0),n&&"when_file_updates"}(s[0],0,s)}(t[0],t)},Opal.modules["hyperstack-config"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$,e.$$,e.module);return e.add_stubs(["$require"]),t.$require("hyperstack/boot"),function(t,n){var $,a=r(t,"Hyperstack");[a].concat(n);e.defs(a,"$naming_convention",$=function(){return"camelize_params"},$.$$arity=0)}(n[0],n),t.$require("hyperstack/native_wrapper_compatibility"),t.$require("hyperstack/deprecation_warning"),t.$require("hyperstack/string"),t.$require("hyperstack/client_stubs"),t.$require("hyperstack/context"),t.$require("hyperstack/js_imports"),t.$require("hyperstack/on_client"),t.$require("hyperstack/active_support_string_inquirer.rb"),t.$require("hyperstack_env"),t.$require("hyperstack/hotloader/stub")},Opal.modules["hyperstack/autoloader"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r=e.top,$=[],a=e.nil,i=(e.$$$,e.$$),o=e.module,s=e.klass,u=e.class_variable_set,l=e.class_variable_get,c=e.send,p=e.truthy,d=e.gvars;return e.add_stubs(["$require","$new","$history=","$-","$load_paths=","$loaded=","$loading=","$nil?","$name","$guess_for_anonymous","$load_missing_constant","$puts","$const_defined?","$raise","$qualified_name_for","$underscore","$search_for_module","$include?","$loading","$require_or_load","$const_get","$respond_to?","$parent","$!=","$!","$any?","$parents","$const_missing","$missing_name?","$!~","$message","$=~","$==","$to_constant_name","$to_s","$loaded","$<<","$delete","$pop","$history","$each","$load_paths","$+","$===","$sub","$inspect","$downcase","$tr","$gsub"]),r.$require("set"),function(r,$){var f=[o(r,"Hyperstack")].concat($);return function(r,$super,$){var o,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C=s(r,null,"Autoloader"),z=[C].concat($),I=a;return e.defs(C,"$history=",o=function(e){return u(z[0],"@@history",e)},o.$$arity=1),e.defs(C,"$history",f=function(){return l(z[0],"@@history",!1)},f.$$arity=0),I=[i(z,"Set").$new()],c(C,"history=",e.to_a(I)),I[t(I.length,1)],e.defs(C,"$load_paths=",_=function(e){return u(z[0],"@@load_paths",e)},_.$$arity=1),e.defs(C,"$load_paths",h=function(){return l(z[0],"@@load_paths",!1)},h.$$arity=0),I=[[]],c(C,"load_paths=",e.to_a(I)),I[t(I.length,1)],e.defs(C,"$loaded=",y=function(e){return u(z[0],"@@loaded",e)},y.$$arity=1),e.defs(C,"$loaded",v=function(){return l(z[0],"@@loaded",!1)},v.$$arity=0),I=[i(z,"Set").$new()],c(C,"loaded=",e.to_a(I)),I[t(I.length,1)],e.defs(C,"$loading=",m=function(e){return u(z[0],"@@loading",e)},m.$$arity=1),e.defs(C,"$loading",g=function(){return l(z[0],"@@loading",!1)},g.$$arity=0),I=[[]],c(C,"loading=",e.to_a(I)),I[t(I.length,1)],e.defs(C,"$const_missing",b=function(t,n){var r=this,$=a;try{return $=p(n.$name()["$nil?"]())?r.$guess_for_anonymous(t):n,r.$load_missing_constant($,t)}catch(o){if(!e.rescue(o,[i(z,"Exception")]))throw o;o;try{return r.$puts("HyperStack autoloader failed attempting to load "+n+"::"+t+".  Could be a bug in autoloader")}finally{e.pop_exception()}}},b.$$arity=2),e.defs(C,"$guess_for_anonymous",w=function(e){var t=this;return p(i(z,"Object")["$const_defined?"](e))?t.$raise(i(z,"NameError").$new(e+" cannot be autoloaded from an anonymous class or module",e)):i(z,"Object")},w.$$arity=1),e.defs(C,"$load_missing_constant",k=function(t,n){var r,$=this,o=a,s=a,u=a,l=a,d=a,f=a,_=a,h=a;if(o=$.$qualified_name_for(t,n),s=$.$underscore(o),u=$.$search_for_module(s),p(u))return p($.$loading()["$include?"](u))?$.$raise("Circular dependency detected while autoloading constant "+o):($.$require_or_load(t,u),p(t["$const_defined?"](n,!1))||$.$raise(i(z,"LoadError"),"Unable to autoload constant "+o+", expected "+u+" to define it"),t.$const_get(n));if(!p(p(l=p(d=p(f=t["$respond_to?"]("parent"))?_=t.$parent():f)?_["$!="](t):d)?c(t.$parents(),"any?",[],(r=function(e){return null==r.$$s||r.$$s,null==e&&(e=a),e["$const_defined?"](n,!1)},r.$$s=$,r.$$arity=1,r))["$!"]():l))return a;try{return _.$const_missing(n)}catch(y){if(!e.rescue(y,[i(z,"NameError")]))throw y;h=y;try{return p($["$missing_name?"](h,$.$qualified_name_for(_,n)))?a:$.$raise()}finally{e.pop_exception()}}},k.$$arity=2),e.defs(C,"$missing_name?",O=function(e,t){var n;return(p(/undefined/["$!~"](e.$message()))&&p(/((::)?([A-Z]\w*)(::[A-Z]\w*)*)$/["$=~"](e.$message()))?(n=d["~"])===a?a:n["$[]"](1):a)["$=="](t)},O.$$arity=2),e.defs(C,"$qualified_name_for",E=function(e,t){var n=a;return(n=this.$to_constant_name(e))["$=="]("Object")?t.$to_s():n+"::"+t},E.$$arity=2),e.defs(C,"$require_or_load",x=function(t,n){var r=this,$=a;if(p(r.$loaded()["$include?"](n)))return a;r.$loaded()["$<<"](n),r.$loading()["$<<"](n);try{try{$=r.$require(n)}catch(o){if(!e.rescue(o,[i(z,"Exception")]))throw o;try{r.$loaded().$delete(n),r.$raise(i(z,"LoadError"),"Unable to autoload: require_or_load "+n+" failed")}finally{e.pop_exception()}}}finally{r.$loading().$pop()}return r.$history()["$<<"](n),$},x.$$arity=2),e.defs(C,"$search_for_module",S=function(t){try{var r,$=this;return c($.$load_paths(),"each",[],((r=function($){null==r.$$s||r.$$s;var i=a;if(null==$&&($=a),i=n(n($,"/"),t),!p(e.modules.hasOwnProperty(i)))return a;e.ret(i)}).$$s=$,r.$$arity=1,r)),p(e.modules.hasOwnProperty(t))?t:a}catch(i){if(i===e.returner)return i.$v;throw i}},S.$$arity=1),e.defs(C,"$to_constant_name",q=function(e){var t=this,n=a,r=a;return n=e,i(z,"String")["$==="](n)?e.$sub(/^::/,""):i(z,"Symbol")["$==="](n)?e.$to_s():i(z,"Module")["$==="](n)?p(r=e.$name())?r:t.$raise(i(z,"ArgumentError"),"Anonymous modules have no name to be referenced by"):t.$raise(i(z,"TypeError"),"Not a valid constant descriptor: "+e.$inspect())},q.$$arity=1),e.defs(C,"$underscore",N=function(e){return e.$gsub(/::/,"/").$gsub(/([A-Z]+)([A-Z][a-z])/,"\\1_\\2").$gsub(/([a-z\d])([A-Z])/,"\\1_\\2").$tr("-","_").$downcase()},N.$$arity=1),a&&"underscore"}(f[0],0,f)}($[0],$)},Opal.modules["hyperstack/autoloader_starter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.send,o=e.klass,s=e.alias,u=e.truthy,l=r;return e.add_stubs(["$load_paths=","$-","$_autoloader_original_const_missing","$const_missing","$raise"]),l=[["components","models","operations","stores"]],i($(a(n,"Hyperstack"),"Autoloader"),"load_paths=",e.to_a(l)),l[t(l.length,1)],function(t,$super,n){var i=o(t,null,"Object"),l=[i].concat(n);return function(t,n){var i,o=[t].concat(n);return s(t,"_autoloader_original_const_missing","const_missing"),e.def(t,"$const_missing",i=function(t){var n=this,i=r,s=r;try{return n.$_autoloader_original_const_missing(t)}catch(l){if(!e.rescue(l,[a(o,"StandardError")]))throw l;i=l;try{return u(s=$(a(o,"Hyperstack"),"Autoloader").$const_missing(t,n))?s:n.$raise(i)}finally{e.pop_exception()}}},i.$$arity=1),r&&"const_missing"}(e.get_singleton_class(i),l)}(n[0],0,n)},Opal.modules["hyperstack/internal/component"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$,e.$$,e.module);return e.add_stubs(["$require","$attr_accessor"]),t.$require("hyperstack-config"),function(t,n){var $=[r(t,"Hyperstack")].concat(n);return function(t,n){var $=[r(t,"Internal")].concat(n);return function(t,n){var $=r(t,"Component"),a=[$].concat(n);return function(e,t){[e].concat(t);return e.$attr_accessor("after_error_args")}(e.get_singleton_class($),a)}($[0],$)}($[0],$)}(n[0],n)},Opal.modules["hyperstack/internal/callbacks"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.send,o=e.truthy,s=e.hash2;return e.add_stubs(["$extend","$each","$flatten","$callbacks_for","$class","$is_a?","$method","$send","$define_singleton_method","$set_var","$lambda","$instance_exec","$to_proc","$<<","$push","$when_file_updates","$delete_if","$equal?","$call","$+","$respond_to?","$superclass","$any?"]),function(n,u){var l=[a(n,"Hyperstack")].concat(u);return function(n,u){var l=[a(n,"Internal")].concat(u);return function(n,u){var l,c,p=a(n,"Callbacks"),d=[p].concat(u);return e.defs(p,"$included",l=function(e){return e.$extend($(d,"ClassMethods"))},l.$$arity=1),e.def(p,"$run_callback",c=function(t){var n,a,s,u=this;return n=e.slice.call(arguments,1,arguments.length),a=n,i(u.$class().$callbacks_for(t).$flatten(),"each",[],((s=function(n){var u=null==s.$$s?this:s.$$s;return null==n&&(n=r),o(n["$is_a?"]($(d,"Proc")))||(n=u.$method(n)),a=i(u.$class(),"send",["_"+t+"_before_call_hook",t,u,n].concat(e.to_a(a)))}).$$s=u,s.$$arity=1,s)),a},c.$$arity=-2),function(n,u){var l,c,p,d=a(n,"ClassMethods"),f=[d].concat(u);return e.def(d,"$define_callback",l=function(t,n){var a,u,c,p,d,_=l.$$p,h=this,y=r,v=r;if(_&&(l.$$p=null),null==n)n=s([],{});else if(!n.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(a=n.$$smap.before_call_hook)&&(a=r),null==(u=n.$$smap.after_define_hook)&&(u=r),i(h,"define_singleton_method",[y="_"+t+"_callbacks"],((c=function(){var e,t=null==c.$$s?this:c.$$s;return i($(f,"Context"),"set_var",[t,"@"+y,s(["force"],{force:!0})],((e=function(){null==e.$$s||e.$$s;return[]}).$$s=t,e.$$arity=0,e))}).$$s=h,c.$$arity=0,c)),a=o(v=a)?v:i(h,"lambda",[],((p=function(t,n,$){var a;return null==p.$$s||p.$$s,null==t&&(t=r),null==n&&(n=r),null==$&&($=r),a=e.slice.call(arguments,3,arguments.length),i(n,"instance_exec",e.to_a(a),$.$to_proc()),a}).$$s=h,p.$$arity=-4,p)),i(h,"define_singleton_method",["_"+t+"_before_call_hook"],a.$to_proc()),i(h,"define_singleton_method",[t],((d=function(){var t,n,a,s=null==d.$$s?this:d.$$s,l=d.$$p,c=l||r;return l&&(d.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,c!==r&&n["$<<"](c),s.$send(y).$push(n),i($(f,"Hotloader"),"when_file_updates",[],((a=function(){var e,t=null==a.$$s?this:a.$$s;return i(t.$send(y),"delete_if",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=r),t["$equal?"](n)}).$$s=t,e.$$arity=1,e))}).$$s=s,a.$$arity=0,a)),o(u)?u.$call(s):r}).$$s=h,d.$$arity=-1,d))},l.$$arity=-2),e.def(d,"$callbacks_for",c=function(e){var n=this,$=r;return $="_"+e+"_callbacks",t(o(n.$superclass()["$respond_to?"]("callbacks_for"))?n.$superclass().$callbacks_for(e):[],n.$send($))},c.$$arity=1),e.def(d,"$callbacks?",p=function(e){return this.$callbacks_for(e)["$any?"]()},p.$$arity=1),r&&"callbacks?"}(d[0],d)}(l[0],l)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/internal/auto_unmount"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.send,s=e.truthy,u=e.send2,l=e.find_super;return e.add_stubs(["$include","$class_eval","$define_callback","$run_callback","$each","$[]","$objects_to_unmount","$to_proc","$delete","$instance_variables","$instance_variable_get","$respond_to?","$unmount","$unmounted?","$tap","$define_singleton_method","$abort","$<<","$new","$[]=","$-"]),function(n,c){var p=[i(n,"Hyperstack")].concat(c);return function(n,c){var p=[i(n,"Internal")].concat(c);return function(n,c){var p,d,f,_,h,y=i(n,"AutoUnmount"),v=[y].concat(c);return e.defs(y,"$included",p=function(e){var t,n=this;return e.$include($($(a(v,"Hyperstack"),"Internal"),"Callbacks")),o(e,"class_eval",[],((t=function(){return(null==t.$$s?this:t.$$s).$define_callback("before_unmount")}).$$s=n,t.$$arity=0,t))},p.$$arity=1),e.def(y,"$unmounted?",d=function(){var e=this;return null==e.__hyperstack_internal_auto_unmount_unmounted&&(e.__hyperstack_internal_auto_unmount_unmounted=r),e.__hyperstack_internal_auto_unmount_unmounted},d.$$arity=0),e.def(y,"$unmount",f=function(){var t,n=this;return n.$run_callback("before_unmount"),o(a(v,"AutoUnmount").$objects_to_unmount()["$[]"](n),"each",[],"unmount".$to_proc()),a(v,"AutoUnmount").$objects_to_unmount().$delete(n),o(n.$instance_variables(),"each",[],((t=function(n){var i=null==t.$$s?this:t.$$s,o=r;null==n&&(n=r),o=i.$instance_variable_get(n);try{return s(o["$respond_to?"]("unmount"))?o.$unmount():r}catch(u){if(!e.rescue(u,[$(a(v,"JS"),"Error")]))throw u;try{return r}finally{e.pop_exception()}}}).$$s=n,t.$$arity=1,t)),n.__hyperstack_internal_auto_unmount_unmounted=!0},f.$$arity=0),e.def(y,"$every",_=function(){var t,n,$=_.$$p,i=this;return $&&(_.$$p=null),$&&(_.$$p=null),t=e.slice.call(arguments,0,arguments.length),s(i["$unmounted?"]())?r:o(u(i,l(i,"every",_,!1,!0),"every",e.to_a(t),$),"tap",[],((n=function(e){var t,$=null==n.$$s?this:n.$$s;return null==e&&(e=r),$,o(e,"define_singleton_method",["unmount"],((t=function(){return(null==t.$$s?this:t.$$s).$abort()}).$$s=$,t.$$arity=0,t)),a(v,"AutoUnmount").$objects_to_unmount()["$[]"]($)["$<<"](e)}).$$s=i,n.$$arity=1,n))},_.$$arity=-1),e.def(y,"$after",h=function(){var t,n,$=h.$$p,i=this;return $&&(h.$$p=null),$&&(h.$$p=null),t=e.slice.call(arguments,0,arguments.length),s(i["$unmounted?"]())?r:o(u(i,l(i,"after",h,!1,!0),"after",e.to_a(t),$),"tap",[],((n=function(e){var t,$=null==n.$$s?this:n.$$s;return null==e&&(e=r),$,o(e,"define_singleton_method",["unmount"],((t=function(){return(null==t.$$s?this:t.$$s).$abort()}).$$s=$,t.$$arity=0,t)),a(v,"AutoUnmount").$objects_to_unmount()["$[]"]($)["$<<"](e)}).$$s=i,n.$$arity=1,n))},h.$$arity=-1),function(n,$){var i,u=[n].concat($);return e.def(n,"$objects_to_unmount",i=function(){var n,$=this,i=r;return null==$.objects_to_unmount&&($.objects_to_unmount=r),$.objects_to_unmount=s(i=$.objects_to_unmount)?i:o(a(u,"Hash"),"new",[],((n=function($,i){null==n.$$s||n.$$s;var s=r;return null==$&&($=r),null==i&&(i=r),s=[i,a(u,"Set").$new()],o($,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=$,n.$$arity=2,n))},i.$$arity=0),r&&"objects_to_unmount"}(e.get_singleton_class(y),v)}(p[0],p)}(p[0],p)}(n[0],n)},Opal.modules["hyperstack/state/observer"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.hash2,o=e.send;return e.add_stubs(["$observing","$to_proc","$update_objects_to_observe","$remove"]),function(t,s){var u=[a(t,"Hyperstack")].concat(s);return function(t,s){var u=[a(t,"State")].concat(s);return function(t,s){var u,l,c,p=a(t,"Observer"),d=[p].concat(s);return e.def(p,"$observing",u=function(t){var a,s,l,c=u.$$p,p=c||n,f=this;if(c&&(u.$$p=null),c&&(u.$$p=null),null==t)t=i([],{});else if(!t.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(a=t.$$smap.immediate_update)&&(a=!1),null==(s=t.$$smap.rendering)&&(s=!1),null==(l=t.$$smap.update_objects)&&(l=!1),o(r(r($(d,"Internal"),"State"),"Mapper"),"observing",[f,a,s,l],p.$to_proc())},u.$$arity=-1),e.def(p,"$update_objects_to_observe",l=function(){var e=this;return r(r($(d,"Internal"),"State"),"Mapper").$update_objects_to_observe(e)},l.$$arity=0),e.def(p,"$remove",c=function(){var e=this;return r(r($(d,"Internal"),"State"),"Mapper").$remove(e)},c.$$arity=0),n&&"remove"}(u[0],u)}(u[0],u)}(t[0],t)},Opal.modules["hyperstack/internal/component/validator"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.send,u=e.hash2,l=e.truthy;return e.add_stubs(["$attr_accessor","$attr_reader","$private","$tap","$new","$each","$instance_variable_set","$dup","$instance_variable_get","$build","$to_proc","$instance_eval","$[]=","$-","$define_rule","$coerce_native_hash_values","$rules","$define_all_others","$props_wrapper","$reject","$[]","$errors=","$allow_undefined_props?","$validate_undefined","$defined_props","$validate_required","$validate_types","$validate_allowed","$errors","$inject","$select","$include?","$keys","$!","$define_param","$is_a?","$type_check","$>","$length","$validate_value_array","$nil?","$respond_to?","$_react_param_conversion","$<<","$each_with_index","$Native"]),function(r,c){var p=[i(r,"Hyperstack")].concat(c);return function(r,c){var p=[i(r,"Internal")].concat(c);return function(r,c){var p=[i(r,"Component")].concat(c);return function(r,$super,i){var c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D=o(r,null,"Validator"),H=[D].concat(i);return D.$$prototype.allow_undefined_props=D.$$prototype.rules=D.$$prototype.errors=$,D.$attr_accessor("errors"),D.$attr_reader("props_wrapper"),D.$private("errors","props_wrapper"),e.def(D,"$copy",c=function(e){var t,n=this;return s(a(H,"Validator").$new(e),"tap",[],((t=function(e){var n,r=null==t.$$s?this:t.$$s;return null==e&&(e=$),s(["@allow_undefined_props","@rules","@errors"],"each",[],((n=function(t){var r=null==n.$$s?this:n.$$s;return null==t&&(t=$),e.$instance_variable_set(t,r.$instance_variable_get(t).$dup())}).$$s=r,n.$$arity=1,n))}).$$s=n,t.$$arity=1,t))},c.$$arity=1),e.def(D,"$initialize",p=function(e){var t=this;return null==e&&(e=a(H,"Class").$new(a(H,"PropsWrapper"))),t.props_wrapper=e},p.$$arity=-1),e.defs(D,"$build",d=function(){var e=d.$$p,t=e||$,n=this;return e&&(d.$$p=null),e&&(d.$$p=null),s(n.$new(),"build",[],t.$to_proc())},d.$$arity=0),e.def(D,"$build",f=function(){var e=f.$$p,t=e||$,n=this;return e&&(f.$$p=null),e&&(f.$$p=null),s(n,"instance_eval",[],t.$to_proc()),n},f.$$arity=0),e.def(D,"$requires",_=function(n,r){var a=this,i=$;return null==r&&(r=u([],{})),i=["required",!0],s(r,"[]=",e.to_a(i)),i[t(i.length,1)],a.$define_rule(n,r)},_.$$arity=-2),e.def(D,"$optional",h=function(n,r){var a=this,i=$;return null==r&&(r=u([],{})),i=["required",!1],s(r,"[]=",e.to_a(i)),i[t(i.length,1)],a.$define_rule(n,r)},h.$$arity=-2),e.def(D,"$event",y=function(n){var r=this,i=$;return i=[n,r.$coerce_native_hash_values(u(["default","type","allow_nil"],{"default":$,type:a(H,"Proc"),allow_nil:!0}))],s(r.$rules(),"[]=",e.to_a(i)),i[t(i.length,1)]},y.$$arity=1),e.def(D,"$all_other_params",v=function(e){var t,n=this;return n.allow_undefined_props=!0,s(n.$props_wrapper(),"define_all_others",[e],((t=function(e){var n,r=null==t.$$s?this:t.$$s;return null==e&&(e=$),s(e,"reject",[],((n=function(e,t){var r=null==n.$$s?this:n.$$s;return null==e&&(e=$),null==t&&(t=$),r.$rules()["$[]"](e)}).$$s=r,n.$$arity=2,n))}).$$s=n,t.$$arity=1,t))},v.$$arity=1),e.def(D,"$validate",m=function(n){var r,a=this,i=$;return i=[[]],s(a,"errors=",e.to_a(i)),i[t(i.length,1)],l(a["$allow_undefined_props?"]())||a.$validate_undefined(n),n=a.$coerce_native_hash_values(a.$defined_props(n)),a.$validate_required(n),s(n,"each",[],((r=function(e,t){var n=null==r.$$s?this:r.$$s;return null==e&&(e=$),null==t&&(t=$),n.$validate_types(e,t),n.$validate_allowed(e,t)}).$$s=a,r.$$arity=2,r)),a.$errors()},m.$$arity=1),e.def(D,"$default_props",g=function(){var n,r,a=this;return s(s(a.$rules(),"select",[],((n=function(e,t){null==n.$$s||n.$$s;return null==e&&(e=$),null==t&&(t=$),t.$keys()["$include?"]("default")}).$$s=a,n.$$arity=2,n)),"inject",[u([],{})],((r=function(n,a){null==r.$$s||r.$$s;var i,o,u=$;return null==n&&(n=$),null==a&&(a=$),o=a,u=[null==(i=e.to_ary(o))[0]?$:i[0],(null==i[1]?$:i[1])["$[]"]("default")],s(n,"[]=",e.to_a(u)),u[t(u.length,1)],n}).$$s=a,r.$$arity=2,r.$$has_top_level_mlhs_arg=!0,r))},g.$$arity=0),D.$private(),e.def(D,"$defined_props",b=function(e){var t,n=this;return s(e,"select",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=$),n.$rules().$keys()["$include?"](e)}).$$s=n,t.$$arity=1,t))},b.$$arity=1),e.def(D,"$allow_undefined_props?",w=function(){return this.allow_undefined_props["$!"]()["$!"]()},w.$$arity=0),e.def(D,"$rules",k=function(){var e=this,t=$;return e.rules=l(t=e.rules)?t:u(["children"],{children:u(["required"],{required:!1})})},k.$$arity=0),e.def(D,"$define_rule",O=function(n,r){var a=this,i=$;return null==r&&(r=u([],{})),i=[n,a.$coerce_native_hash_values(r)],s(a.$rules(),"[]=",e.to_a(i)),i[t(i.length,1)],a.$props_wrapper().$define_param(n,r["$[]"]("type"),r["$[]"]("alias"))},O.$$arity=-2),e.def(D,"$errors",E=function(){var e=this,t=$;return e.errors=l(t=e.errors)?t:[]},E.$$arity=0),e.def(D,"$validate_types",x=function(e,t){var r=this,i=$,o=$;return l(i=r.$rules()["$[]"](e)["$[]"]("type"))?l(i["$is_a?"](a(H,"Array"))["$!"]())?(o=r.$rules()["$[]"](e)["$[]"]("allow_nil")["$!"]()["$!"](),r.$type_check("`"+e+"`",t,i,o)):l(n(i.$length(),0))?r.$validate_value_array(e,t):(o=r.$rules()["$[]"](e)["$[]"]("allow_nil")["$!"]()["$!"](),r.$type_check("`"+e+"`",t,a(H,"Array"),o)):$},x.$$arity=2),e.def(D,"$type_check",S=function(e,t,n,r){var a=this,i=$,o=$;return l(l(i=r)?t["$nil?"]():i)?$:l(t["$is_a?"](n))?$:l(l(o=n["$respond_to?"]("_react_param_conversion"))?n.$_react_param_conversion(t,"validate_only"):o)?$:a.$errors()["$<<"]("Provided prop "+e+" could not be converted to "+n)},S.$$arity=4),e.def(D,"$validate_allowed",q=function(e,t){var n=this,r=$;return l(r=n.$rules()["$[]"](e)["$[]"]("values"))?l(r["$include?"](t))?$:n.$errors()["$<<"]("Value `"+t+"` for prop `"+e+"` is not an allowed value"):$},q.$$arity=2),e.def(D,"$validate_required",N=function(e){var n,r=this;return s(t(r.$rules().$keys(),e.$keys()),"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=$),l(t.$rules()["$[]"](e)["$[]"]("required"))?t.$errors()["$<<"]("Required prop `"+e+"` was not specified"):$}).$$s=r,n.$$arity=1,n))},N.$$arity=1),e.def(D,"$validate_undefined",C=function(e){var n,r=this;return s(t(e.$keys(),r.$rules().$keys()),"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=$),t.$errors()["$<<"]("Provided prop `"+e+"` not specified in spec")}).$$s=r,n.$$arity=1,n))},C.$$arity=1),e.def(D,"$validate_value_array",z=function(t,n){var r,i=this,o=$,u=$;try{return o=i.$rules()["$[]"](t)["$[]"]("type"),u=i.$rules()["$[]"](t)["$[]"]("allow_nil")["$!"]()["$!"](),s(n,"each_with_index",[],((r=function(e,n){var a=null==r.$$s?this:r.$$s;return null==e&&(e=$),null==n&&(n=$),a.$type_check("`"+t+"`["+n+"]",a.$Native(e),o["$[]"](0),u)}).$$s=i,r.$$arity=2,r))}catch(l){if(!e.rescue(l,[a(H,"NoMethodError")]))throw l;try{return i.$errors()["$<<"]("Provided prop `"+t+"` was not an Array")}finally{e.pop_exception()}}},z.$$arity=2),e.def(D,"$coerce_native_hash_values",I=function(n){var r,a=this;return s(n,"each",[],((r=function(a,i){var o=null==r.$$s?this:r.$$s,u=$;return null==a&&(a=$),null==i&&(i=$),u=[a,o.$Native(i)],s(n,"[]=",e.to_a(u)),u[t(u.length,1)]}).$$s=a,r.$$arity=2,r))},I.$$arity=1),$&&"coerce_native_hash_values"}(p[0],0,p)}(p[0],p)}(p[0],p)}(r[0],r)},Opal.modules["hyperstack/ext/component/string"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return function(t,$super,$){var a,i=r(t,null,"String");[i].concat($);return e.def(i,"$event_camelize",a=function(){return this.replace(/(^|_)([^_]+)/g,function(e,t,n){return!0?n.substr(0,1).toUpperCase()+n.substr(1):n})},a.$$arity=0),n&&"event_camelize"}(t[0],0,t)},Opal.modules["hyperstack/component/element"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.hash2,l=e.send,c=e.alias,p=e.hash
;return e.add_stubs(["$require","$attr_reader","$attr_accessor","$new","$is_a?","$!","$empty?","$raise","$==","$convert_string","$set_native_attributes","$_update_ref","$[]","$properties","$element_type","$ref","$dom_node","$each","$!=","$strip","$merge_event_prop!","$to_proc","$shallow_to_n","$render","$convert_props","$block","$delete","$private","$=~","$merge_component_event_prop!","$gsub","$include?","$event_camelize","$merge_built_in_event_prop!","$key_code","$instance_variable_get","$merge!","$Array","$ignore_bulk_updates"]),t.$require("hyperstack/ext/component/string"),function(t,n){var d=[i(t,"Hyperstack")].concat(n);return function(t,n){var d=[i(t,"Component")].concat(n);return function(t,$super,n){var i,d,f,_,h,y,v,m,g,b,w,k,O,E,x=o(t,null,"Element"),S=[x].concat(n);return x.$$prototype.props=x.$$prototype._props_as_hash=x.$$prototype._child_element=x.$$prototype._ref=x.$$prototype.properties=r,x.$attr_reader("type"),x.$attr_reader("element_type"),x.$attr_reader("properties"),x.$attr_reader("block"),x.$attr_reader("to_n"),x.$attr_accessor("waiting_on_resources"),e.def(x,"$set_native_attributes",i=function(e){var t=this;return t.key=e.key,t.props=e.props,t.ref=e.ref,t.type=e.type,t._owner=e._owner,t._props_as_hash=a(S,"Hash").$new(t.props)},i.$$arity=1),e.def(x,"$props",d=function(){return this._props_as_hash},d.$$arity=0),e.def(x,"$convert_string",f=function(e,t,n,$){var i=this,o=r;return s(e["$is_a?"])&&s(e["$is_a?"](a(S,"String")))?(s(s(o=n["$empty?"]()["$!"]())?o:$)&&i.$raise("Internal Error Element.new called with string, but non-nil props or block"),t["$=="]("wrap_child")?React.createElement(React.Fragment,null,[e]):React.createElement(e,null)):e},f.$$arity=4),e.def(x,"$initialize",_=function(t,n,$,i){var o=this,l=r;null==n&&(n=r),null==$&&($=u([],{})),null==i&&(i=r);try{return t=o.$convert_string(t,n,$,i),n["$=="]("wrap_child")||(o.element_type=n),o.properties=s(l=s(void 0===$)?r:$)?l:u([],{}),o.block=i,o.$$typeof=t.$$typeof,o.to_n=o,o.$set_native_attributes(t)}catch(c){if(!e.rescue(c,[a(S,"Exception")]))throw c;try{return r}finally{e.pop_exception()}}},_.$$arity=-2),e.def(x,"$children",h=function(){return this.props.children},h.$$arity=0),e.def(x,"$_update_ref",y=function(e){var t=this;return t._ref=e,s(t._child_element)?t._child_element.$_update_ref(e):r},y.$$arity=1),e.def(x,"$ref",v=function(){var e=this;return s(e._ref)?e._ref:(s(e.$properties()["$[]"]("ref"))&&e.$raise("The instance of "+e.$element_type()+" has not been mounted yet"),e.$raise("Attempt to get a ref on "+e.$element_type()+" which is a static component."))},v.$$arity=0),e.def(x,"$dom_node",m=function(){var e=this;return s("function"==typeof e.$ref().$dom_node)?e.$ref().$dom_node():e.$ref()},m.$$arity=0),e.def(x,"$on",g=function(){var t,n,$=g.$$p,a=$||r,i=this,o=r;return $&&(g.$$p=null),$&&(g.$$p=null),t=e.slice.call(arguments,0,arguments.length),o=!1,l(t,"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s,$=r;return null==e&&(e=r),s(s($=e)?e.$strip()["$!="](""):$)?(l(t,"merge_event_prop!",[e],a.$to_proc()),o=!0):r}).$$s=i,n.$$arity=1,n)),s(o)&&i.$set_native_attributes(React.cloneElement(i,i.properties.$shallow_to_n())),i},g.$$arity=-1),e.def(x,"$render",b=function(){var t,n,r=this;return t=e.slice.call(arguments,0,arguments.length),s((n=t)["$empty?"]())?$($($(a(S,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(r):(n=l($($($(a(S,"Hyperstack"),"Internal"),"Component"),"ReactWrapper"),"convert_props",[r.$element_type(),r.properties].concat(e.to_a(n))),r._child_element=$($($(a(S,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(a(S,"Element").$new(React.cloneElement(r,n.$shallow_to_n()),r.$element_type(),n,r.$block())))},b.$$arity=-1),e.def(x,"$~",w=function(){var e=this;return $($($(a(S,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$delete(e)},w.$$arity=0),c(x,"as_node","~"),c(x,"delete","~"),x.$private(),e.def(x,"$merge_event_prop!",k=function(t){var n,i=k.$$p,o=i||r,u=this,c=r;return i&&(k.$$p=null),i&&(k.$$p=null),s(t["$=~"](/^<(.+)>$/))?l(u,"merge_component_event_prop!",[t.$gsub(/^<(.+)>$/,"\\1")],o.$to_proc()):s($(a(S,"Event"),"BUILT_IN_EVENTS")["$include?"](c="on"+t.$event_camelize()))?l(u,"merge_built_in_event_prop!",[c],o.$to_proc()):t["$=="]("enter")?l(u,"merge_built_in_event_prop!",["onKeyDown"],((n=function(t){null==n.$$s||n.$$s;return null==t&&(t=r),t.$key_code()["$=="](13)?e.yield1(o,t):r}).$$s=u,n.$$arity=1,n)):s(u.$element_type().$instance_variable_get("@native_import"))?l(u,"merge_component_event_prop!",[c],o.$to_proc()):l(u,"merge_component_event_prop!",["on_"+t],o.$to_proc())},k.$$arity=1),e.def(x,"$merge_built_in_event_prop!",O=function(t){var n=O.$$p,i=n||r,o=this;return n&&(O.$$p=null),n&&(O.$$p=null),o.properties["$merge!"](p(t,function(){var t,n=arguments[0];return 0!=arguments.length&&n.nativeEvent?arguments.length>1?(t=Array.prototype.slice.call(arguments).slice(1,arguments.length),l($($(a(S,"Internal"),"State"),"Mapper"),"ignore_bulk_updates",[a(S,"Event").$new(n)].concat(e.to_a(t)),i.$to_proc())):l($($(a(S,"Internal"),"State"),"Mapper"),"ignore_bulk_updates",[a(S,"Event").$new(n)],i.$to_proc()):e.yieldX(i,e.to_a(o.$Array(arguments)))}))},O.$$arity=1),e.def(x,"$merge_component_event_prop!",E=function(t){var n=E.$$p,$=n||r,a=this;return n&&(E.$$p=null),a.properties["$merge!"](p(t,function(){return e.yieldX($,e.to_a(a.$Array(arguments)))}))},E.$$arity=1),r&&"merge_component_event_prop!"}(d[0],0,d)}(d[0],d)}(n[0],n)},Opal.modules["hyperstack/component/native_library"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$klass=Opal.klass,$send=Opal.send,$truthy=Opal.truthy,$range=Opal.range,$send2=Opal.send2,$find_super=Opal.find_super;return Opal.add_stubs(["$each","$lookup_native_name","$create_component_wrapper","$create_library_wrapper","$raise","$name","$scope_native_name","$+","$downcase","$[]","$import_const_from_native","$const_defined?","$const_get","$render","$to_proc","$private","$native_react_component?","$const_set","$imports","$new","$class_eval","$include"]),function($base,$parent_nesting){var self=$module($base,"Hyperstack"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"Component"),$nesting=[self].concat($parent_nesting);return function($base,$super,$parent_nesting){var self=$klass($base,$super,"NativeLibrary"),$nesting=[self].concat($parent_nesting);return function(self,$parent_nesting){var $nesting=[self].concat($parent_nesting),$imports$1,$rename$2,$import_const_from_native$4,$const_missing$5,$method_missing$6,$lookup_native_name$7,$scope_native_name$8,$create_component_wrapper$9,$create_library_wrapper$11;Opal.def(self,"$imports",$imports$1=function(e){var t=this;return t.__hyperstack_component_native_prefix=e+".",t},$imports$1.$$arity=1),Opal.def(self,"$rename",$rename$2=function(e){var t,n=this;return $send(e,"each",[],((t=function(e,n){var r=null==t.$$s?this:t.$$s,$=nil,a=nil;return null==e&&(e=nil),null==n&&(n=nil),$=r.$lookup_native_name(e),$truthy(r.$lookup_native_name(e))?$truthy(a=r.$create_component_wrapper(r,$,n))?a:r.$create_library_wrapper(r,$,n):r.$raise("class "+r.$name()+" < Hyperstack::Component::NativeLibrary could not import "+e+". Native value "+r.$scope_native_name(e)+" is undefined.")}).$$s=n,t.$$arity=2,t))},$rename$2.$$arity=1),Opal.def(self,"$import_const_from_native",$import_const_from_native$4=function(e,t,n){var r=this,$=nil,a=nil,i=nil,o=nil,s=nil;return $=$truthy(a=r.$lookup_native_name(t))?a:r.$lookup_native_name($rb_plus(t["$[]"](0).$downcase(),t["$[]"]($range(1,-1,!1)))),$truthy(i=$)?$truthy(o=r.$create_component_wrapper(e,$,t))?o:$truthy(s=n)?r.$create_library_wrapper(e,$,t):s:i},$import_const_from_native$4.$$arity=3),Opal.def(self,"$const_missing",$const_missing$5=function(e){var t=$const_missing$5.$$p,n=this,r=nil;return t&&($const_missing$5.$$p=null),$truthy(r=n.$import_const_from_native(n,e,!0))?r:$send2(n,$find_super(n,"const_missing",$const_missing$5,!1,!0),"const_missing",[e],t)},$const_missing$5.$$arity=1),Opal.def(self,"$method_missing",$method_missing$6=function(e){var t,n=$method_missing$6.$$p,r=n||nil,$=this,a=nil,i=nil;return n&&($method_missing$6.$$p=null),n&&($method_missing$6.$$p=null),t=Opal.slice.call(arguments,1,arguments.length),$truthy($["$const_defined?"](e,!1))&&(a=$.$const_get(e)),a=$truthy(i=a)?i:$.$import_const_from_native($,e,!1),$truthy(a)||$.$raise("could not import a react component named: "+$.$scope_native_name(e)),$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[a].concat(Opal.to_a(t)),r.$to_proc())},$method_missing$6.$$arity=-2),self.$private(),Opal.def(self,"$lookup_native_name",$lookup_native_name$7=function $$lookup_native_name(js_name){var self=this,native_name=nil;try{return native_name=self.$scope_native_name(js_name),eval(native_name)!==undefined&&native_name}catch($err){if(!Opal.rescue($err,[$$($nesting,"Exception")]))throw $err;try{return nil}finally{Opal.pop_exception()}}},$lookup_native_name$7.$$arity=1),Opal.def(self,"$scope_native_name",$scope_native_name$8=function(e){var t=this;return null==t.__hyperstack_component_native_prefix&&(t.__hyperstack_component_native_prefix=nil),""+t.__hyperstack_component_native_prefix+e},$scope_native_name$8.$$arity=1),Opal.def(self,"$create_component_wrapper",$create_component_wrapper$9=function(e,t,n){var r,$=this,a=nil;return $truthy($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"Component"),"ReactWrapper")["$native_react_component?"](t))?(a=e.$const_set(n,$$($nesting,"Class").$new($$($nesting,"NativeLibrary")).$imports(t)),$send(a,"class_eval",[],((r=function(){var e=null==r.$$s?this:r.$$s;return e.$include($$($nesting,"Component")),e.$imports(t)}).$$s=$,r.$$arity=0,r)),a):nil},$create_component_wrapper$9.$$arity=3),Opal.def(self,"$create_library_wrapper",$create_library_wrapper$11=function(e,t,n){return e.$const_set(n,$$($nesting,"Class").$new($$($nesting,"NativeLibrary")).$imports(t))},$create_library_wrapper$11.$$arity=3)}(Opal.get_singleton_class(self),$nesting),self.$imports("NativeLibrary")}($nesting[0],null,$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/internal/component/react_wrapper"]=function(Opal){function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$klass=Opal.klass,$class_variable_set=Opal.class_variable_set,$hash2=Opal.hash2,$send=Opal.send,$class_variable_get=Opal.class_variable_get,$truthy=Opal.truthy,$lambda=Opal.lambda,$range=Opal.range;return Opal.add_stubs(["$require","$instance_variable_set","$[]=","$-","$raise","$stateless?","$eval_native_react_component","$add_after_error_hook_to_native","$[]","$!","$method_defined?","$respond_to?","$native_mixins","$to_n","$static_call_backs","$new","$name","$default_props","$prop_types","$callbacks?","$<<","$is_a?","$create_native_react_class","$include?","$_update_ref","$convert_props","$shallow_to_n","$flatten","$call","$each","$split","$==","$merge","$lower_camelize","$join","$to_key","$ignore_mutations","$const_defined?","$gsub","$html_attr?","$private","$first","$concat","$map","$+","$upcase"]),self.$require("hyperstack/component/native_library"),function($base,$parent_nesting){var self=$module($base,"Hyperstack"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"Internal"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"Component"),$nesting=[self].concat($parent_nesting);return function($base,$super,$parent_nesting){var self=$klass($base,$super,"ReactWrapper"),$nesting=[self].concat($parent_nesting),$ReactWrapper_stateless$ques$1,$ReactWrapper_import_native_component$2,$ReactWrapper_eval_native_react_component$3,$ReactWrapper_native_react_component$ques$4,$ReactWrapper_add_after_error_hook$5,$ReactWrapper_add_after_error_hook_to_native$6,$ReactWrapper_create_native_react_class$7,$ReactWrapper_create_element$8,$ReactWrapper_clear_component_class_cache$10,$ReactWrapper_convert_props$11,$ReactWrapper_lower_camelize$22;return $class_variable_set($nesting[0],"@@component_classes",$hash2([],{})),Opal.defs(self,"$stateless?",$ReactWrapper_stateless$ques$1=function(e){return"symbol"==typeof e||"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)},$ReactWrapper_stateless$ques$1.$$arity=1),Opal.defs(self,"$import_native_component",$ReactWrapper_import_native_component$2=function(e,t){var n=nil;return e.$instance_variable_set("@native_import",!0),n=[e,t],$send($class_variable_get($nesting[0],"@@component_classes",!1),"[]=",Opal.to_a(n)),n[$rb_minus(n.length,1)]},$ReactWrapper_import_native_component$2.$$arity=2),Opal.defs(self,"$eval_native_react_component",$ReactWrapper_eval_native_react_component$3=function $$eval_native_react_component(name){var self=this,component=nil,is_component_class=nil,$ret_or_1=nil,$ret_or_2=nil,has_render_method=nil,$ret_or_3=nil,$ret_or_4=nil;return component=eval(name),$truthy(component===undefined)&&self.$raise(name+" is not defined"),$truthy(component.__esModule)&&(component=component["default"]),is_component_class=$truthy($ret_or_1=component.prototype!==undefined)?$truthy($ret_or_2=!!component.prototype.isReactComponent)?$ret_or_2:!!component.prototype.render:$ret_or_1,has_render_method="function"==typeof component.render,$truthy($truthy($ret_or_3=$truthy($ret_or_4=is_component_class)?$ret_or_4:self["$stateless?"](component))?$ret_or_3:has_render_method)||self.$raise("does not appear to be a native react component"),component},$ReactWrapper_eval_native_react_component$3.$$arity=1),Opal.defs(self,"$native_react_component?",$ReactWrapper_native_react_component$ques$4=function(e){var t=this;null==e&&(e=nil);try{return!!$truthy(e)&&(t.$eval_native_react_component(e),!0)}catch(n){if(!Opal.rescue(n,[$$($nesting,"Exception")]))throw n;try{return!1}finally{Opal.pop_exception()}}},$ReactWrapper_native_react_component$ques$4.$$arity=-1),Opal.defs(self,"$add_after_error_hook",$ReactWrapper_add_after_error_hook$5=function(e){return this.$add_after_error_hook_to_native($class_variable_get($nesting[0],"@@component_classes",!1)["$[]"](e))},$ReactWrapper_add_after_error_hook$5.$$arity=1),Opal.defs(self,"$add_after_error_hook_to_native",$ReactWrapper_add_after_error_hook_to_native$6=function(e){if(!$truthy(e))return nil;e.prototype.componentDidCatch=function(e,t){this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_catch(e,Opal.Hash.$new(t))}},$ReactWrapper_add_after_error_hook_to_native$6.$$arity=1),Opal.defs(self,"$create_native_react_class",$ReactWrapper_create_native_react_class$7=function(e){var t=this,n=nil,r=nil,$=nil,a=nil,i=nil,o=nil;return $truthy("undefined"==typeof createReactClass)&&t.$raise("createReactClass is undefined. Add the 'react-create-class' npm module, and import it as 'createReactClass'"),$truthy(e["$method_defined?"]("render")["$!"]())&&t.$raise("Provided class should define `render` method"),n=e["$method_defined?"]("_render_wrapper")["$!"](),r=$truthy(n)?"render":"_render_wrapper",$truthy($=$class_variable_get($nesting[0],"@@component_classes",!1)["$[]"](e))?$:(a=[e,(i=createReactClass({getInitialState:function(){return this.mixins=$truthy(e["$respond_to?"]("native_mixins"))?e.$native_mixins():[],this.statics=$truthy(e["$respond_to?"]("static_call_backs"))?e.$static_call_backs().$to_n():{},this.__opalInstanceInitializedState=!1,this.__opalInstanceSyncSetState=!0,this.__opalInstance=e.$new(this),this.__opalInstanceInitializedState=!0,this.__opalInstanceSyncSetState=!1,this.__name=e.$name(),{}},displayName:e.$name(),getDefaultProps:function(){return $truthy(e["$respond_to?"]("default_props"))?e.$default_props().$to_n():{}},propTypes:$truthy(e["$respond_to?"]("prop_types"))?e.$prop_types().$to_n():{},componentWillMount:n&&function(){e["$method_defined?"]("component_will_mount")&&(this.__opalInstanceSyncSetState=!0,this.__opalInstance.$component_will_mount(),this.__opalInstanceSyncSetState=!1)},componentDidMount:function(){this.__opalInstance.__hyperstack_component_is_mounted=!0,e["$method_defined?"]("component_did_mount")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_mount())},UNSAFE_componentWillReceiveProps:function(t){e["$method_defined?"]("component_will_receive_props")&&(this.__opalInstanceSyncSetState=!0,this.__opalInstance.$component_will_receive_props(Opal.Hash.$new(t)),this.__opalInstanceSyncSetState=!1)},shouldComponentUpdate:function(t,n){return!e["$method_defined?"]("should_component_update?")||(this.__opalInstanceSyncSetState=!1,this.__opalInstance["$should_component_update?"](Opal.Hash.$new(t),Opal.Hash.$new(n)))},UNSAFE_componentWillUpdate:function(t,n){e["$method_defined?"]("component_will_update")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_will_update(Opal.Hash.$new(t),Opal.Hash.$new(n)))},componentDidUpdate:function(t,n){e["$method_defined?"]("component_did_update")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_did_update(Opal.Hash.$new(t),Opal.Hash.$new(n)))},componentWillUnmount:function(){e["$method_defined?"]("component_will_unmount")&&(this.__opalInstanceSyncSetState=!1,this.__opalInstance.$component_will_unmount()),this.__opalInstance.__hyperstack_component_is_mounted=!1},render:function(){return this.__opalInstanceSyncSetState=!1,this.__opalInstance.$send(r).$to_n()}}),$truthy($truthy(o=e["$respond_to?"]("callbacks?"))?e["$callbacks?"]("after_error"):o)&&t.$add_after_error_hook_to_native(i),i)],$send($class_variable_get($nesting[0],"@@component_classes",!1),"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)])},$ReactWrapper_create_native_react_class$7.$$arity=1),Opal.defs(self,"$create_element",$ReactWrapper_create_element$8=function(e){var t,n,r=$ReactWrapper_create_element$8.$$p,$=r||nil,a=this,i=nil,o=nil,s=nil,u=nil,l=nil,c=nil,p=nil;if(r&&($ReactWrapper_create_element$8.$$p=null),r&&($ReactWrapper_create_element$8.$$p=null),t=Opal.slice.call(arguments,1,arguments.length),i=[],o=$class_variable_get($nesting[0],"@@component_classes",!1)["$[]"](e),$truthy(o))i["$<<"](o);else if($truthy(e["$is_a?"]($$($nesting,"Class"))))i["$<<"](a.$create_native_react_class(e));else if($truthy($truthy(s=$!==nil)?s:$$$($$($nesting,"Tags"),"HTML_TAGS")["$include?"](e)))i["$<<"](e);else{if($truthy(e["$is_a?"]($$($nesting,"String"))))return $$$($$$($$($nesting,"Hyperstack"),"Component"),"Element").$new(e);a.$raise(e+" not implemented")}if(u=nil,$truthy(a["$stateless?"](o))||(l=$lambda(((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=nil),u.$_update_ref(e)}).$$s=a,n.$$arity=1,n))),c=$send(a,"convert_props",[e,$hash2(["ref"],{ref:l})].concat(Opal.to_a(t))),i["$<<"](c.$shallow_to_n()),$truthy($))for(var d=0,f=(p=[$.$call()].$flatten()).length;d<f;d++)i.push(p[d].$to_n());return u=$$$($$$($$($nesting,"Hyperstack"),"Component"),"Element").$new(React.createElement.apply(null,i),e,c,$)},$ReactWrapper_create_element$8.$$arity=-2),Opal.defs(self,"$clear_component_class_cache",$ReactWrapper_clear_component_class_cache$10=function(){return $class_variable_set($nesting[0],"@@component_classes",$hash2([],{}))},$ReactWrapper_clear_component_class_cache$10.$$arity=0),Opal.defs(self,"$convert_props",$ReactWrapper_convert_props$11=function(e){var t,n,r,$=this,a=nil,i=nil;return t=Opal.slice.call(arguments,1,arguments.length),a=$hash2([],{}),$send(t,"each",[],((n=function(e){var t,r=null==n.$$s?this:n.$$s,$=nil;return null==e&&(e=nil),$truthy(e["$is_a?"]($$($nesting,"String")))?($=[e,!0],$send(a,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)]):$truthy(e["$is_a?"]($$($nesting,"Hash")))?$send(e,"each",[],((t=function(e,n){var r=null==t.$$s?this:t.$$s,i=nil,o=nil,s=nil;return null==e&&(e=nil),null==n&&(n=nil),$truthy(["class","className","class_name"]["$include?"](e))?$truthy(n)?($truthy(n["$is_a?"]($$($nesting,"String")))?n=n.$split(" "):$truthy(n["$is_a?"]($$($nesting,"Array"))["$!"]())&&r.$raise("The class param must be a string or array of strings"),$=["className",[].concat(Opal.to_a(a["$[]"]("className"))).concat(Opal.to_a(n))],$send(a,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)]):nil:e["$=="]("style")?$truthy(n)?($truthy(n["$is_a?"]($$($nesting,"Hash"))["$!"]())&&r.$raise("The style param must be a Hash"),$=["style",($truthy(i=a["$[]"]("style"))?i:$hash2([],{})).$merge(n)],$send(a,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)]):nil:$truthy($truthy(o=$$$($$$($$$($$($nesting,"Hyperstack"),"Component"),"ReactAPI"),"HASH_ATTRIBUTES")["$include?"](e))?n["$is_a?"]($$($nesting,"Hash")):o)?($=[e,($truthy(s=a["$[]"](e))?s:$hash2([],{})).$merge(n)],$send(a,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)]):($=[e,n],$send(a,"[]=",Opal.to_a($)),$[$rb_minus($.length,1)])}).$$s=r,t.$$arity=2,t)):nil}).$$s=$,n.$$arity=1,n)),i=$hash2([],{}),$send(a,"each",[],((r=function(t,n){var $,o,s,u,l,c,p,d=null==r.$$s?this:r.$$s,f=nil,_=nil,h=nil;return null==t&&(t=nil),null==n&&(n=nil),$truthy(["style","dangerously_set_inner_HTML"]["$include?"](t))?(f=[d.$lower_camelize(t),n.$to_n()],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):t["$=="]("className")?(f=[t,n.$join(" ")],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):t["$=="]("key")?(f=["key",n.$to_key()],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):t["$=="]("init")?($truthy(["select","textarea"]["$include?"](e))?t="defaultValue":e["$=="]("input")&&(t=$truthy(["radio","checkbox"]["$include?"](a["$[]"]("type")))?"defaultChecked":"defaultValue"),f=[t,n],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):t["$=="]("ref")?$truthy(n)?($truthy(n["$respond_to?"]("call"))||d.$raise("The ref and dom params must be given a Proc.\nIf you want to capture the ref in an instance variable use the `set` method.\nFor example `ref: set(:TheRef)` will capture assign the ref to `@TheRef`\n"),$truthy(n.__hyperstack_component_ref_is_already_wrapped)||(_=n,(n=function(e){null!==e&&e.__opalInstance!==undefined&&null!==e.__opalInstance?$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],(($=function(){null==$.$$s||$.$$s;return _.$call(e.__opalInstance)}).$$s=d,$.$$arity=0,$)):null!==e&&ReactDOM.findDOMNode!==undefined&&e.nodeType===undefined?$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((o=function(){null==o.$$s||o.$$s;return _.$call(ReactDOM.findDOMNode(e))}).$$s=d,o.$$arity=0,o)):null!==e&&$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((s=function(){null==s.$$s||s.$$s;return _.$call(e)}).$$s=d,s.$$arity=0,s))}).__hyperstack_component_ref_is_already_wrapped=!0),f=[t,n],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):nil:t["$=="]("jq_ref")?($truthy(n["$respond_to?"]("call"))||d.$raise("The ref and dom params must be given a Proc.\nIf you want to capture the dom node in an instance variable use the `set` method.\nFor example `dom: set(:DomNode)` will assign the dom node to `@DomNode`\n"),$truthy($$($nesting,"Module")["$const_defined?"]("Element"))||d.$raise("You must include 'hyperstack/component/jquery' in your manifest to use the `dom` reference key.\nFor example if using rails include `config.import 'hyperstack/component/jquery', client_only: true`in your config/initializer/hyperstack.rb file"),f=["ref",function(e){null!==e&&e.__opalInstance!==undefined&&null!==e.__opalInstance?$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((u=function(){null==u.$$s||u.$$s;return n.$call($$$("::","Element")["$[]"](e.__opalInstance))}).$$s=d,u.$$arity=0,u)):null!==e&&ReactDOM.findDOMNode!==undefined&&e.nodeType===undefined?$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((l=function(){null==l.$$s||l.$$s;return n.$call($$$("::","Element")["$[]"](ReactDOM.findDOMNode(e)))}).$$s=d,l.$$arity=0,l)):null!==e&&$send($$$($$$($$$($$($nesting,"Hyperstack"),"Internal"),"State"),"Mapper"),"ignore_mutations",[],((c=function(){null==c.$$s||c.$$s;return n.$call($$$("::","Element")["$[]"](e))}).$$s=d,c.$$arity=0,c))}],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]):$truthy($truthy(h=$$$($$$($$$($$($nesting,"Hyperstack"),"Component"),"ReactAPI"),"HASH_ATTRIBUTES")["$include?"](t))?n["$is_a?"]($$($nesting,"Hash")):h)?$send(n,"each",[],((p=function(e,n){null==p.$$s||p.$$s;return null==e&&(e=nil),null==n&&(n=nil),f=[t+"-"+e.$gsub(/__|_/,$hash2(["__","_"],{__:"_",_:"-"})),n.$to_n()],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)]}).$$s=d,p.$$arity=2,p)):(f=[$truthy($$$($$$($$($nesting,"Hyperstack"),"Component"),"ReactAPI")["$html_attr?"](d.$lower_camelize(t)))?d.$lower_camelize(t):t,n],$send(i,"[]=",Opal.to_a(f)),f[$rb_minus(f.length,1)])}).$$s=$,r.$$arity=2,r)),i},$ReactWrapper_convert_props$11.$$arity=-2),self.$private(),Opal.defs(self,"$lower_camelize",$ReactWrapper_lower_camelize$22=function(e){var t,n=this,r=nil;return[(r=e.$split("_")).$first()].$concat($send(r["$[]"]($range(1,-1,!1)),"map",[],(t=function(e){null==t.$$s||t.$$s;return null==e&&(e=nil),$rb_plus(e["$[]"](0).$upcase(),e["$[]"]($range(1,-1,!1)))},t.$$s=n,t.$$arity=1,t))).$join("")},$ReactWrapper_lower_camelize$22.$$arity=1),nil&&"lower_camelize"}($nesting[0],null,$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/ext/component/hash"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.send;return e.add_stubs(["$each"]),function(t,$super,a){var i,o=r(t,null,"Hash");[o].concat(a);return e.def(o,"$shallow_to_n",i=function(){var e,t=this,r=n;return r={},$(t,"each",[],((e=function(t,$){null==e.$$s||e.$$s;return null==t&&(t=n),null==$&&($=n),r[t]=$}).$$s=t,e.$$arity=2,e)),r},i.$$arity=0),n&&"shallow_to_n"}(t[0],0,t)},Opal.modules["hyperstack/internal/component/rendering_context"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.klass,u=e.truthy,l=e.send,c=e.alias;return e.add_stubs(["$attr_accessor","$waiting_on_resources","$raise_if_not_quiet?","$raise","$new","$<<","$!","$remove_nodes_from_args","$build","$waiting_on_resources=","$-","$run_child_block","$to_proc","$dup","$tap","$create_element","$detect","$respond_to?","$is_a?","$last","$collect","$render","$to_s","$>","$length","$first","$delete","$include?","$index","$[]=","$[]","$each","$check_for_component_return","$dummy_value?","$==","$empty?","$pushable_string?","$try","$log","$loading?","$define_method","$unshift","$hyper_component?","$send"]),function(r,p){var d=[o(r,"Hyperstack")].concat(p);(function(r,p){var d=[o(r,"Internal")].concat(p);(function(r,p){var d=[o(r,"Component")].concat(p);(function(r,$super,o){var p=s(r,null,"RenderingContext"),d=[p].concat(o);(function(e,$super,t){[s(e,$super,"NotQuiet")].concat(t)})(d[0],i(d,"Exception"),d),function(r,o){var s,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x=[r].concat(o);r.$attr_accessor("waiting_on_resources"),e.def(r,"$raise_if_not_quiet?",s=function(){var e=this;return null==e.raise_if_not_quiet&&(e.raise_if_not_quiet=$),e.raise_if_not_quiet},s.$$arity=0),e.def(r,"$raise_if_not_quiet=",p=function(e){return this.raise_if_not_quiet=e},p.$$arity=1),e.def(r,"$quiet_test",d=function(e){var t=this,n=$;return u(u(n=e.$waiting_on_resources())?t["$raise_if_not_quiet?"]():n)?t.$raise(i(x,"NotQuiet").$new(e+" is waiting on resources")):$},d.$$arity=1),e.def(r,"$render_string",f=function(e){var t=this,n=$;return null==t.buffer&&(t.buffer=$),t.buffer=u(n=t.buffer)?n:[],t.buffer["$<<"](e)},f.$$arity=1),e.def(r,"$render",_=function(r){var o,s,c,p=_.$$p,d=p||$,f=this,h=$,y=$,v=$,m=$;return null==f.not_outer_most&&(f.not_outer_most=$),null==f.buffer&&(f.buffer=$),p&&(_.$$p=null),p&&(_.$$p=null),o=e.slice.call(arguments,1,arguments.length),s=o,function(){try{return h=f.not_outer_most["$!"](),f.not_outer_most=!0,f.$remove_nodes_from_args(s),f.buffer=u(y=f.buffer)?y:[],u(d)?v=l(f,"build",[],((c=function(){var o,p,f,_=null==c.$$s?this:c.$$s,h=$,y=$,v=$;return null==_.buffer&&(_.buffer=$),h=$,y=[$],l(_,"waiting_on_resources=",e.to_a(y)),y[t(y.length,1)],l(_,"run_child_block",[],d.$to_proc()),u(r)?(v=_.buffer.$dup(),l(l(i(x,"ReactWrapper"),"create_element",[r].concat(e.to_a(s)),((o=function(){null==o.$$s||o.$$s;return v}).$$s=_,o.$$arity=0,o)),"tap",[],((p=function(n){var r,a=null==p.$$s?this:p.$$s,o=$,s=$;return null==n&&(n=$),y=[u(o=h)?o:l(v,"detect",[],(r=function(e){return null==r.$$s||r.$$s,null==e&&(e=$),u(e["$respond_to?"]("waiting_on_resources"))?e.$waiting_on_resources():$},r.$$s=a,r.$$arity=1,r))["$!"]()["$!"]()],l(n,"waiting_on_resources=",e.to_a(y)),y[t(y.length,1)],u(v.$last()["$is_a?"](i(x,"String")))?u(s=n.$waiting_on_resources())?s:(y=[a.$waiting_on_resources()],l(n,"waiting_on_resources=",e.to_a(y)),y[t(y.length,1)]):$}).$$s=_,p.$$arity=1,p))):(v=l(_.buffer,"collect",[],((f=function(n){var r,o,s=null==f.$$s?this:f.$$s;return null==n&&(n=$),u(n["$is_a?"](a(a(i(x,"Hyperstack"),"Component"),"Element")))?(u(n.$waiting_on_resources())||(y=[h],l(n,"waiting_on_resources=",e.to_a(y)),y[t(y.length,1)]),n):l(l(i(x,"RenderingContext"),"render",["span"],((r=function(){null==r.$$s||r.$$s;return n.$to_s()}).$$s=s,r.$$arity=0,r)),"tap",[],((o=function(n){null==o.$$s||o.$$s;return null==n&&(n=$),y=[h],l(n,"waiting_on_resources=",e.to_a(y)),y[t(y.length,1)]}).$$s=s,o.$$arity=1,o))}).$$s=_,f.$$arity=1,f)),u(n(v.$length(),1))?v:v.$first())}).$$s=f,c.$$arity=0,c)):u(r["$is_a?"](a(a(i(x,"Hyperstack"),"Component"),"Element")))?v=r:(v=l(i(x,"ReactWrapper"),"create_element",[r].concat(e.to_a(s))),m=[f.$waiting_on_resources()],l(v,"waiting_on_resources=",e.to_a(m)),m[t(m.length,1)]),f.buffer["$<<"](v),m=[$],l(f,"waiting_on_resources=",e.to_a(m)),m[t(m.length,1)],v}finally{u(h)&&(f.not_outer_most=f.buffer=$)}}()},_.$$arity=-2),e.def(r,"$build",h=function(){var t=h.$$p,n=t||$,r=this,a=$,i=$;return null==r.buffer&&(r.buffer=$),t&&(h.$$p=null),a=r.buffer,r.buffer=[],i=e.yield1(n,r.buffer),r.buffer=a,i},h.$$arity=0),e.def(r,"$delete",y=function(e){var t=this;return null==t.buffer&&(t.buffer=$),t.buffer.$delete(e),t.last_deleted=e,e},y.$$arity=1),c(r,"as_node","delete"),e.def(r,"$rendered?",v=function(e){var t=this;return null==t.buffer&&(t.buffer=$),t.buffer["$include?"](e)},v.$$arity=1),e.def(r,"$replace",m=function(n,r){var a=this,i=$;return null==a.buffer&&(a.buffer=$),i=[a.buffer.$index(n),r],l(a.buffer,"[]=",e.to_a(i)),i[t(i.length,1)]},m.$$arity=2),e.def(r,"$remove_nodes_from_args",g=function(t){var n,r=this,o=$;return u(u(o=t["$[]"](0))?t["$[]"](0)["$is_a?"](i(x,"Hash")):o)?l(t["$[]"](0),"each",[],((n=function(t,r){null==n.$$s||n.$$s;null==t&&(t=$),null==r&&(r=$);try{return u(r["$is_a?"](a(a(i(x,"Hyperstack"),"Component"),"Element")))?r.$delete():$}catch(o){if(!e.rescue(o,[i(x,"Exception")]))throw o;try{return $}finally{e.pop_exception()}}}).$$s=r,n.$$arity=2,n)):$},g.$$arity=1),e.def(r,"$run_child_block",b=function(){var t,n=b.$$p,r=n||$,o=this,s=$;return null==o.last_deleted&&(o.last_deleted=$),null==o.buffer&&(o.buffer=$),n&&(b.$$p=null),s=e.yieldX(r,[]),o.$check_for_component_return(s),u(o["$dummy_value?"](s))?l(i(x,"RenderingContext"),"render",["span"],((t=function(){null==t.$$s||t.$$s;return s.$to_s()}).$$s=o,t.$$arity=0,t)):u(s["$is_a?"](a(a(i(x,"Hyperstack"),"Component"),"Element")))?o.last_deleted["$=="](s)||u(o.buffer["$empty?"]())&&o.buffer["$<<"](s):u(o["$pushable_string?"](s))&&o.buffer["$<<"](s.$to_s()),o.last_deleted=$},b.$$arity=0),e.def(r,"$check_for_component_return",w=function(e){return u(e.$try("hyper_component?"))?a(a(i(x,"Hyperstack"),"Component"),"IsomorphicHelpers").$log("a component's render method returned the component class "+e+", did you mean to say "+e+"()","warning"):$},w.$$arity=1),e.def(r,"$dummy_value?",k=function(e){var t=$;return u(t=e["$respond_to?"]("loading?"))?e["$loading?"]():t},k.$$arity=1),e.def(r,"$pushable_string?",O=function(e){var t=this,n=$,r=$;return null==t.buffer&&(t.buffer=$),u(t.buffer["$empty?"]())?u(n=u(r=e)?e["$respond_to?"]("to_n"):r)?e["$is_a?"](i(x,"Array"))["$!"]():n:e["$is_a?"](i(x,"String"))},O.$$arity=1),e.def(r,"$improper_render",E=function(){return $},E.$$arity=2)}(e.get_singleton_class(p),d)})(d[0],0,d)})(d[0],d)})(d[0],d)}(r[0],r),function(t,$super,n){var r,o,c,p=s(t,null,"Object"),d=[p].concat(n);return l(["span","td","th"],"each",[],((r=function(t){var n,o=null==r.$$s?this:r.$$s;return null==t&&(t=$),
l(o,"define_method",[t],((n=function(){var r,o,s=null==n.$$s?this:n.$$s,c=n.$$p,p=c||$,f=$;return c&&(n.$$p=null),(r=e.slice.call(arguments,0,arguments.length)).$unshift(t),u(u(f=s["$respond_to?"]("hyper_component?"))?s["$hyper_component?"]():f)?l(s,"send",e.to_a(r),p.$to_proc()):l(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",e.to_a(r),((o=function(){return(null==o.$$s?this:o.$$s).$to_s()}).$$s=s,o.$$arity=0,o))}).$$s=o,n.$$arity=-1,n))}).$$s=p,r.$$arity=1,r)),e.def(p,"$para",o=function(){var t,n,r=o.$$p,s=r||$,c=this,p=$;return r&&(o.$$p=null),r&&(o.$$p=null),(t=e.slice.call(arguments,0,arguments.length)).$unshift("p"),u(u(p=c["$respond_to?"]("hyper_component?"))?c["$hyper_component?"]():p)?l(c,"send",e.to_a(t),s.$to_proc()):l(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",e.to_a(t),((n=function(){return(null==n.$$s?this:n.$$s).$to_s()}).$$s=c,n.$$arity=0,n))},o.$$arity=-1),e.def(p,"$br",c=function(){var e,t=this,n=$;return u(u(n=t["$respond_to?"]("hyper_component?"))?t["$hyper_component?"]():n)?t.$send("br"):l(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[a(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"Tags"),"FRAGMENT")],((e=function(){var t,n=null==e.$$s?this:e.$$s;return l(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[a(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"Tags"),"FRAGMENT")],((t=function(){return(null==t.$$s?this:t.$$s).$to_s()}).$$s=n,t.$$arity=0,t)),a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$render(a(a(a(a(i(d,"Hyperstack"),"Internal"),"Component"),"Tags"),"BR"))}).$$s=t,e.$$arity=0,e))},c.$$arity=0),$&&"br"}(r[0],0,r)},Opal.modules["hyperstack/component/children"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.send,s=e.lambda,u=e.truthy;return e.add_stubs(["$include","$each","$to_proc","$render","$to_enum","$length","$>","$new","$call","$<<","$alias_method"]),function(n,l){var c=[a(n,"Hyperstack")].concat(l);return function(n,l){var c=[a(n,"Component")].concat(l);return function(n,$super,a){var l,c,p,d,f,_=i(n,null,"Children"),h=[_].concat(a);return _.$$prototype.children=_.$$prototype.length=r,_.$include($(h,"Enumerable")),e.def(_,"$initialize",l=function(e){return this.children=e},l.$$arity=1),e.def(_,"$render",c=function(){return o(this,"each",[],"render".$to_proc())},c.$$arity=0),e.def(_,"$to_proc",p=function(){var e,t=this;return s(((e=function(){return(null==e.$$s?this:e.$$s).$render()}).$$s=t,e.$$arity=0,e))},p.$$arity=0),e.def(_,"$each",d=function(){var e,n=d.$$p,a=n||r,i=this,s=r,l=r;return n&&(d.$$p=null),n&&(d.$$p=null),a===r?o(i,"to_enum",["each"],((e=function(){return(null==e.$$s?this:e.$$s).$length()}).$$s=i,e.$$arity=0,e)):u(t(i.$length(),0))?(s=[],React.Children.forEach(i.children,function(e){l=$(h,"Element").$new(e,"wrap_child"),a.$call(l),s["$<<"](l)}),s):[]},d.$$arity=0),e.def(_,"$length",f=function(){var e=this,t=r;return e.length=u(t=e.length)?t:React.Children.count(e.children)},f.$$arity=0),_.$alias_method("size","length")}(c[0],0,c)}(c[0],c)}(n[0],n)},Opal.modules["hyperstack/internal/component/instance_methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.truthy,u=e.send,l=e.lambda,c=e.hash2;return e.add_stubs(["$require","$new","$include?","$param_accessor_style","$raise","$[]","$dom_node","$==","$=~","$pluralize","$set_or_replace_state_or_prop","$to_proc","$private","$instance_eval","$callbacks?","$class","$RescueWrapper","$call","$after_error_args=","$-","$__hyperstack_component_run_post_render_hooks","$__hyperstack_component_rescue_wrapper","$__hyperstack_router_wrapper","$shallow_to_n"]),n.$require("hyperstack/component/children"),function(n,r){var p=[o(n,"Hyperstack")].concat(r);return function(n,r){var p=[o(n,"Internal")].concat(r);return function(n,r){var p=[o(n,"Component")].concat(r);return function(n,r){var p,d,f,_,h,y,v,m,g,b,w,k,O,E,x=o(n,"InstanceMethods"),S=[x].concat(r);return e.def(x,"$children",p=function(){var e=this;return null==e.__hyperstack_component_native&&(e.__hyperstack_component_native=$),a(a(i(S,"Hyperstack"),"Component"),"Children").$new(e.__hyperstack_component_native.props.children)},p.$$arity=0),e.def(x,"$params",d=function(){var e=this;return null==e.__hyperstack_component_params_wrapper&&(e.__hyperstack_component_params_wrapper=$),s(["hyperstack","accessors"]["$include?"](e.__hyperstack_component_params_wrapper.$param_accessor_style()))&&e.$raise("params are now directly accessible via instance variables.\n  to access the legacy behavior add `param_accessor_style = :legacy` to your component class\n  to access both behaviors add `param_accessor_style = :both` to your component class"),e.__hyperstack_component_params_wrapper},d.$$arity=0),e.def(x,"$props",f=function(){var e=this;return null==e.__hyperstack_component_native&&(e.__hyperstack_component_native=$),i(S,"Hash").$new(e.__hyperstack_component_native.props)},f.$$arity=0),e.def(x,"$dom_node",_=function(){var e=this;return ReactDOM.findDOMNode(e.__hyperstack_component_native)},_.$$arity=0),e.def(x,"$jq_node",h=function(){var e=this;return a("::","Element")["$[]"](e.$dom_node())},h.$$arity=0),e.def(x,"$mounted?",y=function(){var e=this;return e.__hyperstack_component_is_mounted!==undefined&&e.__hyperstack_component_is_mounted},y.$$arity=0),e.def(x,"$pluralize",v=function(e,t,n){var r=$,a=$,i=$,o=$;return null==n&&(n=$),r=s(s(a=e["$=="](1))?a:e["$=~"](/^1(\.0+)?$/))?t:s(i=n)?i:t.$pluralize(),(s(o=e)?o:0)+" "+r},v.$$arity=-3),e.def(x,"$force_update!",m=function(){var e=this;return e.__hyperstack_component_native.forceUpdate(),e},m.$$arity=0),e.def(x,"$set_state",g=function(e){var t=g.$$p,n=t||$,r=this;return t&&(g.$$p=null),t&&(g.$$p=null),u(r,"set_or_replace_state_or_prop",[e,"setState"],n.$to_proc())},g.$$arity=1),e.def(x,"$set_state!",b=function(e){var t=b.$$p,n=t||$,r=this;return t&&(b.$$p=null),t&&(b.$$p=null),u(r,"set_or_replace_state_or_prop",[e,"setState"],n.$to_proc()),r.__hyperstack_component_native.forceUpdate()},b.$$arity=1),x.$private(),e.def(x,"$__hyperstack_router_wrapper",w=function(){var e,t=w.$$p,n=t||$,r=this;return t&&(w.$$p=null),t&&(w.$$p=null),l(((e=function(){var t=null==e.$$s?this:e.$$s;return u(t,"instance_eval",[],n.$to_proc())}).$$s=r,e.$$arity=0,e))},w.$$arity=0),e.def(x,"$__hyperstack_component_rescue_wrapper",k=function(e){var t=this;return s(t.$class()["$callbacks?"]("__hyperstack_component_rescue_hook"))?a(a(i(S,"Hyperstack"),"Internal"),"Component").$RescueWrapper(c(["child","children_elements"],{child:t,children_elements:e})):e.$call()},k.$$arity=1),e.def(x,"$__hyperstack_component_select_wrappers",O=function(){var n=O.$$p,r=n||$,a=this,o=$;return n&&(O.$$p=null),n&&(O.$$p=null),o=[$],u(i(S,"RescueWrapper"),"after_error_args=",e.to_a(o)),o[t(o.length,1)],a.$__hyperstack_component_run_post_render_hooks(a.$__hyperstack_component_rescue_wrapper(u(a,"__hyperstack_router_wrapper",[],r.$to_proc())))},O.$$arity=0),e.def(x,"$set_or_replace_state_or_prop",E=function(e,t){var n=E.$$p,r=n||$,a=this;null==a.__hyperstack_component_native&&(a.__hyperstack_component_native=$),n&&(E.$$p=null),n&&(E.$$p=null),s(a.__hyperstack_component_native)||a.$raise("No native ReactComponent associated");var i=e.$shallow_to_n();if(s(r))if(!0===a.__hyperstack_component_native.__opalInstanceInitializedState)a.__hyperstack_component_native[t](i,function(){r.$call()});else for(var o in i)i.hasOwnProperty(o)&&(a.__hyperstack_component_native.state[o]=i[o]);else if(!0===a.__hyperstack_component_native.__opalInstanceInitializedState)a.__hyperstack_component_native[t](i);else for(var o in i)i.hasOwnProperty(o)&&(a.__hyperstack_component_native.state[o]=i[o])},E.$$arity=2),$&&"set_or_replace_state_or_prop"}(p[0],p)}(p[0],p)}(p[0],p)}(r[0],r)},Opal.modules["hyperstack/internal/component/class_methods"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var a=[],i=e.nil,o=e.$$$,s=e.$$,u=e.module,l=e.send,c=e.truthy,p=e.range,d=e.hash2,f=e.send2,_=e.find_super,h=e.alias,y=e.hash;return e.add_stubs(["$create_element","$to_proc","$render","$deprecation_warning","$select","$mounted_components","$<=","$class","$param_accessor_style","$props_wrapper","$==","$[]","$<<","$each","$before_new_params","$included","$is_a?","$element_type","$define_method","$__hyperstack_component_select_wrappers","$instance_eval","$__hyperstack_component_after_render_hook","$on","$instance_exec","$empty?","$__hyperstack_component_rescue_hook","$!","$detect","$before_mount","$before_update","$after_mount","$after_update","$any?","$respond_to?","$haml_class_name","$superclass","$copy","$validator","$new","$validate","$>","$count","$+","$name","$join","$default_props","$build","$first","$delete","$merge!","$[]=","$-","$key?","$optional","$requires","$all_other_params","$props","$=~","$gsub","$include?","$event_camelize","$event","$call","$arity","$last","$pop","$state","$singleton_class","$__send__","$mutate","$native_mixins","$static_call_backs","$split","$to_n","$add_item_to_tree","$Native","$create_native_react_class","$reverse","$import_native_component","$eval_native_react_component","$raise","$message","$!=","$length","$inject"]),function(a,v){var m=[u(a,"Hyperstack")].concat(v);return function(a,v){var m=[u(a,"Internal")].concat(v);return function(a,v){var m=[u(a,"Component")].concat(v);return function(a,v){var m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K,X,Y,V,G,J,Z,Q=u(a,"ClassMethods"),ee=[Q].concat(v);return e.def(Q,"$create_element",m=function(){var t,n=m.$$p,r=n||i,$=this;return n&&(m.$$p=null),n&&(m.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(s(ee,"ReactWrapper"),"create_element",[$].concat(e.to_a(t)),r.$to_proc())},m.$$arity=-1),e.def(Q,"$insert_element",g=function(){var t,n=g.$$p,r=n||i,$=this;return n&&(g.$$p=null),n&&(g.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(s(ee,"RenderingContext"),"render",[$].concat(e.to_a(t)),r.$to_proc())},g.$$arity=-1),e.def(Q,"$deprecation_warning",b=function(e){var t=this;return s(ee,"Hyperstack").$deprecation_warning(t,e)},b.$$arity=1),e.def(Q,"$hyper_component?",w=function(){return!0},w.$$arity=0),e.def(Q,"$allow_deprecated_render_definition?",k=function(){return!1},k.$$arity=0),e.def(Q,"$mounted_components",O=function(){var e,n=this;return l(o(s(ee,"Hyperstack"),"Component").$mounted_components(),"select",[],((e=function(n){var r=null==e.$$s?this:e.$$s;return null==n&&(n=i),t(n.$class(),r)}).$$s=n,e.$$arity=1,e))},O.$$arity=0),e.def(Q,"$param_accessor_style",E=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),l(n.$props_wrapper(),"param_accessor_style",e.to_a(t))},E.$$arity=-1),e.def(Q,"$backtrace",x=function(){var t,n,r=this,$=i;return null==r.__hyperstack_component_dont_catch_exceptions&&(r.__hyperstack_component_dont_catch_exceptions=i),t=e.slice.call(arguments,0,arguments.length),n=t,r.__hyperstack_component_dont_catch_exceptions=n["$[]"](0)["$=="]("none"),r.__hyperstack_component_backtrace_off=c($=r.__hyperstack_component_dont_catch_exceptions)?$:n["$[]"](0)["$=="]("off")},x.$$arity=-1),e.def(Q,"$append_backtrace",S=function(e,t){var n,r=this;return e["$<<"]("    "+t["$[]"](0)),l(t["$[]"](p(1,-1,!1)),"each",[],((n=function(t){null==n.$$s||n.$$s;return null==t&&(t=i),e["$<<"](t)}).$$s=r,n.$$arity=1,n))},S.$$arity=2),e.def(Q,"$before_receive_props",q=function(){var t,n=q.$$p,r=n||i,$=this;return n&&(q.$$p=null),n&&(q.$$p=null),t=e.slice.call(arguments,0,arguments.length),$.$deprecation_warning("'before_receive_props' is deprecated. Use the 'before_new_params' macro instead."),l($,"before_new_params",e.to_a(t),r.$to_proc())},q.$$arity=-1),e.def(Q,"$render",N=function(e,t){var n,r,$=N.$$p,a=$||i,u=this;return $&&(N.$$p=null),$&&(N.$$p=null),null==e&&(e=i),null==t&&(t=d([],{})),s(ee,"Tags").$included(u),c(e)?(c(e["$is_a?"](o(o(s(ee,"Hyperstack"),"Component"),"Element")))&&(e=e.$element_type()),l(u,"define_method",["__hyperstack_component_render"],((n=function(){var r,$=null==n.$$s?this:n.$$s;return l($,"__hyperstack_component_select_wrappers",[],((r=function(){var n,$=null==r.$$s?this:r.$$s;return l(s(ee,"RenderingContext"),"render",[e,t],((n=function(){var e=null==n.$$s?this:n.$$s;return c(a)?l(e,"instance_eval",[],a.$to_proc()):i}).$$s=$,n.$$arity=0,n))}).$$s=$,r.$$arity=0,r))}).$$s=u,n.$$arity=0,n))):l(u,"define_method",["__hyperstack_component_render"],((r=function(){var e,t=null==r.$$s?this:r.$$s;return l(t,"__hyperstack_component_select_wrappers",[],((e=function(){var t=null==e.$$s?this:e.$$s;return l(t,"instance_eval",[],a.$to_proc())}).$$s=t,e.$$arity=0,e))}).$$s=u,r.$$arity=0,r))},N.$$arity=-1),e.def(Q,"$on",C=function(){var t,n,r,$=C.$$p,a=$||i,o=this;return $&&(C.$$p=null),$&&(C.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,l(o,"__hyperstack_component_after_render_hook",[],((r=function(t){var $,o=null==r.$$s?this:r.$$s;return null==t&&(t=i),l(t,"on",e.to_a(n),(($=function(){var t,n=null==$.$$s?this:$.$$s;return t=e.slice.call(arguments,0,arguments.length),l(n,"instance_exec",e.to_a(t),a.$to_proc())}).$$s=o,$.$$arity=-1,$))}).$$s=o,r.$$arity=1,r))},C.$$arity=-1),e.def(Q,"$rescues",z=function(){var t,n,r,$=z.$$p,a=$||i,o=this;return $&&(z.$$p=null),$&&(z.$$p=null),t=e.slice.call(arguments,0,arguments.length),c((n=t)["$empty?"]())&&(n=[s(ee,"StandardError")]),l(o,"__hyperstack_component_rescue_hook",[],((r=function(t){var $,o,s,u=null==r.$$s?this:r.$$s,p=i;return null==t&&(t=i),$=e.slice.call(arguments,1,arguments.length),o=$,c(c(p=t)?p:l(n,"detect",[],(s=function(e){return null==s.$$s||s.$$s,null==e&&(e=i),o["$[]"](0)["$is_a?"](e)},s.$$s=u,s.$$arity=1,s))["$!"]())?[t].concat(e.to_a(o)):(l(u,"instance_exec",e.to_a(o),a.$to_proc()),[!0].concat(e.to_a(o)))}).$$s=o,r.$$arity=-2,r))},z.$$arity=-1),e.def(Q,"$before_render",I=function(){var t,n=I.$$p,r=n||i,$=this;return n&&(I.$$p=null),n&&(I.$$p=null),t=e.slice.call(arguments,0,arguments.length),l($,"before_mount",e.to_a(t),r.$to_proc()),l($,"before_update",e.to_a(t),r.$to_proc())},I.$$arity=-1),e.def(Q,"$after_render",D=function(){var t,n=D.$$p,r=n||i,$=this;return n&&(D.$$p=null),n&&(D.$$p=null),t=e.slice.call(arguments,0,arguments.length),l($,"after_mount",e.to_a(t),r.$to_proc()),l($,"after_update",e.to_a(t),r.$to_proc())},D.$$arity=-1),e.def(Q,"$method_missing",H=function(t){var n,r,$=H.$$p,a=$||i,u=this,p=i;return $&&(H.$$p=null),$&&(H.$$p=null),n=e.slice.call(arguments,1,arguments.length),c(c(p=(r=n)["$any?"]())?p:o(o(s(ee,"Hyperstack"),"Component"),"Element")["$respond_to?"]("haml_class_name")["$!"]())?f(u,_(u,"method_missing",H,!1,!0),"method_missing",[t].concat(e.to_a(r)),$):l(s(ee,"RenderingContext"),"render",[u,d(["class"],{"class":o(o(s(ee,"Hyperstack"),"Component"),"Element").$haml_class_name(t)})],a.$to_proc())},H.$$arity=-2),e.def(Q,"$validator",A=function(){var e=this;return null==e.__hyperstack_component_validator&&(e.__hyperstack_component_validator=i),c(e.__hyperstack_component_validator)?e.__hyperstack_component_validator:c(e.$superclass()["$respond_to?"]("validator"))?e.__hyperstack_component_validator=e.$superclass().$validator().$copy(e.$props_wrapper()):e.__hyperstack_component_validator=s(ee,"Validator").$new(e.$props_wrapper())},A.$$arity=0),e.def(Q,"$prop_types",j=function(){var e=this;return c(e.$validator())?d(["_componentValidator"],{_componentValidator:function(t){var $=e.$validator().$validate(s(ee,"Hash").$new(t));return c(n($.$count(),0))?new Error(r("In component `"+e.$name()+"`\n",$.$join("\n"))):undefined}}):d([],{})},j.$$arity=0),e.def(Q,"$default_props",M=function(){return this.$validator().$default_props()},M.$$arity=0),e.def(Q,"$params",R=function(){var e=R.$$p,t=e||i,n=this;return e&&(R.$$p=null),e&&(R.$$p=null),l(n.$validator(),"build",[],t.$to_proc())},R.$$arity=0),e.def(Q,"$props_wrapper",T=function(){var e=this,t=i;return null==e.__hyperstack_component_props_wrapper&&(e.__hyperstack_component_props_wrapper=i),c(e.__hyperstack_component_props_wrapper)?e.__hyperstack_component_props_wrapper:c(e.$superclass()["$respond_to?"]("props_wrapper"))?e.__hyperstack_component_props_wrapper=s(ee,"Class").$new(e.$superclass().$props_wrapper()):e.__hyperstack_component_props_wrapper=c(t=e.__hyperstack_component_props_wrapper)?t:s(ee,"Class").$new(s(ee,"PropsWrapper"))},T.$$arity=0),e.def(Q,"$param",B=function(){var t,n,r=this,a=i,o=i,u=i,p=i,f=i;return t=e.slice.call(arguments,0,arguments.length),c((n=t)["$[]"](0)["$is_a?"](s(ee,"Hash")))?(o=(a=n["$[]"](0)).$first()["$[]"](0),u=a.$first()["$[]"](1),a.$delete(o),a["$merge!"](d(["default"],{"default":u}))):(o=n["$[]"](0),a=c(p=n["$[]"](1))?p:d([],{})),a["$[]"]("type")["$=="](s(ee,"Proc"))&&(c(a["$[]"]("default"))||(f=["default",i],l(a,"[]=",e.to_a(f)),f[$(f.length,1)]),c(a["$key?"]("allow_nil"))||(f=["allow_nil",!0],l(a,"[]=",e.to_a(f)),f[$(f.length,1)])),o["$=="]("class")&&(o="className",c(a["$[]"]("alias"))||(f=["alias","Class"],l(a,"[]=",e.to_a(f)),f[$(f.length,1)])),c(a["$[]"]("default"))?r.$validator().$optional(o,a):r.$validator().$requires(o,a)},B.$$arity=-1),e.def(Q,"$collect_other_params_as",P=function(e){var t,n=this;return l(n.$validator(),"all_other_params",[e],((t=function(){return(null==t.$$s?this:t.$$s).$props()}).$$s=n,t.$$arity=0,t))},P.$$arity=1),h(Q,"other_params","collect_other_params_as"),h(Q,"others","collect_other_params_as"),h(Q,"other","collect_other_params_as"),h(Q,"opts","collect_other_params_as"),e.def(Q,"$fires",L=function(t,n){var r,$=this,a=i,u=i;return null==n&&(n=d([],{})),a=c(u=n["$[]"]("alias"))?u:t+"!",t=c(t["$=~"](/^<(.+)>$/))?t.$gsub(/^<(.+)>$/,"\\1"):c(o(o(o(s(ee,"Hyperstack"),"Component"),"Event"),"BUILT_IN_EVENTS")["$include?"]("on"+t.$event_camelize()))?"on"+t.$event_camelize():"on_"+t,$.$validator().$event(t),l($,"define_method",[a],((r=function(){var n,$,a=null==r.$$s?this:r.$$s;return n=e.slice.call(arguments,0,arguments.length),($=a.$props()["$[]"](t))===i||null==$?i:l($,"call",e.to_a(n))}).$$s=$,r.$$arity=-1,r))},L.$$arity=-2),h(Q,"triggers","fires"),e.def(Q,"$define_state",F=function(){var t,n,r,$,a=F.$$p,o=a||i,u=this,p=i,f=i,_=i;return a&&(F.$$p=null),a&&(F.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,u.$deprecation_warning("'define_state' is deprecated. Use the 'state' macro to declare states."),p=c(c(f=o)?o.$arity()["$=="](0):f)?e.yieldX(o,[]):i,_=c(n.$last()["$is_a?"](s(ee,"Hash")))?n.$pop():d([],{}),l(n,"each",[],((r=function(e){var t=null==r.$$s?this:r.$$s;return null==e&&(e=i),t.$state(y(e,p))}).$$s=u,r.$$arity=1,r)),l(_,"each",[],(($=function(e,t){var n=null==$.$$s?this:$.$$s;return null==e&&(e=i),null==t&&(t=i),n.$state(y(e,t))}).$$s=u,$.$$arity=2,$))},F.$$arity=-1),e.def(Q,"$export_state",U=function(){var t,n,r,a,o=U.$$p,u=o||i,p=this,f=i,_=i,h=i;return o&&(U.$$p=null),o&&(U.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,p.$deprecation_warning("'export_state' is deprecated. Use the 'state' macro to declare states."),f=c(c(_=u)?u.$arity()["$=="](0):_)?e.yieldX(u,[]):i,h=c(n.$last()["$is_a?"](s(ee,"Hash")))?n.$pop():d([],{}),l(n,"each",[],((r=function(t){null==r.$$s||r.$$s;var n=i;return null==t&&(t=i),n=[t,f],l(h,"[]=",e.to_a(n)),n[$(n.length,1)]}).$$s=p,r.$$arity=1,r)),l(h,"each",[],((a=function(t,n){var r,$=null==a.$$s?this:a.$$s;return null==t&&(t=i),null==n&&(n=i),$.$state(y(t,n,"scope","class","reader",!0)),l($.$singleton_class(),"define_method",[t+"!"],((r=function(){var n,$=null==r.$$s?this:r.$$s;return n=e.slice.call(arguments,0,arguments.length),l($.$mutate(),"__send__",[t].concat(e.to_a(n)))}).$$s=$,r.$$arity=-1,r))}).$$s=p,a.$$arity=2,a))},U.$$arity=-1),e.def(Q,"$native_mixin",W=function(e){return this.$native_mixins()["$<<"](e)},W.$$arity=1),e.def(Q,"$native_mixins",K=function(){var e=this,t=i;return null==e.__hyperstack_component_native_mixins&&(e.__hyperstack_component_native_mixins=i),e.__hyperstack_component_native_mixins=c(t=e.__hyperstack_component_native_mixins)?t:[]},K.$$arity=0),e.def(Q,"$static_call_back",X=function(t){var n=X.$$p,r=n||i,a=this,o=i;return n&&(X.$$p=null),n&&(X.$$p=null),o=[t,r],l(a.$static_call_backs(),"[]=",e.to_a(o)),o[$(o.length,1)]},X.$$arity=1),e.def(Q,"$static_call_backs",Y=function(){var e=this,t=i;return null==e.__hyperstack_component_static_call_backs&&(e.__hyperstack_component_static_call_backs=i),e.__hyperstack_component_static_call_backs=c(t=e.__hyperstack_component_static_call_backs)?t:d([],{})},Y.$$arity=0),e.def(Q,"$export_component",V=function(t){var n=this,a=i,o=i,u=i,f=i;return null==t&&(t=d([],{})),f=[u=(a=(c(o=t["$[]"]("as"))?o:n.$name()).$split("::")).$first(),n.$add_item_to_tree(n.$Native(e.global)["$[]"](u),r([s(ee,"ReactWrapper").$create_native_react_class(n)],a["$[]"](p(1,-1,!1)).$reverse())).$to_n()],l(n.$Native(e.global),"[]=",e.to_a(f)),f[$(f.length,1)]},V.$$arity=-1),e.def(Q,"$imports",G=function(t){var n,r=this,$=i;return function(){try{try{return s(ee,"ReactWrapper").$import_native_component(r,s(ee,"ReactWrapper").$eval_native_react_component(t)),l(r,"render",[],((n=function(){null==n.$$s||n.$$s;return i}).$$s=r,n.$$arity=0,n))}catch(a){if(!e.rescue(a,[s(ee,"Exception")]))throw a;$=a;try{return r.$raise(r+" cannot import '"+t+"': "+$.$message()+".")}finally{e.pop_exception()}}}finally{}}()},G.$$arity=1),e.def(Q,"$add_item_to_tree",J=function(t,n){var r,a=this,u=i,d=i;return c(c(u=a.$Native(t).$class()["$!="](o(s(ee,"Native"),"Object")))?u:n.$length()["$=="](1))?l(n,"inject",[],((r=function(e,t){null==r.$$s||r.$$s;return null==e&&(e=i),null==t&&(t=i),y(t,e)}).$$s=a,r.$$arity=2,r)):(d=[n.$last(),a.$add_item_to_tree(a.$Native(t)["$[]"](n.$last()),n["$[]"](p(0,-2,!1)))],l(a.$Native(t),"[]=",e.to_a(d)),d[$(d.length,1)],t)},J.$$arity=2),e.def(Q,"$to_n",Z=function(){var e=this;return o(o(o(s(ee,"Hyperstack"),"Internal"),"Component"),"ReactWrapper").$create_native_react_class(e)},Z.$$arity=0),i&&"to_n"}(m[0],m)}(m[0],m)}(m[0],m)}(a[0],a)},Opal.modules["hyperstack/internal/component/props_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r=e.top,$=[],a=e.nil,i=(e.$$$,e.$$),o=e.module,s=e.klass,u=e.truthy,l=e.range,c=e.send;return e.add_stubs(["$require","$attr_reader","$naming_convention","$===","$fix_suffix","$camelize","$=~","$+","$[]","$respond_to?","$superclass","$param_accessor_style","$dup","$param_definitions","$new","$!=","$instance_var_name_for","$lambda","$instance_variable_set","$fetch_from_cache","$==","$[]=","$-","$include?","$define_method","$to_sym","$props","$call","$to_proc","$class","$each_value","$instance_exec","$initialize","$private","$cache","$equal?","$tap","$convert_param","$_react_param_conversion","$is_a?","$collect","$component","$instance_variable_get"]),r.$require("active_support/core_ext/string"),function(r,$){var p=[o(r,"Hyperstack")].concat($);return function(r,$){var p=[o(r,"Internal")].concat($);return function(r,$){var p=[o(r,"Component")].concat($);return function(r,$super,$){var o,p,d,f,_,h,y,v,m,g=s(r,null,"PropsWrapper"),b=[g].concat($);return g.$$prototype.component=g.$$prototype.cache=a,g.$attr_reader("component"),function(r,$){var o,s,p,d,f,_,h=[r].concat($);e.def(r,"$instance_var_name_for",o=function(e){var t=this,n=a;return n=i(h,"Hyperstack").$naming_convention(),"camelize_params"["$==="](n)?t.$fix_suffix(e.$camelize()):"prefix_params"["$==="](n)?"_"+e:e},o.$$arity=1),e.def(r,"$fix_suffix",s=function(e){return u(e)?u(e["$=~"](/\?$/))?t(e["$[]"](l(0,-2,!1)),"_q"):u(e["$=~"](/\!$/))?t(e["$[]"](l(0,-2,!1)),"_b"):e:a},s.$$arity=1),e.def(r,"$param_accessor_style",p=function(e){var t=this,n=a;return null==t.param_accessor_style&&(t.param_accessor_style=a),null==e&&(e=a),u(e)&&(t.param_accessor_style=e),t.param_accessor_style=u(n=t.param_accessor_style)?n:u(t.$superclass()["$respond_to?"]("param_accessor_style"))?t.$superclass().$param_accessor_style():"hyperstack"},p.$$arity=-1),e.def(r,"$param_definitions",d=function(){var e=this,t=a;return null==e.param_definitions&&(e.param_definitions=a),e.param_definitions=u(t=e.param_definitions)?t:u(e.$superclass()["$respond_to?"]("param_definitions"))?e.$superclass().$param_definitions().$dup():i(h,"Hash").$new()},d.$$arity=0),e.def(r,"$define_param",f=function(t,r,$){var o,s,l,p=f.$$p,d=this,_=a,y=a,v=a,m=a,g=a,b=a;return p&&(f.$$p=null),null==$&&($=a),u(u(_=d.$param_accessor_style()["$!="]("legacy"))?_:$)&&(y=u(v=$)?v:t,m=u(g=d.$fix_suffix($))?g:d.$instance_var_name_for(t),b=[t,c(d,"lambda",[],(o=function(e){var n=null==o.$$s?this:o.$$s,$=a;return null==n.component&&(n.component=a),null==e&&(e=a),n.component.$instance_variable_set("@"+m,$=n.$fetch_from_cache(t,r,e)),n.$param_accessor_style()["$=="]("accessors")?n.component["$"+y]=function(){return $}:a},o.$$s=d,o.$$arity=1,o))],c(d.$param_definitions(),"[]=",e.to_a(b)),b[n(b.length,1)],u(["hyperstack","accessors"]["$include?"](d.$param_accessor_style())))?a:r["$=="](i(h,"Proc"))?c(d,"define_method",[t.$to_sym()],((s=function(){var n,r=null==s.$$s?this:s.$$s,$=s.$$p,i=$||a;return $&&(s.$$p=null),n=e.slice.call(arguments,0,arguments.length),u(r.$props()["$[]"](t))?c(r.$props()["$[]"](t),"call",e.to_a(n),i.$to_proc()):a}).$$s=d,s.$$arity=-1,s)):c(d,"define_method",[t.$to_sym()],((l=function(){var e=null==l.$$s?this:l.$$s;return e.$fetch_from_cache(t,r,e.$props())}).$$s=d,l.$$arity=0,l))},f.$$arity=-3),e.def(r,"$define_all_others",_=function(t){var r,$,i=_.$$p,o=i||a,s=this,l=a,p=a;return i&&(_.$$p=null),l=s.$instance_var_name_for(t),p=[t,c(s,"lambda",[],(r=function(n){var $=null==r.$$s?this:r.$$s,i=a;return null==$.component&&($.component=a),null==n&&(n=a),$.component.$instance_variable_set("@"+l,i=e.yield1(o,n)),$.$param_accessor_style()["$=="]("accessors")?$.component["$"+t]=function(){return i}:a},r.$$s=s,r.$$arity=1,r))],c(s.$param_definitions(),"[]=",e.to_a(p)),p[n(p.length,1)],c(s,"define_method",[t.$to_sym()],(($=function(){var t=null==$.$$s?this:$.$$s,n=a;return null==t._all_others_cache&&(t._all_others_cache=a),t._all_others_cache=u(n=t._all_others_cache)?n:e.yield1(o,t.$props())}).$$s=s,$.$$arity=0,$))},_.$$arity=1)}(e.get_singleton_class(g),b),e.def(g,"$param_accessor_style",o=function(){return this.$class().$param_accessor_style()},o.$$arity=0),e.def(g,"$initialize",p=function(e,t){var n,r=this;return null==t&&(t=a),r.component=e,c(r.$class().$param_definitions(),"each_value",[],((n=function(e){var r=null==n.$$s?this:n.$$s,$=a;return null==e&&(e=a),c(r,"instance_exec",[u($=t)?$:r.$props()],e.$to_proc())}).$$s=r,n.$$arity=1,n))},p.$$arity=-2),e.def(g,"$reload",d=function(e){var t=this;return t._all_others_cache=a,t.$initialize(t.component,e)},d.$$arity=1),e.def(g,"$[]",f=function(e){return this.$props()["$[]"](e)},f.$$arity=1),g.$private(),e.def(g,"$fetch_from_cache",_=function(t,r,$){var i,o,s,l=this,p=a,d=a;return o=l.$cache()["$[]"](t),p=null==(i=e.to_ary(o))[0]?a:i[0],d=null==i[1]?a:i[1],u(p["$equal?"]($["$[]"](t)))?d:c(l.$convert_param(t,r,$),"tap",[],((s=function(r){var i=null==s.$$s?this:s.$$s,o=a;return null==r&&(r=a),o=[t,[$["$[]"](t),r]],c(i.$cache(),"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=l,s.$$arity=1,s))},_.$$arity=3),e.def(g,"$convert_param",h=function(e,t,n){var r,$=this,o=a;return u(t["$respond_to?"]("_react_param_conversion"))?t.$_react_param_conversion(n["$[]"](e),a):u(u(o=t["$is_a?"](i(b,"Array")))?t["$[]"](0)["$respond_to?"]("_react_param_conversion"):o)?c(n["$[]"](e),"collect",[],((r=function(e){null==r.$$s||r.$$s;return null==e&&(e=a),t["$[]"](0).$_react_param_conversion(e,a)}).$$s=$,r.$$arity=1,r)):n["$[]"](e)},h.$$arity=3),e.def(g,"$cache",y=function(){var t,r=this,$=a;return r.cache=u($=r.cache)?$:c(i(b,"Hash"),"new",[],((t=function(r,$){null==t.$$s||t.$$s;var i=a;return null==r&&(r=a),null==$&&($=a),i=[$,[]],c(r,"[]=",e.to_a(i)),i[n(i.length,1)]}).$$s=r,t.$$arity=2,t))},y.$$arity=0),e.def(g,"$props",v=function(){return this.$component().$props()},v.$$arity=0),e.def(g,"$value_for",m=function(e){var t=this;return u(t["$[]"](e))?t["$[]"](e).$instance_variable_get("@value"):a},m.$$arity=1),a&&"value_for"}(p[0],0,p)}(p[0],p)}(p[0],p)}($[0],$)},Opal.modules["hyperstack/component"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.send,u=e.truthy,l=e.hash2,c=e.lambda,p=e.hash;return e.add_stubs(["$require","$include","$class_eval","$class_attribute","$lambda","$zero?","$arity","$deprecation_warning","$instance_exec","$to_proc","$define_callback","$add_after_error_hook","$extend","$respond_to?","$!","$<","$allow_deprecated_render_definition?","$new","$to_a","$mounted_components","$each","$include?","$force_update!","$name","$class","$event_camelize","$to_s","$call","$[]","$params","$props_wrapper","$on_opal_client?","$load_context","$observing","$<<","$run_callback","$props","$quiet_test","$reload","$unmount","$remove","$delete","$set_state","$==","$method_defined?","$raise","$first","$component_will_mount","$_run_before_render_callbacks","$render","$waiting_on_resources"]),n.$require("hyperstack/ext/component/string"),n.$require("hyperstack/ext/component/hash"),n.$require("active_support/core_ext/class/attribute"),n.$require("hyperstack/internal/component/rendering_context"),n.$require("hyperstack/internal/component"),n.$require("hyperstack/internal/component/instance_methods"),n.$require("hyperstack/internal/component/class_methods"),n.$require("hyperstack/internal/component/props_wrapper"),function(n,r){var d=[o(n,"Hyperstack")].concat(r);return function(n,r){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H=o(n,"Component"),A=[H].concat(r);return e.defs(H,"$included",d=function(n){var r,o=this,p=$,d=$;return n.$include(a(a(i(A,"Hyperstack"),"State"),"Observer")),n.$include(a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"InstanceMethods")),n.$include(a(a(i(A,"Hyperstack"),"Internal"),"AutoUnmount")),n.$include(a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"Tags")),n.$include(a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"ShouldComponentUpdate")),s(n,"class_eval",[],((r=function(){var t,n,o,p,d,f=null==r.$$s?this:r.$$s,_=$;return f.$class_attribute("initial_state"),_=s(f,"lambda",[],((t=function(n,r,a){var i,o=null==t.$$s?this:t.$$s;return null==n&&(n=$),null==r&&(r=$),null==a&&(a=$),i=e.slice.call(arguments,3,arguments.length),u(a.$arity()["$zero?"]())?i=[]:o.$deprecation_warning("In the future "+n+" callbacks will not receive any parameters."),s(r,"instance_exec",e.to_a(i),a.$to_proc()),i}).$$s=f,t.$$arity=-4,t)),f.$define_callback("before_mount",l(["before_call_hook"],{before_call_hook:_})),f.$define_callback("after_mount"),f.$define_callback("before_new_params",l(["after_define_hook"],{after_define_hook:s(f,"lambda",[],(n=function(e){null==n.$$s||n.$$s;return null==e&&(e=$),e.$deprecation_warning("`before_new_params` has been deprecated.  The base method componentWillReceiveProps is deprecated in React without replacement")},n.$$s=f,n.$$arity=1,n))})),f.$define_callback("before_update",l(["before_call_hook"],{before_call_hook:_})),f.$define_callback("after_update"),f.$define_callback("__hyperstack_component_after_render_hook",l(["before_call_hook"],{before_call_hook:c((o=function(t,n,r){var a;null==o.$$s||o.$$s;return null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),a=e.slice.call(arguments,3,arguments.length),[].concat(e.to_a(s(n,"instance_exec",e.to_a(a),r.$to_proc())))},o.$$s=f,o.$$arity=-4,o))})),f.$define_callback("__hyperstack_component_rescue_hook",l(["before_call_hook"],{before_call_hook:c((p=function(t,n,r){var a;null==p.$$s||p.$$s;return null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),a=e.slice.call(arguments,3,arguments.length),s(n,"instance_exec",e.to_a(a),r.$to_proc())},p.$$s=f,p.$$arity=-4,p))})),f.$define_callback("after_error",l(["after_define_hook"],{after_define_hook:c((d=function(e){null==d.$$s||d.$$s;return null==e&&(e=$),a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"ReactWrapper").$add_after_error_hook(e)},d.$$s=f,d.$$arity=1,d))}))}).$$s=o,r.$$arity=0,r)),n.$extend(a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"ClassMethods")),u(e.__hyperstack_component_original_defn)?$:(e.__hyperstack_component_original_defn=e.defn,e.defn=function(n,r,$){
u(u(p=n["$respond_to?"]("hyper_component?"))?t(n,a(a(i(A,"Hyperstack"),"Component"),"NativeLibrary"))["$!"]():p)&&(u(u(d="$render"==r)?n["$allow_deprecated_render_definition?"]()["$!"]():d)?i(A,"Hyperstack").$deprecation_warning(n,"Do not directly define the render method. Use the render macro instead."):u("$__hyperstack_component_render"==r)&&(r="$render")),e.__hyperstack_component_original_defn(n,r,$)},$)},d.$$arity=1),e.defs(H,"$mounted_components",f=function(){var e=this,t=$;return null==e.__hyperstack_component_mounted_components&&(e.__hyperstack_component_mounted_components=$),e.__hyperstack_component_mounted_components=u(t=e.__hyperstack_component_mounted_components)?t:i(A,"Set").$new()},f.$$arity=0),e.defs(H,"$force_update!",_=function(){var e,t=this,n=$;return n=t.$mounted_components().$to_a(),s(n,"each",[],((e=function(t){var n=null==e.$$s?this:e.$$s;return null==t&&(t=$),u(n.$mounted_components()["$include?"](t))?t["$force_update!"]():$}).$$s=t,e.$$arity=1,e))},_.$$arity=0),e.defs(H,"$deprecation_warning",h=function(e){var t=this;return i(A,"Hyperstack").$deprecation_warning(t.$name(),e)},h.$$arity=1),e.def(H,"$deprecation_warning",y=function(e){var t=this;return i(A,"Hyperstack").$deprecation_warning(t.$class().$name(),e)},y.$$arity=1),e.def(H,"$initialize",v=function(e){return this.__hyperstack_component_native=e},v.$$arity=1),e.def(H,"$emit",m=function(t){var n,r=this,o=$;return n=e.slice.call(arguments,1,arguments.length),u(a(i(A,"Event"),"BUILT_IN_EVENTS")["$include?"](o="on"+t.$to_s().$event_camelize()))?s(r.$params()["$[]"](o),"call",e.to_a(n)):s(r.$params()["$[]"]("on_"+t),"call",e.to_a(n))},m.$$arity=-2),e.def(H,"$component_will_mount",g=function(){var e,t=this;return t.__hyperstack_component_params_wrapper=t.$class().$props_wrapper().$new(t),u(i(A,"IsomorphicHelpers")["$on_opal_client?"]())&&i(A,"IsomorphicHelpers").$load_context(!0),s(t,"observing",[l(["immediate_update"],{immediate_update:!0})],((e=function(){var t=null==e.$$s?this:e.$$s;return a(i(A,"Hyperstack"),"Component").$mounted_components()["$<<"](t),t.$run_callback("before_mount",t.$props())}).$$s=t,e.$$arity=0,e))},g.$$arity=0),e.def(H,"$component_did_mount",b=function(){var e,t=this;return s(t,"observing",[l(["update_objects"],{update_objects:!0})],((e=function(){var t=null==e.$$s?this:e.$$s;return t.$run_callback("after_mount"),a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$quiet_test(t)}).$$s=t,e.$$arity=0,e))},b.$$arity=0),e.def(H,"$component_will_receive_props",w=function(e){var t,n=this;return s(n,"observing",[l(["immediate_update"],{immediate_update:!0})],((t=function(){return(null==t.$$s?this:t.$$s).$run_callback("before_new_params",e)}).$$s=n,t.$$arity=0,t)),n.__hyperstack_component_receiving_props=!0},w.$$arity=1),e.def(H,"$component_will_update",k=function(e,t){var n,r=this;return null==r.__hyperstack_component_receiving_props&&(r.__hyperstack_component_receiving_props=$),null==r.__hyperstack_component_params_wrapper&&(r.__hyperstack_component_params_wrapper=$),s(r,"observing",[],((n=function(){return(null==n.$$s?this:n.$$s).$run_callback("before_update",e,t)}).$$s=r,n.$$arity=0,n)),u(r.__hyperstack_component_receiving_props)&&r.__hyperstack_component_params_wrapper.$reload(e),r.__hyperstack_component_receiving_props=!1},k.$$arity=2),e.def(H,"$component_did_update",O=function(e,t){var n,r=this;return s(r,"observing",[l(["update_objects"],{update_objects:!0})],((n=function(){var r=null==n.$$s?this:n.$$s;return r.$run_callback("after_update",e,t),a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"RenderingContext").$quiet_test(r)}).$$s=r,n.$$arity=0,n))},O.$$arity=2),e.def(H,"$component_will_unmount",E=function(){var e,t=this;return s(t,"observing",[],((e=function(){var t=null==e.$$s?this:e.$$s;return t.$unmount(),t.$remove(),a(i(A,"Hyperstack"),"Component").$mounted_components().$delete(t)}).$$s=t,e.$$arity=0,e))},E.$$arity=0),e.def(H,"$component_did_catch",x=function(e,t){var n,r=this;return s(r,"observing",[],((n=function(){return(null==n.$$s?this:n.$$s).$run_callback("after_error",e,t)}).$$s=r,n.$$arity=0,n))},x.$$arity=2),e.def(H,"$mutations",S=function(){return this.$set_state(l(["***_state_updated_at-***"],{"***_state_updated_at-***":Date.now()+Math.random()}))},S.$$arity=1),e.def(H,"$update_react_js_state",q=function(e,t,n){var r=this;return u(e)?(e["$=="](r)||(t=e.$class()+"."+t),r.$set_state(p("***_state_updated_at-***",Date.now()+Math.random(),t,n))):r.$set_state(p(t,n))},q.$$arity=3),u(H["$method_defined?"]("render"))||e.def(H,"$render",N=function(){return this.$raise("no render defined")},N.$$arity=0),e.def(H,"$waiting_on_resources",C=function(){var e=this;return null==e.__hyperstack_component_waiting_on_resources&&(e.__hyperstack_component_waiting_on_resources=$),e.__hyperstack_component_waiting_on_resources},C.$$arity=0),e.def(H,"$__hyperstack_component_run_post_render_hooks",z=function(e){return this.$run_callback("__hyperstack_component_after_render_hook",e).$first()},z.$$arity=1),e.def(H,"$_run_before_render_callbacks",I=function(){var e=this;return null==e.__component_mounted&&(e.__component_mounted=$),u(e.__component_mounted)||e.$component_will_mount(),e.__component_mounted=!0},I.$$arity=0),e.def(H,"$_render_wrapper",D=function(){var e,t=this;return t.$_run_before_render_callbacks(),s(t,"observing",[l(["rendering"],{rendering:!0})],((e=function(){var t,n=null==e.$$s?this:e.$$s,r=$;return r=s(a(a(a(i(A,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[$],((t=function(){var e=null==t.$$s?this:t.$$s,n=$;return u(n=e.$render())?n:""}).$$s=n,t.$$arity=0,t)),u(r["$respond_to?"]("waiting_on_resources"))&&(n.__hyperstack_component_waiting_on_resources=r.$waiting_on_resources()),r}).$$s=t,e.$$arity=0,e))},D.$$arity=0),$&&"_render_wrapper"}(d[0],d)}(r[0],r)},Opal.modules["hyperstack/internal/component/should_component_update"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.send,i=e.truthy;return e.add_stubs(["$observing","$respond_to?","$!","$call_needs_update","$props_changed?","$native_state_changed?","$define_singleton_method","$needs_update?","$new","$!="]),function(t,o){var s=[$(t,"Hyperstack")].concat(o);return function(t,o){var s=[$(t,"Internal")].concat(o);return function(t,o){var s=[$(t,"Component")].concat(o);return function(t,o){var s,u,l,c,p=$(t,"ShouldComponentUpdate"),d=[p].concat(o);return e.def(p,"$should_component_update?",s=function(e,t){var r,$=this;return a($,"observing",[],((r=function(){var $=null==r.$$s?this:r.$$s,a=n;return i($["$respond_to?"]("needs_update?"))?$.$call_needs_update(e,t)["$!"]()["$!"]():i(a=$["$props_changed?"](e))?a:$["$native_state_changed?"](t)}).$$s=$,r.$$arity=0,r))},s.$$arity=2),e.def(p,"$call_needs_update",u=function(e,t){var r,$,i=this,o=n;return o=i,a(e,"define_singleton_method",["changed?"],((r=function(){var e=null==r.$$s?this:r.$$s;return o["$props_changed?"](e)}).$$s=i,r.$$arity=0,r)),a(t,"define_singleton_method",["changed?"],(($=function(){null==$.$$s||$.$$s;return o["$native_state_changed?"](t)}).$$s=i,$.$$arity=0,$)),i["$needs_update?"](e,t)},u.$$arity=2),e.def(p,"$native_state_changed?",l=function(e){var t=this,$=n;return null==t.__hyperstack_component_native&&(t.__hyperstack_component_native=n),$=r(d,"Hash").$new(t.__hyperstack_component_native.state),e["$!="]($)},l.$$arity=1),e.def(p,"$props_changed?",c=function(e){var t=this,$=n;return null==t.__hyperstack_component_native&&(t.__hyperstack_component_native=n),$=r(d,"Hash").$new(t.__hyperstack_component_native.props),e["$!="]($)},c.$$arity=1),n&&"props_changed?"}(s[0],s)}(s[0],s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/internal/component/tags"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.send,u=e.truthy,l=e.send2,c=e.find_super,p=e.klass;return e.add_stubs(["$+","$each","$define_method","$upcase","$render","$to_proc","$const_set","$new","$include","$import_native_component","$downcase","$=~","$include?","$create_element","$find_component","$find_name_and_parent","$extend","$private","$name","$split","$>","$length","$last","$[]","$inject","$const_get","$lookup_const","$!","$method_defined?","$raise","$_reactrb_import_component_class","$==","$reverse","$to_s","$class","$detect","$const_defined?","$respond_to?"]),function(r,p){var d=[o(r,"Hyperstack")].concat(p);(function(r,p){var d=[o(r,"Internal")].concat(p);(function(r,p){var d=[o(r,"Component")].concat(p);(function(r,p){var d,f,_,h,y,v,m=o(r,"Tags"),g=[m].concat(p);e.const_set(g[0],"HTML_TAGS",t(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],["circle","clipPath","defs","ellipse","g","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"])),s(i(g,"HTML_TAGS"),"each",[],((d=function(t){var n,r=null==d.$$s?this:d.$$s;return null==t&&(t=$),s(r,"define_method",[t.$upcase()],((n=function(){null==n.$$s||n.$$s;var r,a=n.$$p,o=a||$;return a&&(n.$$p=null),r=e.slice.call(arguments,0,arguments.length),s(i(g,"RenderingContext"),"render",[t].concat(e.to_a(r)),o.$to_proc())}).$$s=r,n.$$arity=-1,n)),r.$const_set(t.$upcase(),t)}).$$s=m,d.$$arity=1,d)),m.$const_set("FRAGMENT",s(i(g,"Class"),"new",[],((f=function(){var e,t=null==f.$$s?this:f.$$s;return t.$include(a(i(g,"Hyperstack"),"Component")),s(t,"render",[],((e=function(){null==e.$$s||e.$$s;return $}).$$s=t,e.$$arity=0,e)),a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"ReactWrapper").$import_native_component(t,React.Fragment)}).$$s=m,f.$$arity=0,f))),e.defs(m,"$html_tag_class_for",_=function(e){var t=$,n=$;return t=e.$downcase(),u(u(n=e["$=~"](/^[A-Z]+$/))?i(g,"HTML_TAGS")["$include?"](t):n)?i(g,"Object").$const_set(e,i(g,"ReactWrapper").$create_element(t)):$},_.$$arity=1),e.def(m,"$method_missing",h=function(t){var n,r=h.$$p,a=r||$,o=this,p=$;return r&&(h.$$p=null),r&&(h.$$p=null),n=e.slice.call(arguments,1,arguments.length),p=o.$find_component(t),u(p)?s(i(g,"RenderingContext"),"render",[p].concat(e.to_a(n)),a.$to_proc()):l(o,c(o,"method_missing",h,!1,!0),"method_missing",[t].concat(e.to_a(n)),r)},h.$$arity=-2),function(r,a){var o,l,c=[r].concat(a);e.def(r,"$included",o=function(t){var n,r,a,u=o.$$p,l=this,p=$,d=$,f=$;return u&&(o.$$p=null),r=l.$find_name_and_parent(t),n=e.to_ary(r),p=null==n[0]?$:n[0],d=null==n[1]?$:n[1],f=s(i(c,"Module"),"new",[],((a=function(){var n,r=null==a.$$s?this:a.$$s;return s(r,"define_method",[p],((n=function(){null==n.$$s||n.$$s;var r,a=n.$$p,o=a||$;return a&&(n.$$p=null),r=e.slice.call(arguments,0,arguments.length),s(i(c,"RenderingContext"),"render",[t].concat(e.to_a(r)),o.$to_proc())}).$$s=r,n.$$arity=-1,n))}).$$s=l,a.$$arity=0,a)),d.$extend(f)},o.$$arity=1),r.$private(),e.def(r,"$find_name_and_parent",l=function(e){var r,a=this,o=$,l=$,p=$;return o=u(l=e.$name())?e.$name().$split("::"):l,u(u(p=o)?n(o.$length(),1):p)?[o.$last(),s(o,"inject",[[i(c,"Module")]],(r=function(e,n){null==r.$$s||r.$$s;return null==e&&(e=$),null==n&&(n=$),t(e,[e.$last().$const_get(n)])},r.$$s=a,r.$$arity=2,r))["$[]"](-2)]:$},l.$$arity=1)}(e.get_singleton_class(m),g),m.$private(),e.def(m,"$find_component",y=function(e){var t=this,n=$,r=$,a=$;return n=t.$lookup_const(e),u(u(r=n)?n["$method_defined?"]("render")["$!"]():r)&&t.$raise(e+" does not appear to be a react component."),u(a=n)?a:i(g,"Object").$_reactrb_import_component_class(e)},y.$$arity=1),e.def(m,"$lookup_const",v=function(e){var n,r,o=this,l=$,c=$;return u(e["$=~"](/^[A-Z]/))?e["$=="]("FRAGMENT")?a(a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"Tags"),"FRAGMENT"):(l=s(o.$class().$name().$to_s().$split("::"),"inject",[[i(g,"Object")]],(n=function(e,r){null==n.$$s||n.$$s;return null==e&&(e=$),null==r&&(r=$),t(e,[e.$last().$const_get(r)])},n.$$s=o,n.$$arity=2,n)).$reverse(),c=s(l,"detect",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=$),t["$const_defined?"](e,!1)}).$$s=o,r.$$arity=1,r)),u(c)?c.$const_get(e,!1):$):$},v.$$arity=1)})(d[0],d)})(d[0],d)})(d[0],d)}(r[0],r),u(i(r,"Object")["$respond_to?"]("_reactrb_import_component_class"))?$:function(t,$super,n){var r,a=p(t,null,"Object");[a].concat(n);return e.defs(a,"$_reactrb_import_component_class",r=function(){return $},r.$$arity=1),$&&"_reactrb_import_component_class"}(r[0],0,r)},Opal.modules["hyperstack/component/event"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass;return e.add_stubs(["$include","$alias_native"]),function(t,o){var s=[a(t,"Hyperstack")].concat(o);return function(t,o){var s=[a(t,"Component")].concat(o);return function(t,$super,a){var o,s=i(t,null,"Event"),u=[s].concat(a);return s.$include(r($(u,"Native"),"Wrapper")),s.$alias_native("bubbles","bubbles"),s.$alias_native("cancelable","cancelable"),s.$alias_native("current_target","currentTarget"),s.$alias_native("default_prevented","defaultPrevented"),s.$alias_native("event_phase","eventPhase"),s.$alias_native("is_trusted?","isTrusted"),s.$alias_native("native_event","nativeEvent"),s.$alias_native("target","target"),s.$alias_native("timestamp","timeStamp"),s.$alias_native("event_type","type"),s.$alias_native("prevent_default","preventDefault"),s.$alias_native("stop_propagation","stopPropagation"),s.$alias_native("clipboard_data","clipboardData"),s.$alias_native("alt_key","altKey"),s.$alias_native("char_code","charCode"),s.$alias_native("ctrl_key","ctrlKey"),s.$alias_native("get_modifier_state","getModifierState"),s.$alias_native("key","key"),s.$alias_native("key_code","keyCode"),s.$alias_native("locale","locale"),s.$alias_native("location","location"),s.$alias_native("meta_key","metaKey"),s.$alias_native("repeat","repeat"),s.$alias_native("shift_key","shiftKey"),s.$alias_native("which","which"),s.$alias_native("related_target","relatedTarget"),s.$alias_native("button","button"),s.$alias_native("buttons","buttons"),s.$alias_native("client_x","clientX"),s.$alias_native("client_y","clientY"),s.$alias_native("get_modifier_state","getModifierState"),s.$alias_native("page_x","pageX"),s.$alias_native("page_y","pageY"),s.$alias_native("screen_x","screen_x"),s.$alias_native("screen_y","screen_y"),s.$alias_native("changed_touches","changedTouches"),s.$alias_native("target_touches","targetTouches"),s.$alias_native("touches","touches"),s.$alias_native("detail","detail"),s.$alias_native("view","view"),s.$alias_native("delta_mode","deltaMode"),s.$alias_native("delta_x","deltaX"),s.$alias_native("delta_y","deltaY"),s.$alias_native("delta_z","deltaZ"),e.const_set(u[0],"BUILT_IN_EVENTS",["onCopy","onCut","onPaste","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel"]),e.def(s,"$initialize",o=function(e){return this.native=e},o.$$arity=1),n&&"initialize"}(s[0],0,s)}(s[0],s)}(t[0],t)},Opal.modules["hyperstack/ext/component/object"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.klass,i=e.alias,o=e.truthy;return e.add_stubs(["$_reactrb_tag_original_const_missing","$html_tag_class_for","$raise","$object_id"]),function(t,$super,s){var u,l=a(t,null,"Object"),c=[l].concat(s);return function(t,$super,s){var u=a(t,null,"Object"),l=[u].concat(s);(function(t,a){var s,u=[t].concat(a);i(t,"_reactrb_tag_original_const_missing","const_missing"),e.def(t,"$const_missing",s=function(t){var a=this,i=n,s=n;try{return a.$_reactrb_tag_original_const_missing(t)}catch(l){if(!e.rescue(l,[$(u,"StandardError")]))throw l;i=l;try{return o(s=r(r(r($(u,"Hyperstack"),"Internal"),"Component"),"Tags").$html_tag_class_for(t))?s:a.$raise(i)}finally{e.pop_exception()}}},s.$$arity=1)})(e.get_singleton_class(u),l)}(c[0],0,c),e.def(l,"$to_key",u=function(){return this.$object_id()},u.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/kernel"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.send,i=e.truthy,o=e.alias;return e.add_stubs(["$tap","$new","$after","$resolve","$call"]),function(t,s){var u,l=$(t,"Kernel"),c=[l].concat(s);return e.def(l,"$pause",u=function(t){var $,o=u.$$p,s=o||n,l=this;return o&&(u.$$p=null),o&&(u.$$p=null),a(r(c,"Promise").$new(),"tap",[],(($=function(r){var o,u=null==$.$$s?this:$.$$s;return null==r&&(r=n),a(u,"after",[t],((o=function(){null==o.$$s||o.$$s;var t=n;return a(r,"resolve",e.to_a(i(t=s)?[s.$call()]:t))}).$$s=u,o.$$arity=0,o))}).$$s=l,$.$$arity=1,$))},u.$$arity=1),o(l,"busy_sleep","sleep"),o(l,"sleep","pause")}(t[0],t)},Opal.modules["hyperstack/ext/component/number"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return function(t,$super,$){var a,i=r(t,null,"Number");[i].concat($);return e.def(i,"$to_key",a=function(){return this},a.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/boolean"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return function(t,$super,$){var a,i=r(t,null,"Boolean");[i].concat($);return e.def(i,"$to_key",a=function(){return this},a.$$arity=0),n&&"to_key"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/array"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass),$=e.send,a=e.truthy;return e.add_stubs(["$to_enum","$size","$reject!","$<<"]),function(t,$super,i){var o,s=r(t,null,"Array");[s].concat(i);return e.def(s,"$extract!",o=function(){var t,r,i=o.$$p,s=i||n,u=this,l=n;return i&&(o.$$p=null),s===n?$(u,"to_enum",["extract!"],((t=function(){return(null==t.$$s?this:t.$$s).$size()}).$$s=u,t.$$arity=0,t)):(l=[],$(u,"reject!",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=n),a(e.yield1(s,t))?l["$<<"](t):n}).$$s=u,r.$$arity=1,r)),l)},o.$$arity=0),n&&"extract!"}(t[0],0,t)},Opal.modules["hyperstack/ext/component/enumerable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.hash2,o=e.send,s=e.truthy;return e.add_stubs(["$new","$private_constant","$each","$[]=","$-","$!=","$to_enum","$respond_to?","$size"]),function(n,u){var l,c=a(n,"Enumerable"),p=[c].concat(u);return e.const_set(p[0],"INDEX_WITH_DEFAULT",$(p,"Object").$new()),c.$private_constant("INDEX_WITH_DEFAULT"),e.def(c,"$index_with",l=function(n){var a,u,c,d=l.$$p,f=d||r,_=this,h=r;return d&&(l.$$p=null),null==n&&(n=$(p,"INDEX_WITH_DEFAULT")),f!==r?(h=i([],{}),o(_,"each",[],((a=function(n){null==a.$$s||a.$$s;var $=r;return null==n&&(n=r),$=[n,e.yield1(f,n)],o(h,"[]=",e.to_a($)),$[t($.length,1)]}).$$s=_,a.$$arity=1,a)),h):s(n["$!="]($(p,"INDEX_WITH_DEFAULT")))?(h=i([],{}),o(_,"each",[],((u=function($){null==u.$$s||u.$$s;var a=r;return null==$&&($=r),a=[$,n],o(h,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=_,u.$$arity=1,u)),h):o(_,"to_enum",["index_with"],((c=function(){var e=null==c.$$s?this:c.$$s;return s(e["$respond_to?"]("size"))?e.$size():r}).$$s=_,c.$$arity=0,c))},l.$$arity=-1),r&&"index_with"}(n[0],n)},Opal.modules["hyperstack/ext/component/time"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.klass);return e.add_stubs(["$to_json","$strftime"]),function(t,$super,$){var a,i=r(t,null,"Time");[i].concat($);return e.def(i,"$to_json",a=function(){return this.$strftime("%FT%T.%3N%z").$to_json()},a.$$arity=0),n&&"to_json"}(t[0],0,t)},Opal.modules["hyperstack/component/isomorphic_helpers"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$truthy=Opal.truthy,$range=Opal.range,$send=Opal.send,$klass=Opal.klass,$class_variable_set=Opal.class_variable_set,$class_variable_get=Opal.class_variable_get,$hash2=Opal.hash2;return Opal.add_stubs(["$require","$extend","$!","$!=","$unique_id","$on_opal_server?","$log","$new","$is_a?","$==","$production?","$env","$+","$[]","$class","$on_opal_client?","$join","$collect","$prerender_footer_blocks","$call","$attr_reader","$[]=","$-","$run","$each","$before_first_mount_blocks","$send_to_opal","$eval","$load!","$tr","$<<","$first","$send_to_server","$to_json","$parse","$controller","$context","$register_before_first_mount_block","$to_proc","$register_prerender_footer_block","$send","$result"]),self.$require("hyperstack/internal/component"),function($base,$parent_nesting){var self=$module($base,"Hyperstack"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"Component"),$nesting=[self].concat($parent_nesting);return function($base,$parent_nesting){var self=$module($base,"IsomorphicHelpers"),$nesting=[self].concat($parent_nesting),$IsomorphicHelpers_included$1,$IsomorphicHelpers_load_context$2,$IsomorphicHelpers_context$3,$IsomorphicHelpers_log$4,$IsomorphicHelpers_on_opal_server$ques$5,$IsomorphicHelpers_on_opal_client$ques$6,$IsomorphicHelpers_log$7,$IsomorphicHelpers_on_opal_server$ques$8,$IsomorphicHelpers_on_opal_client$ques$9,$IsomorphicHelpers_prerender_footers$10;return Opal.defs(self,"$included",$IsomorphicHelpers_included$1=function(e){return e.$extend($$($nesting,"ClassMethods"))},$IsomorphicHelpers_included$1.$$arity=1),Opal.defs(self,"$load_context",$IsomorphicHelpers_load_context$2=function(e,t){var n=this,r=nil,$=nil,a=nil;return null==n.context&&(n.context=nil),null==e&&(e=nil),null==t&&(t=nil),$truthy($truthy(r=$truthy($=e["$!"]())?$:n.context["$!"]())?r:n.context.$unique_id()["$!="](e))&&(a=function(){if($truthy(n["$on_opal_server?"]())){try{console.history=[]}catch(e){if(!Opal.rescue(e,[$$($nesting,"StandardError")]))throw e;Opal.pop_exception()}return"************************ React Prerendering Context Initialized "+t+" ***********************"}return"************************ React Browser Context Initialized ****************************"}(),n.$log(a),n.context=$$($nesting,"Context").$new(e)),!0},$IsomorphicHelpers_load_context$2.$$arity=-1),Opal.defs(self,"$context",$IsomorphicHelpers_context$3=function(){var e=this;return null==e.context&&(e.context=nil),e.context},$IsomorphicHelpers_context$3.$$arity=0),Opal.defs(self,"$log",$IsomorphicHelpers_log$4=function(e,t){var n=this,r=nil,$=nil,a=nil;return null==t&&(t="info"),$truthy(e["$is_a?"]($$($nesting,"Array")))||(e=[e]),$truthy($truthy(r=$truthy($=t["$=="]("info"))?$:t["$=="]("warning"))?$$($nesting,"Hyperstack").$env()["$production?"]():r)?nil:t["$=="]("info")?(a=$truthy(n["$on_opal_server?"]())?"background: #00FFFF; color: red":"background: #222; color: #bada55",e=$rb_plus([$rb_plus("%c",e["$[]"](0)),a],e["$[]"]($range(1,-1,!1))),console.log.apply(console,e)):t["$=="]("warning")?console.warn.apply(console,e):console.error.apply(console,e)},$IsomorphicHelpers_log$4.$$arity=-2),Opal.defs(self,"$on_opal_server?",$IsomorphicHelpers_on_opal_server$ques$5=function(){return"undefined"==typeof Opal.global.document},$IsomorphicHelpers_on_opal_server$ques$5.$$arity=0),Opal.defs(self,"$on_opal_client?",$IsomorphicHelpers_on_opal_client$ques$6=function(){return this["$on_opal_server?"]()["$!"]()},$IsomorphicHelpers_on_opal_client$ques$6.$$arity=0),Opal.def(self,"$log",$IsomorphicHelpers_log$7=function(){var e;return e=Opal.slice.call(arguments,0,arguments.length),$send($$($nesting,"IsomorphicHelpers"),"log",Opal.to_a(e))},$IsomorphicHelpers_log$7.$$arity=-1),Opal.def(self,"$on_opal_server?",$IsomorphicHelpers_on_opal_server$ques$8=function(){return this.$class()["$on_opal_server?"]()},$IsomorphicHelpers_on_opal_server$ques$8.$$arity=0),Opal.def(self,"$on_opal_client?",$IsomorphicHelpers_on_opal_client$ques$9=function(){return this.$class()["$on_opal_client?"]()},$IsomorphicHelpers_on_opal_client$ques$9.$$arity=0),Opal.defs(self,"$prerender_footers",$IsomorphicHelpers_prerender_footers$10=function(e){var t,n=this;return null==e&&(e=nil),$send($$($nesting,"Context").$prerender_footer_blocks(),"collect",[],(t=function(n){null==t.$$s||t.$$s;return null==n&&(n=nil),n.$call(e)},t.$$s=n,t.$$arity=1,t)).$join("\n")},$IsomorphicHelpers_prerender_footers$10.$$arity=-1),function(e,$super,t){var n,r,$,a,i,o,s,u,l,c=$klass(e,null,"Context"),p=[c].concat(t);c.$$prototype.unique_id=c.$$prototype.cname=c.$$prototype.ctx=nil,c.$attr_reader("controller"),c.$attr_reader("unique_id"),Opal.defs(c,"$define_isomorphic_method",n=function(e){var t=n.$$p,r=t||nil,$=nil,a=nil;return t&&(n.$$p=null),t&&(n.$$p=null),$class_variable_set(p[0],"@@ctx_methods",$truthy(null!=p[0].$$cvars["@@ctx_methods"]?"class variable":nil)&&$truthy($=$class_variable_get(p[0],"@@ctx_methods",!1))?$:$hash2([],{})),a=[e,r],$send($class_variable_get(p[0],"@@ctx_methods",!1),"[]=",Opal.to_a(a)),a[$rb_minus(a.length,1)]},n.$$arity=1),Opal.defs(c,"$before_first_mount_blocks",r=function(){var e=this,t=nil;return null==e.before_first_mount_blocks&&(e.before_first_mount_blocks=nil),e.before_first_mount_blocks=$truthy(t=e.before_first_mount_blocks)?t:[]},r.$$arity=0),Opal.defs(c,"$prerender_footer_blocks",$=function(){var e=this,t=nil;return null==e.prerender_footer_blocks&&(e.prerender_footer_blocks=nil),e.prerender_footer_blocks=$truthy(t=e.prerender_footer_blocks)?t:[]},$.$$arity=0),Opal.def(c,"$initialize",a=function(e,t,n,r){var $,a=this;return null==t&&(t=nil),null==n&&(n=nil),null==r&&(r=nil),a.unique_id=e,a.cname=r,$$$($$$($$(p,"Hyperstack"),"Application"),"Boot").$run($hash2(["context"],{context:a})),$send(a.$class().$before_first_mount_blocks(),"each",[],(($=function(e){var t=null==$.$$s?this:$.$$s;return null==e&&(e=nil),e.$call(t)}).$$s=a,$.$$arity=1,$))},a.$$arity=-2),Opal.def(c,"$load_opal_context",i=function(){var e=this;return e.$send_to_opal("load_context",e.unique_id,e.cname)},i.$$arity=0),Opal.def(c,"$eval",o=function(e){var t=this;return $truthy(t.ctx)?t.ctx.$eval(e):nil},o.$$arity=1),Opal.def(c,"$send_to_opal",s=function(e){var t,n,r=this,$=nil;return t=Opal.slice.call(arguments,1,arguments.length),$truthy(r.ctx)?($$$($$$($$$($$$($$(p,"Hyperstack"),"Internal"),"Component"),"Rails"),"ComponentLoader").$new(r.ctx)["$load!"](),$=$send(t,"collect",[],(n=function(e){null==n.$$s||n.$$s;return null==e&&(e=nil),'"'+(""+e).$tr('"',"'")+'"'},n.$$s=r,n.$$arity=1,n)).$join(", "),r.ctx.$eval("Opal.Hyperstack.$const_get('Component').$const_get('IsomorphicHelpers').$"+e+"("+$+")")):nil},s.$$arity=-2),Opal.defs(c,"$register_before_first_mount_block",u=function(){var e=u.$$p,t=e||nil,n=this;return e&&(u.$$p=null),e&&(u.$$p=null),n.$before_first_mount_blocks()["$<<"](t)},u.$$arity=0),Opal.defs(c,"$register_prerender_footer_block",l=function(){var e=l.$$p,t=e||nil,n=this;return e&&(l.$$p=null),e&&(l.$$p=null),n.$prerender_footer_blocks()["$<<"](t)},l.$$arity=0)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var self=$klass($base,$super,"IsomorphicProcCall"),$nesting=[self].concat($parent_nesting),$IsomorphicProcCall_result$23,$IsomorphicProcCall_initialize$24,$IsomorphicProcCall_when_on_client$25,$IsomorphicProcCall_send_to_server$26,$IsomorphicProcCall_when_on_server$27;self.$$prototype.result=self.$$prototype.name=nil,self.$attr_reader("context"),Opal.def(self,"$result",$IsomorphicProcCall_result$23=function(){var e=this;return $truthy(e.result)?e.result.$first():nil},$IsomorphicProcCall_result$23.$$arity=0),Opal.def(self,"$initialize",$IsomorphicProcCall_initialize$24=function(e,t,n){var r,$,a=this,i=nil;return r=Opal.slice.call(arguments,3,arguments.length),$=r,a.name=e,a.context=n,$send(t,"call",[a].concat(Opal.to_a($))),a.result=$truthy(i=a.result)?i:$send(a,"send_to_server",Opal.to_a($))},$IsomorphicProcCall_initialize$24.$$arity=-4),Opal.def(self,"$when_on_client",$IsomorphicProcCall_when_on_client$25=function(){var e=$IsomorphicProcCall_when_on_client$25.$$p,t=e||nil,n=this;return e&&($IsomorphicProcCall_when_on_client$25.$$p=null),e&&($IsomorphicProcCall_when_on_client$25.$$p=null),$truthy($$($nesting,"IsomorphicHelpers")["$on_opal_client?"]())?n.result=[t.$call()]:nil},$IsomorphicProcCall_when_on_client$25.$$arity=0),Opal.def(self,"$send_to_server",$IsomorphicProcCall_send_to_server$26=function $$send_to_server($a){var $post_args,args,self=this,method_string=nil;return $post_args=Opal.slice.call(arguments,0,arguments.length),args=$post_args,$truthy($$($nesting,"IsomorphicHelpers")["$on_opal_server?"]())?(method_string=$rb_plus($rb_plus($rb_plus($rb_plus("ServerSideIsomorphicMethod.",self.name),"("),args.$to_json()),")"),self.result=[$$($nesting,"JSON").$parse(eval(method_string))]):nil},$IsomorphicProcCall_send_to_server$26.$$arity=-1),Opal.def(self,"$when_on_server",$IsomorphicProcCall_when_on_server$27=function(){var e=$IsomorphicProcCall_when_on_server$27.$$p,t=e||nil,n=this,r=nil;return e&&($IsomorphicProcCall_when_on_server$27.$$p=null),e&&($IsomorphicProcCall_when_on_server$27.$$p=null),$truthy($truthy(r=$$($nesting,"IsomorphicHelpers")["$on_opal_client?"]())?r:$$($nesting,"IsomorphicHelpers")["$on_opal_server?"]())?nil:n.result=[t.$call().$to_json()]},$IsomorphicProcCall_when_on_server$27.$$arity=0)}($nesting[0],null,$nesting),function(e,t){var n,r,$,a,i,o,s,u=$module(e,"ClassMethods"),l=[u].concat(t);return Opal.def(u,"$on_opal_server?",n=function(){return $$(l,"IsomorphicHelpers")["$on_opal_server?"]()},n.$$arity=0),Opal.def(u,"$on_opal_client?",r=function(){return $$(l,"IsomorphicHelpers")["$on_opal_client?"]()},r.$$arity=0),Opal.def(u,"$log",$=function(){var e;return e=Opal.slice.call(arguments,0,arguments.length),$send($$(l,"IsomorphicHelpers"),"log",Opal.to_a(e))},$.$$arity=-1),Opal.def(u,"$controller",a=function(){return $$(l,"IsomorphicHelpers").$context().$controller()},a.$$arity=0),Opal.def(u,"$before_first_mount",i=function(){var e=i.$$p,t=e||nil;return e&&(i.$$p=null),e&&(i.$$p=null),$send($$$($$(l,"IsomorphicHelpers"),"Context"),"register_before_first_mount_block",[],t.$to_proc())},i.$$arity=0),Opal.def(u,"$prerender_footer",o=function(){var e=o.$$p,t=e||nil;return e&&(o.$$p=null),e&&(o.$$p=null),$send($$$($$(l,"IsomorphicHelpers"),"Context"),"register_prerender_footer_block",[],t.$to_proc())},o.$$arity=0),Opal.def(u,"$isomorphic_method",s=function(e){var t,n=s.$$p,r=n||nil,$=this;return n&&(s.$$p=null),n&&(s.$$p=null),$send($.$class(),"send",["define_method",e],((t=function(){var n,$=null==t.$$s?this:t.$$s;return n=Opal.slice.call(arguments,0,arguments.length),$send($$$($$(l,"IsomorphicHelpers"),"IsomorphicProcCall"),"new",[e,r,$].concat(Opal.to_a(n))).$result()}).$$s=$,t.$$arity=-1,t))},s.$$arity=1),nil&&"isomorphic_method"}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)}($nesting[0],$nesting)},Opal.modules["hyperstack/component/react_api"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var n=e.top,r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.send,u=e.truthy;return e.add_stubs(["$require","$+","$create_element","$to_proc","$raise","$to_n","$kind_of?","$!","$build"]),n.$require("native"),n.$require("active_support/core_ext/object/try"),n.$require("hyperstack/internal/component/tags"),function(n,r){var l=[o(n,"Hyperstack")].concat(r);return function(n,r){var l=[o(n,"Component")].concat(r);return function(n,r){var l,c,p,d,f,_,h,y,v,m=o(n,"ReactAPI"),g=[m].concat(r)
;return e.const_set(g[0],"ATTRIBUTES",t(["accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoPlay","cellPadding","cellSpacing","charSet","checked","classID","className","cols","colSpan","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","defer","dir","disabled","download","draggable","encType","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","height","hidden","href","hrefLang","htmlFor","httpEquiv","icon","id","label","lang","list","loop","manifest","marginHeight","marginWidth","max","maxLength","media","mediaGroup","method","min","multiple","muted","name","noValidate","open","pattern","placeholder","poster","preload","radioGroup","readOnly","rel","required","role","rows","rowSpan","sandbox","scope","scrolling","seamless","selected","shape","size","sizes","span","spellCheck","src","srcDoc","srcSet","start","step","style","tabIndex","target","title","type","useMap","value","width","wmode","dangerouslySetInnerHTML"],["clipPath","cx","cy","d","dx","dy","fill","fillOpacity","fontFamily","fontSize","fx","fy","gradientTransform","gradientUnits","markerEnd","markerMid","markerStart","offset","opacity","patternContentUnits","patternUnits","points","preserveAspectRatio","r","rx","ry","spreadMethod","stopColor","stopOpacity","stroke","strokeDasharray","strokeLinecap","strokeOpacity","strokeWidth","textAnchor","transform","version","viewBox","x1","x2","x","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlSpace","y1","y2","y"])),e.const_set(g[0],"HASH_ATTRIBUTES",["data","aria"]),e.const_set(g[0],"HTML_TAGS",a(a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"Tags"),"HTML_TAGS")),e.defs(m,"$html_tag?",l=function(e){var t=$;t=i(g,"HTML_TAGS");for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},l.$$arity=1),e.defs(m,"$html_attr?",c=function(e){var t=$;t=i(g,"ATTRIBUTES");for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},c.$$arity=1),e.defs(m,"$create_element",p=function(t){var n,r=p.$$p,o=r||$;return r&&(p.$$p=null),r&&(p.$$p=null),n=e.slice.call(arguments,1,arguments.length),s(a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"ReactWrapper"),"create_element",[t].concat(e.to_a(n)),o.$to_proc())},p.$$arity=-2),e.defs(m,"$render",d=function(t,n){var r=d.$$p,a=r||$,i=this,o=$,s=$;return r&&(d.$$p=null),u("undefined"==typeof ReactDOM)&&i.$raise("ReactDOM.render is not defined.  In React >= v15 you must import it with ReactDOM"),n=n.$$class?n[0]:n,a!==$?(o=function(){setTimeout(function(){e.yieldX(a,[])},0)},s=ReactDOM.render(t.$to_n(),n,o)):s=ReactDOM.render(t.$to_n(),n),u(null!==s)?u(s.__opalInstance!==undefined&&null!==s.__opalInstance)?s.__opalInstance:u(ReactDOM.findDOMNode!==undefined&&s.nodeType===undefined)?ReactDOM.findDOMNode(s):s:$},d.$$arity=2),e.defs(m,"$is_valid_element",f=function(e){var t=$;return console.error("Warning: `is_valid_element` is deprecated in favor of `is_valid_element?`."),u(t=e["$kind_of?"](a(a(i(g,"Hyperstack"),"Component"),"Element")))?React.isValidElement(e.$to_n()):t},f.$$arity=1),e.defs(m,"$is_valid_element?",_=function(e){var t=$;return u(t=e["$kind_of?"](a(a(i(g,"Hyperstack"),"Component"),"Element")))?React.isValidElement(e.$to_n()):t},_.$$arity=1),e.defs(m,"$render_to_string",h=function(e){var t,n=this;return console.error("Warning: `Hyperstack::Component::ReactAPI.render_to_string` is deprecated in favor of `React::Server.render_to_string`."),u(("undefined"==typeof ReactDOMServer)["$!"]())?s(a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"build",[],((t=function(){null==t.$$s||t.$$s;return ReactDOMServer.renderToString(e.$to_n())}).$$s=n,t.$$arity=0,t)):n.$raise("renderToString is not defined.  In React >= v15 you must import it with ReactDOMServer")},h.$$arity=1),e.defs(m,"$render_to_static_markup",y=function(e){var t,n=this;return console.error("Warning: `Hyperstack::Component::ReactAPI.render_to_static_markup` is deprecated in favor of `React::Server.render_to_static_markup`."),u(("undefined"==typeof ReactDOMServer)["$!"]())?s(a(a(a(i(g,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"build",[],((t=function(){null==t.$$s||t.$$s;return ReactDOMServer.renderToStaticMarkup(e.$to_n())}).$$s=n,t.$$arity=0,t)):n.$raise("renderToStaticMarkup is not defined.  In React >= v15 you must import it with ReactDOMServer")},y.$$arity=1),e.defs(m,"$unmount_component_at_node",v=function(e){var t=this;return u(("undefined"==typeof ReactDOM)["$!"]())?ReactDOM.unmountComponentAtNode(e.$$class?e[0]:e):t.$raise("unmountComponentAtNode is not defined.  In React >= v15 you must import it with ReactDOM")},v.$$arity=1),$&&"unmount_component_at_node"}(l[0],l)}(l[0],l)}(r[0],r)},Opal.modules["hyperstack/internal/component/top_level_rails_component"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.send;return e.add_stubs(["$include","$export_component","$param","$backtrace","$top_level_render","$start_with?","$<<","$const_get","$each","$search_path","$class","$name","$!=","$method_defined?","$render","$raise","$join","$search_path=","$-","$!","$include?","$add_to_react_search_path"]),function(t,n){var l=[i(t,"Hyperstack")].concat(n);(function(t,n){var l=[i(t,"Internal")].concat(n);(function(t,n){var l=[i(t,"Component")].concat(n);(function(t,$super,n){var i,l,c,p,d=o(t,null,"TopLevelRailsComponent"),f=[d].concat(n);d.$$prototype.ComponentName=d.$$prototype.RenderParams=d.$$prototype.Controller=r,d.$include($(a(f,"Hyperstack"),"Component")),e.defs(d,"$search_path",i=function(){var e=this,t=r;return null==e.search_path&&(e.search_path=r),e.search_path=s(t=e.search_path)?t:[a(f,"Object")]},i.$$arity=0),d.$export_component(),d.$param("component_name"),d.$param("controller"),d.$param("render_params"),d.$backtrace("off"),e.defs(d,"$allow_deprecated_render_definition?",l=function(){return!0},l.$$arity=0),e.def(d,"$render",c=function(){return this.$top_level_render()},c.$$arity=0),e.def(d,"$top_level_render",p=function(){var t,n,$=this,i=r,o=r,l=r;return i=[],o=r,s($.ComponentName["$start_with?"]("::"))?(i["$<<"]($.ComponentName),o=function(){try{return a(f,"Object").$const_get($.ComponentName)}catch(t){if(!e.rescue(t,[a(f,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}()):(function(){var n=e.new_brk();try{u($.$class().$search_path(),"each",[],((t=function($){var u=null==t.$$s?this:t.$$s;if(null==u.Controller&&(u.Controller=r),null==u.ComponentName&&(u.ComponentName=r),null==$&&($=r),i["$<<"]($.$name()+"::"+u.Controller+"::"+u.ComponentName),o=function(){try{return $.$const_get(u.Controller,!1).$const_get(u.ComponentName,!1)}catch(t){if(!e.rescue(t,[a(f,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}(),!s(o["$!="](r)))return r;e.brk(r,n)}).$$s=$,t.$$brk=n,t.$$arity=1,t))}catch(l){if(l===n)return l.$v;throw l}}(),s(o)||function(){var t=e.new_brk();try{u($.$class().$search_path(),"each",[],((n=function($){var u=null==n.$$s?this:n.$$s;if(null==u.ComponentName&&(u.ComponentName=r),null==$&&($=r),i["$<<"]($.$name()+"::"+u.ComponentName),o=function(){try{return $.$const_get(u.ComponentName,!1)}catch(t){if(!e.rescue(t,[a(f,"NameError")]))throw t;try{return r}finally{e.pop_exception()}}}(),!s(o["$!="](r)))return r;e.brk(r,t)}).$$s=$,n.$$brk=t,n.$$arity=1,n))}catch(l){if(l===t)return l.$v;throw l}}()),s(s(l=o)?o["$method_defined?"]("render"):l)?a(f,"RenderingContext").$render(o,$.RenderParams):$.$raise("Could not find component class '"+$.ComponentName+"' for @Controller '"+$.Controller+"' in any component directory. Tried ["+i.$join(", ")+"]")},p.$$arity=0)})(l[0],0,l)})(l[0],l)})(l[0],l)}(n[0],n),function(n,$super,i){var l,c=o(n,null,"Module"),p=[c].concat(i);e.def(c,"$add_to_react_search_path",l=function(n){var i=this,o=r;return null==n&&(n=r),s(n)?(o=[[i]],u($($($(a(p,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent"),"search_path=",e.to_a(o)),o[t(o.length,1)]):s($($($(a(p,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent").$search_path()["$include?"](i)["$!"]())?$($($(a(p,"Hyperstack"),"Internal"),"Component"),"TopLevelRailsComponent").$search_path()["$<<"](i):r},l.$$arity=-1)}(n[0],0,n),function(e,t){var n=i(e,"Components");[n].concat(t);return n.$add_to_react_search_path()}(n[0],n)},Opal.modules["hyperstack/component/while_loading"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.hash2,o=e.truthy;return e.add_stubs(["$WhileLoadingWrapper","$!","$on_opal_client?"]),function(t,s){var u=[a(t,"Hyperstack")].concat(s);return function(t,s){var u=[a(t,"Component")].concat(s);return function(t,s){var u,l,c,p=a(t,"WhileLoading"),d=[p].concat(s);if(e.def(p,"$__hyperstack_component_rescue_wrapper",u=function(e){var t=this;return r(r($(d,"Hyperstack"),"Internal"),"Component").$WhileLoadingWrapper(i(["child","children_elements"],{child:t,children_elements:e}))},u.$$arity=1),e.def(p,"$resources_loading?",l=function(){var e=this;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=n),e.__hyperstack_while_loading_waiting_on_resources},l.$$arity=0),e.def(p,"$resources_loaded?",c=function(){var e=this;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=n),e.__hyperstack_while_loading_waiting_on_resources["$!"]()},c.$$arity=0),!o(r(r($(d,"Hyperstack"),"Component"),"IsomorphicHelpers")["$on_opal_client?"]()))return n;{function f(e){e.message.match(/^Uncaught NotQuiet: /)&&e.preventDefault()}window.addEventListener("error",f)}}(u[0],u)}(u[0],u)}(t[0],t)},Opal.modules["hyperstack/component/free_render"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.send,o=e.alias,s=e.truthy;return e.add_stubs(["$instance_eval","$const_defined?","$const_get","$is_a?","$method_defined?","$include?","$render","$to_proc","$hyperstack_component_original_meth_missing"]),function(t,u){var l=[a(t,"Hyperstack")].concat(u);return function(t,u){var l=[a(t,"Component")].concat(u);return function(t,u){var l,c=a(t,"FreeRender"),p=[c].concat(u);return e.defs(c,"$included",l=function(t){var a,u=this;return i(t,"instance_eval",[],((a=function(){var t,u=null==a.$$s?this:a.$$s;return o(u,"hyperstack_component_original_meth_missing","method_missing"),e.def(u,"$method_missing",t=function(a){var o,u=t.$$p,l=u||n,c=this,d=n,f=n,_=n,h=n,y=n;return u&&(t.$$p=null),u&&(t.$$p=null),o=e.slice.call(arguments,1,arguments.length),s(s(d=s(f=c["$const_defined?"](a))?_=c.$const_get(a):f)?s(h=s(y=_["$is_a?"]($(p,"Class")))?_["$method_defined?"]("render"):y)?h:r(r(r(r($(p,"Hyperstack"),"Internal"),"Component"),"Tags"),"HTML_TAGS")["$include?"](_):d)?i(c,"render",[_].concat(e.to_a(o)),l.$to_proc()):i(c,"hyperstack_component_original_meth_missing",[a].concat(e.to_a(o)),l.$to_proc())},t.$$arity=-2),n&&"method_missing"}).$$s=u,a.$$arity=0,a))},l.$$arity=1),n&&"included"}(l[0],l)}(l[0],l)}(t[0],t)},Opal.modules["hyperstack/internal/component/rescue_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send,u=e.hash2,l=e.truthy;return e.add_stubs(["$include","$param","$render","$call","$attr_accessor","$RescueMetaWrapper","$after_error","$after_error_args","$run_callback","$after_error_args=","$-","$raise","$force_update!"]),function(n,c){var p=[i(n,"Hyperstack")].concat(c);return function(n,c){var p=[i(n,"Internal")].concat(c);return function(n,c){var p=[i(n,"Component")].concat(c);return function(e,$super,t){var n,i=o(e,null,"RescueMetaWrapper"),u=[i].concat(t);i.$include($(a(u,"Hyperstack"),"Component")),i.$param("children_elements"),s(i,"render",[],((n=function(){var e=null==n.$$s?this:n.$$s;return null==e.ChildrenElements&&(e.ChildrenElements=r),e.ChildrenElements.$call()}).$$s=i,n.$$arity=0,n))}(p[0],0,p),function(n,$super,i){var c,p,d=o(n,null,"RescueWrapper"),f=[d].concat(i);return function(e,t){[e].concat(t);e.$attr_accessor("after_error_args")}(e.get_singleton_class(d),f),d.$include($(a(f,"Hyperstack"),"Component")),d.$param("child"),d.$param("children_elements"),s(d,"render",[],((c=function(){var e=null==c.$$s?this:c.$$s;return null==e.ChildrenElements&&(e.ChildrenElements=r),e.$RescueMetaWrapper(u(["children_elements"],{children_elements:e.ChildrenElements}))}).$$s=d,c.$$arity=0,c)),s(d,"after_error",[],((p=function(n,$){var i,o,u=null==p.$$s?this:p.$$s,c=r,d=r,_=r,h=r;return null==u.Child&&(u.Child=r),null==n&&(n=r),null==$&&($=r),c=l(d=a(f,"RescueWrapper").$after_error_args())?d:[n,$],o=s(u.Child,"run_callback",["__hyperstack_component_rescue_hook",_].concat(e.to_a(c))),_=null==(i=e.to_ary(o))[0]?r:i[0],l(_)||(h=[c],s(a(f,"RescueWrapper"),"after_error_args=",e.to_a(h)),h[t(h.length,1)],u.$raise(n)),u.Child["$force_update!"]()}).$$s=d,p.$$arity=2,p))}(p[0],0,p)}(p[0],p)}(p[0],p)}(n[0],n)},Opal.modules["hyperstack/internal/component/while_loading_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send,u=e.truthy,l=e.hash2;return e.add_stubs(["$render","$!","$quiet?","$raise_if_not_quiet=","$-","$instance_eval","$mutate","$RescueMetaWrapper","$before_mount","$rescues","$class","$instance_variable_set"]),function(n,c){var p=[i(n,"Hyperstack")].concat(c);return function(n,c){var p=[i(n,"Internal")].concat(c);return function(n,c){var p=[i(n,"Component")].concat(c);return function(n,$super,i){var c,p,d=o(n,$super,"WhileLoadingWrapper"),f=[d].concat(i);return s(d,"render",[],((c=function(){var n,$=null==c.$$s?this:c.$$s,i=r,o=r;return null==$.waiting_on_resources&&($.waiting_on_resources=r),null==$.Child&&($.Child=r),null==$.ChildrenElements&&($.ChildrenElements=r),u(u(i=$.waiting_on_resources)?$["$quiet?"]()["$!"]():i)?(o=[!1],s(a(f,"RenderingContext"),"raise_if_not_quiet=",e.to_a(o)),o[t(o.length,1)]):($.waiting_on_resources=!1,s($.Child,"instance_eval",[],((n=function(){var e=null==n.$$s?this:n.$$s;return null==e.__hyperstack_while_loading_waiting_on_resources&&(e.__hyperstack_while_loading_waiting_on_resources=r),u(e.__hyperstack_while_loading_waiting_on_resources)&&e.$mutate(),e.__hyperstack_while_loading_waiting_on_resources=!1}).$$s=$,n.$$arity=0,n)),o=[!0],s(a(f,"RenderingContext"),"raise_if_not_quiet=",e.to_a(o)),o[t(o.length,1)]),$.$RescueMetaWrapper(l(["children_elements"],{children_elements:$.ChildrenElements}))}).$$s=d,c.$$arity=0,c)),s(d,"before_mount",[],((p=function(){var e,t=null==p.$$s?this:p.$$s,n=r;return null==t.Child&&(t.Child=r),n=t,s(t.Child.$class(),"rescues",[$(a(f,"RenderingContext"),"NotQuiet")],((e=function(){var t=null==e.$$s?this:e.$$s;return n.$instance_variable_set("@waiting_on_resources",!0),t.__hyperstack_while_loading_waiting_on_resources=!0}).$$s=t,e.$$arity=0,e))}).$$s=d,p.$$arity=0,p))}(p[0],a(p,"RescueWrapper"),p)}(p[0],p)}(p[0],p)}(n[0],n)},Opal.modules["hyperstack/component/version"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$,e.module);return function(t,r){var $=[n(t,"Hyperstack")].concat(r);return function(t,r){var $=[n(t,"Component")].concat(r);return e.const_set($[0],"VERSION","1.0.alpha1.8")}($[0],$)}(t[0],t)},Opal.modules["hyper-component"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$,e.$$),$=e.hash2;return e.add_stubs(["$require","$js_import","$import"]),t.$require("hyperstack/internal/component"),r(n,"Hyperstack").$js_import("react/react-source-browser",$(["client_only","defines"],{client_only:!0,defines:["ReactDOM","React"]})),r(n,"Hyperstack").$js_import("react/react-source-server",$(["server_only","defines"],{server_only:!0,defines:"React"})),r(n,"Hyperstack").$import("browser/delay",$(["client_only"],{client_only:!0})),r(n,"Hyperstack").$import("browser/interval",$(["client_only"],{client_only:!0})),r(n,"Hyperstack").$js_import("react_ujs",$(["defines"],{defines:"ReactRailsUJS"})),r(n,"Hyperstack").$import("hyper-component"),r(n,"Hyperstack").$import("hyperstack/component/auto-import"),t.$require("hyperstack/internal/callbacks"),t.$require("hyperstack/internal/auto_unmount"),t.$require("native"),t.$require("json"),t.$require("hyperstack/state/observer"),t.$require("hyperstack/internal/component/validator"),t.$require("hyperstack/component/element"),t.$require("hyperstack/internal/component/react_wrapper"),t.$require("hyperstack/component"),t.$require("hyperstack/internal/component/should_component_update"),t.$require("hyperstack/internal/component/tags"),t.$require("hyperstack/component/event"),t.$require("hyperstack/internal/component/rendering_context"),t.$require("hyperstack/ext/component/object"),t.$require("hyperstack/ext/component/kernel"),t.$require("hyperstack/ext/component/number"),t.$require("hyperstack/ext/component/boolean"),t.$require("hyperstack/ext/component/array"),t.$require("hyperstack/ext/component/enumerable"),t.$require("hyperstack/ext/component/time"),t.$require("hyperstack/component/isomorphic_helpers"),t.$require("hyperstack/component/react_api"),t.$require("hyperstack/internal/component/top_level_rails_component"),t.$require("hyperstack/component/while_loading"),t.$require("hyperstack/component/free_render"),t.$require("hyperstack/internal/component/rescue_wrapper"),t.$require("hyperstack/internal/component/while_loading_wrapper"),t.$require("hyperstack/component/version")},Opal.modules["hyperstack/component/auto-import"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.klass,i=e.alias,o=e.truthy,s=e.send,u=e.module;return e.add_stubs(["$_reactrb_original_const_missing","$import_const_from_native","$raise","$_reactrb_import_component_class","$_reactrb_original_method_missing","$to_proc","$render"]),function(t,$super,u){var l=a(t,null,"Object"),c=[l].concat(u);(function(t,a){var u,l,c,p=[t].concat(a);i(t,"_reactrb_original_const_missing","const_missing"),i(t,"_reactrb_original_method_missing","method_missing"),e.def(t,"$const_missing",u=function(t){var a=this,i=n,s=n;try{return a.$_reactrb_original_const_missing(t)}catch(u){if(!e.rescue(u,[$(p,"StandardError")]))throw u;i=u;try{return o(s=r(r(r($(p,"Hyperstack"),"Internal"),"Component"),"NativeLibrary").$import_const_from_native($(p,"Object"),t,!0))?s:a.$raise(i)}finally{e.pop_exception()}}},u.$$arity=1),e.def(t,"$_reactrb_import_component_class",l=function(e){var t=this;return r(r(r($(p,"Hyperstack"),"Internal"),"Component"),"NativeLibrary").$import_const_from_native(t,e,!1)},l.$$arity=1),e.def(t,"$method_missing",c=function(t){var a,i=c.$$p,u=i||n,l=this,d=n;return i&&(c.$$p=null),i&&(c.$$p=null),a=e.slice.call(arguments,1,arguments.length),d=l.$_reactrb_import_component_class(t),o(d)||s(l,"_reactrb_original_method_missing",[t].concat(e.to_a(a)),u.$to_proc()),s(r(r(r($(p,"Hyperstack"),"Internal"),"Component"),"RenderingContext"),"render",[d].concat(e.to_a(a)),u.$to_proc())},c.$$arity=-2)})(e.get_singleton_class(l),c)}(t[0],0,t),function(e,t){var i=[u(e,"Hyperstack")].concat(t);return function(e,t){var i=[u(e,"Internal")].concat(t);return function(e,t){var i=[u(e,"Component")].concat(t);return function(e,$super,t){[a(e,$super,"NativeLibrary")].concat(t);return n}(i[0],r(r($(i,"Hyperstack"),"Component"),"NativeLibrary"),i)}(i[0],i)}(i[0],i)}(t[0],t)},Opal.modules["hyperstack/internal/state/mapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.truthy,s=e.send;return e.add_stubs(["$+","$observed!","$class","$update_objects_to_observe","$-","$<<","$[]","$new_objects","$update_exclusions","$delay_updates?","$schedule_delayed_updater","$zero?","$key?","$current_observers","$each","$mutations","$remove_current_observers_and_objects","$delete","$[]=","$current_objects","$new","$raise","$empty?","$on_client?","$!=","$after","$run_delayed_updater","$observers_to_update","$include?","$tap"]),function(r,u){var l=[i(r,"Hyperstack")].concat(u);return function(r,u){var l=[i(r,"Internal")].concat(u);return function(r,u){var l=[i(r,"State")].concat(u);return function(r,u){var l=i(r,"Mapper"),c=[l].concat(u);return l.rendering_level=0,function(r,i){var u,l,c,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S=[r].concat(i);return e.def(r,"$observing",u=function(r,a,i,s){var l,c,p=u.$$p,d=p||$,f=this,_=$,h=$,y=$;return null==f.current_observer&&(f.current_observer=$),null==f.immediate_update&&(f.immediate_update=$),null==f.rendering_level&&(f.rendering_level=$),p&&(u.$$p=null),function(){try{return _=[f.current_observer,f.immediate_update],f.current_observer=r,f.immediate_update=o(h=a)?r:h,o(i)&&(f.rendering_level=t(f.rendering_level,1),f["$observed!"](r),f["$observed!"](r.$class())),y=e.yieldX(d,[]),o(s)&&f.$update_objects_to_observe(r),y}finally{c=_,l=e.to_ary(c),f.current_observer=null==l[0]?$:l[0],f.immediate_update=null==l[1]?$:l[1],o(i)&&(f.rendering_level=n(f.rendering_level,1))}}()},u.$$arity=4),e.def(r,"$observed!",l=function(e){var t=this;return null==t.current_observer&&(t.current_observer=$),o(t.current_observer)?(t.$new_objects()["$[]"](t.current_observer)["$<<"](e),o(t.$update_exclusions()["$[]"](e))?t.$update_exclusions()["$[]"](e)["$<<"](t.current_observer):$):$},l.$$arity=1),e.def(r,"$mutated!",c=function(e){var t,n=this;return null==n.ignore_mutations&&(n.ignore_mutations=$),null==n.rendering_level&&(n.rendering_level=$),o(n.ignore_mutations)?$:o(n["$delay_updates?"](e))?n.$schedule_delayed_updater(e):o(n.rendering_level["$zero?"]())&&o(n.$current_observers()["$key?"](e))?s(n.$current_observers()["$[]"](e),"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=$),n.$mutations([e])}).$$s=n,t.$$arity=1,t)):$},c.$$arity=1),e.def(r,"$observed?",p=function(e){return this.$current_observers()["$key?"](e)},p.$$arity=1),e.def(r,"$bulk_update",d=function(){var t=d.$$p,n=t||$,r=this,a=$;return null==r.bulk_update_flag&&(r.bulk_update_flag=$),t&&(d.$$p=null),function(){try{return a=r.bulk_update_flag,r.bulk_update_flag=!0,e.yieldX(n,[])}finally{r.bulk_update_flag=a}}()},d.$$arity=0),e.def(r,"$ignore_bulk_updates",f=function(){var t,n,r=f.$$p,a=r||$,i=this,o=$;return null==i.ignore_bulk_update_flag&&(i.ignore_bulk_update_flag=$),r&&(f.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,function(){try{return o=i.ignore_bulk_update_flag,i.ignore_bulk_update_flag=!0,e.yieldX(a,e.to_a(n))}finally{i.ignore_bulk_update_flag=o}}()},f.$$arity=-1),e.def(r,"$ignore_mutations",_=function(){var t=_.$$p,n=t||$,r=this,a=$;return null==r.ignore_mutations&&(r.ignore_mutations=$),t&&(_.$$p=null),function(){try{return a=r.ignore_mutations,r.ignore_mutations=!0,e.yieldX(n,[])}finally{r.ignore_mutations=a}}()},_.$$arity=0),e.def(r,"$update_objects_to_observe",h=function(t){var r,a=this,i=$,u=$;return null==a.current_observer&&(a.current_observer=$),null==t&&(t=a.current_observer),a.$remove_current_observers_and_objects(t),i=a.$new_objects().$delete(t),o(i)&&s(i,"each",[],((r=function(e){var n=null==r.$$s?this:r.$$s;return null==e&&(e=$),n.$current_observers()["$[]"](e)["$<<"](t)}).$$s=a,r.$$arity=1,r)),u=[t,i],s(a.$current_objects(),"[]=",e.to_a(u)),u[n(u.length,1)]},h.$$arity=-1),e.def(r,"$remove",y=function(e){var t=this;return null==t.current_observer&&(t.current_observer=$),null==t.removed_observers&&(t.removed_observers=$),null==e&&(e=t.current_observer),t.$remove_current_observers_and_objects(e),t.$new_objects().$delete(e),o(t.removed_observers)?t.removed_observers["$<<"](e):$},y.$$arity=-1),e.def(r,"$new_objects",v=function(){var t,r=this,i=$;return null==r.new_objects&&(r.new_objects=$),r.new_objects=o(i=r.new_objects)?i:s(a(S,"Hash"),"new",[],((t=function(r,i){null==t.$$s||t.$$s;var o=$;return null==r&&(r=$),null==i&&(i=$),o=[i,a(S,"Set").$new()],s(r,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=r,t.$$arity=2,t))},v.$$arity=0),e.def(r,"$current_observers",m=function(){var t,r=this,i=$;return null==r.current_observers&&(r.current_observers=$),r.current_observers=o(i=r.current_observers)?i:s(a(S,"Hash"),"new",[],((t=function(r,a){null==t.$$s||t.$$s;var i=$;return null==r&&(r=$),null==a&&(a=$),i=[a,[]],s(r,"[]=",e.to_a(i)),i[n(i.length,1)]}).$$s=r,t.$$arity=2,t))},m.$$arity=0),e.def(r,"$current_objects",g=function(){var t,r=this,i=$;return null==r.current_objects&&(r.current_objects=$),r.current_objects=o(i=r.current_objects)?i:s(a(S,"Hash"),"new",[],((t=function(r,a){null==t.$$s||t.$$s;var i=$;return null==r&&(r=$),null==a&&(a=$),i=[a,[]],s(r,"[]=",e.to_a(i)),i[n(i.length,1)]}).$$s=r,t.$$arity=2,t))},g.$$arity=0),e.def(r,"$update_exclusions",b=function(){var e=this,t=$;return null==e.update_exclusions&&(e.update_exclusions=$),e.update_exclusions=o(t=e.update_exclusions)?t:a(S,"Hash").$new()},b.$$arity=0),e.def(r,"$remove_current_observers_and_objects",w=function(e){var t,n=this,r=$;return o(e)||n.$raise("state management called outside of watch block"),r=n.$current_objects().$delete(e),o(r)?s(r,"each",[],((t=function(n){var r=null==t.$$s?this:t.$$s;return null==n&&(n=$),o(r.$current_observers()["$key?"](n))?(r.$current_observers()["$[]"](n).$delete(e),o(r.$current_observers()["$[]"](n)["$empty?"]())?r.$current_observers().$delete(n):$):$}).$$s=n,t.$$arity=1,t)):$},w.$$arity=1),e.def(r,"$delay_updates?",k=function(e){var t=this,n=$;return null==t.ignore_bulk_update_flag&&(t.ignore_bulk_update_flag=$),null==t.bulk_update_flag&&(t.bulk_update_flag=$),null==t.immediate_update&&(t.immediate_update=$),null==t.current_observer&&(t.current_observer=$),!o(t.ignore_bulk_update_flag)&&(!!o(t.bulk_update_flag)||!!o(a(S,"Hyperstack")["$on_client?"]())&&(o(n=t.immediate_update["$!="](t.current_observer))?n:t.current_observer["$!="](e)))},k.$$arity=1),e.def(r,"$schedule_delayed_updater",O=function(t){var r,i=this,u=$,l=$;return null==i.delayed_updater&&(i.delayed_updater=$),u=[t,a(S,"Set").$new()],s(i.$update_exclusions(),"[]=",e.to_a(u)),u[n(u.length,1)],i.delayed_updater=o(l=i.delayed_updater)?l:s(i,"after",[0],((r=function(){return(null==r.$$s?this:r.$$s).$run_delayed_updater()}).$$s=i,r.$$arity=0,r))},O.$$arity=1),e.def(r,"$run_delayed_updater",E=function(){var e,t=this,n=$;return null==t.update_exclusions&&(t.update_exclusions=$),function(){try{return n=t.update_exclusions,t.update_exclusions=t.delayed_updater=$,t.removed_observers=a(S,"Set").$new(),s(t.$observers_to_update(n),"each",[],((e=function(t,n){var r=null==e.$$s?this:e.$$s;return null==r.removed_observers&&(r.removed_observers=$),null==t&&(t=$),null==n&&(n=$),o(r.removed_observers["$include?"](t))?$:t.$mutations(n)}).$$s=t,e.$$arity=2,e))}finally{t.removed_observers=$}}()},E.$$arity=0),e.def(r,"$observers_to_update",x=function(t){var r,i,u=this;return s(s(a(S,"Hash"),"new",[],((r=function(t,i){null==r.$$s||r.$$s;var o=$;return null==t&&(t=$),null==i&&(i=$),o=[i,a(S,"Array").$new()],s(t,"[]=",e.to_a(o)),o[n(o.length,1)]}).$$s=u,r.$$arity=2,r)),"tap",[],((i=function(e){var n,r=null==i.$$s?this:i.$$s;return null==e&&(e=$),s(t,"each",[],((n=function(t,r){var a,i=null==n.$$s?this:n.$$s;return null==t&&(t=$),null==r&&(r=$),o(i.$current_observers()["$key?"](t))?s(i.$current_observers()["$[]"](t),"each",[],((a=function(n){null==a.$$s||a.$$s;return null==n&&(n=$),o(r["$include?"](n))?$:e["$[]"](n)["$<<"](t)}).$$s=i,a.$$arity=1,a)):$}).$$s=r,n.$$arity=2,n))}).$$s=u,i.$$arity=1,i))},x.$$arity=1),$&&"observers_to_update"}(e.get_singleton_class(l),c)}(l[0],l)}(l[0],l)}(l[0],l)}(r[0],r)},Opal.modules["hyperstack/internal/state/variable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.truthy,s=e.send;return e.add_stubs(["$new","$[]=","$-","$[]","$legacy_map","$observed!","$object_id","$mutated!","$observed?"]),function(n,u){var l=[i(n,"Hyperstack")].concat(u);return function(n,u){var l=[i(n,"Internal")].concat(u);return function(n,u){var l=[i(n,"State")].concat(u);return function(n,u){var l=i(n,"Variable"),c=[l].concat(u);return function(n,i){var u,l,c,p,d=[n].concat(i);return e.def(n,"$legacy_map",u=function(){var n,$=this,i=r;return null==$.legacy_map&&($.legacy_map=r),$.legacy_map=o(i=$.legacy_map)?i:s(a(d,"Hash"),"new",[],((n=function($,i){var o,u=null==n.$$s?this:n.$$s,l=r;return null==$&&($=r),null==i&&(i=r),l=[i,s(a(d,"Hash"),"new",[],(o=function(n,$){return null==o.$$s||o.$$s,null==n&&(n=r),null==$&&($=r),l=[$,a(d,"Array").$new()],s(n,"[]=",e.to_a(l)),l[t(l.length,1)]},o.$$s=u,o.$$arity=2,o))],s($,"[]=",e.to_a(l)),l[t(l.length,1)]}).$$s=$,n.$$arity=2,n))},u.$$arity=0),e.def(n,"$get",l=function(e,t){var n=r;return n=this.$legacy_map()["$[]"](e)["$[]"](t),$($($(a(d,"Hyperstack"),"Internal"),"State"),"Mapper")["$observed!"](n.$object_id()),n["$[]"](0)},l.$$arity=2),e.def(n,"$set",c=function(n,i,o,u){var l=r,c=r;return null==u&&(u=r),l=this.$legacy_map()["$[]"](n)["$[]"](i),c=[0,o],s(l,"[]=",e.to_a(c)),c[t(c.length,1)],$($($(a(d,"Hyperstack"),"Internal"),"State"),"Mapper")["$mutated!"](l.$object_id()),o},c.$$arity=-4),e.def(n,"$observed?",p=function(e,t){var n=r;return n=this.$legacy_map()["$[]"](e)["$[]"](t),$($($(a(d,"Hyperstack"),"Internal"),"State"),"Mapper")["$observed?"](n.$object_id())},p.$$arity=2),r&&"observed?"}(e.get_singleton_class(l),c)}(l[0],l)}(l[0],l)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/internal/receiver"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.truthy,o=e.send,s=e.lambda;return e.add_stubs(["$respond_to?","$unmounted?","$format_callback","$each","$on_dispatch","$call","$<<","$[]","$objects_to_unmount","$is_a?","$last","$pop","$send","$empty?","$raise"]),function(t,u){var l=[a(t,"Hyperstack")].concat(u);return function(t,u){var l=[a(t,"Internal")].concat(u);return function(t,u){var l=a(t,"Receiver"),c=[l].concat(u);return function(t,a){var u,l,c=[t].concat(a);return e.def(t,"$mount",u=function(t){var r,a,s=u.$$p,l=s||n,p=this,d=n,f=n;return s&&(u.$$p=null),s&&(u.$$p=null),r=e.slice.call(arguments,1,arguments.length),i(i(d=t["$respond_to?"]("unmounted?"))?t["$unmounted?"]():d)?n:(f=p.$format_callback(t,r),o(r,"each",[],((a=function(r){var s,u=null==a.$$s?this:a.$$s,p=n;return null==r&&(r=n),p=o(r,"on_dispatch",[],((s=function(t){null==s.$$s||s.$$s;return null==t&&(t=n),i(f)&&f.$call(t),i(l)?e.yield1(l,t):n}).$$s=u,s.$$arity=1,s)),i(t["$respond_to?"]("unmount"))?$(c,"AutoUnmount").$objects_to_unmount()["$[]"](t)["$<<"](p):n}).$$s=p,a.$$arity=1,a)))},u.$$arity=-2),e.def(t,"$format_callback",l=function(t,a){var u,l=this,p=n,d=n,f=n;return p=i(a.$last()["$is_a?"]($(c,"Symbol")))?(d=a.$pop(),s(((u=function(){var n;return null==u.$$s||u.$$s,n=e.slice.call(arguments,0,arguments.length),o(t,"send",[""+d].concat(e.to_a(n)))}).$$s=l,u.$$arity=-1,u))):i(a.$last()["$is_a?"]($(c,"Proc")))?a.$pop():n,i(a["$empty?"]())?(f="At least one operation must be passed in to the 'receives' macro",l.$raise(r(r($(c,"Legacy"),"Store"),"InvalidOperationError"),f)):p},l.$$arity=2),n&&"format_callback"}(e.get_singleton_class(l),c)}(l[0],l)}(l[0],l)}(t[0],t)},Opal.modules["hyperstack/state/observable"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.send,s=e.truthy;return e.add_stubs(["$bulk_update","$to_proc","$include","$each","$send","$mount","$call","$last","$observed!","$mutated!","$instance_variable_set","$!","$instance_variable_get","$==","$naming_convention","$!~","$!=","$lambda","$mutate","$singleton_class","$define_method","$tap","$instance_exec","$state_reader","$state_writer","$define_singleton_method","$respond_to?","$receives","$each_object","$<=","$zero?","$arity","$method","$initialize","$attr_reader"]),function(n,u){var l=[i(n,"Hyperstack")].concat(u);return function(n,u){var l=[i(n,"State")].concat(u);return function(n,u){var l,c,p=i(n,"Observable"),d=[p].concat(u);return e.defs(p,"$bulk_update",l=function(){var e=l.$$p,t=e||r;return e&&(l.$$p=null),e&&(l.$$p=null),o($($(a(d,"Internal"),"State"),"Mapper"),"bulk_update",[],t.$to_proc())},l.$$arity=0),e.defs(p,"$included",c=function(n){var i,u,l,p=c.$$p,f=this;return p&&(c.$$p=null),n.$include($(a(d,"Internal"),"AutoUnmount")),o(["singleton_method","method"],"each",[],((i=function(t){var u,l,c,p,f,_,h,y,v,m,g=null==i.$$s?this:i.$$s;return null==t&&(t=r),o(n,"send",["define_"+t,"receives"],((u=function(){var t,n=null==u.$$s?this:u.$$s,i=u.$$p,s=i||r;return i&&(u.$$p=null),t=e.slice.call(arguments,0,arguments.length),o($(a(d,"Internal"),"Receiver"),"mount",[n].concat(e.to_a(t)),s.$to_proc())}).$$s=g,u.$$arity=-1,u)),o(n,"send",["define_"+t,"observe"],((l=function(){var t,n,i=null==l.$$s?this:l.$$s,o=l.$$p,u=o||r,c=r;return o&&(l.$$p=null),
t=e.slice.call(arguments,0,arguments.length),n=t,c=s(u)?u.$call():n.$last(),$($(a(d,"Internal"),"State"),"Mapper")["$observed!"](i),c}).$$s=g,l.$$arity=-1,l)),o(n,"send",["define_"+t,"mutate"],((c=function(){var t,n,i=null==c.$$s?this:c.$$s,o=c.$$p,u=o||r,l=r;return o&&(c.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,l=s(u)?u.$call():n.$last(),$($(a(d,"Internal"),"State"),"Mapper")["$mutated!"](i),l}).$$s=g,c.$$arity=-1,c)),o(n,"send",["define_"+t,"toggle"],((p=function(e){var t=null==p.$$s?this:p.$$s,n=r;return null==e&&(e=r),e="@"+e,n=t.$instance_variable_set(e,t.$instance_variable_get(e)["$!"]()),$($(a(d,"Internal"),"State"),"Mapper")["$mutated!"](t),n}).$$s=g,p.$$arity=1,p)),o(n,"send",["define_"+t,"set"],((f=function(e){var t,n=null==f.$$s?this:f.$$s,$=r,i=r;return null==e&&(e=r),a(d,"Hyperstack").$naming_convention()["$=="]("prefix_state")?s(e["$!~"](/^_/))&&(e="_"+e):s(s($=a(d,"Hyperstack").$naming_convention()["$!="]("none"))?e["$!~"](/^[a-z]/):$)&&(i=!0),o(n,"lambda",[],((t=function(n){var $=null==t.$$s?this:t.$$s;return null==n&&(n=r),$[e]=n,s(i)?r:$.$mutate()}).$$s=n,t.$$arity=1,t))}).$$s=g,f.$$arity=1,f)),o(n.$singleton_class(),"send",["define_"+t,"observer"],((_=function(t){var n,i=null==_.$$s?this:_.$$s,s=_.$$p,u=s||r;return s&&(_.$$p=null),null==t&&(t=r),o(i,"define_method",[t],((n=function(){var t,r,i=null==n.$$s?this:n.$$s;return t=e.slice.call(arguments,0,arguments.length),o(o(i,"instance_exec",e.to_a(t),u.$to_proc()),"tap",[],((r=function(){var e=null==r.$$s?this:r.$$s;return $($(a(d,"Internal"),"State"),"Mapper")["$observed!"](e)}).$$s=i,r.$$arity=0,r))}).$$s=i,n.$$arity=-1,n))}).$$s=g,_.$$arity=1,_)),o(n.$singleton_class(),"send",["define_"+t,"mutator"],((h=function(t){var n,i=null==h.$$s?this:h.$$s,s=h.$$p,u=s||r;return s&&(h.$$p=null),null==t&&(t=r),o(i,"define_method",[t],((n=function(){var t,r,i=null==n.$$s?this:n.$$s;return t=e.slice.call(arguments,0,arguments.length),o(o(i,"instance_exec",e.to_a(t),u.$to_proc()),"tap",[],((r=function(){var e=null==r.$$s?this:r.$$s;return $($(a(d,"Internal"),"State"),"Mapper")["$mutated!"](e)}).$$s=i,r.$$arity=0,r))}).$$s=i,n.$$arity=-1,n))}).$$s=g,h.$$arity=1,h)),o(n.$singleton_class(),"send",["define_"+t,"state_reader"],((y=function(){var t,n,i=null==y.$$s?this:y.$$s;return t=e.slice.call(arguments,0,arguments.length),o(t,"each",[],((n=function(e){var t,i=null==n.$$s?this:n.$$s,u=r,l=r;return null==e&&(e=r),u=s(s(l=a(d,"Hyperstack").$naming_convention()["$=="]("prefix_state"))?e["$!~"](/^_/):l)?"_"+e:e,o(i,"define_method",[e],((t=function(){var e,n=null==t.$$s?this:t.$$s;return o(n.$instance_variable_get("@"+u),"tap",[],((e=function(){var t=null==e.$$s?this:e.$$s;return $($(a(d,"Internal"),"State"),"Mapper")["$observed!"](t)}).$$s=n,e.$$arity=0,e))}).$$s=i,t.$$arity=0,t))}).$$s=i,n.$$arity=1,n))}).$$s=g,y.$$arity=-1,y)),o(n.$singleton_class(),"send",["define_"+t,"state_writer"],((v=function(){var t,n,i=null==v.$$s?this:v.$$s;return t=e.slice.call(arguments,0,arguments.length),o(t,"each",[],((n=function(e){var t,i=null==n.$$s?this:n.$$s,u=r,l=r;return null==e&&(e=r),u=s(s(l=a(d,"Hyperstack").$naming_convention()["$=="]("prefix_state"))?e["$!~"](/^_/):l)?"_"+e:e,o(i,"define_method",[e+"="],((t=function(e){var n,i=null==t.$$s?this:t.$$s;return null==e&&(e=r),o(i.$instance_variable_set("@"+u,e),"tap",[],((n=function(){var e=null==n.$$s?this:n.$$s;return $($(a(d,"Internal"),"State"),"Mapper")["$mutated!"](e)}).$$s=i,n.$$arity=0,n))}).$$s=i,t.$$arity=1,t))}).$$s=i,n.$$arity=1,n))}).$$s=g,v.$$arity=-1,v)),o(n.$singleton_class(),"send",["define_"+t,"state_accessor"],((m=function(){var t,n=null==m.$$s?this:m.$$s;return t=e.slice.call(arguments,0,arguments.length),o(n,"state_reader",e.to_a(t)),o(n,"state_writer",e.to_a(t))}).$$s=g,m.$$arity=-1,m))}).$$s=f,i.$$arity=1,i)),o(n.$singleton_class(),"define_singleton_method",["receives"],((u=function(){null==u.$$s||u.$$s;var t,i=u.$$p,s=i||r;return i&&(u.$$p=null),t=e.slice.call(arguments,0,arguments.length),o($(a(d,"Internal"),"Receiver"),"mount",[n].concat(e.to_a(t)),s.$to_proc())}).$$s=f,u.$$arity=-1,u)),s(n["$respond_to?"]("__hyperstack_state_observer_included"))?r:(o(n,"receives",[$($(a(d,"Hyperstack"),"Application"),"Boot")],((l=function(){var e,$=null==l.$$s?this:l.$$s;return o(a(d,"ObjectSpace"),"each_object",[a(d,"Class")],((e=function($){null==e.$$s||e.$$s;return null==$&&($=r),s(t($,n))&&s($["$respond_to?"]("initialize"))&&s($.$method("initialize").$arity()["$zero?"]())?$.$initialize():r}).$$s=$,e.$$arity=1,e))}).$$s=f,l.$$arity=0,l)),n.$singleton_class().$attr_reader("__hyperstack_state_observer_included"))},c.$$arity=1),r&&"included"}(l[0],l)}(l[0],l)}(n[0],n)},Opal.modules["hyperstack/state/version"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$,e.module);return function(t,r){var $=[n(t,"Hyperstack")].concat(r);return function(t,r){var $=[n(t,"State")].concat(r);return e.const_set($[0],"VERSION","1.0.alpha1.8")}($[0],$)}(t[0],t)},Opal.modules["ext/object_space"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.send,s=e.truthy;return e.add_stubs(["$loop","$[]","$each","$const_get","$respond_to?","$include?","$is_a?","$<<","$+","$>=","$length"]),function(r,u){var l,c=i(r,"ObjectSpace"),p=[c].concat(u);return e.defs(c,"$each_object",l=function(r){var i,u=l.$$p,c=u||$,d=this,f=$,_=$;return u&&(l.$$p=null),u&&(l.$$p=null),f=[a(p,"Object")],_=0,function(){var u=e.new_brk();try{return o(d,"loop",[],((i=function(){var l,d=null==i.$$s?this:i.$$s,h=$,y=$,v=$;if(h=f["$[]"](_),e.yield1(c,h),y=s(v=h.$$const)?Object.keys(h.$$const):v,s(y)&&o(y,"each",[],((l=function(t){null==l.$$s||l.$$s;var n=$;null==t&&(t=$);try{return n=function(){try{return h.$const_get(t)}catch(n){if(!e.rescue(n,[a(p,"StandardError")]))throw n;try{return $}finally{e.pop_exception()}}}(),s(n.$$const)&&s(n["$respond_to?"]("is_a?"))?s(f["$include?"](n))?$:s(n["$is_a?"](r))?f["$<<"](n):$:$}catch(i){if(!e.rescue(i,[a(p,"Exception")]))throw i;i;try{return $}finally{e.pop_exception()}}}).$$s=d,l.$$arity=1,l)),_=t(_,1),!s(n(_,f.$length())))return $;e.brk($,u)}).$$s=d,i.$$brk=u,i.$$arity=0,i))}catch(l){if(l===u)return l.$v;throw l}}()},l.$$arity=1),$&&"each_object"}(r[0],r)},Opal.modules["hyper-state"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$,e.$$);return e.add_stubs(["$require","$import"]),t.$require("set"),t.$require("hyperstack-config"),r(n,"Hyperstack").$import("hyper-state"),t.$require("hyperstack/internal/callbacks"),t.$require("hyperstack/internal/auto_unmount"),t.$require("hyperstack/internal/state/mapper"),t.$require("hyperstack/internal/state/variable"),t.$require("hyperstack/internal/auto_unmount"),t.$require("hyperstack/internal/receiver"),t.$require("hyperstack/state/observable"),t.$require("hyperstack/state/observer"),t.$require("hyperstack/state/version"),t.$require("ext/object_space")},Opal.modules["hyper-operation/version"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$,e.module),r=e.klass;return function(t,$){var a=[n(t,"Hyperstack")].concat($);return function(t,$super,n){var $=[r(t,null,"Operation")].concat(n);return e.const_set($[0],"VERSION","1.0.alpha1.8")}(a[0],0,a)}(t[0],t)},Opal.modules.js=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.truthy,a=e.alias;return e.add_stubs(["$insert","$<<","$global","$extend"]),function(t,i){var o,s,u,l,c,p,d,f,_,h,y=r(t,"JS");[y].concat(i);return e.def(y,"$delete",o=function(e,t){return delete e[t]},o.$$arity=2),e.def(y,"$global",s=function(){return e.global},s.$$arity=0),e.def(y,"$in",u=function(e,t){return e in t},u.$$arity=2),e.def(y,"$instanceof",l=function(e,t){return e instanceof t},l.$$arity=2),$("function"==typeof Function.prototype.bind)?e.def(y,"$new",c=function(t){var r,a=c.$$p,i=a||n;return a&&(c.$$p=null),a&&(c.$$p=null),(r=e.slice.call(arguments,1,arguments.length)).$insert(0,this),$(i)&&r["$<<"](i),new(t.bind.apply(t,r))},c.$$arity=-2):e.def(y,"$new",p=function(t){var r,a,i=p.$$p,o=i||n,s=n;return i&&(p.$$p=null),i&&(p.$$p=null),r=e.slice.call(arguments,1,arguments.length),a=r,$(o)&&a["$<<"](o),(s=function(){return t.apply(this,a)}).prototype=t.prototype,new s},p.$$arity=-2),e.def(y,"$typeof",d=function(e){return typeof e},d.$$arity=1),e.def(y,"$void",f=function(){},f.$$arity=1),e.def(y,"$call",_=function(t){var r,a=_.$$p,i=a||n,o=this,s=n;return a&&(_.$$p=null),a&&(_.$$p=null),r=e.slice.call(arguments,1,arguments.length),s=o.$global(),$(i)&&r["$<<"](i),s[t].apply(s,r)},_.$$arity=-2),a(y,"method_missing","call"),e.def(y,"$[]",h=function(t){return e.global[t]},h.$$arity=1),y.$extend(y)}(t[0],t)},Opal.modules["bigdecimal/bignumber"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$),r=e.klass;return function(t,$super,n){var $=r(t,$super,"BigDecimal"),a=([$].concat(n),function(t){e.const_set($,"BigNumber",t())});a.amd=!0,function(e){"use strict";function t(e){function $(e,t){var n,r,i,o,s,u,l=this;if(!(l instanceof $))return U&&I(26,"constructor call without new",e),new $(e,t);if(null!=t&&W(t,2,64,A,"base")){if(u=e+"",10==(t|=0))return D(l=new $(e instanceof $?e:u),R+l.e+1,T);if((o="number"==typeof e)&&0*e!=0||!new RegExp("^-?"+(n="["+b.slice(0,t)+"]+")+"(?:\\."+n+")?$",37>t?"i":"").test(u))return f(l,u,o,t);o?(l.s=0>1/e?(u=u.slice(1),-1):1,U&&u.replace(/^0\.0*|\./,"").length>15&&I(A,g,e),o=!1):l.s=45===u.charCodeAt(0)?(u=u.slice(1),-1):1,u=a(u,10,t,l.s)}else{if(e instanceof $)return l.s=e.s,l.e=e.e,l.c=(e=e.c)?e.slice():e,void(A=0);if((o="number"==typeof e)&&0*e==0){if(l.s=0>1/e?(e=-e,-1):1,e===~~e){for(r=0,i=e;i>=10;i/=10,r++);return l.e=r,l.c=[e],void(A=0)}u=e+""}else{if(!_.test(u=e+""))return f(l,u,o);l.s=45===u.charCodeAt(0)?(u=u.slice(1),-1):1}}for((r=u.indexOf("."))>-1&&(u=u.replace(".","")),(i=u.search(/e/i))>0?(0>r&&(r=i),r+=+u.slice(i+1),u=u.substring(0,i)):0>r&&(r=u.length),i=0;48===u.charCodeAt(i);i++);for(s=u.length;48===u.charCodeAt(--s););if(u=u.slice(i,s+1))if(s=u.length,o&&U&&s>15&&I(A,g,l.s*e),(r=r-i-1)>F)l.c=l.e=null;else if(L>r)l.c=[l.e=0];else{if(l.e=r,l.c=[],i=(r+1)%k,0>r&&(i+=k),s>i){for(i&&l.c.push(+u.slice(0,i)),s-=k;s>i;)l.c.push(+u.slice(i,i+=k));u=u.slice(i),i=k-u.length}else i-=s;for(;i--;u+="0");l.c.push(+u)}else l.c=[l.e=0];A=0}function a(e,t,n,a){var i,o,s,l,p,d,f,_=e.indexOf("."),h=R,y=T;for(37>n&&(e=e.toLowerCase()),_>=0&&(s=Y,Y=0,e=e.replace(".",""),p=(f=new $(n)).pow(e.length-_),Y=s,f.c=u(c(r(p.c),p.e),10,t),f.e=f.c.length),o=s=(d=u(e,n,t)).length;0==d[--s];d.pop());if(!d[0])return"0";if(0>_?--o:(p.c=d,p.e=o,p.s=a,d=(p=H(p,f,h,y,t)).c,l=p.r,o=p.e),_=d[i=o+h+1],s=t/2,l=l||0>i||null!=d[i+1],l=4>y?(null!=_||l)&&(0==y||y==(p.s<0?3:2)):_>s||_==s&&(4==y||l||6==y&&1&d[i-1]||y==(p.s<0?8:7)),1>i||!d[0])e=l?c("1",-h):"0";else{if(d.length=i,l)for(--t;++d[--i]>t;)d[i]=0,i||(++o,d.unshift(1));for(s=d.length;!d[--s];);for(_=0,e="";s>=_;e+=b.charAt(d[_++]));e=c(e,o)}return e}function q(e,t,n,a){var i,o,s,u,p;if(n=null!=n&&W(n,0,8,a,m)?0|n:T,!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)p=r(e.c),p=19==a||24==a&&B>=s?l(p,s):c(p,s);else if(o=(e=D(new $(e),t,n)).e,u=(p=r(e.c)).length,19==a||24==a&&(o>=t||B>=o)){for(;t>u;p+="0",u++);p=l(p,o)}else if(t-=s,p=c(p,o),o+1>u){if(--t>0)for(p+=".";t--;p+="0");}else if((t+=o-u)>0)for(o+1==u&&(p+=".");t--;p+="0");return e.s<0&&i?"-"+p:p}function N(e,t){var n,r,a=0;for(s(e[0])&&(e=e[0]),n=new $(e[0]);++a<e.length;){if(!(r=new $(e[a])).s){n=r;break}t.call(n,r)&&(n=r)}return n}function C(e,t,n,r,$){return(t>e||e>n||e!=p(e))&&I(r,($||"decimal places")+(t>e||e>n?" out of range":" not an integer"),e),!0}function z(e,t,n){for(var r=1,$=t.length;!t[--$];t.pop());for($=t[0];$>=10;$/=10,r++);return(n=r+n*k-1)>F?e.c=e.e=null:L>n?e.c=[e.e=0]:(e.e=n,e.c=t),e}function I(e,t,n){var r=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][e]+"() "+t+": "+n);throw r.name="BigNumber Error",A=0,r}function D(e,t,n,r){var $,a,i,o,s,u,l,c=e.c,p=E;if(c){e:{for($=1,o=c[0];o>=10;o/=10,$++);if(0>(a=t-$))a+=k,i=t,l=(s=c[u=0])/p[$-i-1]%10|0;else if((u=h((a+1)/k))>=c.length){if(!r)break e;for(;c.length<=u;c.push(0));s=l=0,$=1,i=(a%=k)-k+1}else{for(s=o=c[u],$=1;o>=10;o/=10,$++);l=0>(i=(a%=k)-k+$)?0:s/p[$-i-1]%10|0}if(r=r||0>t||null!=c[u+1]||(0>i?s:s%p[$-i-1]),r=4>n?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(a>0?i>0?s/p[$-i]:0:c[u-1])%10&1||n==(e.s<0?8:7)),1>t||!c[0])return c.length=0,r?(t-=e.e+1,c[0]=p[(k-t%k)%k],e.e=-t||0):c[0]=e.e=0,e;if(0==a?(c.length=u,o=1,u--):(c.length=u+1,o=p[k-a],c[u]=i>0?y(s/p[$-i]%p[i])*o:0),r)for(;;){if(0==u){for(a=1,i=c[0];i>=10;i/=10,a++);for(i=c[0]+=o,o=1;i>=10;i/=10,o++);a!=o&&(e.e++,c[0]==w&&(c[0]=1));break}if(c[u]+=o,c[u]!=w)break;c[u--]=0,o=1}for(a=c.length;0===c[--a];c.pop());}e.e>F?e.c=e.e=null:e.e<L&&(e.c=[e.e=0])}return e}var H,A=0,j=$.prototype,M=new $(1),R=20,T=4,B=-7,P=21,L=-1e7,F=1e7,U=!0,W=C,K=!1,X=1,Y=100,V={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:" ",fractionGroupSize:0};return $.another=t,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=function(){var e,t,n=0,r={},$=arguments,a=$[0],i=a&&"object"==typeof a?function(){return a.hasOwnProperty(t)?null!=(e=a[t]):void 0}:function(){return $.length>n?null!=(e=$[n++]):void 0};return i(t="DECIMAL_PLACES")&&W(e,0,S,2,t)&&(R=0|e),r[t]=R,i(t="ROUNDING_MODE")&&W(e,0,8,2,t)&&(T=0|e),r[t]=T,i(t="EXPONENTIAL_AT")&&(s(e)?W(e[0],-S,0,2,t)&&W(e[1],0,S,2,t)&&(B=0|e[0],P=0|e[1]):W(e,-S,S,2,t)&&(B=-(P=0|(0>e?-e:e)))),r[t]=[B,P],i(t="RANGE")&&(s(e)?W(e[0],-S,-1,2,t)&&W(e[1],1,S,2,t)&&(L=0|e[0],F=0|e[1]):W(e,-S,S,2,t)&&(0|e?L=-(F=0|(0>e?-e:e)):U&&I(2,t+" cannot be zero",e))),r[t]=[L,F],i(t="ERRORS")&&(e===!!e||1===e||0===e?(A=0,W=(U=!!e)?C:o):U&&I(2,t+v,e)),r[t]=U,i(t="CRYPTO")&&(e===!!e||1===e||0===e?(K=!(!e||!d),e&&!K&&U&&I(2,"crypto unavailable",d)):U&&I(2,t+v,e)),r[t]=K,i(t="MODULO_MODE")&&W(e,0,9,2,t)&&(X=0|e),r[t]=X,i(t="POW_PRECISION")&&W(e,0,S,2,t)&&(Y=0|e),r[t]=Y,i(t="FORMAT")&&("object"==typeof e?V=e:U&&I(2,t+" not an object",e)),r[t]=V,r},$.max=function(){return N(arguments,j.lt)},$.min=function(){return N(arguments,j.gt)},$.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return y(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,a,i,o,s=0,u=[],l=new $(M);if(e=null!=e&&W(e,0,S,14)?0|e:R,i=h(e/k),K)if(d&&d.getRandomValues){for(n=d.getRandomValues(new Uint32Array(i*=2));i>s;)(o=131072*n[s]+(n[s+1]>>>11))>=9e15?(r=d.getRandomValues(new Uint32Array(2)),n[s]=r[0],n[s+1]=r[1]):(u.push(o%1e14),s+=2);s=i/2}else if(d&&d.randomBytes){for(n=d.randomBytes(i*=7);i>s;)(o=281474976710656*(31&n[s])+1099511627776*n[s+1]+4294967296*n[s+2]+16777216*n[s+3]+(n[s+4]<<16)+(n[s+5]<<8)+n[s+6])>=9e15?d.randomBytes(7).copy(n,s):(u.push(o%1e14),s+=7);s=i/7}else U&&I(14,"crypto unavailable",d);if(!s)for(;i>s;)9e15>(o=t())&&(u[s++]=o%1e14);for(i=u[--s],e%=k,i&&e&&(o=E[k-e],u[s]=y(i/o)*o);0===u[s];u.pop(),s--);if(0>s)u=[a=0];else{for(a=-1;0===u[0];u.shift(),a-=k);for(s=1,o=u[0];o>=10;o/=10,s++);k>s&&(a-=k-s)}return l.e=a,l.c=u,l}}(),H=function(){function e(e,t,n){var r,$,a,i,o=0,s=e.length,u=t%x,l=t/x|0;for(e=e.slice();s--;)o=(($=u*(a=e[s]%x)+(r=l*a+(i=e[s]/x|0)*u)%x*x+o)/n|0)+(r/x|0)+l*i,e[s]=$%n;return o&&e.unshift(o),e}function t(e,t,n,r){var $,a;if(n!=r)a=n>r?1:-1;else for($=a=0;n>$;$++)if(e[$]!=t[$]){a=e[$]>t[$]?1:-1;break}return a}function r(e,t,n,r){for(var $=0;n--;)e[n]-=$,$=e[n]<t[n]?1:0,e[n]=$*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.shift());}return function(a,i,o,s,u){var l,c,p,d,f,_,h,v,m,g,b,O,E,x,S,q,N,C=a.s==i.s?1:-1,z=a.c,I=i.c;if(!(z&&z[0]&&I&&I[0]))return new $(a.s&&i.s&&(z?!I||z[0]!=I[0]:I)?z&&0==z[0]||!I?0*C:C/0:NaN);for(m=(v=new $(C)).c=[],C=o+(c=a.e-i.e)+1,u||(u=w,c=n(a.e/k)-n(i.e/k),C=C/k|0),p=0;I[p]==(z[p]||0);p++);if(I[p]>(z[p]||0)&&c--,0>C)m.push(1),d=!0;else{for(x=z.length,q=I.length,p=0,C+=2,(f=y(u/(I[0]+1)))>1&&(I=e(I,f,u),z=e(z,f,u),q=I.length,x=z.length),E=q,b=(g=z.slice(0,q)).length;q>b;g[b++]=0);(N=I.slice()).unshift(0),S=I[0],I[1]>=u/2&&S++;do{if(f=0,0>(l=t(I,g,q,b))){if(O=g[0],q!=b&&(O=O*u+(g[1]||0)),(f=y(O/S))>1)for(f>=u&&(f=u-1),h=(_=e(I,f,u)).length,b=g.length;1==t(_,g,h,b);)f--,r(_,h>q?N:I,h,u),h=_.length,l=1;else 0==f&&(l=f=1),h=(_=I.slice()).length;if(b>h&&_.unshift(0),r(g,_,b,u),b=g.length,-1==l)for(;t(I,g,q,b)<1;)f++,r(g,b>q?N:I,b,u),b=g.length}else 0===l&&(f++,g=[0]);m[p++]=f,g[0]?g[b++]=z[E]||0:(g=[z[E]],b=1)}while((E++<x||null!=g[0])&&C--);d=null!=g[0],m[0]||m.shift()}if(u==w){for(p=1,C=m[0];C>=10;C/=10,p++);D(v,o+(v.e=p+c*k-1)+1,s,d)}else v.e=c,v.r=+d;return v}}(),f=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,o,s,u){var l,c=s?o:o.replace(a,"");if(r.test(c))i.s=isNaN(c)?null:0>c?-1:1;else{if(!s&&(c=c.replace(e,function(e,t,n){return l="x"==(n=n.toLowerCase())?16:"b"==n?2:8,u&&u!=l?e:t}),u&&(l=u,c=c.replace(t,"$1").replace(n,"0.$1")),o!=c))return new $(c,l);U&&I(A,"not a"+(u?" base "+u:"")+" number",o),i.s=null}i.c=i.e=null,A=0}}(),j.absoluteValue=j.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},j.ceil=function(){return D(new $(this),this.e+1,2)},j.comparedTo=j.cmp=function(e,t){return A=1,i(this,new $(e,t))},j.decimalPlaces=j.dp=function(){var e,t,r=this.c;if(!r)return null;if(e=((t=r.length-1)-n(this.e/k))*k,t=r[t])for(;t%10==0;t/=10,e--);return 0>e&&(e=0),e},j.dividedBy=j.div=function(e,t){return A=3,H(this,new $(e,t),R,T)},j.dividedToIntegerBy=j.divToInt=function(e,t){return A=4,H(this,new $(e,t),0,1)},j.equals=j.eq=function(e,t){return A=5,0===i(this,new $(e,t))},j.floor=function(){return D(new $(this),this.e+1,3)},j.greaterThan=j.gt=function(e,t){return A=6,i(this,new $(e,t))>0},j.greaterThanOrEqualTo=j.gte=function(e,t){return A=7,1===(t=i(this,new $(e,t)))||0===t},j.isFinite=function(){return!!this.c},j.isInteger=j.isInt=function(){return!!this.c&&n(this.e/k)>this.c.length-2},j.isNaN=function(){return!this.s},j.isNegative=j.isNeg=function(){return this.s<0},j.isZero=function(){return!!this.c&&0==this.c[0]},j.lessThan=j.lt=function(e,t){return A=8,i(this,new $(e,t))<0},j.lessThanOrEqualTo=j.lte=function(e,t){return A=9,-1===(t=i(this,new $(e,t)))||0===t},j.minus=j.sub=function(e,t){var r,a,i,o,s=this,u=s.s;if(A=10,t=(e=new $(e,t)).s,!u||!t)return new $(NaN);if(u!=t)return e.s=-t,s.plus(e);var l=s.e/k,c=e.e/k,p=s.c,d=e.c;if(!l||!c){if(!p||!d)return p?(e.s=-t,e):new $(d?s:NaN);if(!p[0]||!d[0])return d[0]?(e.s=-t,e):new $(p[0]?s:3==T?-0:0)}if(l=n(l),c=n(c),p=p.slice(),u=l-c){for((o=0>u)?(u=-u,i=p):(c=l,i=d),i.reverse(),t=u;t--;i.push(0));i.reverse()}else for(a=(o=(u=p.length)<(t=d.length))?u:t,u=t=0;a>t;t++)if(p[t]!=d[t]){o=p[t]<d[t];break}if(o&&(i=p,p=d,d=i,e.s=-e.s),(t=(a=d.length)-(r=p.length))>0)for(;t--;p[r++]=0);for(t=w-1;a>u;){if(p[--a]<d[a]){for(r=a;r&&!p[--r];p[r]=t);--p[r],p[a]+=w}p[a]-=d[a]}for(;0==p[0];p.shift(),--c);return p[0]?z(e,p,c):(e.s=3==T?-1:1,e.c=[e.e=0],e)},j.modulo=j.mod=function(e,t){var n,r,a=this;return A=11,e=new $(e,t),!a.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||a.c&&!a.c[0]?new $(a):(9==X?(r=e.s,e.s=1,n=H(a,e,0,3),e.s=r,n.s*=r):n=H(a,e,0,X),a.minus(n.times(e)))},j.negated=j.neg=function(){var e=new $(this);return e.s=-e.s||null,e},j.plus=j.add=function(e,t){var r,a=this,i=a.s;if(A=12,t=(e=new $(e,t)).s,!i||!t)return new $(NaN);if(i!=t)return e.s=-t,a.minus(e);var o=a.e/k,s=e.e/k,u=a.c,l=e.c;if(!o||!s){if(!u||!l)return new $(i/0);if(!u[0]||!l[0])return l[0]?e:new $(u[0]?a:0*i)}if(o=n(o),s=n(s),u=u.slice(),i=o-s){for(i>0?(s=o,r=l):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for(0>(i=u.length)-(t=l.length)&&(r=l,l=u,u=r,t=i),i=0;t;)i=(u[--t]=u[t]+l[t]+i)/w|0,u[t]%=w;return i&&(u.unshift(i),++s),z(e,u,s)},j.precision=j.sd=function(e){var t,n,r=this,$=r.c;if(null!=e&&e!==!!e&&1!==e&&0!==e&&(U&&I(13,"argument"+v,e),e!=!!e&&(e=null)),!$)return null;if(t=(n=$.length-1)*k+1,n=$[n]){for(;n%10==0;n/=10,t--);for(n=$[0];n>=10;n/=10,t++);}return e&&r.e+1>t&&(t=r.e+1),t},j.round=function(e,t){var n=new $(this);return(null==e||W(e,0,S,15))&&D(n,~~e+this.e+1,null!=t&&W(t,0,8,15,m)?0|t:T),n},j.shift=function(e){var t=this;return W(e,-O,O,16,"argument")?t.times("1e"+p(e)):new $(t.c&&t.c[0]&&(-O>e||e>O)?t.s*(0>e?0:1/0):t)},j.squareRoot=j.sqrt=function(){var e,t,a,i,o,s=this,u=s.c,l=s.s,c=s.e,p=R+4,d=new $("0.5");if(1!==l||!u||!u[0])return new $(!l||0>l&&(!u||u[0])?NaN:u?s:1/0);if(0==(l=Math.sqrt(+s))||l==1/0?(((t=r(u)).length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=n((c+1)/2)-(0>c||c%2),l==1/0?t="1e"+c:t=(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c,a=new $(t)):a=new $(l+""),a.c[0])for(3>(l=(c=a.e)+p)&&(l=0);;)if(o=a,a=d.times(o.plus(H(s,o,p,1))),r(o.c).slice(0,l)===(t=r(a.c)).slice(0,l)){if(a.e<c&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(D(a,a.e+R+2,1),e=!a.times(a).eq(s));break}if(!i&&(D(o,o.e+R+2,0),o.times(o).eq(s))){a=o;break}p+=4,l+=4,i=1}return D(a,a.e+R+1,T,e)},j.times=j.mul=function(e,t){var r,a,i,o,s,u,l,c,p,d,f,_,h,y,v,m=this,g=m.c,b=(A=17,e=new $(e,t)).c;if(!(g&&b&&g[0]&&b[0]))return!m.s||!e.s||g&&!g[0]&&!b||b&&!b[0]&&!g?e.c=e.e=e.s=null:(e.s*=m.s,g&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(a=n(m.e/k)+n(e.e/k),e.s*=m.s,l=g.length,(d=b.length)>l&&(h=g,g=b,b=h,i=l,l=d,d=i),i=l+d,h=[];i--;h.push(0));for(y=w,v=x,i=d;--i>=0;){for(r=0,f=b[i]%v,_=b[i]/v|0,o=i+(s=l);o>i;)r=((c=f*(c=g[--s]%v)+(u=_*c+(p=g[s]/v|0)*f)%v*v+h[o]+r)/y|0)+(u/v|0)+_*p,h[o--]=c%y;h[o]=r}return r?++a:h.shift(),z(e,h,a)},j.toDigits=function(e,t){var n=new $(this);return e=null!=e&&W(e,1,S,18,"precision")?0|e:null,t=null!=t&&W(t,0,8,18,m)?0|t:T,e?D(n,e,t):n},j.toExponential=function(e,t){return q(this,null!=e&&W(e,0,S,19)?1+~~e:null,t,19)},j.toFixed=function(e,t){return q(this,null!=e&&W(e,0,S,20)?~~e+this.e+1:null,t,20)},j.toFormat=function(e,t){var n=q(this,null!=e&&W(e,0,S,21)?~~e+this.e+1:null,t,21);if(this.c){var r,$=n.split("."),a=+V.groupSize,i=+V.secondaryGroupSize,o=V.groupSeparator,s=$[0],u=$[1],l=this.s<0,c=l?s.slice(1):s,p=c.length;if(i&&(r=a,a=i,i=r,p-=r),a>0&&p>0){for(r=p%a||a,s=c.substr(0,r);p>r;r+=a)s+=o+c.substr(r,a);i>0&&(s+=o+c.slice(r)),l&&(s="-"+s)}n=u?s+V.decimalSeparator+((i=+V.fractionGroupSize)?u.replace(new RegExp("\\d{"+i+"}\\B","g"),"$&"+V.fractionGroupSeparator):u):s}return n},j.toFraction=function(e){var t,n,a,i,o,s,u,l,c,p=U,d=this,f=d.c,_=new $(M),h=n=new $(M),y=u=new $(M);if(null!=e&&(U=!1,s=new $(e),U=p,(!(p=s.isInt())||s.lt(M))&&(U&&I(22,"max denominator "+(p?"out of range":"not an integer"),e),e=!p&&s.c&&D(s,s.e+1,1).gte(M)?s:null)),!f)return d.toString();for(c=r(f),i=_.e=c.length-d.e-1,_.c[0]=E[(o=i%k)<0?k+o:o],e=!e||s.cmp(_)>0?i>0?_:h:s,o=F,F=1/0,s=new $(c),u.c[0]=0;l=H(s,_,0,1),1!=(a=n.plus(l.times(y))).cmp(e);)n=y,y=a,h=u.plus(l.times(a=h)),u=a,_=s.minus(l.times(a=_)),s=a;return a=H(e.minus(n),y,0,1),u=u.plus(a.times(h)),n=n.plus(a.times(y)),u.s=h.s=d.s,t=H(h,y,i*=2,T).minus(d).abs().cmp(H(u,n,i,T).minus(d).abs())<1?[h.toString(),y.toString()]:[u.toString(),n.toString()],F=o,t},j.toNumber=function(){return+this},j.toPower=j.pow=function(e){var t,n,r=y(0>e?-e:+e),a=this;if(!W(e,-O,O,23,"exponent")&&(!isFinite(e)||r>O&&(e/=0)||parseFloat(e)!=e&&!(e=NaN)))return new $(Math.pow(+a,e));for(t=Y?h(Y/k+2):0,n=new $(M);;){if(r%2){if(!(n=n.times(a)).c)break;t&&n.c.length>t&&(n.c.length=t)}if(!(r=y(r/2)))break;a=a.times(a),t&&a.c&&a.c.length>t&&(a.c.length=t)}return 0>e&&(n=M.div(n)),t?D(n,Y,T):n},j.toPrecision=function(e,t){return q(this,null!=e&&W(e,1,S,24,"precision")?0|e:null,t,24)},j.toString=function(e){var t,n=this,$=n.s,i=n.e;return null===i?$?(t="Infinity",0>$&&(t="-"+t)):t="NaN":(t=r(n.c),t=null!=e&&W(e,2,64,25,"base")?a(c(t,i),0|e,10,$):B>=i||i>=P?l(t,i):c(t,i),0>$&&n.c[0]&&(t="-"+t)),t},j.truncated=j.trunc=function(){return D(new $(this),this.e+1,1)},j.valueOf=j.toJSON=function(){var e,t=this,n=t.e;return null===n?t.toString():(e=r(t.c),e=B>=n||n>=P?l(e,n):c(e,n),t.s<0?"-"+e:e)},null!=e&&$.config(e),$}function n(e){var t=0|e;return e>0||e===t?t:t-1}function r(e){for(var t,n,r=1,$=e.length,a=e[0]+"";$>r;){for(t=e[r++]+"",n=k-t.length;n--;t="0"+t);a+=t}for($=a.length;48===a.charCodeAt(--$););return a.slice(0,$+1||1)}function i(e,t){var n,r,$=e.c,a=t.c,i=e.s,o=t.s,s=e.e,u=t.e;if(!i||!o)return null;if(n=$&&!$[0],r=a&&!a[0],n||r)return n?r?0:-o:i;if(i!=o)return i;if(n=0>i,r=s==u,!$||!a)return r?0:!$^n?1:-1;if(!r)return s>u^n?1:-1;for(o=(s=$.length)<(u=a.length)?s:u,i=0;o>i;i++)if($[i]!=a[i])return $[i]>a[i]^n?1:-1;return s==u?0:s>u^n?1:-1}function o(e,t,n){return(e=p(e))>=t&&n>=e}function s(e){return"[object Array]"==Object.prototype.toString.call(e)}function u(e,t,n){for(var r,$,a=[0],i=0,o=e.length;o>i;){for($=a.length;$--;a[$]*=t);for(a[r=0]+=b.indexOf(e.charAt(i++));r<a.length;r++)a[r]>n-1&&(null==a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}function l(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(0>t?"e":"e+")+t}function c(e,t){var n,r;if(0>t){for(r="0.";++t;r+="0");e=r+e}else if(++t>(n=e.length)){for(r="0",t-=n;--t;r+="0");e+=r}else n>t&&(e=e.slice(0,t)+"."+e.slice(t));return e}function p(e){return 0>(e=parseFloat(e))?h(e):y(e)}var d,f,_=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,h=Math.ceil,y=Math.floor,v=" not a boolean or binary digit",m="rounding mode",g="number type has more than 15 significant digits",b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",w=1e14,k=14,O=9007199254740991,E=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],x=1e7,S=1e9;if("undefined"!=typeof crypto&&(d=crypto),"function"==typeof a&&a.amd)a(function(){return t()});else if("undefined"!=typeof module&&module.exports){if(module.exports=t(),!d)try{d=require("crypto")}catch(q){}}else e||(e=void 0!==$?$:Function("return this")()),e.BigNumber=t()}(this)}(t[0],n(t,"Numeric"),t)},Opal.modules.bigdecimal=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}var a,i=e.top,o=[],s=e.nil,u=(e.$$$,e.$$),l=e.klass,c=e.module,p=e.hash2,d=e.send,f=(e.hash,e.truthy),_=e.alias,h=e.send2,y=e.find_super;return e.add_stubs(["$require","$allocate","$initialize","$warn","$BigDecimal","$===","$attr_reader","$new","$class","$bignumber","$nan?","$nil?","$raise","$<","$coerce","$>","$mode","$>=","$==","$/","$zero?","$infinite?","$finite?"]),function(e,$super,t){[l(e,$super,"BigDecimal")].concat(t)}(o[0],u(o,"Numeric"),o),i.$require("js"),i.$require("bigdecimal/bignumber"),function(t,n){var r,$=c(t,"Kernel"),a=[$].concat(n);e.def($,"$BigDecimal",r=function(e,t){var n=s;return null==t&&(t=0),(n=u(a,"BigDecimal").$allocate()).$initialize(e,t),n},r.$$arity=-2)}(o[0],o),e.defs(u(o,"BigDecimal"),"$new",a=function(){var t,n,r,$,a=this;if(t=e.slice.call(arguments,0,arguments.length),null==(n=e.extract_kwargs(t)))n=p([],{});else if(!n.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return r=t,$=e.kwrestargs(n,{}),a.$warn("BigDecimal.new is deprecated; use BigDecimal() method instead.",p(["uplevel"],{uplevel:1})),d(a,"BigDecimal",e.to_a(r).concat([e.to_hash($)]))},a.$$arity=-1),function(a,$super,i){var o,c,p,d,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T=l(a,$super,"BigDecimal"),B=[T].concat(i);return e.const_set(B[0],"ROUND_MODE",256),e.const_set(B[0],"ROUND_UP",0),e.const_set(B[0],"ROUND_DOWN",1),e.const_set(B[0],"ROUND_CEILING",2),e.const_set(B[0],"ROUND_FLOOR",3),e.const_set(B[0],"ROUND_HALF_UP",4),e.const_set(B[0],"ROUND_HALF_DOWN",5),e.const_set(B[0],"ROUND_HALF_EVEN",6),e.const_set(B[0],"SIGN_NaN",0),e.const_set(B[0],"SIGN_POSITIVE_ZERO",1),e.const_set(B[0],"SIGN_NEGATIVE_ZERO",-1),e.const_set(B[0],"SIGN_POSITIVE_FINITE",2),e.const_set(B[0],"SIGN_NEGATIVE_FINITE",-2),e.const_set(B[0],"SIGN_POSITIVE_INFINITE",3),e.const_set(B[0],"SIGN_NEGATIVE_INFINITE",-3),e.defs(T,"$limit",o=function(e){var t=this;return null==t.digits&&(t.digits=s),null==e&&(e=s),f(e)&&(t.digits=e),t.digits},o.$$arity=-1),e.defs(T,"$mode",c=function(e,t){var n=this,r=s,$=s;return null==n.round_mode&&(n.round_mode=s),null==t&&(t=s),r=e,u(B,"ROUND_MODE")["$==="](r)?(f(t)&&(n.round_mode=t),f($=n.round_mode)?$:u(B,"ROUND_HALF_UP")):s},c.$$arity=-2),T.$attr_reader("bignumber"),e.def(T,"$initialize",p=function(e,t){return null==t&&(t=0),this.bignumber=u(B,"JS").$new(u(B,"BigNumber"),e)},p.$$arity=-2),e.def(T,"$==",d=function(e){var t=this,n=s;return n=e,t.$class()["$==="](n)?t.$bignumber().equals(e.$bignumber()):!!u(B,"Number")["$==="](n)&&t.$bignumber().equals(e)},d.$$arity=1),_(T,"===","=="),e.def(T,"$<=>",v=function(e){var t=this,n=s,r=s;return r=e,null===(n=t.$class()["$==="](r)?t.$bignumber().comparedTo(e.$bignumber()):u(B,"Number")["$==="](r)?t.$bignumber().comparedTo(e):s)?s:n},v.$$arity=1),e.def(T,"$<",m=function(e){var t=m.$$p,n=this,r=s,$=s;return t&&(m.$$p=null),!f(f(r=n["$nan?"]())?r:f($=e)?e["$nan?"]():$)&&h(n,y(n,"<",m,!1,!0),"<",[e],t)},m.$$arity=1),e.def(T,"$<=",g=function(e){var t=g.$$p,n=this,r=s,$=s;return t&&(g.$$p=null),!f(f(r=n["$nan?"]())?r:f($=e)?e["$nan?"]():$)&&h(n,y(n,"<=",g,!1,!0),"<=",[e],t)},g.$$arity=1),e.def(T,"$>",b=function(e){var t=b.$$p,n=this,r=s,$=s;return t&&(b.$$p=null),!f(f(r=n["$nan?"]())?r:f($=e)?e["$nan?"]():$)&&h(n,y(n,">",b,!1,!0),">",[e],t)},b.$$arity=1),e.def(T,"$>=",w=function(e){var t=w.$$p,n=this,r=s,$=s;return t&&(w.$$p=null),!f(f(r=n["$nan?"]())?r:f($=e)?e["$nan?"]():$)&&h(n,y(n,">=",w,!1,!0),">=",[e],t)},w.$$arity=1),e.def(T,"$abs",k=function(){var e=this;return e.$class().$new(e.$bignumber().abs())},k.$$arity=0),e.def(T,"$add",O=function(r,$){var a,i,o=this,l=s;return null==$&&($=0),f($["$nil?"]())&&o.$raise(u(B,"TypeError"),"wrong argument type nil (expected Fixnum)"),f(t($,0))&&o.$raise(u(B,"ArgumentError"),"argument must be positive"),i=o.$coerce(r),r=null==(a=e.to_ary(i))[0]?s:a[0],null==a[1]?s:a[1],l=o.$bignumber().plus(r.$bignumber()),f(n($,0))&&(l=l.toDigits($,o.$class().$mode(u(B,"ROUND_MODE")))),o.$class().$new(l)},O.$$arity=-2),_(T,"+","add"),e.def(T,"$ceil",E=function(e){var t=this;return null==e&&(e=s),f(t.$bignumber().isFinite())||t.$raise(u(B,"FloatDomainError"),"Computation results to 'Infinity'"),f(e["$nil?"]())?t.$bignumber().round(0,u(B,"ROUND_CEILING")).toNumber():f(r(e,0))?t.$class().$new(t.$bignumber().round(e,u(B,"ROUND_CEILING"))):t.$class().$new(t.$bignumber().round(0,u(B,"ROUND_CEILING")))},E.$$arity=-1),e.def(T,"$coerce",x=function(e){var t=this,n=s;return n=e,t.$class()["$==="](n)?[e,t]:u(B,"Number")["$==="](n)?[t.$class().$new(e),t]:t.$raise(u(B,"TypeError"),e.$class()+" can't be coerced into "+t.$class())},x.$$arity=1),e.def(T,"$div",S=function(t,n){var r,a,i=this,o=s;return null==n&&(n=s),n["$=="](0)?$(i,t):(a=i.$coerce(t),r=e.to_ary(a),t=null==r[0]?s:r[0],null==r[1]?s:r[1],f(f(o=i["$nan?"]())?o:t["$nan?"]())&&i.$raise(u(B,"FloatDomainError"),"Computation results to 'NaN'(Not a Number)"),f(n["$nil?"]())?(f(t["$zero?"]())&&i.$raise(u(B,"ZeroDivisionError"),"divided by 0"),f(i["$infinite?"]())&&i.$raise(u(B,"FloatDomainError"),"Computation results to 'Infinity'"),i.$class().$new(i.$bignumber().dividedToIntegerBy(t.$bignumber()))):i.$class().$new(i.$bignumber().dividedBy(t.$bignumber()).round(n,i.$class().$mode(u(B,"ROUND_MODE")))))},S.$$arity=-2),e.def(T,"$finite?",q=function(){return this.$bignumber().isFinite()},q.$$arity=0),e.def(T,"$infinite?",N=function(){var e=this,t=s;return f(f(t=e["$finite?"]())?t:e["$nan?"]())?s:f(e.$bignumber().isNegative())?-1:1},N.$$arity=0),e.def(T,"$minus",C=function(t){var n,r,$=this;return r=$.$coerce(t),t=null==(n=e.to_ary(r))[0]?s:n[0],null==n[1]?s:n[1],$.$class().$new($.$bignumber().minus(t.$bignumber()))},C.$$arity=1),_(T,"-","minus"),e.def(T,"$mult",z=function(t,n){var r,$,a=this;return null==n&&(n=s),$=a.$coerce(t),t=null==(r=e.to_ary($))[0]?s:r[0],null==r[1]?s:r[1],f(n["$nil?"]())?a.$class().$new(a.$bignumber().times(t.$bignumber())):a.$class().$new(a.$bignumber().times(t.$bignumber()).round(n,a.$class().$mode(u(B,"ROUND_MODE"))))},z.$$arity=-2),_(T,"*","mult"),e.def(T,"$nan?",I=function(){return this.$bignumber().isNaN()},I.$$arity=0),e.def(T,"$quo",D=function(t){var n,r,$=this;return r=$.$coerce(t),t=null==(n=e.to_ary(r))[0]?s:n[0],null==n[1]?s:n[1],$.$class().$new($.$bignumber().dividedBy(t.$bignumber()))},D.$$arity=1),_(T,"/","quo"),
e.def(T,"$sign",H=function(){var e=this;return f(e.$bignumber().isNaN())?u(B,"SIGN_NaN"):f(e.$bignumber().isZero())?f(e.$bignumber().isNegative())?u(B,"SIGN_NEGATIVE_ZERO"):u(B,"SIGN_POSITIVE_ZERO"):s},H.$$arity=0),e.def(T,"$sub",A=function(t){var n,r,$=this;return r=$.$coerce(t),t=null==(n=e.to_ary(r))[0]?s:n[0],null==n[1]?s:n[1],$.$class().$new($.$bignumber().minus(t.$bignumber()))},A.$$arity=2),e.def(T,"$to_f",j=function(){return this.$bignumber().toNumber()},j.$$arity=0),e.def(T,"$to_s",M=function(e){return null==e&&(e=""),this.$bignumber().toString()},M.$$arity=-1),_(T,"inspect","to_s"),e.def(T,"$zero?",R=function(){return this.$bignumber().isZero()},R.$$arity=0),s&&"zero?"}(o[0],u(o,"Numeric"),o)},Opal.modules["mutations/version"]=function(e){e.top;var t=[],n=(e.nil,e.$$$,e.$$,e.module);return function(t,r){var $=[n(t,"Mutations")].concat(r);return e.const_set($[0],"VERSION","0.9.1")}(t[0],t)},Opal.modules["mutations/exception"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=(e.$$,e.module),i=e.klass,o=e.send;return e.add_stubs(["$attr_accessor","$errors=","$-","$join","$message_list","$errors"]),function(n,s){var u=[a(n,"Mutations")].concat(s);return function(n,$super,$){var a,s,u=i(n,$super,"ValidationException");[u].concat($);return u.$attr_accessor("errors"),e.def(u,"$initialize",a=function(n){var $=r;return $=[n],o(this,"errors=",e.to_a($)),$[t($.length,1)]},a.$$arity=1),e.def(u,"$to_s",s=function(){return""+this.$errors().$message_list().$join("; ")},s.$$arity=0),r&&"to_s"}(u[0],$("::","StandardError"),u)}(n[0],n)},Opal.modules["mutations/errors"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.send,s=e.hash2,u=e.truthy;return e.add_stubs(["$tap","$new","$merge!","$[]","$titleize","$downcase","$to_s","$==","$end_with?","$message","$error_message_creator","$Array","$each","$symbolic","$[]=","$-","$concat","$message_list","$map","$flatten","$compact"]),function(n,l){var c=[a(n,"Mutations")].concat(l);return function(t,$super,n){var a,l,c,p=i(t,null,"DefaultErrorMessageCreator"),d=[p].concat(n);e.const_set(d[0],"MESSAGES",o($(d,"Hash").$new("is invalid"),"tap",[],((a=function(e){null==a.$$s||a.$$s;return null==e&&(e=r),e["$merge!"](s(["nils","required","string","integer","boolean","hash","array","model","date","before","after","empty","max_length","min_length","matches","in","class","min","max","new_records"],{nils:"can't be nil",required:"is required",string:"isn't a string",integer:"isn't an integer",boolean:"isn't a boolean",hash:"isn't a hash",array:"isn't an array",model:"isn't the right class",date:"date doesn't exist",before:"isn't before given date",after:"isn't after given date",empty:"can't be blank",max_length:"is too long",min_length:"is too short",matches:"isn't in the right format","in":"isn't an option","class":"isn't the right class",min:"is too small",max:"is too big",new_records:"isn't a saved model"}))}).$$s=p,a.$$arity=1,a))),e.def(p,"$message",l=function(e,t,n){var a=this,i=r;return null==n&&(n=s([],{})),u(n["$[]"]("index"))?a.$titleize(u(i=e)?i:"array")+"["+n["$[]"]("index")+"] "+$(d,"MESSAGES")["$[]"](t):a.$titleize(e)+" "+$(d,"MESSAGES")["$[]"](t)},l.$$arity=-3),e.def(p,"$titleize",c=function(e){return(e=e.$to_s().$downcase())["$=="]("id")?"ID":u(e["$end_with?"]("_id"))?e.$titleize()+" ID":e.$titleize()},c.$$arity=1)}(c[0],0,c),function(t,$super,n){var a,o,l,c,p=i(t,null,"ErrorAtom"),d=[p].concat(n);p.$$prototype.symbol=p.$$prototype.message=p.$$prototype.key=p.$$prototype.index=r,e.def(p,"$initialize",a=function(e,t,n){var r=this;return null==n&&(n=s([],{})),r.key=e,r.symbol=t,r.message=n["$[]"]("message"),r.index=n["$[]"]("index")},a.$$arity=-3),e.def(p,"$symbolic",o=function(){return this.symbol},o.$$arity=0),e.def(p,"$message",l=function(){var e=this,t=r;return e.message=u(t=e.message)?t:$(d,"Mutations").$error_message_creator().$message(e.key,e.symbol,s(["index"],{index:e.index}))},l.$$arity=0),e.def(p,"$message_list",c=function(){var e=this;return e.$Array(e.$message())},c.$$arity=0)}(c[0],0,c),function(n,$super,a){var s,u,l,c=i(n,$super,"ErrorHash"),p=[c].concat(a);e.def(c,"$symbolic",s=function(){var n,a=this;return o($(p,"HashWithIndifferentAccess").$new(),"tap",[],((n=function($){var a,i=null==n.$$s?this:n.$$s;return null==$&&($=r),o(i,"each",[],((a=function(n,i){null==a.$$s||a.$$s;var s=r;return null==n&&(n=r),null==i&&(i=r),s=[n,i.$symbolic()],o($,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,a.$$arity=2,a))}).$$s=a,n.$$arity=1,n))},s.$$arity=0),e.def(c,"$message",u=function(){var n,a=this;return o($(p,"HashWithIndifferentAccess").$new(),"tap",[],((n=function($){var a,i=null==n.$$s?this:n.$$s;return null==$&&($=r),o(i,"each",[],((a=function(n,i){null==a.$$s||a.$$s;var s=r;return null==n&&(n=r),null==i&&(i=r),s=[n,i.$message()],o($,"[]=",e.to_a(s)),s[t(s.length,1)]}).$$s=i,a.$$arity=2,a))}).$$s=a,n.$$arity=1,n))},u.$$arity=0),e.def(c,"$message_list",l=function(){var e,t=this,n=r;return n=[],o(t,"each",[],((e=function(t,$){null==e.$$s||e.$$s;return null==t&&(t=r),null==$&&($=r),n.$concat($.$message_list())}).$$s=t,e.$$arity=2,e)),n},l.$$arity=0)}(c[0],$(c,"Hash"),c),function(t,$super,n){var $,a,s,l=i(t,$super,"ErrorArray");[l].concat(n);return e.def(l,"$symbolic",$=function(){var e,t=this;return o(t,"map",[],((e=function(t){null==e.$$s||e.$$s;var n=r;return null==t&&(t=r),u(n=t)?t.$symbolic():n}).$$s=t,e.$$arity=1,e))},$.$$arity=0),e.def(l,"$message",a=function(){var e,t=this;return o(t,"map",[],((e=function(t){null==e.$$s||e.$$s;var n=r;return null==t&&(t=r),u(n=t)?t.$message():n}).$$s=t,e.$$arity=1,e))},a.$$arity=0),e.def(l,"$message_list",s=function(){var e,t=this;return o(t.$compact(),"map",[],(e=function(t){null==e.$$s||e.$$s;return null==t&&(t=r),t.$message_list()},e.$$s=t,e.$$arity=1,e)).$flatten()},s.$$arity=0),r&&"message_list"}(c[0],$(c,"Array"),c)}(n[0],n)},Opal.modules["mutations/input_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$,e.module),a=e.klass,i=e.truthy,o=e.hash2,s=e.send;return e.add_stubs(["$attr_accessor","$merge","$default_options","$class","$options=","$-","$has_key?","$options","$[]","$!"]),function(n,u){var l=[$(n,"Mutations")].concat(u);return function(n,$super,$){var u,l,c,p,d,f,_,h,y=a(n,null,"InputFilter");[y].concat($);return e.defs(y,"$default_options",u=function(){var e=this,t=r;return null==e.default_options&&(e.default_options=r),e.default_options=i(t=e.default_options)?t:o([],{})},u.$$arity=0),y.$attr_accessor("options"),e.def(y,"$initialize",l=function(n){var $=this,a=r,u=r;return null==n&&(n=o([],{})),a=[(i(u=$.$class().$default_options())?u:o([],{})).$merge(n)],s($,"options=",e.to_a(a)),a[t(a.length,1)]},l.$$arity=-1),e.def(y,"$filter",c=function(e){return[e,r]},c.$$arity=1),e.def(y,"$has_default?",p=function(){return this.$options()["$has_key?"]("default")},p.$$arity=0),e.def(y,"$default",d=function(){return this.$options()["$[]"]("default")},d.$$arity=0),e.def(y,"$discard_nils?",f=function(){return this.$options()["$[]"]("nils")["$!"]()},f.$$arity=0),e.def(y,"$discard_empty?",_=function(){return this.$options()["$[]"]("discard_empty")},_.$$arity=0),e.def(y,"$discard_invalid?",h=function(){return this.$options()["$[]"]("discard_invalid")},h.$$arity=0),r&&"discard_invalid?"}(l[0],0,l)}(n[0],n)},Opal.modules["mutations/hash_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.send,s=e.hash2,u=e.send2,l=e.find_super,c=e.truthy;return e.add_stubs(["$define_method","$to_sym","$new","$to_proc","$[]=","$-","$attr_accessor","$instance_eval","$each_pair","$optional_inputs","$required_inputs","$keys","$nil?","$[]","$options","$respond_to?","$is_a?","$with_indifferent_access","$to_hash","$each","$==","$has_key?","$filter","$!","$discard_invalid?","$delete","$discard_empty?","$discard_nils?","$has_default?","$default","$any?"]),function(n,p){var d=[a(n,"Mutations")].concat(p);return function(n,$super,a){var p,d,f,_,h,y,v,m,g,b,w,k=i(n,$super,"HashFilter"),O=[k].concat(a);return k.$$prototype.required_inputs=k.$$prototype.optional_inputs=k.$$prototype.current_inputs=r,e.defs(k,"$register_additional_filter",p=function(n,$){var a,i=p.$$p,u=this;return i&&(p.$$p=null),o(u,"define_method",[$],((a=function($,i){var u=null==a.$$s?this:a.$$s,l=a.$$p,c=l||r,p=r;return null==u.current_inputs&&(u.current_inputs=r),l&&(a.$$p=null),null==$&&($=r),null==i&&(i=s([],{})),p=[$.$to_sym(),o(n,"new",[i],c.$to_proc())],o(u.current_inputs,"[]=",e.to_a(p)),p[t(p.length,1)]}).$$s=u,a.$$arity=-2,a))},p.$$arity=2),k.default_options=s(["nils"],{nils:!1}),k.$attr_accessor("optional_inputs"),k.$attr_accessor("required_inputs"),e.def(k,"$initialize",d=function(e){var t=d.$$p,n=t||r,$=this;return t&&(d.$$p=null),t&&(d.$$p=null),null==e&&(e=s([],{})),u($,l($,"initialize",d,!1,!0),"initialize",[e],null),$.optional_inputs=s([],{}),$.required_inputs=s([],{}),$.current_inputs=$.required_inputs,n!==r?o($,"instance_eval",[],n.$to_proc()):r},d.$$arity=-1),e.def(k,"$dup",f=function(){var n,a,i=this,s=r;return s=$(O,"HashFilter").$new(),o(i.optional_inputs,"each_pair",[],((n=function($,a){null==n.$$s||n.$$s;var i=r;return null==$&&($=r),null==a&&(a=r),i=[$,a],o(s.$optional_inputs(),"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=i,n.$$arity=2,n)),o(i.required_inputs,"each_pair",[],((a=function(n,$){null==a.$$s||a.$$s;var i=r;return null==n&&(n=r),null==$&&($=r),i=[n,$],o(s.$required_inputs(),"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=i,a.$$arity=2,a)),s},f.$$arity=0),e.def(k,"$required",_=function(){var e=_.$$p,t=e||r,n=this;return e&&(_.$$p=null),e&&(_.$$p=null),n.current_inputs=n.required_inputs,o(n,"instance_eval",[],t.$to_proc())},_.$$arity=0),e.def(k,"$optional",h=function(){var e=h.$$p,t=e||r,n=this;return e&&(h.$$p=null),e&&(h.$$p=null),n.current_inputs=n.optional_inputs,o(n,"instance_eval",[],t.$to_proc())},h.$$arity=0),e.def(k,"$required_keys",y=function(){return this.required_inputs.$keys()},y.$$arity=0),e.def(k,"$optional_keys",v=function(){return this.optional_inputs.$keys()},v.$$arity=0),e.def(k,"$hash",m=function(n,a){var i=m.$$p,u=i||r,l=this,c=r;return i&&(m.$$p=null),i&&(m.$$p=null),null==a&&(a=s([],{})),c=[n.$to_sym(),o($(O,"HashFilter"),"new",[a],u.$to_proc())],o(l.current_inputs,"[]=",e.to_a(c)),c[t(c.length,1)]},m.$$arity=-2),e.def(k,"$model",g=function(n,a){var i=this,u=r;return null==a&&(a=s([],{})),u=[n.$to_sym(),$(O,"ModelFilter").$new(n.$to_sym(),a)],o(i.current_inputs,"[]=",e.to_a(u)),u[t(u.length,1)]},g.$$arity=-2),e.def(k,"$array",b=function(n,a){var i=b.$$p,u=i||r,l=this,c=r,p=r;return i&&(b.$$p=null),i&&(b.$$p=null),null==a&&(a=s([],{})),c=n.$to_sym(),p=[n.$to_sym(),o($(O,"ArrayFilter"),"new",[c,a],u.$to_proc())],o(l.current_inputs,"[]=",e.to_a(p)),p[t(p.length,1)]},b.$$arity=-2),e.def(k,"$filter",w=function(n){var a,i,s=this,u=r,l=r,p=r,d=r;return c(n["$nil?"]())?c(s.$options()["$[]"]("nils"))?[r,r]:[r,"nils"]:c(n["$respond_to?"]("to_hash"))?(c(n["$is_a?"]($(O,"HashWithIndifferentAccess")))||(n=n.$to_hash().$with_indifferent_access()),u=$(O,"ErrorHash").$new(),l=$(O,"HashWithIndifferentAccess").$new(),p=r,o([[s.required_inputs,!0],[s.optional_inputs,!1]],"each",[],((a=function(i){var s,d,f,_=null==a.$$s?this:a.$$s,h=r,y=r;return null==i&&(i=r),d=i,h=null==(s=e.to_ary(d))[0]?r:s[0],y=null==s[1]?r:s[1],o(h,"each_pair",[],((f=function(a,i){null==f.$$s||f.$$s;var s,d,_=r,h=r,v=r,m=r,g=r,b=r,w=r,k=r,E=r,x=r,S=r,q=r;return null==a&&(a=r),null==i&&(i=r),a["$=="]("*")?(p=i,r):(_=n["$[]"](a),c(n["$has_key?"](a))&&(d=i.$filter(_),h=null==(s=e.to_ary(d))[0]?r:s[0],v=null==s[1]?r:s[1],c(v["$nil?"]())?(m=[a,h],o(l,"[]=",e.to_a(m)),m[t(m.length,1)]):c(c(g=y["$!"]())?i["$discard_invalid?"]():g)?n.$delete(a):c(c(b=c(w=y["$!"]())?v["$=="]("empty"):w)?i["$discard_empty?"]():b)?n.$delete(a):c(c(k=c(E=y["$!"]())?v["$=="]("nils"):E)?i["$discard_nils?"]():k)?n.$delete(a):(x=c(S=i.$options()["$[]"]("error_key"))?S:a,c(v["$is_a?"]($(O,"Symbol")))&&(v=$(O,"ErrorAtom").$new(x,v)),m=[a,v],o(u,"[]=",e.to_a(m)),m[t(m.length,1)])),c(n["$has_key?"](a)["$!"]())?c(i["$has_default?"]())?(m=[a,i.$default()],o(l,"[]=",e.to_a(m)),m[t(m.length,1)]):c(y)?(x=c(q=i.$options()["$[]"]("error_key"))?q:a,m=[a,$(O,"ErrorAtom").$new(x,"required")],o(u,"[]=",e.to_a(m)),m[t(m.length,1)]):r:r)}).$$s=_,f.$$arity=2,f))}).$$s=s,a.$$arity=1,a.$$has_top_level_mlhs_arg=!0,a)),c(p)&&(d=t(n.$keys(),l.$keys()),o(d,"each",[],((i=function(a){null==i.$$s||i.$$s;var s,d,f=r,_=r,h=r,y=r,v=r,m=r;return null==a&&(a=r),f=n["$[]"](a),d=p.$filter(f),_=null==(s=e.to_ary(d))[0]?r:s[0],h=null==s[1]?r:s[1],c(h["$nil?"]())?(y=[a,_],o(l,"[]=",e.to_a(y)),y[t(y.length,1)]):c(p["$discard_invalid?"]())?n.$delete(a):c(c(v=h["$=="]("empty"))?p["$discard_empty?"]():v)?n.$delete(a):c(c(m=h["$=="]("nils"))?p["$discard_nils?"]():m)?n.$delete(a):(c(h["$is_a?"]($(O,"Symbol")))&&(h=$(O,"ErrorAtom").$new(a,h)),y=[a,h],o(u,"[]=",e.to_a(y)),y[t(y.length,1)])}).$$s=s,i.$$arity=1,i))),c(u["$any?"]())?[n,u]:[l,r]):[n,"hash"]},w.$$arity=1),r&&"filter"}(d[0],$(d,"InputFilter"),d)}(n[0],n)},Opal.modules["mutations/array_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var $=[],a=e.nil,i=(e.$$$,e.$$),o=e.module,s=e.klass,u=e.send,l=e.hash2,c=e.send2,p=e.find_super,d=e.truthy;return e.add_stubs(["$define_method","$new","$to_proc","$instance_eval","$[]","$options","$raise","$to_sym","$is_a?","$constantize","$[]=","$-","$cache_constants?","$to_s","$initialize_constants!","$nil?","$!","$==","$Array","$<","$length","$>","$each_with_index","$filter_element","$<<","$discard_invalid?","$filter"]),function($,f){var _=[o($,"Mutations")].concat(f);return function($,$super,o){var f,_,h,y,v,m,g,b,w=s($,$super,"ArrayFilter"),k=[w].concat(o);return w.$$prototype.element_filter=w.$$prototype.initialize_constants=a,e.defs(w,"$register_additional_filter",f=function(e,t){var n,r=f.$$p,$=this;return r&&(f.$$p=null),u($,"define_method",[t],((n=function(t){var r=null==n.$$s?this:n.$$s,$=n.$$p,i=$||a;return $&&(n.$$p=null),null==t&&(t=l([],{})),r.element_filter=u(e,"new",[t],i.$to_proc())}).$$s=$,n.$$arity=-1,n))},f.$$arity=2),w.default_options=l(["nils","class","arrayize","min_length","max_length"],{nils:!1,"class":a,arrayize:!1,min_length:a,max_length:a}),e.def(w,"$initialize",_=function(e,t){var n=_.$$p,r=n||a,$=this,o=a;return n&&(_.$$p=null),n&&(_.$$p=null),null==t&&(t=l([],{})),c($,p($,"initialize",_,!1,!0),"initialize",[t],null),$.name=e,$.element_filter=a,r!==a&&u($,"instance_eval",[],r.$to_proc()),d(d(o=$.element_filter)?$.$options()["$[]"]("class"):o)?$.$raise(i(k,"ArgumentError").$new("Can't supply both a class and a filter")):a},_.$$arity=-2),e.def(w,"$hash",h=function(e){var t=h.$$p,n=t||a,r=this;return t&&(h.$$p=null),t&&(h.$$p=null),null==e&&(e=l([],{})),r.element_filter=u(i(k,"HashFilter"),"new",[e],n.$to_proc())},h.$$arity=-1),e.def(w,"$model",y=function(e,t){var n=this;return null==t&&(t=l([],{})),n.element_filter=i(k,"ModelFilter").$new(e.$to_sym(),t)},y.$$arity=-2),e.def(w,"$array",v=function(e){var t=v.$$p,n=t||a,r=this;return t&&(v.$$p=null),t&&(v.$$p=null),null==e&&(e=l([],{})),r.element_filter=u(i(k,"ArrayFilter"),"new",[a,e],n.$to_proc())},v.$$arity=-1),e.def(w,"$initialize_constants!",m=function(){var n=this,r=a,$=a;return n.initialize_constants=d(r=n.initialize_constants)?r:(d(n.$options()["$[]"]("class"))&&d(n.$options()["$[]"]("class")["$is_a?"](i(k,"String")))&&($=["class",n.$options()["$[]"]("class").$constantize()],u(n.$options(),"[]=",e.to_a($)),$[t($.length,1)]),!0),d(i(k,"Mutations")["$cache_constants?"]())?a:d(n.$options()["$[]"]("class"))?($=["class",n.$options()["$[]"]("class").$to_s().$constantize()],u(n.$options(),"[]=",e.to_a($)),$[t($.length,1)]):a},m.$$arity=0),e.def(w,"$filter",g=function(t){var $,o=this,s=a,c=a,p=a,f=a,_=a,h=a,y=a,v=a;if(o["$initialize_constants!"](),d(t["$nil?"]()))return d(o.$options()["$[]"]("nils"))?[a,a]:[a,"nils"];if(d(d(s=t["$is_a?"](i(k,"Array"))["$!"]())?o.$options()["$[]"]("arrayize"):s)){if(t["$=="](""))return[[],a];t=o.$Array(t)}return d(t["$is_a?"](i(k,"Array")))?(c=i(k,"ErrorArray").$new(),p=[],f=!1,d(d(_=o.$options()["$[]"]("min_length"))?n(t.$length(),o.$options()["$[]"]("min_length")):_)?[t,"min_length"]:d(d(h=o.$options()["$[]"]("max_length"))?r(t.$length(),o.$options()["$[]"]("max_length")):h)?[t,"max_length"]:(u(t,"each_with_index",[],(($=function(t,n){var r,o,s=null==$.$$s?this:$.$$s,u=a,_=a;return null==s.name&&(s.name=a),null==t&&(t=a),null==n&&(n=a),o=s.$filter_element(t),u=null==(r=e.to_ary(o))[0]?a:r[0],_=null==r[1]?a:r[1],d(_["$is_a?"](i(k,"Symbol")))&&(_=i(k,"ErrorAtom").$new(s.name,_,l(["index"],{index:n}))),c["$<<"](_),d(_)?f=!0:p["$<<"](u)}).$$s=o,$.$$arity=2,$)),d(d(y=f)?(d(v=o.element_filter)?o.element_filter["$discard_invalid?"]():v)["$!"]():y)?[t,c]:[p,a])):[t,"array"]},g.$$arity=1),e.def(w,"$filter_element",b=function(t){var n,r,$=this,i=a;if(d($.element_filter)){if(r=$.element_filter.$filter(t),t=null==(n=e.to_ary(r))[0]?a:n[0],i=null==n[1]?a:n[1],d(i))return[t,i]}else if(d($.$options()["$[]"]("class"))&&d(t["$is_a?"]($.$options()["$[]"]("class"))["$!"]()))return[t,"class"];return[t,a]},b.$$arity=1),a&&"filter_element"}(_[0],i(_,"InputFilter"),_)}($[0],$)},Opal.modules["mutations/additional_filter"]=function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass;return e.add_stubs(["$require","$underscore","$[]","$name","$register_additional_filter"]),t.$require("mutations/hash_filter"),t.$require("mutations/array_filter"),function(t,n){var s=[i(t,"Mutations")].concat(n);return function(t,$super,n){var i,s=o(t,$super,"AdditionalFilter"),u=[s].concat(n);return e.defs(s,"$inherited",i=function(e){var t=r;return t=e.$name()["$[]"](/^Mutations::([a-zA-Z]*)Filter$/,1).$underscore(),$(a(u,"Mutations"),"HashFilter").$register_additional_filter(e,t),$(a(u,"Mutations"),"ArrayFilter").$register_additional_filter(e,t)},i.$$arity=1),r&&"inherited"}(s[0],a(s,"InputFilter"),s)}(n[0],n)},Opal.modules["mutations/string_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.hash2,u=e.truthy,l=e.send;return e.add_stubs(["$nil?","$[]","$options","$!","$any?","$is_a?","$to_s","$gsub","$strip","$==","$<","$length","$>","$include?","$!~"]),function(r,c){var p=[i(r,"Mutations")].concat(c);return function(r,$super,i){var c,p=o(r,$super,"StringFilter"),d=[p].concat(i);return p.default_options=s(["strip","strict","nils","empty_is_nil","empty","min_length","max_length","matches","in","discard_empty","allow_control_characters"],{strip:!0,strict:!1,nils:!1,empty_is_nil:!1,empty:!1,min_length:$,max_length:$,matches:$,"in":$,discard_empty:!1,allow_control_characters:!1}),e.def(p,"$filter",c=function(e){var r,i=this,o=$,s=$,c=$,p=$,f=$;return u(e["$nil?"]())?u(i.$options()["$[]"]("nils"))?[$,$]:[$,"nils"]:(u(u(o=i.$options()["$[]"]("strict")["$!"]())?l([a(d,"TrueClass"),a(d,"FalseClass"),a(d,"Integer"),a(d,"Float"),a(d,"BigDecimal"),a(d,"Symbol")],"any?",[],((r=function(t){return null==r.$$s||r.$$s,null==t&&(t=$),e["$is_a?"](t)}).$$s=i,r.$$arity=1,r)):o)&&(e=e.$to_s()),u(e["$is_a?"](a(d,"String")))?(u(i.$options()["$[]"]("allow_control_characters"))||(e=e.$gsub(/((?=[[:cntrl:]])[^\t\r\n])+/," ")),u(i.$options()["$[]"]("strip"))&&(e=e.$strip()),e["$=="]("")?u(i.$options()["$[]"]("empty_is_nil"))?[$,u(i.$options()["$[]"]("nils"))?$:"nils"]:u(i.$options()["$[]"]("empty"))?[e,$]:[e,"empty"]:u(u(s=i.$options()["$[]"]("min_length"))?t(e.$length(),i.$options()["$[]"]("min_length")):s)?[e,"min_length"]:u(u(c=i.$options()["$[]"]("max_length"))?n(e.$length(),i.$options()["$[]"]("max_length")):c)?[e,"max_length"]:u(u(p=i.$options()["$[]"]("in"))?i.$options()["$[]"]("in")["$include?"](e)["$!"]():p)?[e,"in"]:u(u(f=i.$options()["$[]"]("matches"))?i.$options()["$[]"]("matches")["$!~"](e):f)?[e,"matches"]:[e,$]):[e,"string"])},c.$$arity=1),$&&"filter"}(p[0],a(p,"AdditionalFilter"),p)}(r[0],r)},Opal.modules["mutations/integer_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.hash2,u=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$!","$is_a?","$=~","$to_i","$<","$>","$include?"]),function(r,l){var c=[i(r,"Mutations")].concat(l);return function(r,$super,i){var l,c=o(r,$super,"IntegerFilter"),p=[c].concat(i);return c.default_options=s(["nils","empty_is_nil","min","max","in"],{nils:!1,empty_is_nil:!1,min:$,max:$,"in":$}),e.def(c,"$filter",l=function(e){var r=this,i=$,o=$,s=$,l=$;if(u(e["$nil?"]()))return u(r.$options()["$[]"]("nils"))?[$,$]:[$,"nils"];if(e["$=="](""))return u(r.$options()["$[]"]("empty_is_nil"))?[$,u(r.$options()["$[]"]("nils"))?$:"nils"]:[e,"empty"];if(u(e["$is_a?"](a(p,"Integer"))["$!"]())){if(!u(u(i=e["$is_a?"](a(p,"String")))?e["$=~"](/^-?\d/):i))return[e,"integer"];e=e.$to_i()}return u(u(o=r.$options()["$[]"]("min"))?t(e,r.$options()["$[]"]("min")):o)?[e,"min"]:u(u(s=r.$options()["$[]"]("max"))?n(e,r.$options()["$[]"]("max")):s)?[e,"max"]:u(u(l=r.$options()["$[]"]("in"))?r.$options()["$[]"]("in")["$include?"](e)["$!"]():l)?[e,"in"]:[e,$]},l.$$arity=1),$&&"filter"}(c[0],a(c,"AdditionalFilter"),c)}(r[0],r)},Opal.modules["mutations/float_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.hash2,u=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$!","$is_a?","$=~","$to_f","$<","$>"]),function(r,l){var c=[i(r,"Mutations")].concat(l);return function(r,$super,i){var l,c=o(r,$super,"FloatFilter"),p=[c].concat(i);return c.default_options=s(["nils","min","max"],{nils:!1,min:$,max:$}),e.def(c,"$filter",l=function(e){var r=this,i=$,o=$,s=$;if(u(e["$nil?"]()))return u(r.$options()["$[]"]("nils"))?[$,$]:[$,"nils"];if(e["$=="](""))return[e,"empty"];if(u(e["$is_a?"](a(p,"Float"))["$!"]()))if(u(u(i=e["$is_a?"](a(p,"String")))?e["$=~"](/^[-+]?\d*\.?\d+/):i))e=e.$to_f();else{if(!u(e["$is_a?"](a(p,"Integer"))))return[e,"float"];e=e.$to_f()}return u(u(o=r.$options()["$[]"]("min"))?t(e,r.$options()["$[]"]("min")):o)?[e,"min"]:u(u(s=r.$options()["$[]"]("max"))?n(e,r.$options()["$[]"]("max")):s)?[e,"max"]:[e,$]},l.$$arity=1),$&&"filter"}(c[0],a(c,"AdditionalFilter"),c)}(r[0],r)},Opal.modules["mutations/boolean_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.hash2,o=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$is_a?","$to_s","$downcase"]),function(t,s){var u=[$(t,"Mutations")].concat(s);return function(t,$super,$){var s,u=a(t,$super,"BooleanFilter"),l=[u].concat($);return u.default_options=i(["nils"],{nils:!1}),e.const_set(l[0],"BOOL_MAP",i(["true","1","false","0"],{"true":!0,1:!0,"false":!1,0:!1})),e.def(u,"$filter",s=function(e){var t=this,$=n,a=n;return o(e["$nil?"]())?o(t.$options()["$[]"]("nils"))?[n,n]:[n,"nils"]:e["$=="]("")?[e,"empty"]:o(o($=e["$=="](!0))?$:e["$=="](!1))?[e,n]:(o(e["$is_a?"](r(l,"Integer")))&&(e=e.$to_s()),o(e["$is_a?"](r(l,"String")))?(a=r(l,"BOOL_MAP")["$[]"](e.$downcase()),o(a["$nil?"]())?[e,"boolean"]:[a,n]):[e,"boolean"])},s.$$arity=1),n&&"filter"}(u[0],r(u,"AdditionalFilter"),u)}(t[0],t)},Opal.modules["mutations/duck_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.hash2,o=e.truthy,s=e.send;return e.add_stubs(["$nil?","$[]","$options","$each","$Array","$respond_to?"]),function(t,u){var l=[$(t,"Mutations")].concat(u);return function(t,$super,r){var $,u=a(t,$super,"DuckFilter");[u].concat(r);return u.default_options=i(["nils","methods"],{nils:!1,methods:n}),e.def(u,"$filter",$=function(t){try{var r,$=this;return o(t["$nil?"]())?o($.$options()["$[]"]("nils"))?[n,n]:[n,"nils"]:(s($.$Array($.$options()["$[]"]("methods")),"each",[],((r=function($){null==r.$$s||r.$$s;if(null==$&&($=n),o(t["$respond_to?"]($)))return n;e.ret([t,"duck"])}).$$s=$,r.$$arity=1,r)),[t,n])}catch(a){if(a===e.returner)return a.$v;throw a}},$.$$arity=1),n&&"filter"}(l[0],r(l,"AdditionalFilter"),l)}(t[0],t)},Opal.modules["mutations/date_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.hash2,u=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$is_a?","$strptime","$parse","$respond_to?","$to_date","$<=","$>="]),function(r,l){var c=[i(r,"Mutations")].concat(l);return function(r,$super,i){var l,c=o(r,$super,"DateFilter"),p=[c].concat(i);return c.default_options=s(["nils","empty_is_nil","format","after","before"],{nils:!1,empty_is_nil:!1,format:$,after:$,before:$}),e.def(c,"$filter",l=function(r){var i=this,o=$;if(u(r["$nil?"]()))return u(i.$options()["$[]"]("nils"))?[$,$]:[$,"nils"];if(r["$=="](""))return u(i.$options()["$[]"]("empty_is_nil"))?[$,u(i.$options()["$[]"]("nils"))?$:"nils"]:[r,"empty"];if(u(r["$is_a?"](a(p,"Date"))))o=r;else if(u(r["$is_a?"](a(p,"String"))))try{o=u(i.$options()["$[]"]("format"))?a(p,"Date").$strptime(r,i.$options()["$[]"]("format")):a(p,"Date").$parse(r)}catch(s){if(!e.rescue(s,[a(p,"ArgumentError")]))throw s;try{return[$,"date"]}finally{e.pop_exception()}}else{if(!u(r["$respond_to?"]("to_date")))return[$,"date"];o=r.$to_date()}return u(i.$options()["$[]"]("after"))&&u(t(o,i.$options()["$[]"]("after")))?[$,"after"]:u(i.$options()["$[]"]("before"))&&u(n(o,i.$options()["$[]"]("before")))?[$,"before"]:[o,$]},l.$$arity=1),$&&"filter"}(c[0],a(c,"AdditionalFilter"),c)}(r[0],r)},Opal.modules["mutations/time_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}e.top;var r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.klass,s=e.hash2,u=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$==","$is_a?","$strptime","$parse","$respond_to?","$to_time","$<=","$>="]),function(r,l){var c=[i(r,"Mutations")].concat(l);return function(r,$super,i){var l,c=o(r,$super,"TimeFilter"),p=[c].concat(i);return c.default_options=s(["nils","format","after","before"],{nils:!1,format:$,after:$,before:$}),e.def(c,"$filter",l=function(r){var i=this,o=$;if(u(r["$nil?"]()))return u(i.$options()["$[]"]("nils"))?[$,$]:[$,"nils"];if(""["$=="](r))return[r,"empty"];if(u(r["$is_a?"](a(p,"Time"))))o=r;else if(u(r["$is_a?"](a(p,"String"))))try{o=u(i.$options()["$[]"]("format"))?a(p,"Time").$strptime(r,i.$options()["$[]"]("format")):a(p,"Time").$parse(r)}catch(s){if(!e.rescue(s,[a(p,"ArgumentError")]))throw s;try{return[$,"time"]}finally{e.pop_exception()}}else{if(!u(r["$respond_to?"]("to_time")))return[$,"time"];o=r.$to_time()}return u(i.$options()["$[]"]("after"))&&u(t(o,i.$options()["$[]"]("after")))?[$,"after"]:u(i.$options()["$[]"]("before"))&&u(n(o,i.$options()["$[]"]("before")))?[$,"before"]:[o,$]},l.$$arity=1),$&&"filter"}(c[0],a(c,"AdditionalFilter"),c)}(r[0],r)},Opal.modules["mutations/file_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.hash2,s=e.truthy,u=e.send;return e.add_stubs(["$nil?","$[]","$options","$==","$concat","$each","$respond_to?","$is_a?","$>","$size"]),function(n,l){var c=[a(n,"Mutations")].concat(l);return function(n,$super,a){var l,c=i(n,$super,"FileFilter"),p=[c].concat(a);return c.default_options=o(["nils","upload","size"],{nils:!1,upload:!1,size:r}),e.def(c,"$filter",l=function(n){try{var a,i=this,o=r;return s(n["$nil?"]())?s(i.$options()["$[]"]("nils"))?[r,r]:[r,"nils"]:n["$=="]("")?[n,"empty"]:(o=["read","size"],s(i.$options()["$[]"]("upload"))&&o.$concat(["original_filename","content_type"]),u(o,"each",[],((a=function(t){null==a.$$s||a.$$s;if(null==t&&(t=r),s(n["$respond_to?"](t)))return r;e.ret([n,"file"])}).$$s=i,a.$$arity=1,a)),s(i.$options()["$[]"]("size")["$is_a?"]($(p,"Integer")))&&s(t(n.$size(),i.$options()["$[]"]("size")))?[n,"size"]:[n,r])}catch(l){if(l===e.returner)return l.$v;throw l}},l.$$arity=1),r&&"filter"}(c[0],$(c,"AdditionalFilter"),c)}(n[0],n)},Opal.modules["mutations/model_filter"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.hash2,s=e.send2,u=e.find_super,l=e.truthy,c=e.send;return e.add_stubs(["$[]","$options","$camelize","$to_s","$is_a?","$constantize","$[]=","$-","$cache_constants?","$initialize_constants!","$nil?","$run","$success?","$result","$errors","$!","$respond_to?","$new_record?"]),function(n,p){var d=[a(n,"Mutations")].concat(p);return function(n,$super,a){var p,d,f,_=i(n,$super,"ModelFilter"),h=[_].concat(a);return _.$$prototype.initialize_constants=_.$$prototype.name=r,_.default_options=o(["nils","class","builder","new_records"],{nils:!1,"class":r,builder:r,new_records:!1}),e.def(_,"$initialize",p=function(e,t){var n=p.$$p,r=this;return n&&(p.$$p=null),null==t&&(t=o([],{})),s(r,u(r,"initialize",p,!1,!0),"initialize",[t],null),r.name=e},p.$$arity=-2),e.def(_,"$initialize_constants!",d=function(){var n=this,a=r,i=r,o=r,s=r;return n.initialize_constants=l(a=n.initialize_constants)?a:(i=l(o=n.$options()["$[]"]("class"))?o:n.name.$to_s().$camelize(),l(i["$is_a?"]($(h,"String")))&&(i=i.$constantize()),s=["class",i],c(n.$options(),"[]=",e.to_a(s)),s[t(s.length,1)],l(n.$options()["$[]"]("builder"))&&l(n.$options()["$[]"]("builder")["$is_a?"]($(h,"String")))&&(s=["builder",n.$options()["$[]"]("builder").$constantize()],c(n.$options(),"[]=",e.to_a(s)),s[t(s.length,1)]),!0),l($(h,"Mutations")["$cache_constants?"]())?r:(l(n.$options()["$[]"]("class"))&&(s=["class",n.$options()["$[]"]("class").$to_s().$constantize()],c(n.$options(),"[]=",e.to_a(s)),s[t(s.length,1)]),l(n.$options()["$[]"]("builder"))?(s=["builder",n.$options()["$[]"]("builder").$to_s().$constantize()],c(n.$options(),"[]=",e.to_a(s)),s[t(s.length,1)]):r)},d.$$arity=0),e.def(_,"$filter",f=function(e){var t=this,n=r,a=r,i=r,o=r;if(t["$initialize_constants!"](),l(e["$nil?"]()))return l(t.$options()["$[]"]("nils"))?[r,r]:[r,"nils"];if(l(l(n=e["$is_a?"]($(h,"Hash")))?t.$options()["$[]"]("builder"):n)){if(a=t.$options()["$[]"]("builder").$run(e),!l(a["$success?"]()))return[e,a.$errors()];e=a.$result()}return l(e["$is_a?"](t.$options()["$[]"]("class")))?l(l(i=t.$options()["$[]"]("new_records")["$!"]())?l(o=e["$respond_to?"]("new_record?"))?e["$new_record?"]():o:i)?[e,"new_records"]:[e,r]:[e,"model"]},f.$$arity=1),r&&"filter"}(d[0],$(d,"InputFilter"),d)}(n[0],n)},Opal.modules["mutations/symbol_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.hash2,o=e.truthy;return e.add_stubs(["$nil?","$[]","$options","$===","$to_sym","$!","$include?"]),function(t,s){var u=[$(t,"Mutations")].concat(s);return function(t,$super,$){var s,u=a(t,$super,"SymbolFilter"),l=[u].concat($);return u.default_options=i(["nils","in"],{nils:!1,"in":n}),e.def(u,"$filter",s=function(e){var t=this,$=n,a=n;if(o(e["$nil?"]()))return o(t.$options()["$[]"]("nils"))?[n,n]:[n,"nils"];if($=e,r(l,"Symbol")["$==="]($));else{if(!r(l,"String")["$==="]($))return[n,"symbol"];e=e.$to_sym()}return o(o(a=t.$options()["$[]"]("in"))?t.$options()["$[]"]("in")["$include?"](e)["$!"]():a)?[e,"in"]:[e,n]},s.$$arity=1),n&&"filter"}(u[0],r(u,"AdditionalFilter"),u)}(t[0],t)},Opal.modules["mutations/outcome"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.klass;return e.add_stubs(["$attr_reader"]),function(t,a){var i=[r(t,"Mutations")].concat(a);return function(t,$super,r){var a,i,o=$(t,null,"Outcome");[o].concat(r);return o.$$prototype.success=n,o.$attr_reader("result","errors","inputs"),e.def(o,"$initialize",a=function(e,t,n,r){var $,a=this;return $=[e,t,n,r],a.success=$[0],a.result=$[1],a.errors=$[2],a.inputs=$[3],$},a.$$arity=4),e.def(o,"$success?",i=function(){return this.success},i.$$arity=0),n&&"success?"}(i[0],0,i)}(t[0],t)},Opal.modules["mutations/command"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,
e.$$),a=e.module,i=e.klass,o=e.send,s=e.truthy,u=e.hash2;return e.add_stubs(["$send","$input_filters","$to_proc","$each","$define_method","$[]","$has_key?","$[]=","$-","$private","$create_attr_methods","$run","$new","$run!","$validation_outcome","$==","$superclass","$dup","$inject","$with_indifferent_access","$respond_to?","$raise","$merge!","$filter","$has_errors?","$validate","$class","$!","$nil?","$execute","$success?","$result","$errors","$protected","$attr_reader","$is_a?","$tap","$split","$to_s","$pop","$to_sym","$any?"]),function(n,l){var c=[a(n,"Mutations")].concat(l);return function(n,$super,a){var l,c,p,d,f,_,h,y,v,m,g=i(n,null,"Command"),b=[g].concat(a);return g.$$prototype.raw_inputs=g.$$prototype.errors=g.$$prototype.inputs=r,function(n,a){var i,u,l,c,p,d,f,_=[n].concat(a);e.def(n,"$create_attr_methods",i=function(n){var $,a=i.$$p,s=a||r,u=this,l=r;return a&&(i.$$p=null),a&&(i.$$p=null),o(u.$input_filters(),"send",[n],s.$to_proc()),l=u.$input_filters().$send(n+"_keys"),o(l,"each",[],(($=function(n){var a,i,s,u=null==$.$$s?this:$.$$s;return null==n&&(n=r),o(u,"define_method",[n],((a=function(){var e=null==a.$$s?this:a.$$s;return null==e.inputs&&(e.inputs=r),e.inputs["$[]"](n)}).$$s=u,a.$$arity=0,a)),o(u,"define_method",[n+"_present?"],((i=function(){var e=null==i.$$s?this:i.$$s;return null==e.inputs&&(e.inputs=r),e.inputs["$has_key?"](n)}).$$s=u,i.$$arity=0,i)),o(u,"define_method",[n+"="],((s=function($){var a=null==s.$$s?this:s.$$s,i=r;return null==a.inputs&&(a.inputs=r),null==$&&($=r),i=[n,$],o(a.inputs,"[]=",e.to_a(i)),i[t(i.length,1)]}).$$s=u,s.$$arity=1,s))}).$$s=u,$.$$arity=1,$))},i.$$arity=1),n.$private("create_attr_methods"),e.def(n,"$required",u=function(){var e=u.$$p,t=e||r,n=this;return e&&(u.$$p=null),e&&(u.$$p=null),o(n,"create_attr_methods",["required"],t.$to_proc())},u.$$arity=0),e.def(n,"$optional",l=function(){var e=l.$$p,t=e||r,n=this;return e&&(l.$$p=null),e&&(l.$$p=null),o(n,"create_attr_methods",["optional"],t.$to_proc())},l.$$arity=0),e.def(n,"$run",c=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),o(n,"new",e.to_a(t)).$run()},c.$$arity=-1),e.def(n,"$run!",p=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),o(n,"new",e.to_a(t))["$run!"]()},p.$$arity=-1),e.def(n,"$validate",d=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),o(n,"new",e.to_a(t)).$validation_outcome()},d.$$arity=-1),e.def(n,"$input_filters",f=function(){var e=this,t=r;return null==e.input_filters&&(e.input_filters=r),e.input_filters=s(t=e.input_filters)?t:$(_,"Command")["$=="](e.$superclass())?$(_,"HashFilter").$new():e.$superclass().$input_filters().$dup()},f.$$arity=0)}(e.get_singleton_class(g),b),e.def(g,"$initialize",l=function(){var t,n,a,i,l=this;return t=e.slice.call(arguments,0,arguments.length),l.raw_inputs=o(t,"inject",[u([],{}).$with_indifferent_access()],((n=function(e,t){var a=null==n.$$s?this:n.$$s;return null==e&&(e=r),null==t&&(t=r),s(t["$respond_to?"]("to_hash"))||a.$raise($(b,"ArgumentError").$new("All arguments must be hashes")),e["$merge!"](t)}).$$s=l,n.$$arity=2,n)),i=l.$input_filters().$filter(l.raw_inputs),a=e.to_ary(i),l.inputs=null==a[0]?r:a[0],l.errors=null==a[1]?r:a[1],s(l["$has_errors?"]())?r:l.$validate()},l.$$arity=-1),e.def(g,"$input_filters",c=function(){return this.$class().$input_filters()},c.$$arity=0),e.def(g,"$has_errors?",p=function(){return this.errors["$nil?"]()["$!"]()},p.$$arity=0),e.def(g,"$run",d=function(){var e=this;return s(e["$has_errors?"]())?e.$validation_outcome():e.$validation_outcome(e.$execute())},d.$$arity=0),e.def(g,"$run!",f=function(){var e=this,t=r;return t=e.$run(),s(t["$success?"]())?t.$result():e.$raise($(b,"ValidationException").$new(t.$errors()))},f.$$arity=0),e.def(g,"$validation_outcome",_=function(e){var t=this;return null==e&&(e=r),$(b,"Outcome").$new(t["$has_errors?"]()["$!"](),s(t["$has_errors?"]())?r:e,t.errors,t.inputs)},_.$$arity=-1),g.$protected(),g.$attr_reader("inputs","raw_inputs"),e.def(g,"$validate",h=function(){return r},h.$$arity=0),e.def(g,"$execute",y=function(){return r},y.$$arity=0),e.def(g,"$add_error",v=function(n,a,i){var l,c=this,p=r;return null==i&&(i=r),s(a["$is_a?"]($(b,"Symbol")))||c.$raise($(b,"ArgumentError").$new("Invalid kind")),c.errors=s(p=c.errors)?p:$(b,"ErrorHash").$new(),o(c.errors,"tap",[],((l=function(c){var p,d=null==l.$$s?this:l.$$s,f=r,_=r,h=r,y=r;return null==c&&(c=r),_=(f=n.$to_s().$split(".")).$pop(),h=o(f,"inject",[c],((p=function(n,a){null==p.$$s||p.$$s;var i=r,u=r;return null==n&&(n=r),null==a&&(a=r),s(i=n["$[]"](a.$to_sym()))?i:(u=[a.$to_sym(),$(b,"ErrorHash").$new()],o(n,"[]=",e.to_a(u)),u[t(u.length,1)])}).$$s=d,p.$$arity=2,p)),y=[_,$(b,"ErrorAtom").$new(_.$to_sym(),a,u(["message"],{message:i}))],o(h,"[]=",e.to_a(y)),y[t(y.length,1)]}).$$s=c,l.$$arity=1,l))},v.$$arity=-3),e.def(g,"$merge_errors",m=function(e){var t=this,n=r;return s(e["$any?"]())?(t.errors=s(n=t.errors)?n:$(b,"ErrorHash").$new(),t.errors["$merge!"](e)):r},m.$$arity=1),r&&"merge_errors"}(c[0],0,c)}(n[0],n)},Opal.modules.mutations=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n=e.top,r=[],$=e.nil,a=(e.$$$,e.$$),i=e.module,o=e.truthy,s=e.send,u=$;return e.add_stubs(["$require","$new","$cache_constants=","$-"]),n.$require("active_support/core_ext/hash/indifferent_access"),n.$require("active_support/core_ext/string/inflections"),n.$require("date"),n.$require("time"),n.$require("bigdecimal"),n.$require("mutations/version"),n.$require("mutations/exception"),n.$require("mutations/errors"),n.$require("mutations/input_filter"),n.$require("mutations/additional_filter"),n.$require("mutations/string_filter"),n.$require("mutations/integer_filter"),n.$require("mutations/float_filter"),n.$require("mutations/boolean_filter"),n.$require("mutations/duck_filter"),n.$require("mutations/date_filter"),n.$require("mutations/time_filter"),n.$require("mutations/file_filter"),n.$require("mutations/model_filter"),n.$require("mutations/array_filter"),n.$require("mutations/hash_filter"),n.$require("mutations/symbol_filter"),n.$require("mutations/outcome"),n.$require("mutations/command"),function(t,n){var r=i(t,"Mutations"),s=[r].concat(n);(function(t,n){var r,i,s,u,l=[t].concat(n);e.def(t,"$error_message_creator",r=function(){var e=this,t=$;return null==e.error_message_creator&&(e.error_message_creator=$),e.error_message_creator=o(t=e.error_message_creator)?t:a(l,"DefaultErrorMessageCreator").$new()},r.$$arity=0),e.def(t,"$error_message_creator=",i=function(e){return this.error_message_creator=e},i.$$arity=1),e.def(t,"$cache_constants=",s=function(e){return this.cache_constants=e},s.$$arity=1),e.def(t,"$cache_constants?",u=function(){var e=this;return null==e.cache_constants&&(e.cache_constants=$),e.cache_constants},u.$$arity=0)})(e.get_singleton_class(r),s)}(r[0],r),u=[!0],s(a(r,"Mutations"),"cache_constants=",e.to_a(u)),u[t(u.length,1)]},Opal.modules["hyper-operation/filters/outbound_filter"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.hash2;return function(t,o){var s=[$(t,"Mutations")].concat(o);return function(t,$super,r){var $,o=a(t,$super,"OutboundFilter");[o].concat(r);return o.default_options=i([],{}),e.def(o,"$filter",$=function(e){return[e,"outbound"]},$.$$arity=1),n&&"filter"}(s[0],r(s,"AdditionalFilter"),s)}(t[0],t)},Opal.modules["hyper-operation/http"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}e.top;var a=[],i=e.nil,o=(e.$$$,e.$$),s=e.module,u=e.klass,l=e.send,c=e.hash2,p=e.truthy;return e.add_stubs(["$each","$define_singleton_method","$send","$new","$define_method","$attr_reader","$>","$+","$-","$<","$delete","$succeed","$fail","$promise","$parse","$private","$tap","$proc","$ok?","$resolve","$reject","$from_object","$call"]),function(a,d){var f=[s(a,"Hyperstack")].concat(d);return function(a,$super,s){var d,f,_,h,y,v,m,g,b,w,k,O,E,x,S=u(a,null,"HTTP"),q=[S].concat(s);return S.$$prototype.handler=S.$$prototype.json=S.$$prototype.body=S.$$prototype.ok=S.$$prototype.xhr=S.$$prototype.url=S.$$prototype.method=S.$$prototype.promise=S.$$prototype.status_code=i,e.const_set(q[0],"ACTIONS",["get","post","put","delete","patch","head"]),l(o(q,"ACTIONS"),"each",[],((d=function(e){var t,n,r=null==d.$$s?this:d.$$s;return null==e&&(e=i),l(r,"define_singleton_method",[e],((t=function(n,r){var $=null==t.$$s?this:t.$$s,a=t.$$p,o=a||i;return a&&(t.$$p=null),null==n&&(n=i),null==r&&(r=c([],{})),$.$new().$send(e,n,r,o)}).$$s=r,t.$$arity=-2,t)),l(r,"define_method",[e],((n=function(t,r){var $=null==n.$$s?this:n.$$s,a=n.$$p,o=a||i;return a&&(n.$$p=null),null==t&&(t=i),null==r&&(r=c([],{})),$.$send(e,t,r,o)}).$$s=r,n.$$arity=-2,n))}).$$s=S,d.$$arity=1,d)),S.$attr_reader("body","error_message","method","status_code","url","xhr"),e.def(S,"$initialize",f=function(){return this.ok=!0},f.$$arity=0),e.defs(S,"$active?",_=function(){var e=this,r=i;return null==e.active_requests&&(e.active_requests=i),r=0,"undefined"!=typeof jQuery&&"undefined"!=typeof jQuery.active&&null!==jQuery.active&&(r=jQuery.active),t(n(r,e.active_requests),0)},_.$$arity=0),e.defs(S,"$active_requests",h=function(){var e=this,t=i;return null==e.active_requests&&(e.active_requests=i),e.active_requests=p(t=e.active_requests)?t:0,e.active_requests},h.$$arity=0),e.defs(S,"$incr_active_requests",y=function(){var e=this,t=i;return null==e.active_requests&&(e.active_requests=i),e.active_requests=p(t=e.active_requests)?t:0,e.active_requests=n(e.active_requests,1)},y.$$arity=0),e.defs(S,"$decr_active_requests",v=function(){var e=this,t=i;return null==e.active_requests&&(e.active_requests=i),e.active_requests=p(t=e.active_requests)?t:0,e.active_requests=r(e.active_requests,1),p($(e.active_requests,0))?(console.log("Ooops, Hyperstack::HTTP active_requests out of sync!"),e.active_requests=0):i},v.$$arity=0),e.def(S,"$send",m=function(e,t,n,r){var $=this;$.method=e,$.url=t,$.payload=n.$delete("payload"),$.handler=r;var a=null,o=null;"string"==typeof this.payload?a=this.payload:this.payload!=i&&(a=this.payload.$to_json(),o="application/json");var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE)return $.$class().$decr_active_requests(),s.status>=200&&s.status<300||304==s.status?$.$succeed(s.responseText,s.status,s):$.$fail(s,s.status,s.statusText)},s.open(this.method.toUpperCase(),this.url),null!==a&&null!==o&&s.setRequestHeader("Content-Type",o),n["$has_key?"]("headers"))for(var u=n["$[]"]("headers"),l=u.$keys(),c=l.length,d=0;d<c;d++)s.setRequestHeader(l[d],u["$[]"](l[d]));return null!==a?($.$class().$incr_active_requests(),s.send(a)):($.$class().$incr_active_requests(),s.send()),p($.handler)?$:$.$promise()},m.$$arity=4),e.def(S,"$json",g=function(){var e=this,t=i;return e.json=p(t=e.json)?t:o(q,"JSON").$parse(e.body)},g.$$arity=0),e.def(S,"$ok?",b=function(){return this.ok},b.$$arity=0),e.def(S,"$get_header",w=function(e){var t=this.xhr.getResponseHeader(e);return null===t?i:t},w.$$arity=1),e.def(S,"$inspect",k=function(){var e=this;return"#<HTTP @url="+e.url+" @method="+e.method+">"},k.$$arity=0),S.$private(),e.def(S,"$promise",O=function(){var e,t=this;return p(t.promise)?t.promise:t.promise=l(o(q,"Promise").$new(),"tap",[],((e=function(t){var n,r=null==e.$$s?this:e.$$s;return null==t&&(t=i),r.handler=l(r,"proc",[],((n=function(e){null==n.$$s||n.$$s;return null==e&&(e=i),p(e["$ok?"]())?t.$resolve(e):t.$reject(e)}).$$s=r,n.$$arity=1,n))}).$$s=t,e.$$arity=1,e))},O.$$arity=0),e.def(S,"$succeed",E=function(e,t,n){var r=this;return r.body=e,r.xhr=n,r.status_code=n.status,"object"==typeof e&&(r.json=o(q,"JSON").$from_object(e)),p(r.handler)?r.handler.$call(r):i},E.$$arity=3),e.def(S,"$fail",x=function(e){var t=this;return t.body=e.responseText,t.xhr=e,t.status_code=e.status,t.ok=!1,p(t.handler)?t.handler.$call(t):i},x.$$arity=3),i&&"fail"}(f[0],0,f)}(a[0],a)},Opal.modules["hyper-operation/transport/client_drivers"]=function(Opal){function $rb_plus(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $rb_minus(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var self=Opal.top,$nesting=[],nil=Opal.nil,$$$=Opal.$$$,$$=Opal.$$,$module=Opal.module,$klass=Opal.klass,$truthy=Opal.truthy,$send=Opal.send,$lambda=Opal.lambda,$hash2=Opal.hash2;return Opal.add_stubs(["$[]","$opts","$extend","$on_opal_client?","$client_drivers_get_acting_user_id","$env","$==","$respond_to?","$tap","$new","$resolve","$each","$is_a?","$connect_to","$name","$then","$load","$id","$raise","$inspect","$class","$connect","$last","$split","$+","$to_s","$include?","$open_channels","$<<","$add_connection","$gsub","$get_queued_data","$post","$polling_path","$action_cable_consumer","$json","$complete_connection","$sync_dispatch","$parse","$get","$include","$dispatch_from_server","$constantize","$attr_reader","$isomorphic_method","$send_to_server","$when_on_server","$acting_user","$controller","$when_on_client","$fail","$zero?","$after","$-","$!=","$lambda","$[]=","$every"]),function($base,$parent_nesting){var self=$module($base,"Hyperstack"),$nesting=[self].concat($parent_nesting),$Hyperstack_anti_csrf_token$1,$Hyperstack_connect$8,$Hyperstack_connect_session$12,$Hyperstack_action_cable_consumer$13;return Opal.defs(self,"$anti_csrf_token",$Hyperstack_anti_csrf_token$1=function(){return $$($nesting,"ClientDrivers").$opts()["$[]"]("form_authenticity_token")},$Hyperstack_anti_csrf_token$1.$$arity=0),function(e,$super,t){var n,r,$,a,i=$klass(e,null,"Application"),o=[i].concat(t);i.$extend($$$($$$($$(o,"Component"),"IsomorphicHelpers"),"ClassMethods")),$truthy(i["$on_opal_client?"]())?Opal.defs(i,"$acting_user_id",n=function(){return $$(o,"ClientDrivers").$opts()["$[]"]("acting_user_id")},n.$$arity=0):Opal.defs(i,"$acting_user_id",r=function(){return $$(o,"ClientDrivers").$client_drivers_get_acting_user_id()},r.$$arity=0),Opal.defs(i,"$env",$=function(){var e=this;return null==e.env&&(e.env=nil),$truthy(e.env)||(e.env=$$(o,"ClientDrivers").$env()),e.env},$.$$arity=0),Opal.defs(i,"$production?",a=function(){return this.$env()["$=="]("production")},a.$$arity=0)}($nesting[0],0,$nesting),function(e,t){var n,r=$module(e,"Model"),$=[r].concat(t);$truthy(r["$respond_to?"]("load"))||Opal.defs(r,"$load",n=function(){var e,t=n.$$p,r=t||nil,a=this;return t&&(n.$$p=null),$send($$($,"Promise").$new(),"tap",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=nil),t.$resolve(Opal.yieldX(r,[]))}).$$s=a,e.$$arity=1,e))},n.$$arity=0)}($nesting[0],$nesting),Opal.defs(self,"$connect",$Hyperstack_connect$8=function(){var e,t,n=this;return e=Opal.slice.call(arguments,0,arguments.length),$send(e,"each",[],((t=function(e){var n,r,$=null==t.$$s?this:t.$$s,a=nil;return null==e&&(e=nil),$truthy(e["$is_a?"]($$($nesting,"Class")))?$$($nesting,"IncomingBroadcast").$connect_to(e.$name()):$truthy($truthy(a=e["$is_a?"]($$($nesting,"String")))?a:e["$is_a?"]($$($nesting,"Array")))?$send($$($nesting,"IncomingBroadcast"),"connect_to",Opal.to_a(e)):$truthy(e["$respond_to?"]("id"))?$send($send($$$($$($nesting,"Hyperstack"),"Model"),"load",[],((n=function(){null==n.$$s||n.$$s;return e.$id()}).$$s=$,n.$$arity=0,n)),"then",[],((r=function(t){var n=null==r.$$s?this:r.$$s;return null==t&&(t=nil),$truthy(t)||n.$raise("Hyperstack.connect cannot connect to "+e.$inspect()+".  The id is nil. This can be caused by connecting to a model that is not saved, or that does not exist."),$$($nesting,"IncomingBroadcast").$connect_to(e.$class().$name(),t)}).$$s=$,r.$$arity=1,r)):$.$raise("Hyperstack.connect cannot connect to "+e.$inspect()+".\nChannels must be either a class, or a class name,\na string in the form 'ClassName-id',\nan array in the form [class, id] or [class-name, id],\nor an object that responds to the id method with a non-nil value")}).$$s=n,t.$$arity=1,t))},$Hyperstack_connect$8.$$arity=-1),Opal.defs(self,"$connect_session",$Hyperstack_connect_session$12=function(){return this.$connect(["Hyperstack::Session",$$($nesting,"ClientDrivers").$opts()["$[]"]("id").$split("-").$last()])},$Hyperstack_connect_session$12.$$arity=0),Opal.defs(self,"$action_cable_consumer",$Hyperstack_action_cable_consumer$13=function(){return $$($nesting,"ClientDrivers").$opts()["$[]"]("action_cable_consumer")},$Hyperstack_action_cable_consumer$13.$$arity=0),function(e,$super,t){var n,r,$,a=$klass(e,null,"IncomingBroadcast"),i=[a].concat(t);Opal.defs(a,"$open_channels",n=function(){var e=this,t=nil;return null==e.open_channels&&(e.open_channels=nil),e.open_channels=$truthy(t=e.open_channels)?t:$$(i,"Set").$new()},n.$$arity=0),Opal.defs(a,"$add_connection",r=function(e,t){var n=this,r=nil;return null==t&&(t=nil),r=""+e+($truthy(t)?$rb_plus("-",t.$to_s()):nil),$truthy(n.$open_channels()["$include?"](r))?nil:(n.$open_channels()["$<<"](r),r)},r.$$arity=-2),Opal.defs(a,"$connect_to",$=function(e,t){var n,r,$=this,a=nil,o=nil;return null==t&&(t=nil),a=$.$add_connection(e,t),$truthy(a)?$$(i,"ClientDrivers").$opts()["$[]"]("transport")["$=="]("pusher")?(o=$$(i,"ClientDrivers").$opts()["$[]"]("channel")+"-"+a,(o=$$(i,"ClientDrivers").$opts()["$[]"]("pusher_api").subscribe(o.$gsub("::","=="))).bind("dispatch",$$(i,"ClientDrivers").$opts()["$[]"]("dispatch")),o.bind("pusher:subscription_succeeded",$lambda(((n=function(){null==n.$$s||n.$$s;return Opal.slice.call(arguments,0,arguments.length),$$(i,"ClientDrivers").$get_queued_data("connect-to-transport",a)}).$$s=$,n.$$arity=-1,n))),$.pusher_dispatcher_registered=!0):$$(i,"ClientDrivers").$opts()["$[]"]("transport")["$=="]("action_cable")?(o=$$(i,"ClientDrivers").$opts()["$[]"]("channel")+"-"+a,$send($$$($$(i,"Hyperstack"),"HTTP").$post($$(i,"ClientDrivers").$polling_path("action-cable-auth",o),$hash2(["headers"],{headers:$hash2(["X-CSRF-Token"],{"X-CSRF-Token":$$(i,"ClientDrivers").$opts()["$[]"]("form_authenticity_token")})})),"then",[],((r=function(e){null==r.$$s||r.$$s;null==e&&(e=nil);$$(i,"Hyperstack").$action_cable_consumer().subscriptions.create({channel:"Hyperstack::ActionCableChannel",client_id:$$(i,"ClientDrivers").$opts()["$[]"]("id"),hyperstack_channel:a,authorization:e.$json()["$[]"]("authorization"),salt:e.$json()["$[]"]("salt")},{connected:function(){$$(i,"ClientDrivers").$env()["$=="]("development")&&console.log("ActionCable connected to: ",a),$$(i,"ClientDrivers").$complete_connection(a)},received:function(e){$$(i,"ClientDrivers").$env()["$=="]("development")&&console.log("ActionCable received: ",e),$$(i,"ClientDrivers").$sync_dispatch($$(i,"JSON").$parse(JSON.stringify(e))["$[]"]("data"))}})}).$$s=$,r.$$arity=1,r))):$$$($$(i,"Hyperstack"),"HTTP").$get($$(i,"ClientDrivers").$polling_path("subscribe",a)):nil},$.$$arity=-2)}($nesting[0],0,$nesting),function($base,$super,$parent_nesting){var self=$klass($base,$super,"ClientDrivers"),$nesting=[self].concat($parent_nesting),$ClientDrivers_sync_dispatch$19,$ClientDrivers$20,$ClientDrivers$22,$ClientDrivers_complete_connection$25,$ClientDrivers_get_queued_data$28,$ClientDrivers_initialize_client_drivers_on_boot$31,$ClientDrivers_polling_path$36;return self.$include($$$($$$($$($nesting,"Hyperstack"),"Component"),"IsomorphicHelpers")),Opal.defs(self,"$sync_dispatch",$ClientDrivers_sync_dispatch$19=function(e){return e["$[]"]("operation").$constantize().$dispatch_from_server(e["$[]"]("params"))},$ClientDrivers_sync_dispatch$19.$$arity=1),function(e,t){[e].concat(t);e.$attr_reader("opts")}(Opal.get_singleton_class(self),$nesting),$send(self,"isomorphic_method",["client_drivers_get_acting_user_id"],($ClientDrivers$20=function(e){var t,n=null==$ClientDrivers$20.$$s?this:$ClientDrivers$20.$$s;return null==e&&(e=nil),e.$send_to_server(),$send(e,"when_on_server",[],((t=function(){var e=null==t.$$s?this:t.$$s,n=nil;return $truthy(n=e.$controller().$acting_user())?e.$controller().$acting_user().$id():n}).$$s=n,t.$$arity=0,t))},$ClientDrivers$20.$$s=self,$ClientDrivers$20.$$arity=1,$ClientDrivers$20)),$send(self,"isomorphic_method",["env"],($ClientDrivers$22=function(e){var t,n,r=null==$ClientDrivers$22.$$s?this:$ClientDrivers$22.$$s;return null==e&&(e=nil),$send(e,"when_on_client",[],((t=function(){return(null==t.$$s?this:t.$$s).$opts()["$[]"]("env")}).$$s=r,t.$$arity=0,t)),e.$send_to_server(),$send(e,"when_on_server",[],((n=function(){null==n.$$s||n.$$s;return $$$("::","Rails").$env()}).$$s=r,n.$$arity=0,n))},$ClientDrivers$22.$$s=self,$ClientDrivers$22.$$arity=1,$ClientDrivers$22)),Opal.defs(self,"$complete_connection",$ClientDrivers_complete_connection$25=function(e,t){var n,r=this;return null==t&&(t=10),$send(r.$get_queued_data("connect-to-transport",e),"fail",[],((n=function(){var r,$=null==n.$$s?this:n.$$s;return $truthy(t["$zero?"]())?nil:$send($,"after",[.25],((r=function(){return(null==r.$$s?this:r.$$s).$complete_connection(e,$rb_minus(t,1))}).$$s=$,r.$$arity=0,r))}).$$s=r,n.$$arity=0,n))},$ClientDrivers_complete_connection$25.$$arity=-2),Opal.defs(self,"$get_queued_data",$ClientDrivers_get_queued_data$28=function(e,t,n){var r,$=this;return null==t&&(t=nil),null==n&&(n=$hash2([],{})),$send($$$($$($nesting,"Hyperstack"),"HTTP").$get($.$polling_path(e,t),n),"then",[],((r=function(e){var t,n=null==r.$$s?this:r.$$s;return null==e&&(e=nil),$send(e.$json(),"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=nil),$$($nesting,"ClientDrivers").$env()["$=="]("development")&&console.log("simple_poller received: ",e),n.$sync_dispatch(e["$[]"](1))}).$$s=n,t.$$arity=1,t))}).$$s=$,r.$$arity=1,r))},$ClientDrivers_get_queued_data$28.$$arity=-2),Opal.defs(self,"$initialize_client_drivers_on_boot",$ClientDrivers_initialize_client_drivers_on_boot$31=function $$initialize_client_drivers_on_boot(){var $$32,$$33,$$34,$$35,self=this,$ret_or_4=nil,$ret_or_5=nil,$writer=nil,$ret_or_6=nil,h=nil,pusher_api=nil;return null==self.initialized&&(self.initialized=nil),$truthy(self.initialized)?($truthy($truthy($ret_or_4=self["$on_opal_client?"]())?$$($nesting,"Hyperstack").$action_cable_consumer():$ret_or_4)&&$send($$$($$($nesting,"Hyperstack"),"HTTP"),"get",[window.HyperstackEnginePath+"/server_up"],($$32=function(){null==$$32.$$s||$$32.$$s;return $truthy($$($nesting,"Hyperstack").$action_cable_consumer().connection.disconnected)?$$($nesting,"Hyperstack").$action_cable_consumer().connection.open():nil},$$32.$$s=self,$$32.$$arity=0,$$32)),nil):(self.initialized=!0,self.opts=$hash2([],{}),$truthy(self["$on_opal_client?"]())?(self.opts=$$($nesting,"Hash").$new(window.HyperstackOpts),$truthy($truthy($ret_or_5=self.$opts()["$[]"]("transport")["$!="]("none"))?"undefined"==typeof window.HyperstackEnginePath:$ret_or_5)&&self.$raise("No hyperstack mount point found!\nCheck your Rails routes.rb file"),self.$opts()["$[]"]("transport")["$=="]("pusher")?($writer=["dispatch",$send(self,"lambda",[],($$33=function(e){var t=null==$$33.$$s?this:$$33.$$s;return null==e&&(e=nil),t.$sync_dispatch($$($nesting,"JSON").$parse(JSON.stringify(e)))},$$33.$$s=self,$$33.$$arity=1,$$33))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$truthy($truthy($ret_or_6=self.$opts()["$[]"]("client_logging"))?window.console&&window.console.log:$ret_or_6)&&(Pusher.log=function(e){window.console.log(e)}),$truthy(self.$opts()["$[]"]("pusher_fake_js"))?($writer=["pusher_api",eval(self.$opts()["$[]"]("pusher_fake_js"))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]):(h=nil,pusher_api=nil,h={encrypted:self.$opts()["$[]"]("encrypted"),cluster:self.$opts()["$[]"]("cluster"),authEndpoint:window.HyperstackEnginePath+"/hyperstack-pusher-auth",auth:{headers:{"X-CSRF-Token":self.$opts()["$[]"]("form_authenticity_token")}}},pusher_api=new Pusher(self.$opts()["$[]"]("key"),h),$writer=["pusher_api",pusher_api],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)]),$send($$($nesting,"Hyperstack"),"connect",Opal.to_a(self.$opts()["$[]"]("auto_connect")))):self.$opts()["$[]"]("transport")["$=="]("action_cable")?($writer=["action_cable_consumer",ActionCable.createConsumer.apply(ActionCable,[].concat(Opal.to_a(self.$opts()["$[]"]("action_cable_consumer_url"))))],$send(self.$opts(),"[]=",Opal.to_a($writer)),$writer[$rb_minus($writer.length,1)],$send($$($nesting,"Hyperstack"),"connect",Opal.to_a(self.$opts()["$[]"]("auto_connect")))):self.$opts()["$[]"]("transport")["$=="]("simple_poller")?($send(self.$opts()["$[]"]("auto_connect"),"each",[],($$34=function(e){null==$$34.$$s||$$34.$$s;return null==e&&(e=nil),$send($$($nesting,"IncomingBroadcast"),"add_connection",Opal.to_a(e))},$$34.$$s=self,$$34.$$arity=1,$$34)),$send(self,"every",[self.$opts()["$[]"]("seconds_between_poll")],($$35=function(){return(null==$$35.$$s?this:$$35.$$s).$get_queued_data("read",nil)},$$35.$$s=self,$$35.$$arity=0,$$35))):nil):nil)},$ClientDrivers_initialize_client_drivers_on_boot$31.$$arity=0),Opal.defs(self,"$polling_path",$ClientDrivers_polling_path$36=function(e,t){var n=this,r=nil;return null==t&&(t=nil),r=window.HyperstackEnginePath+"/hyperstack-"+e+"/"+n.$opts()["$[]"]("id"),$truthy(t)&&(r=r+"/"+t),r},$ClientDrivers_polling_path$36.$$arity=-2),nil&&"polling_path"}($nesting[0],null,$nesting)}($nesting[0],$nesting)},Opal.modules["hyper-operation/exception"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.send,u=e.send2,l=e.find_super,c=e.truthy;return e.add_stubs(["$new","$collect","$[]","$attr_accessor","$+","$to_s","$on_error","$as_json","$errors","$is_a?","$new_from_error_hash"]),function(t,n){var $=[i(t,"Mutations")].concat(n);(function(t,$super,n){var $,i=o(t,null,"ErrorArray"),u=[i].concat(n);e.defs(i,"$new_from_error_hash",$=function(e){var t,n=this;return n.$new(s(e,"collect",[],((t=function(e,n){null==t.$$s||t.$$s;return null==e&&(e=r),null==n&&(n=r),a(u,"ErrorAtom").$new(e,n["$[]"]("symbol"),n)}).$$s=n,t.$$arity=2,t)))},$.$$arity=1)})($[0],0,$)}(n[0],n),function(n,s){var p=[i(n,"Hyperstack")].concat(s);return function(n,$super,$){var i,s,p=o(n,$super,"AccessViolation"),d=[p].concat($);p.$attr_accessor("details"),e.def(p,"$initialize",i=function(e,n){var $=i.$$p,a=this;return $&&(i.$$p=null),null==e&&(e=r),null==n&&(n=r),u(a,l(a,"initialize",i,!1,!0),"initialize",["Hyperstack::AccessViolation"+(c(e)?t(":",e.$to_s()):r)],null),a.details=n},i.$$arity=-1),e.def(p,"$__hyperstack_on_error",s=function(e,t,n){var r=this;return a(d,"Hyperstack").$on_error(e,r,t,n)},s.$$arity=3)}(p[0],a(p,"StandardError"),p),function(t,$super,n){var i=[o(t,null,"Operation")].concat(n);return function(t,$super,n){var i,s,p=o(t,$super,"ValidationException"),d=[p].concat(n);return e.def(p,"$as_json",i=function(){var t=this;return e.slice.call(arguments,0,arguments.length),t.$errors().$as_json()},i.$$arity=-1),e.def(p,"$initialize",s=function(e){var t=s.$$p,n=this;return t&&(s.$$p=null),c(e["$is_a?"]($(a(d,"Mutations"),"ErrorHash")))||(e=$(a(d,"Mutations"),"ErrorArray").$new_from_error_hash(e)),u(n,l(n,"initialize",s,!1,!0),"initialize",[e],null)},s.$$arity=1),r&&"initialize"}(i[0],$(a(i,"Mutations"),"ValidationException"),i)}(p[0],0,p)}(n[0],n)},Opal.modules["hyper-operation/promise"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var $=[],a=e.nil,i=e.$$$,o=e.$$,s=e.klass,u=e.hash2,l=e.truthy,c=e.send,p=e.alias,d=e.send2,f=e.find_super;return e.add_stubs(["$resolve","$new","$reject","$attr_reader","$===","$value","$has_key?","$keys","$!","$==","$realized?","$<<","$>>","$exception?","$[]","$resolved?","$rejected?","$error","$include?","$action","$raise","$^","$call","$resolve!","$exception!","$any?","$each","$reject!","$is_a?","$result","$there_can_be_only_one!","$then","$to_proc","$fail","$always","$trace","$class","$object_id","$+","$inspect","$act?","$nil?","$prev","$push","$concat","$it","$proc","$reverse","$pop","$<=","$length","$shift","$-","$wait","$map","$reduce","$try","$tap","$all?","$find"]),function($,$super,_){var h,y,v,m,g,b,w,k,O,E,x,S,q,N,C,z,I,D,H,A,j,M,R,T,B,P,L,F,U,W,K=s($,null,"Promise"),X=[K].concat(_);return K.$$prototype.value=K.$$prototype.action=K.$$prototype.exception=K.$$prototype.realized=K.$$prototype.next=K.$$prototype.delayed=K.$$prototype.error=K.$$prototype.prev=a,e.defs(K,"$value",h=function(e){return this.$new().$resolve(e)},h.$$arity=1),e.defs(K,"$error",y=function(e){return this.$new().$reject(e)},y.$$arity=1),e.defs(K,"$when",v=function(){var t;return t=e.slice.call(arguments,0,arguments.length),o(X,"When").$new(t)},v.$$arity=-1),function(t,$super,n){var r,$=s(t,$super,"Fail");[$].concat(n);$.$attr_reader("result"),e.def($,"$initialize",r=function(e){return this.result=e},r.$$arity=1)}(X[0],o(X,"StandardError"),X),K.$attr_reader("error","prev","next"),e.def(K,"$initialize",m=function(e){var t=this;return null==e&&(e=u([],{})),t.action=e,t.realized=!1,t.exception=!1,t.value=a,t.error=a,t.delayed=!1,t.prev=a,t.next=[]},m.$$arity=-1),e.def(K,"$value",g=function(){var e=this;return l(o(X,"Promise")["$==="](e.value))?e.value.$value():e.value},g.$$arity=0),e.def(K,"$act?",b=function(){var e=this,t=a;return l(t=e.action["$has_key?"]("success"))?t:e.action["$has_key?"]("always")},b.$$arity=0),e.def(K,"$action",w=function(){return this.action.$keys()},w.$$arity=0),e.def(K,"$exception?",k=function(){return this.exception},k.$$arity=0),e.def(K,"$realized?",O=function(){return this.realized["$!"]()["$!"]()},O.$$arity=0),e.def(K,"$resolved?",E=function(){return this.realized["$=="]("resolve")},E.$$arity=0),e.def(K,"$rejected?",x=function(){return this.realized["$=="]("reject")},x.$$arity=0),e.def(K,"$pending?",S=function(){return this["$realized?"]()["$!"]()},S.$$arity=0),e.def(K,"$^",q=function(e){var t=this;return e["$<<"](t),t["$>>"](e),e},q.$$arity=1),e.def(K,"$<<",N=function(e){var t=this;return t.prev=e,t},N.$$arity=1),e.def(K,"$>>",C=function(e){var t=this,n=a;return t.next["$<<"](e),l(t["$exception?"]())?e.$reject(t.delayed["$[]"](0)):l(t["$resolved?"]())?e.$resolve(l(t.delayed)?t.delayed["$[]"](0):t.$value()):l(t["$rejected?"]())&&(l(l(n=t.action["$has_key?"]("failure")["$!"]())?n:o(X,"Promise")["$==="](l(t.delayed)?t.delayed["$[]"](0):t.error))?e.$reject(l(t.delayed)?t.delayed["$[]"](0):t.$error()):l(e.$action()["$include?"]("always"))&&e.$reject(l(t.delayed)?t.delayed["$[]"](0):t.$error())),t},C.$$arity=1),e.def(K,"$resolve",z=function(t){var n=this,r=a,$=a,i=a;if(null==t&&(t=a),l(n["$realized?"]())&&n.$raise(o(X,"ArgumentError"),"the promise has already been realized"),l(o(X,"Promise")["$==="](t)))return t["$<<"](n.prev)["$^"](n);try{l(r=l($=n.action["$[]"]("success"))?$:n.action["$[]"]("always"))&&(n.realized="resolve",t=r.$call(t)),n["$resolve!"](t)}catch(s){if(!e.rescue(s,[o(X,"Exception")]))throw s;i=s;try{n["$exception!"](i)}finally{e.pop_exception()}}return n},z.$$arity=-1),e.def(K,"$resolve!",I=function(e){var t,n=this;return n.realized="resolve",n.value=e,l(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),n.$resolve(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},I.$$arity=1),e.def(K,"$reject",D=function(t){var n=this,r=a,$=a,i=a;if(null==t&&(t=a),l(n["$realized?"]())&&n.$raise(o(X,"ArgumentError"),"the promise has already been realized"),l(o(X,"Promise")["$==="](t)))return t["$<<"](n.prev)["$^"](n);try{l(r=l($=n.action["$[]"]("failure"))?$:n.action["$[]"]("always"))&&(n.realized="reject",t=r.$call(t)),l(n.action["$has_key?"]("always"))?n["$resolve!"](t):n["$reject!"](t)}catch(s){if(!e.rescue(s,[o(X,"Exception")]))throw s;i=s;try{n["$exception!"](i)}finally{e.pop_exception()}}return n},D.$$arity=-1),e.def(K,"$reject!",H=function(e){var t,n=this;return n.realized="reject",n.error=e,l(n.next["$any?"]())?c(n.next,"each",[],((t=function(n){null==t.$$s||t.$$s;return null==n&&(n=a),n.$reject(e)}).$$s=n,t.$$arity=1,t)):n.delayed=[e]},H.$$arity=1),e.def(K,"$exception!",A=function(e){var t=this;return l(e["$is_a?"](i(o(X,"Promise"),"Fail")))?e=e.$result():t.exception=!0,t["$reject!"](e)},A.$$arity=1),e.def(K,"$then",j=function(){var e=j.$$p,t=e||a,n=this;return e&&(j.$$p=null),e&&(j.$$p=null),n["$^"](o(X,"Promise").$new(u(["success"],{success:t})))},j.$$arity=0),e.def(K,"$then!",M=function(){var e=M.$$p,t=e||a,n=this;return e&&(M.$$p=null),e&&(M.$$p=null),n["$there_can_be_only_one!"](),c(n,"then",[],t.$to_proc())},M.$$arity=0),p(K,"do","then"),p(K,"do!","then!"),e.def(K,"$fail",R=function(){
var e=R.$$p,t=e||a,n=this;return e&&(R.$$p=null),e&&(R.$$p=null),n["$^"](o(X,"Promise").$new(u(["failure"],{failure:t})))},R.$$arity=0),e.def(K,"$fail!",T=function(){var e=T.$$p,t=e||a,n=this;return e&&(T.$$p=null),e&&(T.$$p=null),n["$there_can_be_only_one!"](),c(n,"fail",[],t.$to_proc())},T.$$arity=0),p(K,"rescue","fail"),p(K,"catch","fail"),p(K,"rescue!","fail!"),p(K,"catch!","fail!"),e.def(K,"$always",B=function(){var e=B.$$p,t=e||a,n=this;return e&&(B.$$p=null),e&&(B.$$p=null),n["$^"](o(X,"Promise").$new(u(["always"],{always:t})))},B.$$arity=0),e.def(K,"$always!",P=function(){var e=P.$$p,t=e||a,n=this;return e&&(P.$$p=null),e&&(P.$$p=null),n["$there_can_be_only_one!"](),c(n,"always",[],t.$to_proc())},P.$$arity=0),p(K,"finally","always"),p(K,"ensure","always"),p(K,"finally!","always!"),p(K,"ensure!","always!"),e.def(K,"$trace",L=function(e){var t=L.$$p,n=t||a,r=this;return t&&(L.$$p=null),t&&(L.$$p=null),null==e&&(e=a),r["$^"](o(X,"Trace").$new(e,n))},L.$$arity=-1),e.def(K,"$trace!",F=function(){var t,n=F.$$p,r=n||a,$=this;return n&&(F.$$p=null),n&&(F.$$p=null),t=e.slice.call(arguments,0,arguments.length),$["$there_can_be_only_one!"](),c($,"trace",e.to_a(t),r.$to_proc())},F.$$arity=-1),e.def(K,"$there_can_be_only_one!",U=function(){var e=this;return l(e.next["$any?"]())?e.$raise(o(X,"ArgumentError"),"a promise has already been chained"):a},U.$$arity=0),e.def(K,"$inspect",W=function(){var e=this,n=a,r=a;return n="#<"+e.$class()+"("+e.$object_id()+")",l(e.next["$any?"]())&&(n=t(n," >> "+e.next.$inspect())),n=l(e["$realized?"]())?t(n,": "+(l(r=e.value)?r:e.error).$inspect()+">"):t(n,">")},W.$$arity=0),function(t,$super,$){var i,p,_=s(t,$super,"Trace"),h=[_].concat($);e.defs(_,"$it",i=function(e){var t=this,n=a,r=a,$=a;return n=[],l(l(r=e["$act?"]())?r:e.$prev()["$nil?"]())&&n.$push(e.$value()),l($=e.$prev())?n.$concat(t.$it($)):n},i.$$arity=1),e.def(_,"$initialize",p=function(t,$){var i,s=p.$$p,_=this;return s&&(p.$$p=null),_.depth=t,d(_,f(_,"initialize",p,!1,!0),"initialize",[u(["success"],{success:c(_,"proc",[],(i=function(){var s=null==i.$$s?this:i.$$s,u=a,p=a;return(u=o(h,"Trace").$it(s).$reverse()).$pop(),l(l(p=t)?n(t,u.$length()):p)&&u.$shift(r(u.$length(),t)),c($,"call",e.to_a(u))},i.$$s=_,i.$$arity=0,i))})],null)},p.$$arity=2)}(X[0],K,X),function(t,$super,n){var r,$,i,u,_,h,y,v=s(t,$super,"When"),m=[v].concat(n);return v.$$prototype.wait=a,e.def(v,"$initialize",r=function(e){var t,n=r.$$p,$=this;return n&&(r.$$p=null),null==e&&(e=[]),d($,f($,"initialize",r,!1,!0),"initialize",[],null),$.wait=[],c(e,"each",[],((t=function(e){var n=null==t.$$s?this:t.$$s;return null==e&&(e=a),n.$wait(e)}).$$s=$,t.$$arity=1,t))},r.$$arity=-1),e.def(v,"$each",$=function(){var e,t=$.$$p,n=t||a,r=this;return t&&($.$$p=null),t&&($.$$p=null),l(n)||r.$raise(o(m,"ArgumentError"),"no block given"),c(r,"then",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=a),c(t,"each",[],n.$to_proc())}).$$s=r,e.$$arity=1,e))},$.$$arity=0),e.def(v,"$collect",i=function(){var e,t=i.$$p,n=t||a,r=this;return t&&(i.$$p=null),t&&(i.$$p=null),l(n)||r.$raise(o(m,"ArgumentError"),"no block given"),c(r,"then",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=a),o(m,"When").$new(c(t,"map",[],n.$to_proc()))}).$$s=r,e.$$arity=1,e))},i.$$arity=0),e.def(v,"$inject",u=function(){var t,n,r,$=u.$$p,i=$||a,o=this;return $&&(u.$$p=null),$&&(u.$$p=null),t=e.slice.call(arguments,0,arguments.length),n=t,c(o,"then",[],((r=function(t){null==r.$$s||r.$$s;return null==t&&(t=a),c(t,"reduce",e.to_a(n),i.$to_proc())}).$$s=o,r.$$arity=1,r))},u.$$arity=-1),p(v,"map","collect"),p(v,"reduce","inject"),e.def(v,"$wait",_=function(e){var t,n=this;return l(o(m,"Promise")["$==="](e))||(e=o(m,"Promise").$value(e)),l(e["$act?"]())&&(e=e.$then()),n.wait["$<<"](e),c(e,"always",[],((t=function(){var e=null==t.$$s?this:t.$$s;return null==e.next&&(e.next=a),l(e.next["$any?"]())?e.$try():a}).$$s=n,t.$$arity=0,t)),n},_.$$arity=1),p(v,"and","wait"),e.def(v,"$>>",h=function(){var t,n,r=h.$$p,$=this;return r&&(h.$$p=null),t=e.slice.call(arguments,0,arguments.length),c(d($,f($,">>",h,!1,!0),">>",e.to_a(t),r),"tap",[],((n=function(){return(null==n.$$s?this:n.$$s).$try()}).$$s=$,n.$$arity=0,n))},h.$$arity=-1),e.def(v,"$try",y=function(){var e=this,t=a;return l(c(e.wait,"all?",[],"realized?".$to_proc()))?l(t=c(e.wait,"find",[],"rejected?".$to_proc()))?e.$reject(t.$error()):e.$resolve(c(e.wait,"map",[],"value".$to_proc())):a},y.$$arity=0),a&&"try"}(X[0],K,X)}($[0],0,$)},Opal.modules["hyper-operation/railway"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.klass;return function(e,t){var a=[r(e,"Hyperstack")].concat(t);return function(e,$super,t){[$(e,null,"Operation")].concat(t);return n}(a[0],0,a)}(t[0],t)},Opal.modules["hyper-operation/api"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.send,l=e.hash2,c=e.hash;return e.add_stubs(["$is_a?","$raise","$new","$tap","$split","$to_s","$pop","$inject","$[]","$to_sym","$[]=","$-","$!","$nil?","$abort!","$succeed!","$_Railway","$class","$_run","$instance_eval","$process_params","$process_validations","$run","$rejected?","$dispatch","$result","$then","$to_proc","$fail","$add_param","$get_name_and_opts","$merge","$each","$add_validation","$add_error","$add_step","$add_failed","$add_async","$add_receiver","$singleton_class","$define_singleton_method","$set_var","$superclass","$==","$instance_variable_get","$instance_variable_set","$dup"]),function(n,p){var d=[i(n,"Hyperstack")].concat(p);return function(n,$super,i){var p,d,f,_,h,y,v=o(n,null,"Operation"),m=[v].concat(i);return v.$$prototype.errors=v.$$prototype.params=r,e.def(v,"$add_error",p=function(n,i,o){var c,p=this,d=r;return null==o&&(o=r),s(i["$is_a?"](a(m,"Symbol")))||p.$raise(a(m,"ArgumentError").$new("Invalid kind")),p.errors=s(d=p.errors)?d:$(a(m,"Mutations"),"ErrorHash").$new(),u(p.errors,"tap",[],((c=function(p){var d,f=null==c.$$s?this:c.$$s,_=r,h=r,y=r,v=r;return null==p&&(p=r),h=(_=n.$to_s().$split(".")).$pop(),y=u(_,"inject",[p],((d=function(n,i){null==d.$$s||d.$$s;var o=r,l=r;return null==n&&(n=r),null==i&&(i=r),s(o=n["$[]"](i.$to_sym()))?o:(l=[i.$to_sym(),$(a(m,"Mutations"),"ErrorHash").$new()],u(n,"[]=",e.to_a(l)),l[t(l.length,1)])}).$$s=f,d.$$arity=2,d)),v=[h,$(a(m,"Mutations"),"ErrorAtom").$new(n,i,l(["message"],{message:o}))],u(y,"[]=",e.to_a(v)),v[t(v.length,1)]}).$$s=p,c.$$arity=1,c))},p.$$arity=-3),e.def(v,"$has_errors?",d=function(){return this.errors["$nil?"]()["$!"]()},d.$$arity=0),e.def(v,"$params",f=function(){return this.params},f.$$arity=0),e.def(v,"$abort!",_=function(e){return null==e&&(e=r),a(m,"Railway")["$abort!"](e)},_.$$arity=-1),e.def(v,"$succeed!",h=function(e){return null==e&&(e=r),a(m,"Railway")["$succeed!"](e)},h.$$arity=-1),e.def(v,"$initialize",y=function(){var e=this;return e._railway=e.$class().$_Railway().$new(e)},y.$$arity=0),function(t,n){var i,o,p,d,f,_,h,y,v,m,g,b,w,k,O,E=[t].concat(n);e.def(t,"$run",i=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),u(n,"_run",e.to_a(t))},i.$$arity=-1),e.def(t,"$_run",o=function(){var t,n,$,a=this;return t=e.slice.call(arguments,0,arguments.length),n=t,u(a.$new(),"instance_eval",[],(($=function(){var e=null==$.$$s?this:$.$$s,t=r;return null==e._railway&&(e._railway=r),e._railway.$process_params(n),e._railway.$process_validations(),e._railway.$run(),s((t=e._railway.$dispatch())["$rejected?"]())?t:e._railway.$result()}).$$s=a,$.$$arity=0,$))},o.$$arity=-1),e.def(t,"$then",p=function(){var t,n=p.$$p,$=n||r,a=this;return n&&(p.$$p=null),n&&(p.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(u(a,"run",e.to_a(t)),"then",[],$.$to_proc())},p.$$arity=-1),e.def(t,"$fail",d=function(){var t,n=d.$$p,$=n||r,a=this;return n&&(d.$$p=null),n&&(d.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(u(a,"run",e.to_a(t)),"fail",[],$.$to_proc())},d.$$arity=-1),e.def(t,"$param",f=function(){var t,n=f.$$p,$=n||r,a=this;return n&&(f.$$p=null),n&&(f.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$_Railway(),"add_param",e.to_a(t),$.$to_proc())},f.$$arity=-1),e.def(t,"$inbound",_=function(){var t,n,$,i=_.$$p,o=i||r,s=this,c=r,p=r;return i&&(_.$$p=null),i&&(_.$$p=null),t=e.slice.call(arguments,0,arguments.length),$=u(a(E,"ParamsWrapper"),"get_name_and_opts",e.to_a(t)),c=null==(n=e.to_ary($))[0]?r:n[0],p=null==n[1]?r:n[1],u(s.$_Railway(),"add_param",[c,p.$merge(l(["inbound"],{inbound:"true"}))],o.$to_proc())},_.$$arity=-1),e.def(t,"$outbound",h=function(){var t,n,$=this;return t=e.slice.call(arguments,0,arguments.length),u(t,"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=r),t.$_Railway().$add_param(c(e,r,"type","outbound"))}).$$s=$,n.$$arity=1,n))},h.$$arity=-1),e.def(t,"$validate",y=function(){var t,n=y.$$p,$=n||r,a=this;return n&&(y.$$p=null),n&&(y.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$_Railway(),"add_validation",e.to_a(t),$.$to_proc())},y.$$arity=-1),e.def(t,"$add_error",v=function(t,n,$){var a,i=v.$$p,o=i||r,s=this;return i&&(v.$$p=null),i&&(v.$$p=null),a=e.slice.call(arguments,3,arguments.length),u(s.$_Railway(),"add_error",[t,n,$].concat(e.to_a(a)),o.$to_proc())},v.$$arity=-4),e.def(t,"$step",m=function(){var t,n=m.$$p,$=n||r,a=this;return n&&(m.$$p=null),n&&(m.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$_Railway(),"add_step",e.to_a(t),$.$to_proc())},m.$$arity=-1),e.def(t,"$failed",g=function(){var t,n=g.$$p,$=n||r,a=this;return n&&(g.$$p=null),n&&(g.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$_Railway(),"add_failed",e.to_a(t),$.$to_proc())},g.$$arity=-1),e.def(t,"$async",b=function(){var t,n=b.$$p,$=n||r,a=this;return n&&(b.$$p=null),n&&(b.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(a.$_Railway(),"add_async",e.to_a(t),$.$to_proc())},b.$$arity=-1),e.def(t,"$on_dispatch",w=function(){var e=w.$$p,t=e||r,n=this;return e&&(w.$$p=null),e&&(w.$$p=null),u(n.$_Railway(),"add_receiver",[],t.$to_proc())},w.$$arity=0),e.def(t,"$_Railway",k=function(){return this.$singleton_class().$_Railway()},k.$$arity=0),e.def(t,"$inherited",O=function(t){var n,i,o,p,d,f,_,h,y,v=O.$$p,m=this;return v&&(O.$$p=null),u(t.$singleton_class(),"define_singleton_method",["param"],((n=function(){var t,$=null==n.$$s?this:n.$$s,a=n.$$p,i=a||r;return a&&(n.$$p=null),t=e.slice.call(arguments,0,arguments.length),u($.$_Railway(),"add_param",e.to_a(t),i.$to_proc())}).$$s=m,n.$$arity=-1,n)),u(t.$singleton_class(),"define_singleton_method",["inbound"],((i=function(){var t,n,$,o=null==i.$$s?this:i.$$s,s=i.$$p,c=s||r,p=r,d=r;return s&&(i.$$p=null),t=e.slice.call(arguments,0,arguments.length),$=u(a(E,"ParamsWrapper"),"get_name_and_opts",e.to_a(t)),p=null==(n=e.to_ary($))[0]?r:n[0],d=null==n[1]?r:n[1],u(o.$_Railway(),"add_param",[p,d.$merge(l(["inbound"],{inbound:"true"}))],c.$to_proc())}).$$s=m,i.$$arity=-1,i)),u(t.$singleton_class(),"define_singleton_method",["outbound"],((o=function(){var t,n,$=null==o.$$s?this:o.$$s;return t=e.slice.call(arguments,0,arguments.length),u(t,"each",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=r),t.$_Railway().$add_param(c(e,r,"type","outbound"))}).$$s=$,n.$$arity=1,n))}).$$s=m,o.$$arity=-1,o)),u(t.$singleton_class(),"define_singleton_method",["validate"],((p=function(){var t,n=null==p.$$s?this:p.$$s,$=p.$$p,a=$||r;return $&&(p.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(n.$_Railway(),"add_validation",e.to_a(t),a.$to_proc())}).$$s=m,p.$$arity=-1,p)),u(t.$singleton_class(),"define_singleton_method",["add_error"],((d=function(t,n,$){var a,i=null==d.$$s?this:d.$$s,o=d.$$p,s=o||r;return o&&(d.$$p=null),null==t&&(t=r),null==n&&(n=r),null==$&&($=r),a=e.slice.call(arguments,3,arguments.length),u(i.$_Railway(),"add_error",[t,n,$].concat(e.to_a(a)),s.$to_proc())}).$$s=m,d.$$arity=-4,d)),u(t.$singleton_class(),"define_singleton_method",["step"],((f=function(){var t,n=null==f.$$s?this:f.$$s,$=f.$$p,a=$||r;return $&&(f.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(n.$_Railway(),"add_step",[l(["scope"],{scope:"class"})].concat(e.to_a(t)),a.$to_proc())}).$$s=m,f.$$arity=-1,f)),u(t.$singleton_class(),"define_singleton_method",["failed"],((_=function(){var t,n=null==_.$$s?this:_.$$s,$=_.$$p,a=$||r;return $&&(_.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(n.$_Railway(),"add_failed",[l(["scope"],{scope:"class"})].concat(e.to_a(t)),a.$to_proc())}).$$s=m,_.$$arity=-1,_)),u(t.$singleton_class(),"define_singleton_method",["async"],((h=function(){var t,n=null==h.$$s?this:h.$$s,$=h.$$p,a=$||r;return $&&(h.$$p=null),t=e.slice.call(arguments,0,arguments.length),u(n.$_Railway(),"add_async",[l(["scope"],{scope:"class"})].concat(e.to_a(t)),a.$to_proc())}).$$s=m,h.$$arity=-1,h)),u(t.$singleton_class(),"define_singleton_method",["_Railway"],((y=function(){var e,t=null==y.$$s?this:y.$$s;return u($(a(E,"Hyperstack"),"Context"),"set_var",[t,"@_railway"],((e=function(){var t,n=null==e.$$s?this:e.$$s,$=r,i=r;return($=s(i=n.$superclass())?i:n.$$singleton_of.$superclass().$singleton_class())["$=="](a(E,"Operation").$singleton_class())?a(E,"Class").$new(a(E,"Railway")):u(a(E,"Class").$new($.$_Railway()),"tap",[],((t=function(e){var n,a=null==t.$$s?this:t.$$s;return null==e&&(e=r),u(["@validations","@tracks","@receivers"],"each",[],((n=function(t){null==n.$$s||n.$$s;var a=r,i=r;return null==t&&(t=r),a=$.$_Railway().$instance_variable_get(t),e.$instance_variable_set(t,s(i=a)?a.$dup():i)}).$$s=a,n.$$arity=1,n))}).$$s=n,t.$$arity=1,t))}).$$s=t,e.$$arity=0,e))}).$$s=m,y.$$arity=0,y))},O.$$arity=1)}(e.get_singleton_class(v),m),function(t,$super,n){var $,a=o(t,null,"Railway");[a].concat(n);return e.def(a,"$initialize",$=function(e){return this.operation=e},$.$$arity=1),r&&"initialize"}(m[0],0,m)}(d[0],0,d)}(n[0],n)},Opal.modules["hyper-operation/railway/dispatcher"]=function(e){e.top;var t=[],n=e.nil,r=e.$$$,$=e.$$,a=e.module,i=e.klass,o=e.send,s=e.hash2,u=e.lambda;return e.add_stubs(["$receivers","$class","$set_var","$call","$to_proc","$define_singleton_method","$delete","$<<","$then","$result","$each","$dispatch_params","$params_wrapper","$params"]),function(t,l){var c=[a(t,"Hyperstack")].concat(l);return function(t,$super,a){var l=[i(t,null,"Operation")].concat(a);return function(t,$super,a){var l,c,p=i(t,null,"Railway"),d=[p].concat(a);return e.def(p,"$receivers",l=function(){return this.$class().$receivers()},l.$$arity=0),function(t,a){var i,l,c=[t].concat(a);e.def(t,"$receivers",i=function(){var e,t=this;return o(r($(c,"Hyperstack"),"Context"),"set_var",[t,"@receivers",s(["force"],{force:!0})],((e=function(){null==e.$$s||e.$$s;return[]}).$$s=t,e.$$arity=0,e))},i.$$arity=0),e.def(t,"$add_receiver",l=function(){var t,r,$=l.$$p,a=$||n,i=this,s=n,c=n;return $&&(l.$$p=null),$&&(l.$$p=null),s=u(((t=function(){null==t.$$s||t.$$s;var r,$=t.$$p,i=$||n;return $&&(t.$$p=null),r=e.slice.call(arguments,0,arguments.length),o(a,"call",e.to_a(r),i.$to_proc())}).$$s=i,t.$$arity=-1,t)),c=i,o(s,"define_singleton_method",["unmount"],((r=function(){null==r.$$s||r.$$s;return c.$receivers().$delete(s)}).$$s=i,r.$$arity=0,r)),i.$receivers()["$<<"](s),s},l.$$arity=0)}(e.get_singleton_class(p),d),e.def(p,"$dispatch",c=function(){var e,t=this;return o(t.$result(),"then",[],((e=function(){var t,r=null==e.$$s?this:e.$$s;return o(r.$receivers(),"each",[],((t=function(e){var r=null==t.$$s?this:t.$$s;return null==r.operation&&(r.operation=n),null==e&&(e=n),e.$call(r.$class().$params_wrapper().$dispatch_params(r.operation.$params()),r.operation)}).$$s=r,t.$$arity=1,t))}).$$s=t,e.$$arity=0,e))},c.$$arity=0),n&&"dispatch"}(l[0],0,l)}(c[0],0,c)}(t[0],t)},Opal.modules["hyper-operation/railway/params_wrapper"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.klass,u=e.truthy,l=e.send,c=e.hash2;return e.add_stubs(["$dup","$each","$inbound_params","$class","$delete","$with_indifferent_access","$to_s","$to_h","$inject","$respond_to?","$raise","$new","$merge!","$combine_arg_array","$filter","$hash_filter","$instance_eval","$translate_args","$to_proc","$<<","$key?","$optional","$send","$required","$define_method","$[]","$method_missing","$[]=","$-","$lock","$get_name_and_opts","$is_a?","$>","$count","$first","$==","$proc","$duck","$underscore","$last","$process_params","$params_wrapper","$add_param","$set_var","$superclass","$tap","$instance_variable_set"]),function(r,p){var d=[o(r,"Hyperstack")].concat(p);return function(r,$super,o){var p=[s(r,null,"Operation")].concat(o);return function(r,$super,o){var p,d,f,_,h=s(r,null,"ParamsWrapper"),y=[h].concat(o);h.$$prototype.inputs=h.$$prototype.locked=$,e.def(h,"$initialize",p=function(e){return this.inputs=e},p.$$arity=1),e.def(h,"$lock",d=function(){var e=this;return e.locked=!0,e},d.$$arity=0),e.def(h,"$to_h",f=function(){var e,t=this,n=$;return n=t.inputs,u(t.locked)&&(n=n.$dup(),l(t.$class().$inbound_params(),"each",[],((e=function(t){null==e.$$s||e.$$s;return null==t&&(t=$),n.$delete(""+t)}).$$s=t,e.$$arity=1,e))),n.$with_indifferent_access()},f.$$arity=0),e.def(h,"$to_s",_=function(){return this.$to_h().$to_s()},_.$$arity=0),function(r,o){var s,p,d,f,_,h,y,v,m=[r].concat(o);e.def(r,"$combine_arg_array",s=function(e){var t,n=this;return l(e,"inject",[c([],{}).$with_indifferent_access()],((t=function(e,n){var r=null==t.$$s?this:t.$$s;return null==e&&(e=$),null==n&&(n=$),u(n["$respond_to?"]("to_h"))||r.$raise(i(m,"ArgumentError").$new("All arguments must be hashes")),e["$merge!"](n.$to_h())}).$$s=n,t.$$arity=2,t))},s.$$arity=1),e.def(r,"$process_params",p=function(t,n){var r,a,i,o=this,s=$,u=$,c=$,p=$;return s=o.$combine_arg_array(n),a=o.$hash_filter().$filter(s),u=null==(r=e.to_ary(a))[0]?$:r[0],c=null==r[1]?$:r[1],p=o.$new(u),l(t,"instance_eval",[],((i=function(){var e,t=null==i.$$s?this:i.$$s;return e=[s,p,c],t.raw_inputs=e[0],t.params=e[1],t.errors=e[2],e}).$$s=o,i.$$arity=0,i))},p.$$arity=2),e.def(r,"$add_param",d=function(){var n,r,a,i,o,s,c,p=d.$$p,f=p||$,_=this,h=$,y=$,v=$;return p&&(d.$$p=null),p&&(d.$$p=null),n=e.slice.call(arguments,0,arguments.length),a=l(_,"translate_args",e.to_a(n),f.$to_proc()),r=e.to_ary(a),h=null==r[0]?$:r[0],y=null==r[1]?$:r[1],v=null==r[2]?$:r[2],f=null==r[3]?$:r[3],u(v.$delete("inbound"))&&_.$inbound_params()["$<<"](""+y),u(v["$key?"]("default"))?l(_.$hash_filter(),"optional",[],((i=function(){var e=null==i.$$s?this:i.$$s;return l(e,"send",[h,y,v],f.$to_proc())}).$$s=_,i.$$arity=0,i)):l(_.$hash_filter(),"required",[],((o=function(){var e=null==o.$$s?this:o.$$s;return l(e,"send",[h,y,v],f.$to_proc())}).$$s=_,o.$$arity=0,o)),l(_,"define_method",[y],((s=function(){var e=null==s.$$s?this:s.$$s;return null==e.inputs&&(e.inputs=$),e.inputs["$[]"](y)}).$$s=_,s.$$arity=0,s)),l(_,"define_method",[y+"="],((c=function(n){var r=null==c.$$s?this:c.$$s,a=$;return null==r.locked&&(r.locked=$),null==r.inputs&&(r.inputs=$),null==n&&(n=$),u(r.locked)&&r.$method_missing(y+"=",n),a=[y,n],l(r.inputs,"[]=",e.to_a(a)),a[t(a.length,1)]}).$$s=_,c.$$arity=1,c))},d.$$arity=-1),e.def(r,"$dispatch_params",f=function(e,t){var n,r=this;return null==t&&(t=c([],{})),e=e.$dup(),l(t,"each",[],((n=function(t){var r,a=null==n.$$s?this:n.$$s;return null==t&&(t=$),l(t,"each",[],((r=function(t,n){null==r.$$s||r.$$s;return null==t&&(t=$),null==n&&(n=$),e.$send(t+"=",n)}).$$s=a,r.$$arity=2,r))}).$$s=r,n.$$arity=1,n)),e.$lock()},f.$$arity=-2),e.def(r,"$hash_filter",_=function(){var e=this,t=$;return null==e.hash_filter&&(e.hash_filter=$),e.hash_filter=u(t=e.hash_filter)?t:a(i(m,"Mutations"),"HashFilter").$new()},_.$$arity=0),e.def(r,"$inbound_params",h=function(){var e=this,t=$;return null==e.inbound_params&&(e.inbound_params=$),e.inbound_params=u(t=e.inbound_params)?t:i(m,"Set").$new()},h.$$arity=0),e.def(r,"$translate_args",y=function(){var r,a,o,s,c,p=y.$$p,d=p||$,f=this,_=$,h=$,v=$,g=$,b=$,w=$,k=$;return p&&(y.$$p=null),p&&(y.$$p=null),r=e.slice.call(arguments,0,arguments.length),o=l(f,"get_name_and_opts",e.to_a(r)),_=null==(a=e.to_ary(o))[0]?$:a[0],h=null==a[1]?$:a[1],u(h["$key?"]("type"))?(v=h.$delete("type"),u(v["$is_a?"](i(m,"Array")))?(u(n(v.$count(),0))&&(g=["class",v.$first()],l(h,"[]=",e.to_a(g)),g[t(g.length,1)]),v=i(m,"Array")):u(u(b=v["$is_a?"](i(m,"Hash")))?b:v["$=="](i(m,"Hash")))&&(v=i(m,"Hash"),d=u(w=d)?w:l(f,"proc",[],((s=function(){return(null==s.$$s?this:s.$$s).$duck("*")}).$$s=f,s.$$arity=0,s))),v=v.$to_s().$underscore()):v="duck",[v,_,h,u(k=d)?k:l(f,"proc",[],((c=function(){return null==c.$$s||c.$$s,$}).$$s=f,c.$$arity=0,c))]},y.$$arity=-1),e.def(r,"$get_name_and_opts",v=function(){var n,r,a=$,o=$,s=$,p=$;return n=e.slice.call(arguments,0,arguments.length),u((r=n)["$[]"](0)["$is_a?"](i(m,"Hash")))?(o=(a=r["$[]"](0)).$first().$first(),s=["default",a.$first().$last()],l(a,"[]=",e.to_a(s)),s[t(s.length,1)],a.$delete(o)):(o=r["$[]"](0),a=u(p=r["$[]"](1))?p:c([],{})),[o,a]},v.$$arity=-1)}(e.get_singleton_class(h),y)}(p[0],0,p),function(t,$super,n){var r,o,c,p=s(t,null,"Railway"),d=[p].concat(n);return p.$$prototype.operation=$,e.def(p,"$process_params",r=function(e){var t=this;return t.$class().$params_wrapper().$process_params(t.operation,e)},r.$$arity=1),e.defs(p,"$add_param",o=function(){var t,n=o.$$p,r=n||$,a=this;return n&&(o.$$p=null),n&&(o.$$p=null),t=e.slice.call(arguments,0,arguments.length),l(a.$params_wrapper(),"add_param",e.to_a(t),r.$to_proc())},o.$$arity=-1),e.defs(p,"$params_wrapper",c=function(){var e,t=this;return l(a(i(d,"Hyperstack"),"Context"),"set_var",[t,"@params_wrapper"],((e=function(){var t,n=null==e.$$s?this:e.$$s;return i(d,"Railway")["$=="](n.$superclass())?i(d,"Class").$new(i(d,"ParamsWrapper")):l(i(d,"Class").$new(n.$superclass().$params_wrapper()),"tap",[],((t=function(e){var n=null==t.$$s?this:t.$$s,r=$,a=$,i=$,o=$;return null==e&&(e=$),r=n.$superclass().$params_wrapper().$hash_filter(),e.$instance_variable_set("@hash_filter",u(a=r)?r.$dup():a),i=n.$superclass().$params_wrapper().$inbound_params(),e.$instance_variable_set("@inbound_params",u(o=i)?i.$dup():o)}).$$s=n,t.$$arity=1,t))}).$$s=t,e.$$arity=0,e))},c.$$arity=0),$&&"params_wrapper"}(p[0],0,p)}(d[0],0,d)}(r[0],r)},Opal.modules["hyper-operation/railway/run"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}e.top;var n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.klass,s=e.truthy,u=e.hash2,l=e.send;return e.add_stubs(["$attr_reader","$tracks","$class","$merge","$zero?","$count","$is_a?","$[]","$==","$<","$proc","$run","$params","$instance_method","$each","$define_method","$<<","$build_tie","$raise","$new","$then","$apply","$always","$rejected?","$!=","$resolve","$step","$method","$arity","$instance_exec","$to_proc","$state","$result","$call","$bind","$include?"]),function(n,c){var p=[i(n,"Hyperstack")].concat(c);return function(n,$super,i){var c=[o(n,null,"Operation")].concat(i);return function(t,$super,n){var $,a,i=o(t,$super,"Exit");[i].concat(n);i.$$prototype.state=r,i.$attr_reader("state"),i.$attr_reader("result"),e.def(i,"$initialize",$=function(e,t){var n=this;return null==t&&(t=r),n.state=e,n.result=t},$.$$arity=-2),e.def(i,"$to_s",a=function(){return this.state},a.$$arity=0)}(c[0],a(c,"StandardError"),c),function(n,$super,i){var c,p,d,f,_,h,y,v=o(n,null,"Railway"),m=[v].concat(i);return v.$$prototype.promise_chain=v.$$prototype.last_async_result=v.$$prototype.state=v.$$prototype.operation=v.$$prototype.promise_chain_start=v.$$prototype.last_result=v.$$prototype.result=r,e.def(v,"$tracks",c=function(){return this.$class().$tracks()},c.$$arity=0),function(n,$){var i,o,c,p,d,f=[n].concat($);e.def(n,"$tracks",i=function(){var e=this,t=r;return null==e.tracks&&(e.tracks=r),e.tracks=s(t=e.tracks)?t:[]},i.$$arity=0),e.def(n,"$build_tie",o=function(e,n,$){var i,o=this,c=r,p=r,d=r,_=r,h=r;return(s(n.$count()["$zero?"]())?u(["run"],{run:$}):s(n["$[]"](0)["$is_a?"](a(f,"Hash")))?u(["scope","run"],{scope:s(n["$[]"](0)["$[]"]("class"))?"class":n["$[]"](0)["$[]"]("scope"),run:s(c=s(p=n["$[]"](0)["$[]"]("class"))?p:n["$[]"](0)["$[]"]("run"))?c:$}):s(s(d=n["$[]"](0)["$=="]("class"))?$:d)?u(["run","scope"],{run:$,scope:"class"}):s(s(_=n["$[]"](0)["$is_a?"](a(f,"Class")))?t(n["$[]"](0),a(f,"Operation")):_)?u(["run"],{run:l(o,"proc",[],(i=function(){var e=null==i.$$s?this:i.$$s;return n["$[]"](0).$run(e.$params())},i.$$s=o,i.$$arity=0,i))}):(s(n["$[]"](1)["$is_a?"](a(f,"Hash")))&&(h=n["$[]"](1)["$[]"]("scope")),u(["run","scope"],{run:n["$[]"](0),scope:h}))).$merge(u(["tie"],{tie:o.$instance_method(e)}))},o.$$arity=3),l(["step","failed","async"],"each",[],((c=function(t){var n,$=null==c.$$s?this:c.$$s;return null==t&&(t=r),l($,"define_method",["add_"+t],((n=function(){var $,a=null==n.$$s?this:n.$$s,i=n.$$p,o=i||r;return i&&(n.$$p=null),$=e.slice.call(arguments,0,arguments.length),a.$tracks()["$<<"](a.$build_tie(t,$,o))}).$$s=$,n.$$arity=-1,n))}).$$s=n,c.$$arity=1,c)),e.def(n,"$abort!",p=function(e){return this.$raise(a(f,"Exit").$new("failed",e))},p.$$arity=1),e.def(n,"$succeed!",d=function(e){return this.$raise(a(f,"Exit").$new("success",e))},d.$$arity=1)}(e.get_singleton_class(v),m),e.def(v,"$step",p=function(e){var t,n=this;return n.promise_chain=l(n.promise_chain,"then",[],((t=function(n){var $=null==t.$$s?this:t.$$s;return null==n&&(n=r),$.$apply(n,"success",e)}).$$s=n,t.$$arity=1,t))},p.$$arity=1),e.def(v,"$failed",d=function(e){var t,n=this;return n.promise_chain=l(n.promise_chain,"always",[],((t=function(n){var $=null==t.$$s?this:t.$$s,a=r;return null==$.promise_chain&&($.promise_chain=r),null==$.state&&($.state=r),null==n&&(n=r),s(s(a=$.promise_chain["$rejected?"]())?$.state["$!="]("abort"):a)&&($.state="failed"),$.$apply(n,"failed",e)}).$$s=n,t.$$arity=1,t))},d.$$arity=1),e.def(v,"$async",f=function(e){var t=this;return t.promise_chain=t.promise_chain_start=a(m,"Promise").$new(),t.promise_chain.$resolve(t.last_async_result),t.$step(e)},f.$$arity=1),e.def(v,"$apply",_=function(t,n,$){var i=this,o=r,u=r,c=r,p=r,d=r,f=r;try{return i.state["$=="](n)?($["$[]"]("scope")["$=="]("class")?(o=[i.operation].concat(e.to_a(t)),u=i.operation.$class()):(o=t,u=i.operation),c=$["$[]"]("run"),s(c["$is_a?"](a(m,"Symbol")))&&(c=u.$method(c)),p=s(c.$arity()["$zero?"]())?l(u,"instance_exec",[],c.$to_proc()):s(s(d=o["$is_a?"](a(m,"Array")))?c.$arity()["$=="](o.$count()):d)?l(u,"instance_exec",e.to_a(o),c.$to_proc()):l(u,"instance_exec",[o],c.$to_proc()),s(p["$is_a?"](a(m,"Promise")))||(i.last_async_result=p),p):t}catch(_){if(e.rescue(_,[a(m,"Exit")])){f=_;try{return f.$state()["$=="]("failed")?(i.state="abort",i.$raise(s(f.$result()["$is_a?"](a(m,"Exception")))?f.$result():f)):(i.state="succeed",f.$result())}finally{e.pop_exception()}}else{if(!e.rescue(_,[a(m,"Exception")]))throw _;f=_;try{return i.state="failed",i.$raise(f)}finally{e.pop_exception()}}}},_.$$arity=3),e.def(v,"$run",h=function(){var e,t=this,n=r;return t.state=s(n=t.state)?n:"success",t.promise_chain_start=t.promise_chain=a(m,"Promise").$new(),t.promise_chain_start.$resolve(t.last_result),t.state["$=="]("abort")?r:l(t.$tracks(),"each",[],((e=function(t){var n=null==e.$$s?this:e.$$s;return null==t&&(t=r),t["$[]"]("tie").$bind(n).$call(t)}).$$s=t,e.$$arity=1,e))},h.$$arity=0),e.def(v,"$result",y=function(){var e,t=this,n=r;return t.result=s(n=t.result)?n:l(t.promise_chain,"always",[],((e=function(t){var n=null==e.$$s?this:e.$$s;return null==n.state&&(n.state=r),null==t&&(t=r),s(["abort","failed"]["$include?"](n.state))?s(t["$is_a?"](a(m,"Exception")))?n.$raise(t):n.$raise($(a(m,"Promise"),"Fail").$new(t)):t}).$$s=t,e.$$arity=1,e))},y.$$arity=0),r&&"result"}(c[0],0,c)}(p[0],0,p)}(n[0],n)},Opal.modules["hyper-operation/railway/validations"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}e.top;var n=[],r=e.nil,$=(e.$$$,e.$$),a=e.module,i=e.klass,o=e.truthy,s=e.send;return e.add_stubs(["$validations","$class","$add_error","$+","$to_s","$[]","$<<","$add_validation","$instance_eval","$to_proc","$==","$state","$raise","$new","$result","$each_with_index","$is_a?","$method","$instance_exec","$add_validation_error","$===","$has_errors?","$instance_variable_get"]),function(n,u){var l=[a(n,"Hyperstack")].concat(u);return function(n,$super,a){var u=[i(n,null,"Operation")].concat(a);return function(n,$super,a){var u,l,c,p=i(n,null,"Railway"),d=[p].concat(a);return p.$$prototype.operation=p.$$prototype.last_result=p.$$prototype.state=r,e.def(p,"$validations",u=function(){return this.$class().$validations()},u.$$arity=0),e.def(p,"$add_validation_error",l=function(e,n){return this.operation.$add_error("param validation "+t(e,1),"validation_error",n.$to_s())},l.$$arity=2),function(t,n){var a,i,u,l=[t].concat(n);e.def(t,"$validations",a=function(){var e=this,t=r;return null==e.validations&&(e.validations=r),e.validations=o(t=e.validations)?t:[]},a.$$arity=0),e.def(t,"$add_validation",i=function(){var t,n,$=i.$$p,a=$||r,s=this;return $&&(i.$$p=null),$&&(i.$$p=null),t=e.slice.call(arguments,0,arguments.length),o((n=t)["$[]"](0))&&(a=n["$[]"](0)),s.$validations()["$<<"](a)},i.$$arity=-1),e.def(t,"$add_error",u=function(t,n,a){var i,c=u.$$p,p=c||r,d=this;return c&&(u.$$p=null),c&&(u.$$p=null),e.slice.call(arguments,3,arguments.length),s(d,"add_validation",[],((i=function(){var u=null==i.$$s?this:i.$$s,c=r;try{return o(s(u,"instance_eval",[],p.$to_proc()))&&u.$add_error(t,n,a),!0}catch(d){if(!e.rescue(d,[$(l,"Exit")]))throw d;c=d;try{return c.$state()["$=="]("failed")||u.$raise(c),u.$add_error(t,n,a),u.$raise($(l,"Exit").$new("abort_from_add_error",c.$result()))}finally{e.pop_exception()}}}).$$s=d,i.$$arity=0,i))},u.$$arity=-4)}(e.get_singleton_class(p),d),e.def(p,"$process_validations",c=function(){try{var n,a=this,i=r,u=r;return function(){try{return s(a.$validations(),"each_with_index",[],((n=function(a,i){var u=null==n.$$s?this:n.$$s,l=r,c=r;null==u.operation&&(u.operation=r),null==a&&(a=r),null==i&&(i=r);try{return o(a["$is_a?"]($(d,"Symbol")))&&(a=u.operation.$method(a)),o(s(u.operation,"instance_exec",[],a.$to_proc()))?r:u.$add_validation_error(i,"param validation "+t(i,1)+" failed")}catch(p){if(e.rescue(p,[$(d,"Exit")])){l=p;try{c=l.$state(),"success"["$==="](c)?u.$add_validation_error(i,"illegal use of succeed! in validation"):"failed"["$==="](c)&&u.$add_validation_error(i,"param validation "+t(i,1)+" aborted"),u.state="abort",e.ret(r)}finally{e.pop_exception()}}else if(e.rescue(p,[$(d,"AccessViolation")])){l=p;try{u.$add_validation_error(i,l),u.state="abort",u.last_result=l,e.ret(r)}finally{e.pop_exception()}}else{if(!e.rescue(p,[$(d,"Exception")]))throw p;l=p;try{return u.$add_validation_error(i,l)}finally{e.pop_exception()}}}}).$$s=a,n.$$arity=2,n))}finally{o(a.operation["$has_errors?"]())&&(a.last_result=o(i=a.last_result)?i:$(d,"ValidationException").$new(a.operation.$instance_variable_get("@errors")),a.state=o(u=a.state)?u:"failed")}}()}catch(l){if(l===e.returner)return l.$v;throw l}},c.$$arity=0),r&&"process_validations"}(u[0],0,u)}(l[0],0,l)}(n[0],n)},Opal.modules["hyper-operation/server_op"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}e.top;var r=[],$=e.nil,a=e.$$$,i=e.$$,o=e.module,s=e.klass,u=e.truthy,l=e.send,c=e.hash2,p=e.alias;return e.add_stubs(["$include","$on_opal_client?","$combine_arg_array","$params_wrapper","$_Railway","$serialize_params","$fail","$then","$post","$to_json","$name","$merge","$headers","$[]","$opts","$deserialize_response","$json","$new","$const_get","$on_opal_server?","$internal_iso_run","$resolve","$reject","$isomorphic_method","$send_to_server","$when_on_server","$run_from_client","$controller","$map","$descendants","$to_proc","$production?","$env","$include?","$descendants_map_cache","$raise_operation_access_violation","$<","$class_eval","$constantize","$method_defined?","$[]=","$-","$!","$raise","$run","$deserialize_params","$serialize_response","$handle_exception","$is_a?","$respond_to?","$to_h","$<<","$red","$inspect","$each","$truncate","$details","$__hyperstack_on_error","$join","$to_s","$class","$status","$URI","$host","$port","$path","$==","$scheme","$use_ssl=","$body=","$request","$lock","$deserialize_dispatch","$receivers","$call","$inbound","$params","$send","$pre_controller_op_method_missing"]),function(r,d){var f=[o(r,"Hyperstack")].concat(d);return function(r,$super,o){var p=s(r,$super,"ServerOp"),d=[p].concat(o);(function(r,o){var s,p,d,f,_,h,y,v,m,g,b,w,k,O,E,x,S,q=[r].concat(o);r.$include(a(a(i(q,"Hyperstack"),"Component"),"IsomorphicHelpers")),u(r["$on_opal_client?"]())?e.def(r,"$run",s=function(){var t,n,r,o=this,s=$
;return t=e.slice.call(arguments,0,arguments.length),s=o.$_Railway().$params_wrapper().$combine_arg_array(t),s=o.$serialize_params(s),l(l(a(i(q,"Hyperstack"),"HTTP").$post(window.HyperstackEnginePath+"/execute_remote",c(["payload","headers"],{payload:c(["hyperstack_secured_json"],{hyperstack_secured_json:c(["operation","params"],{operation:o.$name(),params:s}).$to_json()}),headers:o.$headers().$merge(c(["X-CSRF-Token"],{"X-CSRF-Token":a(i(q,"Hyperstack"),"ClientDrivers").$opts()["$[]"]("form_authenticity_token")}))})),"then",[],((n=function(e){var t=null==n.$$s?this:n.$$s;return null==e&&(e=$),t.$deserialize_response(e.$json()["$[]"]("response"))}).$$s=o,n.$$arity=1,n)),"fail",[],((r=function(t){var n=null==r.$$s?this:r.$$s;null==t&&(t=$);try{return n.$const_get(t.$json()["$[]"]("error_class")).$new(t.$json()["$[]"]("error"))}catch(a){if(!e.rescue(a,[i(q,"StandardError")]))throw a;try{return i(q,"Exception").$new(t.$json()["$[]"]("error"))}finally{e.pop_exception()}}}).$$s=o,r.$$arity=1,r))},s.$$arity=-1):u(r["$on_opal_server?"]())&&e.def(r,"$run",p=function(){var t,n=this,r=$,a=$;return t=e.slice.call(arguments,0,arguments.length),r=i(q,"Promise").$new(),a=n.$internal_iso_run(n.$name(),t),u(a["$[]"]("json")["$[]"]("response"))?r.$resolve(a["$[]"]("json")["$[]"]("response")):r.$reject(i(q,"Exception").$new(a["$[]"]("json")["$[]"]("error"))),r},p.$$arity=-1),l(r,"isomorphic_method",["internal_iso_run"],((d=function(t,n,r){var o,s=null==d.$$s?this:d.$$s;return null==t&&(t=$),null==n&&(n=$),null==r&&(r=$),t.$send_to_server(n,r),l(t,"when_on_server",[],((o=function(){var t=null==o.$$s?this:o.$$s;return l(a(i(q,"Hyperstack"),"ServerOp"),"run_from_client",["acting_user",t.$controller(),n].concat(e.to_a(r)))}).$$s=s,o.$$arity=0,o))}).$$s=r,d.$$arity=3,d)),e.def(r,"$descendants_map_cache",f=function(){var e=this,t=$;return null==e.cached_descendants&&(e.cached_descendants=$),e.cached_descendants=u(t=e.cached_descendants)?t:l(a(i(q,"Hyperstack"),"ServerOp").$descendants(),"map",[],"to_s".$to_proc())},f.$$arity=0),e.def(r,"$run_from_client",_=function(r,o,s,p){try{var d,f=this,_=$,h=$;try{if(u(i(q,"Rails").$env()["$production?"]()))u(a(i(q,"Hyperstack"),"ServerOp").$descendants_map_cache()["$include?"](s))||a(i(q,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+s+" (in production)");else{try{_=i(q,"Object").$const_get(s)}catch(y){if(!e.rescue(y,[i(q,"NameError")]))throw y;try{a(i(q,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+s+" (const not found)")}finally{e.pop_exception()}}u(t(_,a(i(q,"Hyperstack"),"ServerOp")))||a(i(q,"Hyperstack"),"InternalPolicy").$raise_operation_access_violation("illegal_remote_op_call","Operation: "+s+" (not a ServerOp subclass)")}return l(s.$constantize(),"class_eval",[],((d=function(){var t,a,f=null==d.$$s?this:d.$$s,_=$;return u(f.$_Railway().$params_wrapper()["$method_defined?"]("controller"))?(_=["controller",o],l(p,"[]=",e.to_a(_)),_[n(_.length,1)]):u(f.$_Railway().$params_wrapper()["$method_defined?"](r)["$!"]())&&f.$raise(i(q,"AccessViolation").$new("remote_access_not_allowed")),l(l(f.$run(f.$deserialize_params(p)),"then",[],((t=function(n){var r=null==t.$$s?this:t.$$s;null==n&&(n=$),e.ret(c(["json"],{json:c(["response"],{response:r.$serialize_response(n)})}))}).$$s=f,t.$$arity=1,t)),"fail",[],((a=function(t){var n=null==a.$$s?this:a.$$s;null==t&&(t=$),e.ret(n.$handle_exception(t,s,p))}).$$s=f,a.$$arity=1,a))}).$$s=f,d.$$arity=0,d))}catch(y){if(!e.rescue(y,[i(q,"Exception")]))throw y;h=y;try{return f.$handle_exception(h,s,p)}finally{e.pop_exception()}}}catch(v){if(v===e.returner)return v.$v;throw v}},_.$$arity=4),e.def(r,"$status",h=function(e){return u(e["$is_a?"](i(q,"AccessViolation")))?403:u(e["$is_a?"](a(i(q,"Operation"),"ValidationException")))?400:500},h.$$arity=1),e.def(r,"$handle_exception",y=function(e,t,n){var r,a=this,o=$;return u(e["$respond_to?"]("__hyperstack_on_error"))&&(n=n.$to_h(),(o=[])["$<<"](i(q,"Pastel").$new().$red("HYPERSTACK ERROR during "+t+" "+e.$inspect())),l(n,"each",[],((r=function(e,t){null==r.$$s||r.$$s;return null==e&&(e=$),null==t&&(t=$),o["$<<"]("  "+e+" => "+t.$inspect().$truncate(120,c(["separator"],{separator:"..."})))}).$$s=a,r.$$arity=2,r)),u(e["$respond_to?"]("details"))&&o["$<<"]("\n"+e.$details()),e.$__hyperstack_on_error(t,n,o.$join("\n"))),c(["json","status"],{json:c(["error_class","error"],{error_class:e.$class().$to_s(),error:e}),status:a.$status(e)})},y.$$arity=3),e.def(r,"$remote",v=function(t){var r,o=this,s=$,u=$,p=$,d=$,f=$,_=$;r=e.slice.call(arguments,1,arguments.length);try{return s=i(q,"Promise").$new(),u=o.$URI(t+"execute_remote_api"),p=a(i(q,"Net"),"HTTP").$new(u.$host(),u.$port()),d=a(a(i(q,"Net"),"HTTP"),"Post").$new(u.$path(),c(["Content-Type"],{"Content-Type":"application/json"})),u.$scheme()["$=="]("https")&&(f=[!0],l(p,"use_ssl=",e.to_a(f)),f[n(f.length,1)]),f=[c(["operation","params"],{operation:o.$name(),params:a(a(i(q,"Hyperstack"),"Operation"),"ParamsWrapper").$combine_arg_array(r)}).$to_json()],l(d,"body=",e.to_a(f)),f[n(f.length,1)],s.$resolve(p.$request(d))}catch(h){if(!e.rescue(h,[i(q,"Exception")]))throw h;_=h;try{return s.$reject(_)}finally{e.pop_exception()}}},v.$$arity=-2),e.def(r,"$headers",m=function(){return c([],{})},m.$$arity=0),e.def(r,"$serialize_params",g=function(e){return e},g.$$arity=1),e.def(r,"$deserialize_params",b=function(e){return e},b.$$arity=1),e.def(r,"$serialize_response",w=function(e){return e},w.$$arity=1),e.def(r,"$deserialize_response",k=function(e){return e},k.$$arity=1),e.def(r,"$serialize_dispatch",O=function(e){return e},O.$$arity=1),e.def(r,"$deserialize_dispatch",E=function(e){return e},E.$$arity=1),e.def(r,"$dispatch_to",x=function(){var t=x.$$p;return t&&(x.$$p=null),t&&(x.$$p=null),e.slice.call(arguments,0,arguments.length),$},x.$$arity=-1),e.def(r,"$dispatch_from_server",S=function(e){var t,n=this,r=$;return r=n.$_Railway().$params_wrapper().$new(n.$deserialize_dispatch(e)).$lock(),l(n.$_Railway().$receivers(),"each",[],((t=function(e){null==t.$$s||t.$$s;return null==e&&(e=$),e.$call(r)}).$$s=n,t.$$arity=1,t))},S.$$arity=1)})(e.get_singleton_class(p),d)}(f[0],i(f,"Operation"),f),function(t,$super,n){var r,a=s(t,$super,"ControllerOp");[a].concat(n);return a.$inbound("controller"),p(a,"pre_controller_op_method_missing","method_missing"),e.def(a,"$method_missing",r=function(t){var n,a=r.$$p,i=a||$,o=this;return a&&(r.$$p=null),a&&(r.$$p=null),n=e.slice.call(arguments,1,arguments.length),u(o.$params().$controller()["$respond_to?"](t))?l(o.$params().$controller(),"send",[t].concat(e.to_a(n)),i.$to_proc()):l(o,"pre_controller_op_method_missing",[t].concat(e.to_a(n)),i.$to_proc())},r.$$arity=-2),$&&"method_missing"}(f[0],i(f,"ServerOp"),f)}(r[0],r)},Opal.modules["hyper-operation/boot"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$),$=e.module,a=e.klass,i=e.truthy,o=e.send;return e.add_stubs(["$inherited","$add_receiver","$_Railway","$to_proc","$initialize_client_drivers_on_boot","$_run","$respond_to?","$each","$receivers","$on_dispatch"]),function(t,s){var u=[$(t,"Hyperstack")].concat(s);return function(t,$super,$){var s,u=a(t,null,"Application"),l=[u].concat($);return i(r(l,"Boot","skip_raise")?"constant":n)&&r(l,"Operation").$inherited(r(l,"Boot")),function(t,$super,$){var i,s,u=a(t,$super,"Boot"),l=[u].concat($);e.defs(u,"$on_dispatch",i=function(){var e=i.$$p,t=e||n,r=this;return e&&(i.$$p=null),e&&(i.$$p=null),o(r.$_Railway(),"add_receiver",[],t.$to_proc())},i.$$arity=0),e.defs(u,"$run",s=function(){var t,n=this;return t=e.slice.call(arguments,0,arguments.length),r(l,"ClientDrivers").$initialize_client_drivers_on_boot(),o(n,"_run",e.to_a(t))},s.$$arity=-1)}(l[0],r(l,"Operation"),l),i(r(l,"Boot")["$respond_to?"]("receivers"))?o(r(l,"Boot").$receivers(),"each",[],((s=function(e){null==s.$$s||s.$$s;return null==e&&(e=n),o(r(l,"Boot"),"on_dispatch",[],e.$to_proc())}).$$s=u,s.$$arity=1,s)):n}(u[0],0,u)}(t[0],t)},Opal.modules["hyper-operation/async_sleep"]=function(e){e.top;var t=[],n=e.nil,r=(e.$$$,e.$$,e.module),$=e.send;return e.add_stubs(["$every","$to_proc","$after"]),function(t,a){var i=[r(t,"Hyperstack")].concat(a);return function(t,a){var i,o,s=r(t,"AsyncSleep");[s].concat(a);return e.defs(s,"$every",i=function(){var t,r=i.$$p,a=r||n,o=this;return r&&(i.$$p=null),r&&(i.$$p=null),t=e.slice.call(arguments,0,arguments.length),$(o,"every",e.to_a(t),a.$to_proc())},i.$$arity=-1),e.defs(s,"$after",o=function(){var t,r=o.$$p,a=r||n,i=this;return r&&(o.$$p=null),r&&(o.$$p=null),t=e.slice.call(arguments,0,arguments.length),$(i,"after",e.to_a(t),a.$to_proc())},o.$$arity=-1),n&&"after"}(i[0],i)}(t[0],t)},Opal.modules["hyper-operation"]=function(e){var t=e.top,n=[],r=(e.nil,e.$$$),$=e.$$,a=e.klass;return e.add_stubs(["$require","$import","$register_additional_filter"]),t.$require("hyper-operation/version"),t.$require("hyperstack-config"),$(n,"Hyperstack").$import("hyper-operation"),t.$require("active_support/core_ext/string"),t.$require("mutations"),r($(n,"Mutations"),"HashFilter").$register_additional_filter(r($(n,"Mutations"),"DuckFilter"),"duck"),t.$require("hyper-operation/filters/outbound_filter"),t.$require("hyper-component"),t.$require("hyper-operation/http"),t.$require("hyper-operation/transport/client_drivers"),function(e,$super,t){[a(e,$super,"HashWithIndifferentAccess")].concat(t)}(n[0],$(n,"Hash"),n),function(t,$super,n){var r,$=a(t,null,"String");[$].concat(n);e.def($,"$titleize",r=function(){return this},r.$$arity=0)}(n[0],0,n),t.$require("hyper-operation/exception"),t.$require("hyper-operation/promise"),t.$require("hyper-operation/railway"),t.$require("hyper-operation/api"),t.$require("hyper-operation/railway/dispatcher"),t.$require("hyper-operation/railway/params_wrapper"),t.$require("hyper-operation/railway/run"),t.$require("hyper-operation/railway/validations"),t.$require("hyper-operation/server_op"),t.$require("hyper-operation/boot"),t.$require("hyper-operation/async_sleep")},Opal.queue(function(e){var t=e.top,n=[],r=e.nil,$=e.$$$,a=e.$$,i=e.module,o=e.truthy;return e.add_stubs(["$require","$new"]),t.$require("active_support"),t.$require("time"),t.$require("date"),t.$require("opal-jquery"),t.$require("browser"),t.$require("browser/interval"),t.$require("browser/delay"),t.$require("hyperstack-config"),function(t,n){var s,u=i(t,"Hyperstack"),l=[u].concat(n);e.defs(u,"$env",s=function(){var e=this,t=r;return null==e.environment&&(e.environment=r),e.environment=o(t=e.environment)?t:$(a(l,"ActiveSupport"),"StringInquirer").$new("express")},s.$$arity=0)}(n[0],n),t.$require("hyperstack/autoloader"),t.$require("hyperstack/autoloader_starter"),t.$require("hyper-component"),t.$require("hyperstack/component/auto-import"),t.$require("hyper-state"),t.$require("hyper-operation")});